{"version":3,"sources":["webpack:///./app/components/Scene.js","webpack:///./app/scenes/Archive.js","webpack:///./app/components/Divider.js","webpack:///./app/components/InputSelectPermission.js","webpack:///./app/scenes/CollectionPermissions/AddGroupsToCollection.js","webpack:///./app/menus/MemberMenu.js","webpack:///./app/scenes/CollectionPermissions/components/MemberListItem.js","webpack:///./app/scenes/CollectionPermissions/AddPeopleToCollection.js","webpack:///./app/menus/CollectionGroupMemberMenu.js","webpack:///./app/scenes/CollectionPermissions/components/CollectionGroupMemberListItem.js","webpack:///./app/scenes/CollectionPermissions/index.js","webpack:///./app/scenes/Search/components/CollectionFilter.js","webpack:///./app/scenes/Search/components/DateFilter.js","webpack:///./app/scenes/Search/components/SearchField.js","webpack:///./app/scenes/Search/components/StatusFilter.js","webpack:///./app/scenes/Search/components/UserFilter.js","webpack:///./app/menus/NewDocumentMenu.js","webpack:///./app/scenes/Search/Search.js","webpack:///./app/scenes/Search/index.js","webpack:///./app/components/Arrow.js","webpack:///./app/components/CollectionDescription.js","webpack:///./app/hooks/useDebouncedCallback.js","webpack:///./app/components/DocumentList.js","webpack:///./app/components/InputSearchPage.js","webpack:///./app/hooks/useImportDocument.js","webpack:///./app/scenes/CollectionDelete.js","webpack:///./app/scenes/CollectionEdit.js","webpack:///./app/scenes/CollectionExport.js","webpack:///./app/menus/CollectionMenu.js","webpack:///./app/scenes/Collection.js","webpack:///./app/scenes/DocumentNew.js","webpack:///./app/scenes/Drafts.js","webpack:///./app/components/NoticeTip.js","webpack:///./app/components/LanguagePrompt.js","webpack:///./app/scenes/Home.js","webpack:///./app/scenes/Starred.js","webpack:///./app/menus/NewTemplateMenu.js","webpack:///./app/scenes/Templates.js","webpack:///./app/scenes/Trash.js","webpack:///./app/scenes/ErrorSuspended.js","webpack:///./app/menus/RevisionMenu.js","webpack:///./app/components/DocumentHistory/components/Revision.js","webpack:///./app/components/DocumentHistory/DocumentHistory.js","webpack:///./app/components/DocumentHistory/index.js","webpack:///./app/scenes/CollectionNew.js","webpack:///./app/components/Bubble.js","webpack:///./app/components/Sidebar/components/ResizeBorder.js","webpack:///./app/components/Sidebar/components/Toggle.js","webpack:///./app/components/Sidebar/Sidebar.js","webpack:///./app/components/Sidebar/components/NavLink.js","webpack:///./app/components/Sidebar/components/SidebarLink.js","webpack:///./app/components/Sidebar/components/ArchiveLink.js","webpack:///./app/components/Sidebar/components/DropCursor.js","webpack:///./app/components/Sidebar/components/DropToImport.js","webpack:///./app/components/Sidebar/components/EditableTitle.js","webpack:///./app/components/Sidebar/components/DocumentLink.js","webpack:///./app/menus/CollectionSortMenu.js","webpack:///./app/components/Sidebar/components/CollectionLink.js","webpack:///./app/components/Sidebar/components/Header.js","webpack:///./app/components/Sidebar/components/PlaceholderCollections.js","webpack:///./app/components/Sidebar/components/Collections.js","webpack:///./app/components/Sidebar/components/Section.js","webpack:///./app/components/Sidebar/components/TeamButton.js","webpack:///./app/components/Sidebar/components/TrashLink.js","webpack:///./app/menus/AccountMenu.js","webpack:///./app/components/Sidebar/Main.js","webpack:///./app/components/Sidebar/index.js","webpack:///./app/components/Sidebar/components/Version.js","webpack:///./app/components/Sidebar/Settings.js","webpack:///./app/components/SkipNavContent.js","webpack:///./app/components/SkipNavLink.js","webpack:///./app/components/Layout.js","webpack:///./app/routes/authenticated.js","webpack:///./app/utils/language.js","webpack:///./app/components/InputSelect.js","webpack:///./app/scenes/GroupNew.js","webpack:///./app/components/FilterOptions.js","webpack:///./app/components/GroupListItem.js","webpack:///./app/components/Heading.js","webpack:///./app/scenes/Invite.js","webpack:///./app/menus/GroupMemberMenu.js","webpack:///./app/scenes/GroupMembers/components/GroupMemberListItem.js","webpack:///./app/scenes/GroupMembers/AddPeopleToGroup.js","webpack:///./app/scenes/GroupMembers/GroupMembers.js","webpack:///./app/scenes/GroupMembers/index.js","webpack:///./app/components/SlackIcon.js","webpack:///./app/components/ZapierIcon.js","webpack:///./app/components/TeamLogo.js","webpack:///./app/components/ButtonLink.js"],"names":["FillWidth","styled","div","Scene","title","icon","textTitle","actions","breadcrumb","children","centered","withStickyHeader","observer","Archive","t","useTranslation","documents","useStores","color","Heading","PaginatedDocumentList","archived","fetch","fetchArchived","heading","Subheading","sticky","empty","Empty","showCollection","showTemplate","Divider","hr","props","theme","divider","InputSelectPermission","InputSelect","label","options","value","AddGroupsToCollection","handleNewGroupModalOpen","newGroupModalOpen","handleNewGroupModalClose","handleFilter","ev","query","target","debouncedFetch","groups","fetchPage","handleAddGroup","group","collectionGroupMemberships","create","collectionId","collection","id","groupId","permission","toasts","showToast","groupName","name","type","err","console","error","this","auth","user","team","Flex","column","HelpText","ButtonLink","onClick","Input","placeholder","onChange","labelHidden","flex","PaginatedList","items","notInCollection","undefined","renderItem","item","GroupListItem","key","showFacepile","renderActions","ButtonWrap","Button","neutral","Modal","onRequestClose","isOpen","GroupNew","onSubmit","React","observable","withTranslation","inject","MemberMenu","onRemove","menu","useMenuState","modal","OverflowMenuButton","aria-label","ContextMenu","Template","Spacer","Select","MemberListItem","membership","onUpdate","onAdd","canEdit","PERMISSIONS","subtitle","lastActiveAt","Trans","Time","dateTime","isInvited","Badge","isAdmin","primary","image","Avatar","src","avatarUrl","size","align","disabled","AddPeopleToCollection","handleInviteModalOpen","inviteModalOpen","handleInviteModalClose","users","handleAddUser","memberships","userId","userName","teamName","autoFocus","Invite","CollectionGroupMemberMenu","onMembers","CollectionGroupMemberListItem","collectionGroupMembership","showAvatar","openMembersModal","PermissionExplainer","Actions","CollectionPermissions","useCurrentUser","useToasts","useBoolean","addGroupModalOpen","handleAddGroupModalOpen","handleAddGroupModalClose","addMemberModalOpen","handleAddMemberModalOpen","handleAddMemberModalClose","handleRemoveUser","delete","handleUpdateUser","handleRemoveGroup","handleUpdateGroup","handleChangePermission","save","fetchOptions","collectionName","collectionGroups","inCollection","collectionUsers","isEmpty","length","short","defaults","values","components","em","Labeled","get","CollectionFilter","collections","onSelect","collectionOptions","orderedData","map","FilterOptions","activeKey","defaultLabel","selectedPrefix","DateFilter","dateFilter","SearchField","handleChange","currentTarget","focusInput","input","focus","len","defaultValue","setSelectionRange","Field","StyledIcon","textTertiary","StyledInput","ref","spellCheck","sidebarBackground","backgroundTransition","text","SearchIcon","withTheme","StatusFilter","includeArchived","note","UserFilter","limit","userOptions","all","CollectionName","NewDocumentMenu","useCurrentTeam","policies","singleCollection","abilities","createDocument","as","Link","to","newDocumentUrl","MenuButton","small","Header","update","CollectionIcon","Search","keydown","lastQuery","handleKeyDown","preventDefault","goBack","firstDocument","HTMLElement","fetchResults","handleQueryChange","params","URLSearchParams","location","search","offset","allowLoadMore","isLoading","fetchResultsDebounced","handleTermChange","decodeURIComponentSafe","match","term","handleFilterChange","history","replace","pathname","queryString","stringify","parse","skipEmptyString","handleNewDoc","push","leading","trailing","updateLocation","searchUrl","setFirstDocumentRef","prevProps","notFound","results","searchResults","showEmpty","showShortcutTip","pinToTop","state","fromMenu","can","Container","auto","PageTitle","LoadingIndicator","ResultsWrapper","onKeyDown","Fade","meta","metaDisplay","Filters","Centered","Wrapper","ResultList","visible","StyledArrowKeyNavigation","mode","ArrowKeyNavigation","VERTICAL","defaultActiveChildIndex","result","index","document","data","DocumentListItem","highlight","context","onEnter","loadMoreResults","action","DEFAULT_PAGINATION_LIMIT","includeDrafts","lastParams","CenteredContent","breakpoint","withRouter","Arrow","width","height","viewBox","fill","xmlns","d","Disclosure","NudeButton","sidebarText","Placeholder","MaxHeight","transparentize","background","secondaryBackground","CollectionDescription","isExpanded","setExpanded","isEditing","setEditing","isDirty","setDirty","handleStartEditing","handleStopEditing","handleClickDisclosure","event","activeElement","blur","handleSave","useDebouncedCallback","callback","wait","argsRef","timeout","cleanup","current","clearTimeout","args","setTimeout","getValue","description","updatedAt","data-editing","data-expanded","$isEditable","isSaving","hasDescription","fallback","Editor","readOnly","onBlur","maxLength","disableEmbeds","readOnlyWriteCheckboxes","grow","DocumentList","rest","splice","InputSearchPage","handleSearchInput","source","handleFocus","focused","handleBlur","InputMaxWidth","onInput","inputBorderFocused","inputBorder","onFocus","margin","importingLock","useImportDocument","documentId","isImporting","setImporting","useHistory","handleFiles","files","cId","redirect","invariant","file","import","publish","doc","url","message","CollectionDelete","isDeleting","setIsDeleting","handleSubmit","homeUrl","danger","CollectionEdit","sharing","sort","handleSortChange","split","field","direction","handleNameChange","handleSharingChange","checked","teamSharingEnabled","required","IconPicker","Switch","CollectionExport","setIsLoading","export","CollectionMenu","placement","onOpen","onClose","renderModals","setRenderModals","showCollectionPermissions","setShowCollectionPermissions","showCollectionEdit","setShowCollectionEdit","showCollectionDelete","setShowCollectionDelete","showCollectionExport","setShowCollectionExport","handleOpen","handleNewDocument","stopPropagation","handleImportDocument","click","handleFilePicked","getDataTransferFiles","filterTemplateItems","VisuallyHidden","accept","importFileTypes","join","tabIndex","DropMessage","DropzoneContainer","isDragActive","css","TinyPinIcon","PinIcon","CollectionScene","useParams","useRouteMatch","ui","isFetching","setFetching","setError","permissionsModalOpen","handlePermissionsModalOpen","handlePermissionsModalClose","getByUrl","canUser","canonicalUrl","updateCollectionUrl","setActiveCollection","fetchPinned","load","handleRejection","pinnedDocuments","pinnedInCollection","hasPinnedDocuments","expanded","Tooltip","tooltip","shortcut","delay","borderOnHover","onDropAccepted","onDropRejected","noClick","multiple","getRootProps","getInputProps","isDragAccept","isDragReject","showPin","Tabs","Tab","collectionUrl","exact","path","alphabeticalInCollection","fetchAlphabetical","leastRecentlyUpdatedInCollection","fetchLeastRecentlyUpdated","recentlyPublishedInCollection","fetchRecentlyPublished","showPublished","recentlyUpdatedInCollection","fetchRecentlyUpdated","rootInCollection","parentDocumentId","showNestedDocuments","PlaceholderText","count","DocumentNew","useLocation","useEffect","templateId","template","editDocumentUrl","PlaceholderDocument","Drafts","drafts","fetchDrafts","isFiltered","Notice","p","brand","marine","almostBlack","LanguagePrompt","language","detectLanguage","languages","includes","option","languageOptions","o","optionLabel","NoticeTip","LanguageIcon","updateUser","setLanguagePromptDismissed","Icon","fill-rule","clip-rule","stroke","Home","languagePromptDismissed","recentlyUpdated","createdByUser","fetchOwned","recentlyViewed","fetchRecentlyViewed","Starred","fetchStarred","starred","starredAlphabetical","NewTemplateMenu","Templates","fetchTemplates","templates","templatesAlphabetical","showDraft","Trash","deleted","fetchDeleted","ErrorSuspended","role","suspendedContactEmail","RevisionMenu","revision","className","iconColor","handleRestore","restore","revisionId","handleCopy","window","origin","documentHistoryUrl","MenuItem","Separator","CopyToClipboard","onCopy","RevisionListItem","showMenu","selected","StyledNavLink","activeStyle","white","Author","StyledAvatar","createdBy","Meta","createdAt","tooltipDelay","format","Date","StyledRevisionMenu","NavLink","DocumentHistory","revisions","documentSlug","isLoaded","selectFirstRevision","onCloseHistory","redirectTo","documentUrl","showLoading","Sidebar","Title","Loading","getDocumentRevisions","sidebarWidth","CollectionNew","hasOpenedIconPicker","Collection","Object","keys","icons","keywords","namewords","toLowerCase","handleIconPickerOpen","handlePermissionChange","Count","bounceIn","slateDark","Bubble","ResizeBorder","Toggle","style","Positioner","ToggleButton","$direction","button","isFirstRender","isCollapsing","setCollapsing","useTheme","previousLocation","usePrevious","collapsed","sidebarCollapsed","maxWidth","sidebarMaxWidth","minWidth","sidebarMinWidth","setWidth","setSidebarWidth","setOffset","isAnimating","setAnimating","isResizing","setResizing","isSmallerThanMinimum","handleDrag","Math","min","pageX","sidebarCollapsedWidth","handleStopDrag","collapseSidebar","handleMouseDown","addEventListener","removeEventListener","handleReset","setSidebarResizing","hideMobileSidebar","toggleStyle","right","marginLeft","content","mobileSidebarVisible","Backdrop","toggleMobileSidebar","onMouseDown","onDoubleClick","$isResizing","toggleCollapsedSidebar","$sidebarWidth","$isCollapsing","$isAnimating","$isSmallerThanMinimum","$mobileSidebarVisible","$collapsed","a","fadeIn","depths","sidebar","backdrop","ariaCurrent","activeClassName","classNameProp","isActiveProp","isActive","locationProp","strict","styleProp","linkRef","RouterContext","currentLocation","toLocation","normalizeToLocation","createLocation","resolveToLocation","escapedPath","matchPath","joinClassnames","classnames","filter","i","scrollIntoView","scrollMode","behavior","SidebarLink","onMouseEnter","active","isActiveDrop","showActions","href","depth","paddingLeft","fontWeight","sidebarItemBackground","$isActiveDrop","IconWrapper","Label","span","EventBoundary","textSecondary","ArchiveLink","useDrop","drop","monitor","archive","canDrop","collect","isDocumentDropping","isOver","dropToArchiveDocument","open","isArchived","isDeleted","Cursor","from","DropCursor","innerRef","DropToImport","EditableTitle","canUpdate","setIsEditing","originalValue","setOriginalValue","setValue","handleDoubleClick","trimmedValue","trim","dir","DocumentLink","node","activeDocument","prefetchDocument","parentId","isActiveDocument","hasChildDocuments","fetchChildDocuments","pathToNode","pathToDocument","entry","showChildren","handleDisclosureClick","handleMouseEnter","handleTitleChange","lastRevision","menuOpen","handleMenuOpen","handleMenuClose","isMoving","movingDocumentId","manualSort","useDrag","isDragging","canDrag","move","drag","hoverExpanding","resetHoverExpanding","didDrop","getItem","hover","shallow","isOverReparent","canDropToReparent","dropToReparent","isOverReorder","dropToReorder","position","onDragLeave","Draggable","$isDragging","$isMoving","DocumentMenu","childNode","ObservedDocumentLink","CollapsedIcon","CollectionSortMenu","handleChangeSort","hide","alphabeticalSort","SidebarLinkWithPadding","CollectionSortMenuWithMargin","CollectionLink","belowCollection","isDraggingAnyCollection","onChangeDragging","activeCollectionId","belowCollectionIndex","fractionalIndex","isCollectionDropping","dropToReorderCollection","isCollectionDragging","end","dragToReorderCollection","PlaceholderCollections","Collections","onCreateCollection","fetchError","setFetchError","isPreloaded","orderedCollections","setIsDraggingAnyCollection","createCollection","Section","TeamButton","showDisclosure","subheading","logoUrl","justify","TeamLogo","alt","TeamName","ExpandedIcon","TrashLink","useState","setDocument","dropToTrashDocument","documentName","noun","DocumentDelete","AppearanceMenu","show","ChangeTheme","resolvedTheme","setTheme","AccountMenu","unstable_offset","previousTheme","keyboardShortcutsOpen","handleKeyboardShortcutsOpen","handleKeyboardShortcutsClose","Guide","KeyboardShortcuts","settings","developers","changelog","mailToUrl","githubIssuesUrl","logout","MainSidebar","setInviteModalOpen","createCollectionModalOpen","setCreateCollectionModalOpen","handleCreateCollectionModalOpen","handleCreateCollectionModalClose","dndArea","setDndArea","handleSidebarRef","html5Options","rootElement","DndProvider","backend","HTML5Backend","Scrollable","topShadow","totalDrafts","publishedAt","isTemplate","inviteUser","Version","releasesBehind","setReleasesBehind","out","res","json","releases","tag_name","version","loadReleases","LilBadge","isHosted","env","DEPLOYMENT","BackIcon","ReturnToApp","SettingsSidebar","returnToDashboard","createApiKey","SlackIcon","ZapierIcon","SkipNavContent","SkipNavLink","Anchor","popover","Layout","handleCloseKeyboardShortcuts","showSidebar","authenticated","isSuspended","Helmet","progressBarVisible","notifications","MobileMenuButton","component","Content","sidebarIsResizing","$sidebarCollapsed","slug","SettingsRoutes","KeyedDocument","NotFound","RedirectDocument","AuthenticatedRoutes","SocketProvider","Error404","navigator","ln","region","toUpperCase","changeLanguage","toLanguageString","i18n","select","buttonNeutralBackground","wrappedLabel","setName","setIsSaving","setGroup","Group","LabelWithNote","Note","StyledButton","Inner","selectedLabel","disclosure","handleMembersModalOpen","membersModalOpen","handleMembersModalClose","groupMemberships","memberCount","inGroup","slice","MAX_AVATAR_DISPLAY","gm","overflow","Image","h1","CopyBlock","Remove","linkCopied","setLinkCopied","email","invites","setInvites","predictedDomain","invite","prevInvites","newInvites","handleAdd","MAX_INVITES","handleRemove","guestSignin","signinMethods","subdomain","marginBottom","data-on","data-event-category","data-event-action","GroupMemberMenu","GroupMemberListItem","AddPeopleToGroup","notInGroup","GroupMembers","addModalOpen","setAddModalOpen","handleAddModal","img","link"],"mappings":"kHACA,gEAkDA,IAAMA,EAAYC,UAAOC,IAAV,uEAAGD,CAAH,iBAIAE,IAtCf,SAASA,MAAT,GAQU,IAPRC,EAOQ,EAPRA,MACAC,EAMQ,EANRA,KACAC,EAKQ,EALRA,UACAC,EAIQ,EAJRA,QACAC,EAGQ,EAHRA,WACAC,EAEQ,EAFRA,SACAC,EACQ,EADRA,SAEA,OACE,gBAACV,EAAD,KACE,gBAAC,IAAD,CAAWI,MAAOE,GAAaF,IAC/B,gBAAC,IAAD,CACEA,MACEC,EACE,gCACGA,EADH,IACeD,GAGfA,EAGJG,QAASA,EACTC,WAAYA,KAEA,IAAbE,EACC,gBAAC,IAAD,CAAiBC,kBAAgB,GAAEF,GAEnCA,K,qRCZOG,mBArBf,SAASC,UAAU,IACTC,EAAMC,cAAND,EACAE,EAAcC,cAAdD,UAER,OACE,gBAACb,EAAA,EAAD,CAAOE,KAAM,gBAAC,cAAD,CAAaa,MAAM,iBAAmBd,MAAOU,EAAE,YAC1D,gBAACK,EAAA,EAAD,KAAUL,EAAE,YACZ,gBAACM,EAAA,EAAD,CACEJ,UAAWA,EAAUK,SACrBC,MAAON,EAAUO,cACjBC,QAAS,gBAACC,EAAA,EAAD,CAAYC,QAAM,GAAEZ,EAAE,cAC/Ba,MACE,gBAACC,EAAA,EAAD,KAAQd,EAAE,iDAEZe,gBAAc,EACdC,cAAY,Q,wICjBLC,EAPC9B,UAAO+B,GAAV,8DAAG/B,CAAH,8DAEgB,SAACgC,GAAD,OAAWA,EAAMC,MAAMC,W,6QCArC,SAASC,sBACtBH,GACA,IACQnB,EAAMC,cAAND,EAER,OACE,gBAACuB,EAAA,EAAD,UACEC,MAAOxB,EAAE,kBACTyB,QAAS,CACP,CAAED,MAAOxB,EAAE,iBAAkB0B,MAAO,cACpC,CAAEF,MAAOxB,EAAE,aAAc0B,MAAO,QAChC,CAAEF,MAAOxB,EAAE,aAAc0B,MAAO,MAE9BP,I,i8ECiBJQ,EADL7B,a,ssBAKC8B,wBAA0B,WACxB,EAAKC,mBAAoB,G,EAG3BC,yBAA2B,WACzB,EAAKD,mBAAoB,G,EAG3BE,aAAe,SAACC,GACd,EAAKC,MAAQD,EAAGE,OAAOR,MACvB,EAAKS,kB,EAGPA,eAAiB,KAAS,WACxB,EAAKhB,MAAMiB,OAAOC,UAAU,CAC1BJ,MAAO,EAAKA,UAEb,K,EAEHK,eAAiB,SAACC,GAAiB,IACzBvC,EAAM,EAAKmB,MAAXnB,EAER,IACE,EAAKmB,MAAMqB,2BAA2BC,OAAO,CAC3CC,aAAc,EAAKvB,MAAMwB,WAAWC,GACpCC,QAASN,EAAMK,GACfE,WAAY,eAEd,EAAK3B,MAAM4B,OAAOC,UAChBhD,EAAE,8CAA+C,CAC/CiD,UAAWV,EAAMW,OAEnB,CAAEC,KAAM,YAEV,MAAOC,GACP,EAAKjC,MAAM4B,OAAOC,UAAUhD,EAAE,sBAAuB,CAAEmD,KAAM,UAC7DE,QAAQC,MAAMF,K,6KAIT,aACiCG,KAAKpC,MAArCiB,EADD,EACCA,OAAQO,EADT,EACSA,WAAYa,EADrB,EACqBA,KAAMxD,EAD3B,EAC2BA,EAC1ByD,EAAeD,EAAfC,KAAMC,EAASF,EAATE,KACd,OAAKD,GAASC,EAGZ,gBAACC,EAAA,EAAD,CAAMC,QAAM,GACV,gBAACC,EAAA,EAAD,KACG7D,EAAE,4CAA6C,IAChD,gBAAC8D,EAAA,EAAD,CAAYC,QAASR,KAAK3B,yBACvB5B,EAAE,mBAHP,KAQA,gBAACgE,EAAA,EAAD,CACEb,KAAK,SACLc,YAAW,UAAKjE,EAAE,wBAAP,KACX0B,MAAO6B,KAAKtB,MACZiC,SAAUX,KAAKxB,aACfP,MAAOxB,EAAE,iBACTmE,aAAW,EACXC,MAAI,IAEN,gBAACC,EAAA,EAAD,CACExD,MACE0C,KAAKtB,MACH,gBAACnB,EAAA,EAAD,KAAQd,EAAE,mCAEV,gBAACc,EAAA,EAAD,KAAQd,EAAE,0BAGdsE,MAAOlC,EAAOmC,gBAAgB5B,EAAWC,GAAIW,KAAKtB,OAClDzB,MAAO+C,KAAKtB,WAAQuC,EAAYpC,EAAOC,UACvCoC,WAAY,oBAACC,GAAD,OACV,gBAACC,EAAA,EAAD,CACEC,IAAKF,EAAK9B,GACVL,MAAOmC,EACPG,cAAY,EACZC,cAAe,gCACb,gBAACC,EAAD,KACE,gBAACC,EAAA,EAAD,CAAQjB,QAAS,0BAAM,EAAKzB,eAAeoC,IAAOO,SAAO,GACtDjF,EAAE,eAOf,gBAACkF,EAAA,EAAD,CACE5F,MAAOU,EAAE,kBACTmF,eAAgB5B,KAAKzB,yBACrBsD,OAAQ7B,KAAK1B,mBAEb,gBAACwD,EAAA,EAAD,CAAUC,SAAU/B,KAAKzB,6BAnDJ,S,uBA/CKyD,a,6DACjCC,K,qFAAwC,K,iDACxCA,K,oFAA2B,M,SAuGxBT,EAAa5F,UAAOC,IAAV,wFAAGD,CAAH,sBAIDsG,gBACbC,YACE,OACA,SACA,6BACA,SAJFA,CAKE/D,I,4YCpHWgE,I,YAAAA,GAtBf,SAASA,WAAT,GAAyC,IAAnBC,EAAmB,EAAnBA,SACZ5F,EAAMC,cAAND,EACF6F,EAAOC,YAAa,CAAEC,OAAO,IAEnC,OACE,gCACE,gBAACC,GAAA,EAAD,oBAAoBC,aAAYjG,EAAE,cAAkB6F,IACpD,gBAACK,GAAA,EAAD,sBAAiBL,EAAjB,CAAuBI,aAAYjG,EAAE,oBACnC,gBAACmG,GAAA,EAAD,sBACMN,EADN,CAEEvB,MAAO,CACL,CACEhF,MAAOU,EAAE,UACT+D,QAAS6B,UC+DjBQ,GAASjH,UAAOC,IAAV,6EAAGD,CAAH,gBAINkH,GAASlH,kBAAOoC,KAAV,6EAAGpC,CAAH,wEAUGmH,GA9EQ,SAAjBA,eAAkB,GAOX,IANX7C,EAMW,EANXA,KACA8C,EAKW,EALXA,WACAX,EAIW,EAJXA,SACAY,EAGW,EAHXA,SACAC,EAEW,EAFXA,MACAC,EACW,EADXA,QAEQ1G,EAAMC,cAAND,EAEF2G,EAAcpB,WAClB,iBAAM,CACJ,CAAE/D,MAAOxB,EAAE,aAAc0B,MAAO,QAChC,CAAEF,MAAOxB,EAAE,iBAAkB0B,MAAO,iBAEtC,CAAC1B,IAGH,OACE,gBAAC,IAAD,CACEV,MAAOmE,EAAKP,KACZ0D,SACE,gCACGnD,EAAKoD,aACJ,gBAACC,EAAA,EAAD,eACS,gBAACC,EAAA,EAAD,CAAMC,SAAUvD,EAAKoD,eAD9B,QAIA7G,EAAE,mBAEHyD,EAAKwD,WAAa,gBAACC,EAAA,EAAD,KAAQlH,EAAE,YAC5ByD,EAAK0D,SAAW,gBAACD,EAAA,EAAD,CAAOE,QAAS3D,EAAK0D,SAAUnH,EAAE,WAGtDqH,MAAO,gBAACC,EAAA,EAAD,CAAQC,IAAK9D,EAAK+D,UAAWC,KAAM,KAC1ChI,QACE,gBAACkE,EAAA,EAAD,CAAM+D,MAAM,UACTlB,GACC,gBAACH,GAAD,CACE7E,MAAOxB,EAAE,eACTyB,QAASkF,EACTjF,MAAO6E,EAAaA,EAAWzD,gBAAa0B,EAC5CN,SAAU,kBAAClC,GAAD,OAAQwE,EAASxE,EAAGE,OAAOR,QACrCiG,UAAWjB,EACXvC,aAAW,IAGduC,GACC,gCACE,gBAACN,GAAD,MACCR,GAAY,gBAAC,GAAD,CAAYA,SAAUA,IAClCa,GACC,gBAACzB,EAAA,EAAD,CAAQjB,QAAS0C,EAAOxB,SAAO,GAC5BjF,EAAE,a,+oFC5Cf4H,GADL9H,a,o4BAKC+H,sBAAwB,WACtB,EAAKC,iBAAkB,G,EAGzBC,uBAAyB,WACvB,EAAKD,iBAAkB,G,EAGzB/F,aAAe,SAACC,GACd,EAAKC,MAAQD,EAAGE,OAAOR,MACvB,EAAKS,kB,EAGPA,eAAiB,KAAS,WACxB,EAAKhB,MAAM6G,MAAM3F,UAAU,CACzBJ,MAAO,EAAKA,UAEb,K,EAEHgG,cAAgB,SAACxE,GAAe,IACtBzD,EAAM,EAAKmB,MAAXnB,EACR,IACE,EAAKmB,MAAM+G,YAAYzF,OAAO,CAC5BC,aAAc,EAAKvB,MAAMwB,WAAWC,GACpCuF,OAAQ1E,EAAKb,GACbE,WAAY,eAEd,EAAK3B,MAAM4B,OAAOC,UAChBhD,EAAE,6CAA8C,CAC9CoI,SAAU3E,EAAKP,OAEjB,CAAEC,KAAM,YAEV,MAAOC,GACP,EAAKjC,MAAM4B,OAAOC,UAAUhD,EAAE,sBAAuB,CAAEmD,KAAM,Y,4OAIxD,aACgCI,KAAKpC,MAApC6G,EADD,EACCA,MAAOrF,EADR,EACQA,WAAYa,EADpB,EACoBA,KAAMxD,EAD1B,EAC0BA,EACzByD,EAAeD,EAAfC,KAAMC,EAASF,EAATE,KACd,OAAKD,GAASC,EAGZ,gBAACC,EAAA,EAAD,CAAMC,QAAM,GACV,gBAACC,EAAA,EAAD,KACG7D,EAAE,sDAAuD,IAC1D,gBAAC8D,EAAA,EAAD,CAAYC,QAASR,KAAKsE,uBACvB7H,EAAE,kCAAmC,CAAEqI,SAAU3E,EAAKR,QAH3D,KAQA,gBAACc,EAAA,EAAD,CACEb,KAAK,SACLc,YAAW,UAAKjE,EAAE,kBAAP,KACX0B,MAAO6B,KAAKtB,MACZiC,SAAUX,KAAKxB,aACfP,MAAOxB,EAAE,iBACTsI,WAAS,EACTnE,aAAW,EACXC,MAAI,IAEN,gBAACC,EAAA,EAAD,CACExD,MACE0C,KAAKtB,MACH,gBAACnB,EAAA,EAAD,KAAQd,EAAE,mCAEV,gBAACc,EAAA,EAAD,KAAQd,EAAE,0BAGdsE,MAAO0D,EAAMzD,gBAAgB5B,EAAWC,GAAIW,KAAKtB,OACjDzB,MAAO+C,KAAKtB,WAAQuC,EAAYwD,EAAM3F,UACtCoC,WAAY,oBAACC,GAAD,OACV,gBAAC,GAAD,CACEE,IAAKF,EAAK9B,GACVa,KAAMiB,EACN+B,MAAO,wBAAM,EAAKwB,cAAcvD,IAChCgC,SAAO,OAIb,gBAACxB,EAAA,EAAD,CACE5F,MAAOU,EAAE,iBACTmF,eAAgB5B,KAAKwE,uBACrB3C,OAAQ7B,KAAKuE,iBAEb,gBAACS,EAAA,EAAD,CAAQjD,SAAU/B,KAAKwE,2BA9CF,S,uBA7CKxC,a,kFACjCC,K,qFAAsC,K,wEACtCA,K,oFAA2B,M,YAgGfC,iBACbC,YAAO,OAAQ,QAAS,cAAe,SAAvCA,CAAiDkC,K,yRCzFpC9H,oBA7Bf,SAAS0I,0BAAT,GAAmE,IAA9BC,EAA8B,EAA9BA,UAAW7C,EAAmB,EAAnBA,SACtC5F,EAAMC,cAAND,EACF6F,EAAOC,YAAa,CAAEC,OAAO,IAEnC,OACE,gCACE,gBAACC,GAAA,EAAD,mCAAoBC,aAAYjG,EAAE,cAAkB6F,IACpD,gBAACK,GAAA,EAAD,qCAAiBL,EAAjB,CAAuBI,aAAYjG,EAAE,0BACnC,gBAACmG,GAAA,EAAD,qCACMN,EADN,CAEEvB,MAAO,CACL,CACEhF,MAAOU,EAAE,WACT+D,QAAS0E,GAEX,CACEtF,KAAM,aAER,CACE7D,MAAOU,EAAE,UACT+D,QAAS6B,YC6BjBQ,GAASjH,UAAOC,IAAV,wFAAGD,CAAH,gBAINkH,GAASlH,kBAAOoC,KAAV,wFAAGpC,CAAH,wEAUGuJ,GA5DuB,SAAhCA,8BAAiC,GAK1B,IAJXnG,EAIW,EAJXA,MACAoG,EAGW,EAHXA,0BACAnC,EAEW,EAFXA,SACAZ,EACW,EADXA,SAEQ5F,EAAMC,cAAND,EAEF2G,EAAcpB,WAClB,iBAAM,CACJ,CAAE/D,MAAOxB,EAAE,aAAc0B,MAAO,QAChC,CAAEF,MAAOxB,EAAE,iBAAkB0B,MAAO,iBAEtC,CAAC1B,IAGH,OACE,gBAAC2E,EAAA,EAAD,CACEpC,MAAOA,EACPqD,SAAUA,EACVY,SAAUA,EACVoC,YAAU,EACV9D,cAAe,8BAAG+D,EAAH,EAAGA,iBAAH,OACb,gCACE,gBAAC,GAAD,CACErH,MAAOxB,EAAE,eACTyB,QAASkF,EACTjF,MACEiH,EACIA,EAA0B7F,gBAC1B0B,EAENN,SAAU,kBAAClC,GAAD,OAAQwE,EAASxE,EAAGE,OAAOR,QACrCyC,aAAW,IAEb,gBAAC,GAAD,MACA,gBAAC,GAAD,CACEsE,UAAWI,EACXjD,SAAUA,S,4hDCiOtB,IAAM9E,GAAQ3B,kBAAO0E,KAAV,mFAAG1E,CAAH,qBAIL2J,GAAsB3J,kBAAO0E,KAAV,iGAAG1E,CAAH,yCAKnB4J,GAAU5J,UAAOC,IAAV,qFAAGD,CAAH,yBAIEW,gBAzQf,SAASkJ,sBAAT,GAAsD,IAArBrG,EAAqB,EAArBA,WACvB3C,EAAMC,cAAND,EACFyD,EAAOwF,eAFuC,EAQhD9I,cAJF+H,EAJkD,EAIlDA,YACA1F,EALkD,EAKlDA,2BACAwF,EANkD,EAMlDA,MACA5F,EAPkD,EAOlDA,OAEMY,EAAckG,eAAdlG,UAT4C,iBAchDmG,eAdgD,GAWlDC,EAXkD,KAYlDC,EAZkD,KAalDC,EAbkD,sBAmBhDH,eAnBgD,GAgBlDI,EAhBkD,KAiBlDC,EAjBkD,KAkBlDC,EAlBkD,KAqB9CC,EAAmBnE,cAAA,4DACvB,iBAAO9B,GAAP,kHAEUyE,EAAYyB,OAAO,CACvBjH,aAAcC,EAAWC,GACzBuF,OAAQ1E,EAAKb,KAJnB,OAMII,EACEhD,EAAE,iDAAkD,CAClDoI,SAAU3E,EAAKP,OAEjB,CACEC,KAAM,YAXd,+CAeIH,EAAUhD,EAAE,yBAA0B,CAAEmD,KAAM,UAflD,8DADuB,sDAmBvB,CAAC+E,EAAalF,EAAWL,EAAY3C,IAGjC4J,EAAmBrE,cAAA,4DACvB,kBAAO9B,EAAMX,GAAb,mHAEUoF,EAAYzF,OAAO,CACvBC,aAAcC,EAAWC,GACzBuF,OAAQ1E,EAAKb,GACbE,eALN,OAOIE,EACEhD,EAAE,0CAA2C,CAAEoI,SAAU3E,EAAKP,OAC9D,CACEC,KAAM,YAVd,+CAcIH,EAAUhD,EAAE,yBAA0B,CAAEmD,KAAM,UAdlD,+DADuB,wDAkBvB,CAAC+E,EAAalF,EAAWL,EAAY3C,IAGjC6J,EAAoBtE,cAAA,4DACxB,kBAAOhD,GAAP,mHAEUC,EAA2BmH,OAAO,CACtCjH,aAAcC,EAAWC,GACzBC,QAASN,EAAMK,KAJrB,OAMII,EACEhD,EAAE,4DAA6D,CAC7DiD,UAAWV,EAAMW,OAEnB,CACEC,KAAM,YAXd,+CAeIH,EAAUhD,EAAE,0BAA2B,CAAEmD,KAAM,UAfnD,+DADwB,sDAmBxB,CAACX,EAA4BQ,EAAWL,EAAY3C,IAGhD8J,EAAoBvE,cAAA,4DACxB,kBAAOhD,EAAOO,GAAd,mHAEUN,EAA2BC,OAAO,CACtCC,aAAcC,EAAWC,GACzBC,QAASN,EAAMK,GACfE,eALN,OAOIE,EACEhD,EAAE,2CAA4C,CAC5CiD,UAAWV,EAAMW,OAEnB,CACEC,KAAM,YAZd,+CAgBIH,EAAUhD,EAAE,yBAA0B,CAAEmD,KAAM,UAhBlD,+DADwB,wDAoBxB,CAACX,EAA4BQ,EAAWL,EAAY3C,IAGhD+J,EAAyBxE,cAAA,4DAC7B,kBAAOvD,GAAP,mHAEUW,EAAWqH,KAAK,CAAElH,WAAYd,EAAGE,OAAOR,QAFlD,OAGIsB,EAAUhD,EAAE,2CAA4C,CACtDmD,KAAM,YAJZ,+CAOIH,EAAUhD,EAAE,gCAAiC,CAAEmD,KAAM,UAPzD,+DAD6B,sDAW7B,CAACR,EAAYK,EAAWhD,IAGpBiK,EAAe1E,WAAc,iBAAO,CAAE3C,GAAID,EAAWC,MAAO,CAChED,EAAWC,KAGPsH,EAAiBvH,EAAWO,KAC5BiH,EAAmB/H,EAAOgI,aAAazH,EAAWC,IAClDyH,EAAkBrC,EAAMoC,aAAazH,EAAWC,IAChD0H,GAAWH,EAAiBI,SAAWF,EAAgBE,OAE7D,OACE,gBAAC5G,EAAA,EAAD,CAAMC,QAAM,GACV,gBAACtC,sBAAD,CACE4C,SAAU6F,EACVrI,MAAOiB,EAAWG,YAAc,GAChC0H,OAAK,IAEP,gBAAC1B,GAAD,MACInG,EAAWG,YACX,gBAACgE,EAAA,EAAD,CACE2D,SAAS,yGACTC,OAAQ,CAAER,kBACVS,WAAY,CAAEC,GAAI,kCAGK,SAA1BjI,EAAWG,YACV,gBAACgE,EAAA,EAAD,CACE2D,SAAS,8FACTC,OAAQ,CAAER,kBACVS,WAAY,CAAEC,GAAI,kCAGK,eAA1BjI,EAAWG,YACV,gBAACgE,EAAA,EAAD,CACE2D,SAAS,uGAETC,OAAQ,CAAER,kBACVS,WAAY,CAAEC,GAAI,mCAIxB,gBAACC,EAAA,EAAD,CAASrJ,MAAOxB,EAAE,sBAChB,gBAAC+I,GAAD,KACE,gBAAC/D,EAAA,EAAD,CACE7B,KAAK,SACLY,QAASsF,EACT9J,KAAM,gBAAC,WAAD,MACN0F,SAAO,GAENjF,EAAE,eACK,IACV,gBAACgF,EAAA,EAAD,CACE7B,KAAK,SACLY,QAASyF,EACTjK,KAAM,gBAAC,WAAD,MACN0F,SAAO,GAENjF,EAAE,iBAIT,gBAAC,EAAD,MACCsK,GACC,gBAAC,GAAD,KACE,gBAACxD,EAAA,EAAD,oEAKJ,gBAACzC,EAAA,EAAD,CACEC,MAAO6F,EACP3J,MAAOgC,EAA2BH,UAClCZ,QAASwI,EACTxF,WAAY,oBAAClC,GAAD,OACV,gBAAC,GAAD,CACEqC,IAAKrC,EAAMK,GACXL,MAAOA,EACPoG,0BAA2BnG,EAA2BsI,IAA3B,UACtBvI,EAAMK,GADgB,YACVD,EAAWC,KAE5BgD,SAAU,2BAAMiE,EAAkBtH,IAClCiE,SAAU,kBAAC1D,GAAD,OAAgBgH,EAAkBvH,EAAOO,SAIxDqH,EAAiBI,OAAS,gBAAC,EAAD,MAAc,KACzC,gBAAClG,EAAA,EAAD,CACEO,IAAG,2BAAsBjC,EAAWG,YAAc,QAClDwB,MAAO+F,EACP7J,MAAO0H,EAAY7F,UACnBZ,QAASwI,EACTxF,WAAY,oBAACC,GAAD,OACV,gBAAC,GAAD,CACEE,IAAKF,EAAK9B,GACVa,KAAMiB,EACN6B,WAAY2B,EAAY4C,IAAZ,UAAmBpG,EAAK9B,GAAxB,YAA8BD,EAAWC,KACrD8D,QAAShC,EAAK9B,KAAOa,EAAKb,GAC1BgD,SAAU,2BAAM8D,EAAiBhF,IACjC8B,SAAU,kBAAC1D,GAAD,OAAgB8G,EAAiBlF,EAAM5B,SAIvD,gBAACoC,EAAA,EAAD,CACE5F,MAAOU,EAAE,qCAAsC,CAC7CkK,eAAgBvH,EAAWO,OAE7BiC,eAAgBmE,EAChBlE,OAAQgE,GAER,gBAAC,EAAD,CACEzG,WAAYA,EACZ2C,SAAUgE,KAGd,gBAACpE,EAAA,EAAD,CACE5F,MAAOU,EAAE,qCAAsC,CAC7CkK,eAAgBvH,EAAWO,OAE7BiC,eAAgBsE,EAChBrE,OAAQmE,GAER,gBAAC,GAAD,CACE5G,WAAYA,EACZ2C,SAAUmE,S,swCCtOL3J,oBA/Bf,SAASiL,iBAAiB5J,GAAc,IAC9BnB,EAAMC,cAAND,EACAgL,EAAgB7K,cAAhB6K,YACAC,EAA2B9J,EAA3B8J,SAAUvI,EAAiBvB,EAAjBuB,aAEZjB,EAAU8D,WAAc,WAC5B,IAAM2F,EAAoBF,EAAYG,YAAYC,KAAI,SAAC3H,GAAD,MAAW,CAC/DmB,IAAKnB,EAAKb,GACVpB,MAAOiC,EAAKP,SAGd,OACE,CACE0B,IAAK,GACLpD,MAAOxB,EAAE,oBAHb,0BAKKkL,MAEJ,CAACF,EAAYG,YAAanL,IAE7B,OACE,gBAACqL,GAAA,EAAD,CACE5J,QAASA,EACT6J,UAAW5I,EACXuI,SAAUA,EACVM,aAAcvL,EAAE,kBAChBwL,eAAc,UAAKxL,EAAE,cAAP,UCJLyL,GAxBI,SAAbA,WAAc,GAAoC,IAAlCC,EAAkC,EAAlCA,WAAYT,EAAsB,EAAtBA,SACxBjL,EAAMC,cAAND,EAEFyB,EAAU8D,WACd,iBAAM,CACJ,CAAEX,IAAK,GAAIpD,MAAOxB,EAAE,aACpB,CAAE4E,IAAK,MAAOpD,MAAOxB,EAAE,aACvB,CAAE4E,IAAK,OAAQpD,MAAOxB,EAAE,cACxB,CAAE4E,IAAK,QAASpD,MAAOxB,EAAE,eACzB,CAAE4E,IAAK,OAAQpD,MAAOxB,EAAE,iBAE1B,CAACA,IAGH,OACE,gBAACqL,GAAA,EAAD,CACE5J,QAASA,EACT6J,UAAWI,EACXT,SAAUA,EACVM,aAAcvL,EAAE,e,+gECfhB2L,G,mkBAWJC,aAAe,SAAC5J,GACd,EAAKb,MAAM+C,SAASlC,EAAG6J,cAAcnK,MAAQM,EAAG6J,cAAcnK,MAAQ,K,EAGxEoK,WAAa,SAAC9J,GACR,EAAK+J,OAAO,EAAKA,MAAMC,S,0NAZ3B,GAAIzI,KAAKpC,OAASoC,KAAKwI,MAAO,CAE5B,IAAME,GAAO1I,KAAKpC,MAAM+K,cAAgB,IAAI3B,OAC5ChH,KAAKwI,MAAMI,kBAAkBF,EAAKA,M,sCAY7B,WACP,OACE,gBAACG,GAAD,CAAO1E,MAAM,UACX,gBAAC2E,GAAD,CACElJ,KAAK,SACLsE,KAAM,GACNrH,MAAOmD,KAAKpC,MAAMC,MAAMkL,aACxBvI,QAASR,KAAKuI,aAEhB,gBAACS,GAAD,uBACMhJ,KAAKpC,MADX,CAEEqL,IAAK,aAACA,GAAD,OAAU,EAAKT,MAAQS,GAC5BtI,SAAUX,KAAKqI,aACfa,WAAW,QACXxI,YAAaV,KAAKpC,MAAM8C,YACxBd,KAAK,SACLmF,WAAS,U,aAnCO/C,aA0CpB6G,GAAQjN,kBAAOwE,KAAV,yEAAGxE,CAAH,0CAKLoN,GAAcpN,UAAO4M,MAAV,+EAAG5M,CAAH,wVAOD,SAACgC,GAAD,OAAWA,EAAMC,MAAMsL,qBACvB,SAACvL,GAAD,OAAWA,EAAMC,MAAMuL,wBAG5B,SAACxL,GAAD,OAAWA,EAAMC,MAAMwL,QAMrB,SAACzL,GAAD,OAAWA,EAAMC,MAAM6C,eAGvB,SAAC9C,GAAD,OAAWA,EAAMC,MAAM6C,eAGvB,SAAC9C,GAAD,OAAWA,EAAMC,MAAM6C,eAGvB,SAAC9C,GAAD,OAAWA,EAAMC,MAAM6C,eAI9BoI,GAAalN,kBAAO0N,cAAV,8EAAG1N,CAAH,iCAKD2N,uBAAUnB,ICzDVoB,GA7BM,SAAfA,aAAgB,GAAyC,IAAvCC,EAAuC,EAAvCA,gBAAiB/B,EAAsB,EAAtBA,SAC/BjL,EAAMC,cAAND,EAEFyB,EAAU8D,WACd,iBAAM,CACJ,CACEX,IAAK,GACLpD,MAAOxB,EAAE,oBACTiN,KAAMjN,EAAE,oDAEV,CACE4E,IAAK,OACLpD,MAAOxB,EAAE,iBACTiN,KAAMjN,EAAE,iDAGZ,CAACA,IAGH,OACE,gBAACqL,GAAA,EAAD,CACE5J,QAASA,EACT6J,UAAW0B,EAAkB,YAASxI,EACtCyG,SAAUA,EACVM,aAAcvL,EAAE,uB,w+BCaPF,oBAnCf,SAASoN,WAAW/L,GAAc,IACxB8J,EAAqB9J,EAArB8J,SAAU9C,EAAWhH,EAAXgH,OACVnI,EAAMC,cAAND,EACAgI,EAAU7H,cAAV6H,MAERzC,aAAgB,WACdyC,EAAM3F,UAAU,CAAE8K,MAAO,QACxB,CAACnF,IAEJ,IAAMvG,EAAU8D,WAAc,WAC5B,IAAM6H,EAAcpF,EAAMqF,IAAIjC,KAAI,SAAC3H,GAAD,MAAW,CAC3CmB,IAAKnB,EAAKb,GACVpB,MAAOiC,EAAKP,SAGd,OACE,CACE0B,IAAK,GACLpD,MAAOxB,EAAE,gBAHb,oCAKKoN,MAEJ,CAACpF,EAAMqF,IAAKrN,IAEf,OACE,gBAACqL,GAAA,EAAD,CACE5J,QAASA,EACT6J,UAAWnD,EACX8C,SAAUA,EACVM,aAAcvL,EAAE,cAChBwL,eAAc,UAAKxL,EAAE,UAAP,U,4TC6BpB,I,iCAAMsN,GAAiBnO,UAAOC,IAAV,sFAAGD,CAAH,gEAMLW,gBA3Df,SAASyN,kBACP,IAAM1H,EAAOC,YAAa,CAAEC,OAAO,IAC3B/F,EAAMC,cAAND,EACF0D,EAAO8J,eAHY,EAISrN,cAA1B6K,EAJiB,EAIjBA,YAAayC,EAJI,EAIJA,SACfC,EAAsD,IAAnC1C,EAAYG,YAAYZ,OAGjD,OAFYkD,EAASE,UAAUjK,EAAKd,IAE3BgL,eAILF,EAEA,gBAAC1I,EAAA,EAAD,CACE6I,GAAIC,IACJC,GAAIC,aAAehD,EAAYG,YAAY,GAAGvI,IAC9CrD,KAAM,gBAAC,WAAD,OAELS,EAAE,YAMP,gCACE,gBAACiO,GAAA,EAAepI,GACb,SAAC1E,GAAD,OACC,gBAAC6D,EAAA,EAAD,yBAAQzF,KAAM,gBAAC,WAAD,OAAkB4B,EAAhC,CAAuC+M,OAAK,IAA5C,UACMlO,EAAE,WADR,SAKJ,gBAACkG,GAAA,EAAD,2BAAiBL,EAAjB,CAAuBI,aAAYjG,EAAE,kBACnC,gBAACmO,GAAA,EAAD,KAASnO,EAAE,wBACX,gBAACmG,GAAA,EAAD,2BACMN,EADN,CAEEvB,MAAO0G,EAAYG,YAAYC,KAAI,SAACzI,GAAD,MAAiB,CAClDoL,GAAIC,aAAerL,EAAWC,IAC9B+E,UAAW8F,EAASE,UAAUhL,EAAWC,IAAIwL,OAC7C9O,MACE,gBAACqE,EAAA,EAAD,CAAM+D,MAAM,UACV,gBAAC2G,GAAA,EAAD,CAAgB1L,WAAYA,IAC5B,gBAAC2K,GAAD,KAAiB3K,EAAWO,gBAlCjC,Q,2+HC4BLoL,I,GA8BHC,aAAQ,OA/BVzO,a,yhBAGC0O,UAAoB,G,6eAiCpBC,cAAgB,SAACzM,GACf,GAAe,UAAXA,EAAG4C,IAKP,MAAe,WAAX5C,EAAG4C,KACL5C,EAAG0M,iBACI,EAAKC,eAGC,cAAX3M,EAAG4C,MACL5C,EAAG0M,iBACC,EAAKE,eACH,EAAKA,yBAAyBC,aAChC,EAAKD,cAAc5C,UAbvB,EAAK8C,gB,EAmBTC,kBAAoB,WAClB,EAAKC,OAAS,IAAIC,gBAAgB,EAAK9N,MAAM+N,SAASC,QACtD,EAAKC,OAAS,EACd,EAAKC,eAAgB,EAGrB,EAAKC,WAAY,EAEjB,EAAKC,yB,EAGPC,iBAAmB,WACjB,IAAMvN,EAAQwN,aAAuB,EAAKtO,MAAMuO,MAAMV,OAAOW,MAAQ,IACrE,EAAK1N,MAAQA,GAAgB,GAC7B,EAAKmN,OAAS,EACd,EAAKC,eAAgB,EAGrB,EAAKC,YAAc,EAAKrN,MAExB,EAAKsN,yB,EAGPK,mBAAqB,SAACT,GAMpB,EAAKhO,MAAM0O,QAAQC,QAAQ,CACzBC,SAAU,EAAK5O,MAAM+N,SAASa,SAC9BZ,OAAQa,KAAYC,UAAZ,+BAEDD,KAAYE,MAAM,EAAK/O,MAAM+N,SAASC,SACtCA,GAEL,CAAEgB,iBAAiB,O,EAKzBC,aAAe,WACT,EAAK1N,cACP,EAAKvB,MAAM0O,QAAQQ,KAAKrC,aAAe,EAAKtL,gB,iLA6FhD6M,sBAAwB,IAAS,EAAKT,aAAc,IAAK,CACvDwB,SAAS,EACTC,UAAU,I,EAGZC,eAAiB,SAACvO,GAChB,EAAKd,MAAM0O,QAAQC,QAAQ,CACzBC,SAAUU,aAAUxO,GACpBkN,OAAQ,EAAKhO,MAAM+N,SAASC,U,EAIhCuB,oBAAsB,SAAClE,GACrB,EAAKoC,cAAgBpC,G,sMA/LrBjJ,KAAKiM,mBAEDjM,KAAKpC,MAAM+N,SAASC,QACtB5L,KAAKwL,sB,4DAIU4B,GACbA,EAAUzB,SAASC,SAAW5L,KAAKpC,MAAM+N,SAASC,QACpD5L,KAAKwL,oBAEH4B,EAAUjB,MAAMV,OAAOW,OAASpM,KAAKpC,MAAMuO,MAAMV,OAAOW,MAC1DpM,KAAKiM,qB,sCAMPjM,KAAKpC,MAAM0O,QAAQlB,W,sCAgLZ,eACsDpL,KAAKpC,MAA1DjB,EADD,EACCA,UAAW0Q,EADZ,EACYA,SAAU1B,EADtB,EACsBA,SAAUlP,EADhC,EACgCA,EAAGwD,EADnC,EACmCA,KAAMiK,EADzC,EACyCA,SAC1CoD,EAAU3Q,EAAU4Q,cAAcvN,KAAKtB,OACvC8O,GAAaxN,KAAK+L,WAAa/L,KAAKtB,OAA4B,IAAnB4O,EAAQtG,OACrDyG,GACHzN,KAAK0N,UAAY/B,EAASgC,OAAShC,EAASgC,MAAMC,SAC/CC,EAAM3D,EAASE,WAAU,UAAAnK,EAAKE,YAAL,eAAWd,IAAKY,EAAKE,KAAKd,GAAK,IAE9D,OACE,gBAACyO,GAAD,CAAWC,MAAI,GACb,gBAACC,GAAA,EAAD,CAAWjS,MAAOiE,KAAKjE,QACtBiE,KAAK+L,WAAa,gBAACkC,GAAA,EAAD,MAClBZ,GACC,2BACE,0BAAK5Q,EAAE,cACP,gBAACc,EAAA,EAAD,KACGd,EAAE,yDAIT,gBAACyR,GAAD,CAAgBR,SAAU1N,KAAK0N,SAAUrN,QAAM,EAAC0N,MAAI,GAClD,gBAAC,GAAD,CACErN,YAAW,UAAKjE,EAAE,UAAP,KACX0R,UAAWnO,KAAKkL,cAChBvK,SAAUX,KAAKiN,eACftE,aAAc3I,KAAKtB,QAEpB+O,GACC,gBAACW,GAAA,EAAD,KACE,gBAAC9N,EAAA,EAAD,CAAUqK,OAAK,GACb,gBAACpH,EAAA,EAAD,CACE2D,SAAS,wFACTC,OAAQ,CAAEkH,KAAMC,MAChBlH,WAAY,CAAEC,GAAI,oCAKzBrH,KAAK0N,UACJ,gBAACa,GAAD,KACE,gBAAC,GAAD,CACE9E,gBAAiBzJ,KAAKyJ,gBACtB/B,SAAU,kBAAC+B,GAAD,OACR,EAAK4C,mBAAmB,CAAE5C,uBAG9B,gBAAC,GAAD,CACEtK,aAAca,KAAKb,aACnBuI,SAAU,kBAACvI,GAAD,OACR,EAAKkN,mBAAmB,CAAElN,oBAG9B,gBAAC,GAAD,CACEyF,OAAQ5E,KAAK4E,OACb8C,SAAU,kBAAC9C,GAAD,OAAY,EAAKyH,mBAAmB,CAAEzH,cAElD,gBAAC,GAAD,CACEuD,WAAYnI,KAAKmI,WACjBT,SAAU,kBAACS,GAAD,OACR,EAAKkE,mBAAmB,CAAElE,mBAKjCqF,GACC,gBAACY,GAAA,EAAD,KACE,gBAACI,GAAD,CAAUnO,QAAM,GACd,gBAACC,EAAA,EAAD,KACE,gBAACiD,EAAA,EAAD,oDAC8C,4BAE7CsK,EAAIxD,gBAAkB,gBAAC9G,EAAA,EAAD,gCAEzB,gBAACkL,GAAD,KACGzO,KAAKb,cAAgB0O,EAAIxD,eACxB,gBAAC5I,EAAA,EAAD,CACEjB,QAASR,KAAK6M,aACd7Q,KAAM,gBAAC,WAAD,MACN6H,SAAO,GAENpH,EAAE,YAGL,gBAAC,GAAD,MAVJ,KAaE,gBAACgF,EAAA,EAAD,CAAQ6I,GAAIC,IAAMC,GAAG,UAAU9I,SAAO,GACnCjF,EAAE,qBAMb,gBAACiS,GAAD,CAAYrO,QAAM,EAACsO,QAAS3O,KAAK0N,UAC/B,gBAACkB,GAAD,CACEC,KAAMC,KAAmBD,KAAKE,SAC9BC,wBAAyB,GAExB1B,EAAQzF,KAAI,SAACoH,EAAQC,GACpB,IAAMC,EAAWxS,EAAUyS,KAAK7H,IAAI0H,EAAOE,SAAS9P,IACpD,OAAK8P,EAGH,gBAACE,GAAA,EAAD,CACEpG,IAAK,aAACA,GAAD,OAAmB,IAAViG,GAAe,EAAK/B,oBAAoBlE,IACtD5H,IAAK8N,EAAS9P,GACd8P,SAAUA,EACVG,UAAW,EAAK5Q,MAChB6Q,QAASN,EAAOM,QAChB/R,gBAAc,EACdC,cAAY,IAVM,SAezBuC,KAAK8L,eACJ,gBAAC,KAAD,CAAUzK,IAAKrB,KAAK6L,OAAQ2D,QAASxP,KAAKyP,uB,0CA5NpD,MAA8C,SAAvCzP,KAAKyL,OAAOlE,IAAI,qB,uCAIvB,IAAMlI,EAAKW,KAAKyL,OAAOlE,IAAI,gBAC3B,OAAOlI,QAAU4B,I,iCAIjB,IAAM5B,EAAKW,KAAKyL,OAAOlE,IAAI,UAC3B,OAAOlI,QAAU4B,I,qCAIjB,IAAM5B,EAAKW,KAAKyL,OAAOlE,IAAI,cAC3B,OAAOlI,QAAU4B,I,qCAIjB,OACEjB,KAAKmI,YACLnI,KAAK4E,QACL5E,KAAKb,cACLa,KAAKyJ,kB,gCAKP,IAAM/K,EAAQsB,KAAKtB,MACb3C,EAAQiE,KAAKpC,MAAMnB,EAAE,UAC3B,OAAIiC,EAAc,GAAP,OAAUA,EAAV,cAAqB3C,GACzBA,M,QAvIUiG,a,yDAKlBC,K,qFACeiK,aAAuBlM,KAAKpC,MAAMuO,MAAMV,OAAOW,MAAQ,O,0DACtEnK,K,qFAAqC,IAAIyJ,mB,0DACzCzJ,K,qFAA4B,K,iEAC5BA,K,qFAAoC,K,6DACpCA,K,qFAAgC,K,4DAChCA,K,sFAAiCjC,KAAKpC,MAAMuO,MAAMV,OAAOW,Q,mMA+HzDsD,K,iJACiB,+GAEX,EAAK5D,gBAAiB,EAAKC,UAFhB,iEAKV,EAAKR,eALK,oD,gEAQjBmE,K,iJACc,0HACT,EAAKhR,MADI,oBAEL+M,EAAS,CACbI,OAAQ,EAAKA,OACbjC,MAAO+F,KACPxH,WAAY,EAAKA,WACjBsB,gBAAiB,EAAKA,gBACtBmG,eAAe,EACfzQ,aAAc,EAAKA,aACnByF,OAAQ,EAAKA,QAIX,EAAKqG,YAAc,EAAKvM,QAAS,KAAQ+M,EAAQ,EAAKoE,YAb/C,uBAcT,EAAK9D,WAAY,EAdR,iCAkBX,EAAKA,WAAY,EACjB,EAAKd,UAAY,EAAKvM,MACtB,EAAKmR,WAAapE,EApBP,mBAuBa,EAAK7N,MAAMjB,UAAUiP,OAAO,EAAKlN,MAAO+M,GAvBrD,QAuBH6B,EAvBG,OAyBT,EAAKI,UAAW,EAEO,IAAnBJ,EAAQtG,QAAgBsG,EAAQtG,OAAS2I,KAC3C,EAAK7D,eAAgB,EAErB,EAAKD,QAAU8D,KA9BR,wDAiCT,EAAK1E,UAAY,GAjCR,8BAoCT,EAAKc,WAAY,EApCR,6CAuCX,EAAK2B,UAAW,EAChB,EAAKzC,UAAY,EAAKvM,MAxCX,0E,aAyLX+P,GAAU7S,kBAAOwE,KAAV,sEAAGxE,CAAH,2CAKP4S,GAAW5S,kBAAOwE,KAAV,uEAAGxE,CAAH,sFAORkS,GAAYlS,kBAAOkU,MAAV,wEAAGlU,CAAH,2CAOTsS,GAAiBtS,kBAAOwE,KAAV,6EAAGxE,CAAH,mGAGX,SAACgC,GAAD,OAAYA,EAAM8P,SAAW,KAAO,QAGzCqC,aAAW,SAAXA,CANgB,mBAOF,SAACnS,GAAD,OAAYA,EAAM8P,SAAW,OAAS,YAIlDgB,GAAa9S,kBAAOwE,KAAV,yEAAGxE,CAAH,0FAEH,SAACgC,GAAD,OAAYA,EAAM+Q,QAAU,IAAM,OAIzCC,GAA2BhT,kBAAOkT,MAAV,uFAAGlT,CAAH,gDAMxB2S,GAAU3S,kBAAOwE,KAAV,sEAAGxE,CAAH,iJAQTmU,aAAW,SAAXA,CARS,qBC5aEhF,GD6bA7I,cACb8N,YAAW7N,YAAO,YAAa,OAAQ,WAA5BA,CAAwC4I,M,gDE7btC,SAASkF,QACtB,OACE,uBACEC,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRC,KAAK,OACLC,MAAM,8BAEN,wBACED,KAAK,eACLE,EAAE,4PAEJ,wBACEF,KAAK,eACLE,EAAE,yP,+/EC0GV,I,YAAMC,GAAa5U,kBAAO6U,MAAV,oFAAG7U,CAAH,mNAEL,SAACgC,GAAD,OAAWA,EAAMC,MAAMC,WAcrB,SAACF,GAAD,OAAWA,EAAMC,MAAM6S,eAI9BC,GAAc/U,kBAAO2E,KAAV,qFAAG3E,CAAH,4CACN,SAACgC,GAAD,OAAWA,EAAMC,MAAM6C,eAK5BkQ,GAAYhV,UAAOC,IAAV,mFAAGD,CAAH,wQAYT4U,GAOMA,IAKN/P,GAAQ7E,UAAOC,IAAV,+EAAGD,CAAH,mZAIK,SAACgC,GAAD,OAAWA,EAAMC,MAAMuL,wBAY/B,SAACxL,GAAD,OAAWiT,aAAe,EAAGjT,EAAMC,MAAMiT,eACzC,SAAClT,GAAD,OAAWA,EAAMC,MAAMiT,cAYb,SAAClT,GAAD,OAAWA,EAAMC,MAAMkT,uBAS1BxU,gBAhMf,SAASyU,sBAAT,GAAsD,IAArB5R,EAAqB,EAArBA,WAAqB,EAClBxC,cAA1B6K,EAD4C,EAC5CA,YAAayC,EAD+B,EAC/BA,SACbzK,EAAckG,eAAdlG,UACAhD,EAAMC,cAAND,EAH4C,sCAIlBuF,YAAe,GAJG,GAI7CiP,EAJ6C,KAIjCC,EAJiC,2CAKpBlP,YAAe,GALK,GAK7CmP,EAL6C,KAKlCC,EALkC,2CAMxBpP,YAAe,GANS,GAM7CqP,EAN6C,KAMpCC,EANoC,KAO9CzD,EAAM3D,EAASE,UAAUhL,EAAWC,IAEpCkS,EAAqBvP,eAAkB,WAC3CoP,GAAW,KACV,IAEGI,EAAoBxP,eAAkB,WAC1CoP,GAAW,KACV,IAEGK,EAAwBzP,eAC5B,SAAC0P,GACCA,EAAMvG,iBAEF8F,GAAc9B,SAASwC,eACzBxC,SAASwC,cAAcC,OAGzBV,GAAaD,KAEf,CAACA,IAGGY,EC/CO,SAASC,qBACtBC,EACAC,GAGA,IAAMC,EAAUjQ,WACVkQ,EAAUlQ,WAEhB,SAASmQ,UACHD,EAAQE,SACVC,aAAaH,EAAQE,SAOzB,OAFApQ,aAAgB,kBAAMmQ,UAAS,IAExB,WAAwB,2BAAXG,EAAW,yBAAXA,EAAW,gBAC7BL,EAAQG,QAAUE,EAClBH,UAEAD,EAAQE,QAAUG,YAAW,WACvBN,EAAQG,SACVL,EAAQ,WAAR,yCAAYE,EAAQG,YAErBJ,IDsBcF,CAAoB,iB,qVAAA,0BAAC,iBAAOU,GAAP,kHAE9BpT,EAAWqH,KAAK,CACpBgM,YAAaD,MAHqB,OAKpClB,GAAS,GAL2B,sDAOpC7R,EACEhD,EAAE,iDAAkD,CAClDmD,KAAM,WAT0B,oEAAD,sDAcpC,KAEGyI,EAAerG,eACnB,SAACwQ,GACClB,GAAS,GACTO,EAAWW,KAEb,CAACX,IAGH7P,aAAgB,WACdoP,GAAW,KACV,CAAChS,EAAWC,KAEf,IAAMqB,EAAc,GAAH,OAAMjE,EAAE,qBAAR,KACX4E,EAAM8P,GAAaE,EAAU,QAAUjS,EAAWsT,UAExD,OACE,gBAAC9B,GAAD,CAAW+B,eAAcxB,EAAWyB,gBAAe3B,GACjD,gBAAC,GAAD,CACE4B,YAAahF,EAAIhD,OACjB8H,eAAcxB,EACdyB,gBAAe3B,GAEf,wBAAMzQ,QAASqN,EAAIhD,OAAS0G,OAAqBtQ,GAC9CwG,EAAYqL,UAAY,gBAAC7E,GAAA,EAAD,MACxB7O,EAAW2T,gBAAkB5B,GAAaE,EACzC,gBAAC,WAAD,CAAgB2B,SAAU,gBAACrC,GAAD,kBACxB,gBAACsC,GAAA,EAAD,CACE5R,IAAKA,EACLsH,aAAcvJ,EAAWqT,aAAe,GACxC9R,SAAU0H,EACV3H,YAAaA,EACbwS,UAAW/B,EACXpM,UAAWoM,EACXgC,OAAQ3B,EACR4B,UAAW,IACXC,eAAa,EACbC,yBAAuB,EACvBC,MAAI,KAIR1F,EAAIhD,QAAU,gBAAC8F,GAAD,KAAcjQ,MAIhCyQ,GACA,gBAACX,GAAD,CACEhQ,QAASiR,EACT/O,aAAyBjG,EAAbwU,EAAe,WAAgB,UAC3C/M,KAAM,IAEN,gBAAC+L,MAAD,W,4rBErGK,SAASuD,aAAT,GAA4D,IAApC5J,EAAoC,EAApCA,MAAOjN,EAA6B,EAA7BA,UAAc8W,EAAe,kDACnE1S,EAAQ6I,EAAQjN,EAAU+W,OAAO,EAAG9J,GAASjN,EAEnD,OACE,gBAAC,KAAD,CACEkS,KAAMC,KAAmBD,KAAKE,SAC9BC,wBAAyB,GAExBjO,EAAM8G,KAAI,SAACsH,GAAD,OACT,gBAACE,GAAA,EAAD,sBAAkBhO,IAAK8N,EAAS9P,GAAI8P,SAAUA,GAAcsE,Q,6hFCI9DE,I,GAIH3I,aAAQ,GAAD,OAAIqD,KAAJ,OALT9R,a,6sBAcCqX,kBAAoB,SAACnV,GACnBA,EAAG0M,iBACH,EAAKvN,MAAM0O,QAAQQ,KACjBI,aAAUzO,EAAGE,OAAOR,MAAO,CACzBgB,aAAc,EAAKvB,MAAMuB,aACzB8J,IAAK,EAAKrL,MAAMiW,W,EAKtBC,YAAc,WACZ,EAAKC,SAAU,G,EAGjBC,WAAa,WACX,EAAKD,SAAU,G,gNAvBXtV,GACJA,EAAG0M,iBAECnL,KAAKwI,OACPxI,KAAKwI,MAAMC,U,sCAsBN,aACmCzI,KAAKpC,MAAvCnB,EADD,EACCA,EAAG0B,EADJ,EACIA,MAAOwC,EADX,EACWA,SAAUwN,EADrB,EACqBA,UADrB,EAE4CnO,KAAKpC,MAAhDC,EAFD,EAECA,MAFD,IAEQ6C,mBAFR,gBAEyBjE,EAAE,UAF3B,OAIP,OACE,gBAACwX,GAAD,CACEhL,IAAK,aAACA,GAAD,OAAU,EAAKT,MAAQS,GAC5BrJ,KAAK,SACLc,YAAaA,EACbwT,QAASlU,KAAK4T,kBACdzV,MAAOA,EACPwC,SAAUA,EACVwN,UAAWA,EACXnS,KACE,gBAAC,aAAD,CACEa,MAAOmD,KAAK+T,QAAUlW,EAAMsW,mBAAqBtW,EAAMuW,cAG3DnW,MAAO+B,KAAKpC,MAAMK,MAClBoW,QAASrU,KAAK8T,YACdX,OAAQnT,KAAKgU,WACbM,OAAQ,EACR1T,aAAW,Q,iBArDWoB,a,oEAE3BC,K,qFAA8B,K,oJAyD3BgS,GAAgBrY,kBAAO6E,KAAV,iFAAG7E,CAAH,qBAIJsG,iBACbqH,oBAAUyG,YAAW2D,M,6gFCrFvB,IAAIY,IAAgB,EAEL,SAASC,kBACtBrV,EACAsV,GAC2E,IACnE9X,EAAcC,cAAdD,UACA8C,EAAckG,eAAdlG,UAFmE,kCAGvCuC,YAAe,GAHwB,GAGpE0S,EAHoE,KAGvDC,EAHuD,KAInElY,EAAMC,cAAND,EACF6P,EAAUsI,cAgDhB,MAAO,CACLC,YA/CkB7S,cAAA,4DAClB,iJAAO8S,EAAP,+BAAe,IACTP,GADN,oDAOOO,EAAM9N,OAPb,oDAWE2N,GAAa,GACbJ,IAAgB,EAZlB,SAeQQ,EAAM5V,EACJ6V,EAA4B,IAAjBF,EAAM9N,QAEnByN,GAAetV,EAlBvB,kCAmBiCxC,EAAUM,MAAMwX,GAnBjD,iBAmBctF,EAnBd,EAmBcA,SACR8F,KAAU9F,EAAU,0BACpB4F,EAAM5F,EAAShQ,aArBrB,qCAwBuB2V,GAxBvB,kEAwBeI,EAxBf,kBAyBwBvY,EAAUwY,OAAOD,EAAMT,EAAYM,EAAK,CACxDK,SAAS,IA1BjB,QAyBYC,EAzBZ,OA6BUL,GACF1I,EAAQQ,KAAKuI,EAAIC,KA9BzB,mMAkCI7V,EAAU,GAAD,OAAIhD,EAAE,yBAAN,aAAmC,KAAI8Y,SAAW,CACzD3V,KAAM,UAnCZ,yBAsCI+U,GAAa,GACbJ,IAAgB,EAvCpB,iGA0CA,CAAC9X,EAAGE,EAAW2P,EAAS7M,EAAWN,EAAcsV,IAKjDC,e,m4CCTWnY,I,wBAAAA,gBA1Cf,SAASiZ,iBAAT,GAA2D,IAA/BpW,EAA+B,EAA/BA,WAAY2C,EAAmB,EAAnBA,SAAmB,iCACrBC,aADqB,GAClDyT,EADkD,KACtCC,EADsC,KAEjDjW,EAAckG,eAAdlG,UACF6M,EAAUsI,cACRnY,EAAMC,cAAND,EAEFkZ,EAAe3T,cAAA,iB,sUAAA,0BACnB,iBAAOvD,GAAP,gGACEA,EAAG0M,iBACHuK,GAAc,GAFhB,kBAKUtW,EAAWgH,SALrB,OAMIkG,EAAQQ,KAAK8I,gBACb7T,IAPJ,gDASItC,EAAU,KAAI8V,QAAS,CAAE3V,KAAM,UATnC,yBAWI8V,GAAc,GAXlB,kFADmB,sDAenB,CAACjW,EAAWsC,EAAU3C,EAAYkN,IAGpC,OACE,gBAAClM,EAAA,EAAD,CAAMC,QAAM,GACV,wBAAM0B,SAAU4T,GACd,gBAACrV,EAAA,EAAD,KACE,gBAACiD,EAAA,EAAD,CACE2D,SAAS,yKACTC,OAAQ,CAAER,eAAgBvH,EAAWO,MACrCyH,WAAY,CAAEC,GAAI,mCAGtB,gBAAC5F,EAAA,EAAD,CAAQ7B,KAAK,SAASwE,SAAUqR,EAAY1Q,WAAS,EAAC8Q,QAAM,GACzDJ,EAAa,GAAH,OAAMhZ,EAAE,YAAR,KAAyBA,EAAE,2B,gtIC3B1CqZ,GADLvZ,a,6pCAUCoZ,a,0EAAe,iBAAOlX,GAAP,sGACbA,EAAG0M,iBACH,EAAK2H,UAAW,EACRrW,EAAM,EAAKmB,MAAXnB,EAHK,kBAML,EAAKmB,MAAMwB,WAAWqH,KAAK,CAC/B9G,KAAM,EAAKA,KACX3D,KAAM,EAAKA,KACXa,MAAO,EAAKA,MACZkZ,QAAS,EAAKA,QACdC,KAAM,EAAKA,OAXF,OAaX,EAAKpY,MAAMmE,WACX,EAAKnE,MAAM4B,OAAOC,UAAUhD,EAAE,8BAA+B,CAC3DmD,KAAM,YAfG,kDAkBX,EAAKhC,MAAM4B,OAAOC,UAAU,KAAI8V,QAAS,CAAE3V,KAAM,UAlBtC,yBAoBX,EAAKkT,UAAW,EApBL,mF,wDAwBfmD,iBAAmB,SAACxX,GAA+C,mCACtCA,EAAGE,OAAOR,MAAM+X,MAAM,KADgB,GAC1DC,EAD0D,KACnDC,EADmD,KAG/C,QAAdA,GAAqC,SAAdA,IACzB,EAAKJ,KAAO,CAAEG,QAAOC,e,EAIzBC,iBAAmB,SAAC5X,GAClB,EAAKkB,KAAOlB,EAAGE,OAAOR,O,EAGxBkK,aAAe,SAACxL,EAAeb,GAC7B,EAAKa,MAAQA,EACb,EAAKb,KAAOA,G,EAGdsa,oBAAsB,SAAC7X,GACrB,EAAKsX,QAAUtX,EAAGE,OAAO4X,S,gNAGlB,MACavW,KAAKpC,MAAjBqC,EADD,EACCA,KAAMxD,EADP,EACOA,EACR+Z,IAAuBvW,EAAKE,MAAQF,EAAKE,KAAK4V,QAEpD,OACE,gBAAC3V,EAAA,EAAD,CAAMC,QAAM,GACV,wBAAM0B,SAAU/B,KAAK2V,cACnB,gBAACrV,EAAA,EAAD,KACE,gBAACiD,EAAA,EAAD,oHAKF,gBAACnD,EAAA,EAAD,KACE,gBAACK,EAAA,EAAD,CACEb,KAAK,OACL3B,MAAOxB,EAAE,QACTkE,SAAUX,KAAKqW,iBACflY,MAAO6B,KAAKL,KACZ8W,UAAQ,EACR1R,WAAS,EACTlE,MAAI,IARR,IAWE,gBAAC6V,GAAA,EAAD,CACE/V,SAAUX,KAAKqI,aACfxL,MAAOmD,KAAKnD,MACZb,KAAMgE,KAAKhE,QAGf,gBAACgC,EAAA,EAAD,CACEC,MAAOxB,EAAE,mBACTyB,QAAS,CACP,CAAED,MAAOxB,EAAE,gBAAiB0B,MAAO,aACnC,CAAEF,MAAOxB,EAAE,eAAgB0B,MAAO,cAEpCA,MAAK,UAAK6B,KAAKgW,KAAKG,MAAf,YAAwBnW,KAAKgW,KAAKI,WACvCzV,SAAUX,KAAKiW,mBAEjB,gBAACU,GAAA,EAAD,CACEtX,GAAG,UACHpB,MAAOxB,EAAE,2BACTkE,SAAUX,KAAKsW,oBACfC,QAASvW,KAAK+V,SAAWS,EACzBpS,UAAWoS,IAEb,gBAAClW,EAAA,EAAD,KACGkW,EACC,gBAACjT,EAAA,EAAD,wEAIA,gBAACA,EAAA,EAAD,6EAMJ,gBAAC9B,EAAA,EAAD,CACE7B,KAAK,SACLwE,SAAUpE,KAAK8S,WAAa9S,KAAKpC,MAAMwB,WAAWO,MAEjDK,KAAK8S,SAAL,UAAmBrW,EAAE,UAArB,KAAoCA,EAAE,e,gBApHtBuF,a,gEAC1BC,K,qFAA0BjC,KAAKpC,MAAMwB,WAAWO,Q,mEAChDsC,K,qFAA8BjC,KAAKpC,MAAMwB,WAAW2W,W,gEACpD9T,K,qFAA0BjC,KAAKpC,MAAMwB,WAAWpD,Q,iEAChDiG,K,qFAA2BjC,KAAKpC,MAAMwB,WAAWvC,OAAS,a,gEAC1DoF,K,qFAAgEjC,KAAKpC,MACnEwB,WAAW4W,Q,oEACb/T,K,0EAqHYC,iBACbC,YAAO,SAAU,OAAjBA,CAAyB2T,K,k3CCtGZvZ,oBAlCf,SAASqa,iBAAT,GAA2D,IAA/BxX,EAA+B,EAA/BA,WAAY2C,EAAmB,EAAnBA,SAAmB,iCACvBC,aADuB,GAClD+J,EADkD,KACvC8K,EADuC,KAEjDpa,EAAMC,cAAND,EAEFkZ,EAAe3T,cAAA,iB,sUAAA,0BACnB,iBAAOvD,GAAP,gGACEA,EAAG0M,iBAEH0L,GAAa,GAHf,SAIQzX,EAAW0X,SAJnB,OAKED,GAAa,GACb9U,IANF,iDADmB,sDASnB,CAAC3C,EAAY2C,IAGf,OACE,gBAAC3B,EAAA,EAAD,CAAMC,QAAM,GACV,wBAAM0B,SAAU4T,GACd,gBAACrV,EAAA,EAAD,KACE,gBAACiD,EAAA,EAAD,CACE2D,SAAS,oKACTC,OAAQ,CAAER,eAAgBvH,EAAWO,MACrCyH,WAAY,CAAEC,GAAI,mCAGtB,gBAAC5F,EAAA,EAAD,CAAQ7B,KAAK,SAASwE,SAAU2H,EAAWlI,SAAO,GAC/CkI,EAAY,GAAH,OAAMtP,EAAE,aAAR,KAA0BA,EAAE,2B,smDC8LjCF,oBAzMf,SAASwa,eAAT,GAOU,IANR3X,EAMQ,EANRA,WACAnB,EAKQ,EALRA,MAKQ,IAJRuE,aAIQ,SAHRwU,EAGQ,EAHRA,UACAC,EAEQ,EAFRA,OACAC,EACQ,EADRA,QAEM5U,EAAOC,YAAa,CAAEC,QAAOwU,cAD3B,+BAEgChV,YAAe,GAF/C,GAEDmV,EAFC,KAEaC,EAFb,OAGwBxa,cAAxBD,EAHA,EAGAA,UAAWuN,EAHX,EAGWA,SACXzK,EAAckG,eAAdlG,UACAhD,EAAMC,cAAND,EACF6P,EAAUsI,cAEVM,EAAOlT,WARL,+BAYJA,YAAe,GAZX,GAUNqV,EAVM,KAWNC,EAXM,oCAa4CtV,YAAe,GAb3D,GAaDuV,EAbC,KAamBC,EAbnB,oCAcgDxV,YAAe,GAd/D,GAcDyV,EAdC,KAcqBC,EAdrB,oCAegD1V,YAAe,GAf/D,GAeD2V,EAfC,KAeqBC,EAfrB,KAiBFC,EAAa7V,eAAkB,WACnCoV,GAAgB,GACZH,GACFA,MAED,CAACA,IAEEa,EAAoB9V,eACxB,SAACvD,GACCA,EAAG0M,iBACHmB,EAAQQ,KAAKrC,aAAerL,EAAWC,OAEzC,CAACiN,EAASlN,EAAWC,KAGjB0Y,EAAkB/V,eAAkB,SAACvD,GACzCA,EAAGsZ,oBACF,IAEGC,EAAuBhW,eAC3B,SAACvD,GACCA,EAAG0M,iBACH1M,EAAGsZ,kBAGC7C,EAAK9C,SACP8C,EAAK9C,QAAQ6F,UAGjB,CAAC/C,IAGGgD,EAAmBlW,cAAA,iB,gUAAA,0BACvB,iBAAOvD,GAAP,uGACQqW,EAAQqD,aAAqB1Z,IAIxBuI,OALb,iEAUUkO,EAAOJ,EAAM,GAVvB,SAW2BnY,EAAUwY,OAAOD,EAAM,KAAM9V,EAAWC,GAAI,CACjE+V,SAAS,IAZf,OAWUjG,EAXV,OAcI7C,EAAQQ,KAAKqC,EAASmG,KAd1B,wDAgBI7V,EAAU,KAAI8V,QAAS,CACrB3V,KAAM,UAjBZ,qEADuB,sDAwBvB,CAAC0M,EAAS7M,EAAWL,EAAWC,GAAI1C,IAGhCkR,EAAM3D,EAASE,UAAUhL,EAAWC,IACpC0B,EAAQiB,WACZ,kBACEoW,aAAoB,CAClB,CACErc,MAAOU,EAAE,gBACTkS,QAASd,EAAIhD,OACbrK,QAASsX,GAEX,CACE/b,MAAOU,EAAE,mBACTkS,QAASd,EAAIhD,OACbrK,QAASwX,GAEX,CACEpY,KAAM,aAER,CACE7D,MAAO,GAAF,OAAKU,EAAE,QAAP,KACLkS,QAASd,EAAIhD,OACbrK,QAAS,0BAAMgX,GAAsB,KAEvC,CACEzb,MAAO,GAAF,OAAKU,EAAE,eAAP,KACLkS,QAASd,EAAIhD,OACbrK,QAAS,0BAAM8W,GAA6B,KAE9C,CACEvb,MAAO,GAAF,OAAKU,EAAE,UAAP,KACLkS,WAAYvP,IAAcyO,EAAIiJ,QAC9BtW,QAAS,0BAAMoX,GAAwB,KAEzC,CACEhY,KAAM,aAER,CACE7D,MAAO,GAAF,OAAKU,EAAE,UAAP,KACLkS,WAAYvP,IAAcyO,EAAIzH,QAC9B5F,QAAS,0BAAMkX,GAAwB,SAG7C,CAAC7J,EAAKzO,EAAY0Y,EAAmBE,EAAsBvb,IAG7D,OAAKsE,EAAMiG,OAKT,gCACE,gBAACqR,GAAA,EAAD,KACE,yBACEzY,KAAK,OACLqJ,IAAKiM,EACLvU,SAAUuX,EACV1X,QAASuX,EACTO,OAAQ3b,EAAU4b,gBAAgBC,KAAK,MACvCC,SAAS,QAGZxa,EACC,gBAACyM,GAAA,EAAepI,EAAOrE,GAEvB,gBAACwE,GAAA,EAAD,wBAAoBC,aAAYjG,EAAE,cAAkB6F,IAEtD,gBAACK,GAAA,EAAD,0BACML,EADN,CAEE2U,OAAQY,EACRX,QAASA,EACTxU,aAAYjG,EAAE,gBAEd,gBAACmG,GAAA,EAAD,0BAAcN,EAAd,CAAoBvB,MAAOA,MAE5BoW,GACC,gCACE,gBAACxV,EAAA,EAAD,CACE5F,MAAOU,EAAE,0BACTmF,eAAgB,iCAAM0V,GAA6B,IACnDzV,OAAQwV,GAER,gBAAC,GAAD,CAAuBjY,WAAYA,KAErC,gBAACuC,EAAA,EAAD,CACE5F,MAAOU,EAAE,mBACToF,OAAQ0V,EACR3V,eAAgB,iCAAM4V,GAAsB,KAE5C,gBAAC,GAAD,CACEzV,SAAU,2BAAMyV,GAAsB,IACtCpY,WAAYA,KAGhB,gBAACuC,EAAA,EAAD,CACE5F,MAAOU,EAAE,qBACToF,OAAQ4V,EACR7V,eAAgB,iCAAM8V,GAAwB,KAE9C,gBAAC,GAAD,CACE3V,SAAU,2BAAM2V,GAAwB,IACxCtY,WAAYA,KAGhB,gBAACuC,EAAA,EAAD,CACE5F,MAAOU,EAAE,qBACToF,OAAQ8V,EACR/V,eAAgB,iCAAMgW,GAAwB,KAE9C,gBAAC,GAAD,CACE7V,SAAU,2BAAM6V,GAAwB,IACxCxY,WAAYA,OAhEf,Q,i2DCkOX,IAAMsZ,GAAc9c,kBAAO0E,KAAV,8EAAG1E,CAAH,oCAKX+c,GAAoB/c,UAAOC,IAAV,oFAAGD,CAAH,wDAInB,gBAAGgd,EAAH,EAAGA,aAAc/a,EAAjB,EAAiBA,MAAjB,OACA+a,GACAC,cADY,6QAUMhb,EAAMiT,WAECjT,EAAMC,QAI3B4a,OAYFlK,GAAW5S,kBAAOwE,KAAV,2EAAGxE,CAAH,sFAORkd,GAAcld,kBAAOmd,WAAV,8EAAGnd,CAAH,4CAMX2B,GAAQ3B,kBAAOwE,KAAV,wEAAGxE,CAAH,2CAKIW,gBAvYf,SAASyc,kBACP,IAAMvN,EAASwN,cACT3M,EAAUsI,cACVzI,EAAQ+M,cACNzc,EAAMC,cAAND,EAJiB,EAKwBG,cAAzCD,EALiB,EAKjBA,UAAWuN,EALM,EAKNA,SAAUzC,EALJ,EAKIA,YAAa0R,EALjB,EAKiBA,GAClC1Z,EAAckG,eAAdlG,UACFU,EAAO8J,eAPY,2BAQSjI,aART,GAQlBoX,EARkB,KAQNC,EARM,gCASCrX,aATD,GASlBjC,EATkB,KASXuZ,EATW,gCAcrB1T,eAdqB,GAWvB2T,EAXuB,KAYvBC,EAZuB,KAavBC,EAbuB,KAgBnBpa,EAAKoM,EAAOpM,IAAM,GAClBD,EACJqI,EAAYiS,SAASra,IAAOoI,EAAYF,IAAIlI,GACxCwO,EAAM3D,EAASE,WAAUhL,aAAA,EAAAA,EAAYC,KAAM,IAC3Csa,EAAUzP,EAASE,UAAUjK,EAAKd,IApBf,EAqBYmV,mBAAkBpV,aAAA,EAAAA,EAAYC,KAAM,IAAjEwV,EArBiB,EAqBjBA,YAAaH,EArBI,EAqBJA,YAErB1S,aAAgB,WACd,GAAI5C,EAAY,CACd,IAAMwa,EAAeC,aAAoB1N,EAAMmJ,IAAKlW,GAChD+M,EAAMmJ,MAAQsE,GAChBtN,EAAQC,QAAQqN,MAGnB,CAACxa,EAAYkN,EAASjN,EAAI8M,EAAMmJ,MAEnCtT,aAAgB,WACV5C,GACF+Z,EAAGW,oBAAoB1a,KAExB,CAAC+Z,EAAI/Z,IAER4C,aAAgB,WACdsX,EAAS,MACLla,GACFzC,EAAUod,YAAY,CAAE5a,aAAcC,EAAWC,OAElD,CAAC1C,EAAWyC,IAEf4C,aAAgB,WAAM,mFACpB,+GACQ6L,GAAQzO,GAAgBW,GAAUqZ,EAD1C,iCAGME,EAAS,MACTD,GAAY,GAJlB,SAKY5R,EAAYxK,MAAMoC,GAL9B,uDAOMia,EAAS,EAAD,IAPd,yBASMD,GAAY,GATlB,mFADoB,gCACLW,OADK,mCAcpBA,KACC,CAACvS,EAAa2R,EAAYha,EAAYW,EAAOV,EAAIwO,IAEpD,IAAMoM,EAAkBjY,eAAkB,WACxCvC,EACEhD,EAAE,oEACF,CAAEmD,KAAM,YAET,CAACnD,EAAGgD,IAEP,IAAKL,GAAcW,EACjB,OAAO,gBAAC,GAAD,CAAQsN,UAAQ,IAGzB,IAAM6M,EAAkB9a,EACpBzC,EAAUwd,mBAAmB/a,EAAWC,IACxC,GACEsH,EAAiBvH,EAAaA,EAAWO,KAAO,GAChDya,IAAuBF,EAAgBlT,OAE7C,OAAO5H,EACL,gBAACtD,EAAA,EAAD,CACEO,UAAU,EACVJ,UAAWmD,EAAWO,KACtB5D,MACE,gCACE,gBAAC+O,GAAA,EAAD,CAAgB1L,WAAYA,EAAYib,UAAQ,IADlD,IAGGjb,EAAWO,MAGhBzD,QACE,gCACE,gBAAC,KAAD,KACE,gBAAC,GAAD,CACE2X,OAAO,aACPnT,YAAW,UAAKjE,EAAE,wBAAP,KACXwB,MAAK,UAAKxB,EAAE,wBAAP,KACL0C,aAAcC,EAAWC,MAG5BwO,EAAIhD,QACH,gCACE,gBAAC,KAAD,KACE,gBAACyP,GAAA,EAAD,CACEC,QAAS9d,EAAE,gBACX+d,SAAS,IACTC,MAAO,IACPzD,UAAU,UAEV,gBAACvV,EAAA,EAAD,CACE6I,GAAIC,IACJC,GAAIpL,EAAaqL,aAAerL,EAAWC,IAAM,GACjD+E,UAAWhF,EACXpD,KAAM,gBAAC,WAAD,OAELS,EAAE,cAIT,gBAAC,KAAD,OAGJ,gBAAC,KAAD,KACE,gBAAC,GAAD,CACE2C,WAAYA,EACZ4X,UAAU,aACV/Y,MAAO,eAACL,GAAD,OACL,gBAAC6D,EAAA,EAAD,oBACEzF,KAAM,gBAAC,WAAD,OACF4B,EAFN,CAGE8c,eAAa,EACbhZ,SAAO,EACPiJ,OAAK,WAQjB,gBAAC,IAAD,CACE2N,OAAQ3b,EAAU4b,gBAAgBC,KAAK,MACvCmC,eAAgB9F,EAChB+F,eAAgBX,EAChB7V,UAAWyJ,EAAIhD,OACfgQ,SAAO,EACPC,UAAQ,IAEP,gBACCC,EADD,EACCA,aACAC,EAFD,EAECA,cACApC,EAHD,EAGCA,aAHD,EAICqC,aAJD,EAKCC,aALD,OAOC,gBAACvC,GAAD,sBACMoC,IADN,CAEEnC,aAAcA,EACdH,SAAS,OAET,wBAAWuC,KACVtG,GAAe,gBAACzG,GAAA,EAAD,MAEhB,gBAAC6B,GAAA,EAAD,CAAiBxT,kBAAgB,GAC9B8C,EAAW2H,QACV,gBAAC,GAAD,CAAU1G,QAAM,GACd,gBAACC,EAAA,EAAD,KACE,gBAACiD,EAAA,EAAD,CACE2D,SAAS,mEAETC,OAAQ,CAAER,kBACVS,WAAY,CAAEC,GAAI,kCAEpB,2BACCsS,EAAQtP,gBACP,gBAAC9G,EAAA,EAAD,4CAGJ,gBAAC,GAAD,KACGoW,EAAQtP,gBACP,gBAAC,IAAD,CAAMG,GAAIC,aAAerL,EAAWC,KAClC,gBAACoC,EAAA,EAAD,CAAQzF,KAAM,gBAAC,kBAAD,CAAiBa,MAAM,kBAClCJ,EAAE,uBAJX,KASE,gBAACgF,EAAA,EAAD,CAAQjB,QAASgZ,EAA4B9X,SAAO,GACjDjF,EAAE,sBADL,MAIF,gBAACkF,EAAA,EAAD,CACE5F,MAAOU,EAAE,0BACTmF,eAAgB6X,EAChB5X,OAAQ0X,GAER,gBAAC,GAAD,CAAuBna,WAAYA,MAIvC,gCACE,gBAACtC,EAAA,EAAD,KACE,gBAACgO,GAAA,EAAD,CACE1L,WAAYA,EACZ8E,KAAM,GACNmW,UAAQ,IACP,IACFjb,EAAWO,KAAM,KAChBP,EAAWG,YACX,gBAAC+a,GAAA,EAAD,CACEC,QAAS9d,EACP,yDAEFua,UAAU,UAEV,gBAACrT,EAAA,EAAD,KAAQlH,EAAE,cAIhB,gBAAC,GAAD,CAAuB2C,WAAYA,IAElCgb,GACC,gCACE,gBAAChd,EAAA,EAAD,CAAYC,QAAM,GAChB,gBAACyb,GAAD,CAAa5U,KAAM,GAAIrH,MAAM,iBAAkB,IAC9CJ,EAAE,WAEL,gBAAC+W,aAAD,CAAc7W,UAAWud,EAAiBiB,SAAO,KAIrD,gBAACC,GAAA,EAAD,KACE,gBAACC,GAAA,EAAD,CAAK7Q,GAAI8Q,aAAclc,EAAWkW,KAAMiG,OAAK,GAC1C9e,EAAE,cAEL,gBAAC4e,GAAA,EAAD,CAAK7Q,GAAI8Q,aAAclc,EAAWkW,IAAK,WAAYiG,OAAK,GACrD9e,EAAE,qBAEL,gBAAC4e,GAAA,EAAD,CAAK7Q,GAAI8Q,aAAclc,EAAWkW,IAAK,aAAciG,OAAK,GACvD9e,EAAE,uBAEL,gBAAC4e,GAAA,EAAD,CAAK7Q,GAAI8Q,aAAclc,EAAWkW,IAAK,OAAQiG,OAAK,GACjD9e,EAAE,2BAEL,gBAAC4e,GAAA,EAAD,CACE7Q,GAAI8Q,aAAclc,EAAWkW,IAAK,gBAClCiG,OAAK,GAEJ9e,EAAE,SAGP,gBAAC,IAAD,KACE,gBAAC,IAAD,CAAO+e,KAAMF,aAAclc,EAAWkW,IAAK,iBACzC,gBAACvY,EAAA,EAAD,CACEsE,IAAI,eACJ1E,UAAWA,EAAU8e,yBACnBrc,EAAWC,IAEbpC,MAAON,EAAU+e,kBACjBxd,QAAS,CAAEiB,aAAcC,EAAWC,IACpC8b,SAAO,KAGX,gBAAC,IAAD,CAAOK,KAAMF,aAAclc,EAAWkW,IAAK,QACzC,gBAACvY,EAAA,EAAD,CACEsE,IAAI,MACJ1E,UAAWA,EAAUgf,iCACnBvc,EAAWC,IAEbpC,MAAON,EAAUif,0BACjB1d,QAAS,CAAEiB,aAAcC,EAAWC,IACpC8b,SAAO,KAGX,gBAAC,IAAD,CAAOK,KAAMF,aAAclc,EAAWkW,IAAK,WACzC,gBAAC,IAAD,CACE9K,GAAI8Q,aAAclc,EAAWkW,IAAK,gBAGtC,gBAAC,IAAD,CAAOkG,KAAMF,aAAclc,EAAWkW,IAAK,cACzC,gBAACvY,EAAA,EAAD,CACEsE,IAAI,YACJ1E,UAAWA,EAAUkf,8BACnBzc,EAAWC,IAEbpC,MAAON,EAAUmf,uBACjB5d,QAAS,CAAEiB,aAAcC,EAAWC,IACpC0c,eAAa,EACbZ,SAAO,KAGX,gBAAC,IAAD,CAAOK,KAAMF,aAAclc,EAAWkW,IAAK,YACzC,gBAACvY,EAAA,EAAD,CACEsE,IAAI,UACJ1E,UAAWA,EAAUqf,4BACnB5c,EAAWC,IAEbpC,MAAON,EAAUsf,qBACjB/d,QAAS,CAAEiB,aAAcC,EAAWC,IACpC8b,SAAO,KAGX,gBAAC,IAAD,CAAOK,KAAMF,aAAclc,EAAWkW,KAAMiG,OAAK,GAC/C,gBAACxe,EAAA,EAAD,CACEJ,UAAWA,EAAUuf,iBAAiB9c,EAAWC,IACjDpC,MAAON,EAAUmC,UACjBZ,QAAS,CACPiB,aAAcC,EAAWC,GACzB8c,iBAAkB,KAClBnG,KAAM5W,EAAW4W,KAAKG,MACtBC,UAAW,OAEbgG,qBAAmB,EACnBjB,SAAO,OAMjB,gBAACzC,GAAD,KAAcjc,EAAE,mCAO1B,gBAACqT,GAAA,EAAD,KACE,gBAAChT,EAAA,EAAD,KACE,gBAACuf,GAAA,EAAD,CAAiBlM,OAAQ,MAE3B,gBAAC,KAAD,CAAiBmM,MAAO,Q,0dCjUf/f,I,SAAAA,gBA5Cf,SAASggB,cACP,IAAMjQ,EAAUsI,cACVjJ,EAAW6Q,cACXrQ,EAAQ+M,cACNzc,EAAMC,cAAND,EAJa,EAKcG,cAA3BD,EALa,EAKbA,UAAW8K,EALE,EAKFA,YACXhI,EAAckG,eAAdlG,UACFJ,EAAK8M,EAAMV,OAAOpM,IAAM,GA4B9B,OA1BAod,qBAAU,WAAM,wGACd,6HACQhR,EAASgB,KAAYE,MAAMhB,EAASC,QAD5C,kBAG6BnE,EAAYxK,MAAMoC,GAH/C,cAGUD,EAHV,gBAK2BzC,EAAUuC,OAAO,CACtCC,aAAcC,EAAWC,GACzB8c,iBAAkB1Q,EAAO0Q,iBACzBO,WAAYjR,EAAOiR,WACnBC,SAAUlR,EAAOkR,SACjB5gB,MAAO,GACPsN,KAAM,KAXZ,OAKU8F,EALV,OAcI7C,EAAQC,QAAQqQ,aAAgBzN,IAdpC,kDAgBI1P,EAAUhD,EAAE,4CAA6C,CACvDmD,KAAM,UAER0M,EAAQlB,SAnBZ,iEADc,gCACCf,iBADD,6CAuBdA,MAIA,gBAACjK,EAAA,EAAD,CAAMC,QAAM,EAAC0N,MAAI,GACf,gBAAC+B,GAAA,EAAD,KACE,gBAAC+M,GAAA,EAAD,W,ksFCrBFC,GADLvgB,a,ymBAYCiP,kBAAoB,WAClB,EAAKC,OAAS,IAAIC,gBAAgB,EAAK9N,MAAM+N,SAASC,S,EAGxDS,mBAAqB,SAACT,GAIpB,EAAKhO,MAAM0O,QAAQC,QAAQ,CACzBC,SAAU,EAAK5O,MAAM+N,SAASa,SAC9BZ,OAAQa,KAAYC,UAAZ,2CAEDD,KAAYE,MAAM,EAAK/O,MAAM+N,SAASC,SACtCA,GAEL,CAAEgB,iBAAiB,O,sMArBNQ,GACbA,EAAUzB,SAASC,SAAW5L,KAAKpC,MAAM+N,SAASC,QACpD5L,KAAKwL,sB,sCAkCA,WACC/O,EAAMuD,KAAKpC,MAAXnB,EADD,EAEyBuD,KAAKpC,MAAMjB,UAAnCogB,EAFD,EAECA,OAAQC,EAFT,EAESA,YACVC,EAAajd,KAAKb,cAAgBa,KAAKmI,WACvCjK,EAAU,CACdiK,WAAYnI,KAAKmI,WACjBhJ,aAAca,KAAKb,cAGrB,OACE,gBAACrD,EAAA,EAAD,CACEE,KAAM,gBAAC,WAAD,CAAUa,MAAM,iBACtBd,MAAOU,EAAE,UACTP,QACE,gCACE,gBAAC,KAAD,KACE,gBAAC,GAAD,CAAiB2X,OAAO,SAAS5V,MAAOxB,EAAE,uBAE5C,gBAAC,KAAD,KACE,gBAAC,GAAD,SAKN,gBAACK,EAAA,EAAD,KAAUL,EAAE,WACZ,gBAACW,EAAA,EAAD,CAAYC,QAAM,GACfZ,EAAE,aACH,gBAAC,GAAD,KACE,gBAAC,GAAD,CACE0C,aAAca,KAAKb,aACnBuI,SAAU,kBAACvI,GAAD,OACR,EAAKkN,mBAAmB,CAAElN,oBAG9B,gBAAC,GAAD,CACEgJ,WAAYnI,KAAKmI,WACjBT,SAAU,kBAACS,GAAD,OAAgB,EAAKkE,mBAAmB,CAAElE,oBAK1D,gBAACpL,EAAA,EAAD,CACEO,MACE,gBAACC,EAAA,EAAD,KAEMd,EADHwgB,EACK,uCACA,6CAGVhgB,MAAO+f,EACPrgB,UAAWogB,EAAO7e,GAClBA,QAASA,EACTV,gBAAc,O,uCA7DpB,IAAM6B,EAAKW,KAAKyL,OAAOlE,IAAI,gBAC3B,OAAOlI,QAAU4B,I,qCAIjB,IAAM5B,EAAKW,KAAKyL,OAAOlE,IAAI,cAC3B,OAAOlI,QAAU4B,M,QAtCAe,a,meAClBC,K,qFAAqC,IAAIyJ,gBACxC1L,KAAKpC,MAAM+N,SAASC,W,YAkGlB2C,GAAU3S,kBAAOwE,KAAV,kEAAGxE,CAAH,iIAaEsG,iBAA0BC,YAAO,YAAPA,CAAoB2a,K,wEC3H9CI,GAlBAthB,UAAOuhB,EAAV,oEAAGvhB,CAAH,qKACI,SAACgC,GAAD,OAAWA,EAAMC,MAAMuf,MAAMC,UAClC,SAACzf,GAAD,OAAWA,EAAMC,MAAMyf,eAOrB,SAAC1f,GAAD,OAAWA,EAAMC,MAAMyf,e,sQCgCrB,SAASC,iBAAiB,MAClB3gB,cAAbqD,EAD+B,EAC/BA,KAAMkZ,EADyB,EACzBA,GACN1c,EAAMC,cAAND,EACFyD,EAAOwF,eACP8X,EAAWC,eAEjB,GAAiB,UAAbD,GAAwBA,IAAatd,EAAKsd,SAC5C,OAAO,KAGT,IAAKE,KAAUC,SAASH,GACtB,OAAO,KAGT,IAAMI,EAAS,KAAKC,MAAiB,SAACC,GAAD,OAAOA,EAAE3f,QAAUqf,KAClDO,EAAcH,EAASA,EAAO3f,MAAQ,GAE5C,OACE,gBAAC+f,GAAD,KACE,gBAAC5d,EAAA,EAAD,CAAM+D,MAAM,UACV,gBAAC8Z,GAAD,MACA,4BACE,gBAAC1a,EAAA,EAAD,8CACyC,CAAEwa,eAD3C,+BAIA,2BACA,gBAACxT,GAAD,CACE/J,QAAS,mBACPP,EAAKie,WAAW,CACdV,aAEFrE,EAAGgF,+BAGJ1hB,EAAE,oBACG,IAfV,IAgBW,IACT,gBAAC8N,GAAD,CAAM/J,QAAS2Y,EAAGgF,4BAA6B1hB,EAAE,eAO3D,IAAM8N,GAAO3O,kBAAO2E,KAAV,uEAAG3E,CAAH,mEACC,SAACgC,GAAD,OAAWA,EAAMC,MAAMyf,eAQ5BW,GAAeriB,mBArFrB,SAASwiB,KAAKxgB,GACZ,OACE,8CACEsS,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRC,KAAK,OACLC,MAAM,8BACF1S,GAEJ,wBACEygB,YAAU,UACVC,YAAU,UACV/N,EAAE,+RACFF,KAAK,YAEP,wBACEgO,YAAU,UACVC,YAAU,UACV/N,EAAE,msBACFF,KAAK,YAEP,wBACEE,EAAE,4RACFF,KAAK,UACLkO,OAAO,gBA4DG,+EAAG3iB,CAAH,wBCRHW,oBAxEf,SAASiiB,OAAO,MACkB5hB,cAAxBD,EADM,EACNA,UAAWwc,EADL,EACKA,GAAIlZ,EADT,EACSA,KACfxD,EAAMC,cAAND,EAER,IAAKwD,EAAKC,OAASD,EAAKE,KAAM,OAAO,KACrC,IAAMD,EAAOD,EAAKC,KAAKb,GAEvB,OACE,gBAACvD,EAAA,EAAD,CACEE,KAAM,gBAAC,WAAD,CAAUa,MAAM,iBACtBd,MAAOU,EAAE,QACTP,QACE,gCACE,gBAAC,KAAD,KACE,gBAAC,GAAD,CAAiB2X,OAAO,YAAY5V,MAAOxB,EAAE,uBAE/C,gBAAC,KAAD,KACE,gBAAC,GAAD,UAKJ0c,EAAGsF,yBAA2B,gBAAClB,eAAD,MAChC,gBAACzgB,EAAA,EAAD,KAAUL,EAAE,SACZ,gBAAC2e,GAAA,EAAD,KACE,gBAACC,GAAA,EAAD,CAAK7Q,GAAG,QAAQ+Q,OAAK,GAClB9e,EAAE,oBAEL,gBAAC4e,GAAA,EAAD,CAAK7Q,GAAG,eAAe+Q,OAAK,GACzB9e,EAAE,qBAEL,gBAAC4e,GAAA,EAAD,CAAK7Q,GAAG,iBAAiB/N,EAAE,mBAE7B,gBAAC,IAAD,KACE,gBAAC,IAAD,CAAO+e,KAAK,gBACV,gBAACze,EAAA,EAAD,CACEJ,UAAWA,EAAU+hB,gBACrBzhB,MAAON,EAAUsf,qBACjB3e,MAAO,gBAACC,EAAA,EAAD,KAAQd,EAAE,wCACjBe,gBAAc,KAGlB,gBAAC,IAAD,CAAOge,KAAK,iBACV,gBAACze,EAAA,EAAD,CACEsE,IAAI,UACJ1E,UAAWA,EAAUgiB,cAAcze,GACnCjD,MAAON,EAAUiiB,WACjB1gB,QAAS,CAAEgC,QACX5C,MAAO,gBAACC,EAAA,EAAD,KAAQd,EAAE,wCACjBe,gBAAc,KAGlB,gBAAC,IAAD,CAAOge,KAAK,SACV,gBAACze,EAAA,EAAD,CACEsE,IAAI,SACJ1E,UAAWA,EAAUkiB,eACrB5hB,MAAON,EAAUmiB,oBACjBxhB,MACE,gBAACC,EAAA,EAAD,KACGd,EACC,kEAINe,gBAAc,UCnBXjB,oBA1Cf,SAASwiB,QAAQnhB,GAAc,IACrBjB,EAAcC,cAAdD,UACAF,EAAMC,cAAND,EACAuiB,EAA+CriB,EAA/CqiB,aAAcC,EAAiCtiB,EAAjCsiB,QAASC,EAAwBviB,EAAxBuiB,oBACvBlJ,EAASpY,EAAMuO,MAAMV,OAArBuK,KAER,OACE,gBAACla,EAAA,EAAD,CACEE,KAAM,gBAAC,cAAD,CAAaa,MAAM,iBACzBd,MAAOU,EAAE,WACTP,QACE,gCACE,gBAAC,KAAD,KACE,gBAAC,GAAD,CAAiB2X,OAAO,UAAU5V,MAAOxB,EAAE,uBAE7C,gBAAC,KAAD,KACE,gBAAC,GAAD,SAKN,gBAACK,EAAA,EAAD,KAAUL,EAAE,YACZ,gBAACM,EAAA,EAAD,CACEI,QACE,gBAACie,GAAA,EAAD,KACE,gBAACC,GAAA,EAAD,CAAK7Q,GAAG,WAAW+Q,OAAK,GACrB9e,EAAE,qBAEL,gBAAC4e,GAAA,EAAD,CAAK7Q,GAAG,wBAAwB+Q,OAAK,GAClC9e,EAAE,kBAITa,MAAO,gBAACC,EAAA,EAAD,KAAQd,EAAE,0CACjBQ,MAAO+hB,EACPriB,UAAoB,iBAATqZ,EAA0BkJ,EAAsBD,EAC3DzhB,gBAAc,Q,2PCEtB,IAAMuM,GAAiBnO,UAAOC,IAAV,sFAAGD,CAAH,gEAMLW,gBAhDf,SAAS4iB,kBACP,IAAM7c,EAAOC,YAAa,CAAEC,OAAO,IAC3B/F,EAAMC,cAAND,EACF0D,EAAO8J,eAHY,EAISrN,cAA1B6K,EAJiB,EAIjBA,YAAayC,EAJI,EAIJA,SAGrB,OAFYA,EAASE,UAAUjK,EAAKd,IAE3BgL,eAKP,gCACE,gBAACK,GAAA,EAAepI,GACb,SAAC1E,GAAD,OACC,gBAAC6D,EAAA,EAAD,yBAAQzF,KAAM,gBAAC,WAAD,OAAkB4B,EAAhC,CAAuC+M,OAAK,IACzClO,EAAE,gBADL,QAKJ,gBAACkG,GAAA,EAAD,yBAAaD,aAAYjG,EAAE,iBAAqB6F,GAC9C,gBAACsI,GAAA,EAAD,KAASnO,EAAE,wBACX,gBAACmG,GAAA,EAAD,2BACMN,EADN,CAEEvB,MAAO0G,EAAYG,YAAYC,KAAI,SAACzI,GAAD,MAAiB,CAClDoL,GAAIC,aAAerL,EAAWC,GAAI,CAChCsd,UAAU,IAEZvY,UAAW8F,EAASE,UAAUhL,EAAWC,IAAIwL,OAC7C9O,MACE,gBAACqE,EAAA,EAAD,CAAM+D,MAAM,UACV,gBAAC2G,GAAA,EAAD,CAAgB1L,WAAYA,IAC5B,gBAAC,GAAD,KAAiBA,EAAWO,gBAxBjC,QC4CIpD,oBAhDf,SAAS6iB,UAAUxhB,GAAc,MACChB,cAAxBD,EADuB,EACvBA,UAAWuN,EADY,EACZA,SACXzN,EAAMC,cAAND,EACF0D,EAAO8J,eACLoV,EAAqD1iB,EAArD0iB,eAAgBC,EAAqC3iB,EAArC2iB,UAAWC,EAA0B5iB,EAA1B4iB,sBAC3BvJ,EAASpY,EAAMuO,MAAMV,OAArBuK,KACFnI,EAAM3D,EAASE,UAAUjK,EAAKd,IAEpC,OACE,gBAACvD,EAAA,EAAD,CACEE,KAAM,gBAAC,eAAD,CAAca,MAAM,iBAC1Bd,MAAOU,EAAE,aACTP,QACE,gBAAC,KAAD,KACE,gBAAC,GAAD,QAIJ,gBAACY,EAAA,EAAD,KAAUL,EAAE,cACZ,gBAACM,EAAA,EAAD,CACEI,QACE,gBAACie,GAAA,EAAD,KACE,gBAACC,GAAA,EAAD,CAAK7Q,GAAG,aAAa+Q,OAAK,GACvB9e,EAAE,qBAEL,gBAAC4e,GAAA,EAAD,CAAK7Q,GAAG,0BAA0B+Q,OAAK,GACpC9e,EAAE,kBAITa,MACE,gBAACC,EAAA,EAAD,KACGd,EAAE,oCACFoR,EAAIxD,gBACH5N,EACE,6FAIRQ,MAAOoiB,EACP1iB,UAAoB,iBAATqZ,EAA0BuJ,EAAwBD,EAC7D9hB,gBAAc,EACdgiB,WAAS,QChCFjjB,oBAnBf,SAASkjB,QAAQ,IACPhjB,EAAMC,cAAND,EACAE,EAAcC,cAAdD,UAER,OACE,gBAACb,EAAA,EAAD,CAAOE,KAAM,gBAAC,YAAD,CAAWa,MAAM,iBAAmBd,MAAOU,EAAE,UACxD,gBAACK,EAAA,EAAD,KAAUL,EAAE,UACZ,gBAACM,EAAA,EAAD,CACEJ,UAAWA,EAAU+iB,QACrBziB,MAAON,EAAUgjB,aACjBxiB,QAAS,gBAACC,EAAA,EAAD,CAAYC,QAAM,GAAEZ,EAAE,cAC/Ba,MAAO,gBAACC,EAAA,EAAD,KAAQd,EAAE,kCACjBe,gBAAc,EACdC,cAAY,Q,aCQL0E,I,UAAAA,YAAO,OAAPA,CAAe5F,aAxBP,SAAjBqjB,eAAkB,GAAkC,IAAhC3f,EAAgC,EAAhCA,KAChBxD,EAAMC,cAAND,EAER,OACE,gBAACqT,GAAA,EAAD,KACE,gBAAC9B,GAAA,EAAD,CAAWjS,MAAOU,EAAE,qCACpB,0BACE,wBAAMojB,KAAK,MAAMnd,aAAW,gBAA5B,MAEQ,IACPjG,EAAE,oCAGL,yBACE,gBAAC8G,EAAA,EAAD,CACE2D,SAAS,kJACTC,OAAQ,CAAE2Y,sBAAuB7f,EAAK6f,uBACtC1Y,WAAY,CAAEC,GAAI,yC,qeC2Cb9K,oBA9Cf,SAASwjB,aAAT,GAA2E,IAAnD5Q,EAAmD,EAAnDA,SAAU6Q,EAAyC,EAAzCA,SAAUC,EAA+B,EAA/BA,UAAWC,EAAoB,EAApBA,UAC7CzgB,EAAckG,eAAdlG,UACF6C,EAAOC,YAAa,CAAEC,OAAO,IAC3B/F,EAAMC,cAAND,EACF6P,EAAUsI,cAEVuL,EAAgBne,cAAA,iB,0TAAA,0BACpB,iBAAOvD,GAAP,gGACEA,EAAG0M,iBADL,SAEQgE,EAASiR,QAAQ,CAAEC,WAAYL,EAAS3gB,KAFhD,OAGEI,EAAUhD,EAAE,qBAAsB,CAAEmD,KAAM,YAC1C0M,EAAQQ,KAAKqC,EAASmG,KAJxB,iDADoB,sDAOpB,CAAChJ,EAAS7M,EAAWhD,EAAG0S,EAAU6Q,IAG9BM,EAAate,eAAkB,WACnCvC,EAAUhD,EAAE,eAAgB,CAAEmD,KAAM,WACnC,CAACH,EAAWhD,IAET6Y,EAAM,GAAH,OAAMiL,OAAO5U,SAAS6U,QAAtB,OAA+BC,aACtCtR,EACA6Q,EAAS3gB,KAGX,OACE,gCACE,gBAACoD,GAAA,EAAD,sBACEwd,UAAWA,EACXC,UAAWA,EACXxd,aAAYjG,EAAE,cACV6F,IAEN,gBAACK,GAAA,EAAD,wBAAiBL,EAAjB,CAAuBI,aAAYjG,EAAE,sBACnC,gBAACikB,GAAA,EAAD,wBAAcpe,EAAd,CAAoB9B,QAAS2f,IAC1B1jB,EAAE,oBAEL,gBAACkkB,GAAA,EAAD,MACA,gBAACC,GAAA,EAAD,CAAiBvX,KAAMiM,EAAKuL,OAAQP,GAClC,gBAACI,GAAA,EAAape,EAAO7F,EAAE,oB,0vDCtC3BqkB,G,+nBACK,MACmD9gB,KAAKpC,MAAvDoiB,EADD,EACCA,SAAU7Q,EADX,EACWA,SAAU4R,EADrB,EACqBA,SAAUC,EAD/B,EAC+BA,SAAUnjB,EADzC,EACyCA,MAEhD,OACE,gBAACojB,GAAD,CACEzW,GAAIiW,aAAmBtR,EAAU6Q,EAAS3gB,IAC1C6hB,YAAa,CAAEpQ,WAAYjT,EAAMgG,QAAShH,MAAOgB,EAAMsjB,QAEvD,gBAACC,GAAD,KACE,gBAACC,GAAD,CAAcrd,IAAKgc,EAASsB,UAAUrd,YAAc,IACnD+b,EAASsB,UAAU3hB,MAEtB,gBAAC4hB,GAAD,KACE,gBAAC/d,EAAA,EAAD,CAAMC,SAAUuc,EAASwB,UAAWC,aAAc,KAC/CC,aAAOC,KAAKhV,MAAMqT,EAASwB,WAAY,0BAG3CT,GACC,gBAACa,GAAD,CACEzS,SAAUA,EACV6Q,SAAUA,EACVE,UAAWc,EAAWnjB,EAAMsjB,MAAQtjB,EAAMkL,oB,kBAtBvB/G,aA8BzBqf,GAAezlB,kBAAOmI,KAAV,6EAAGnI,CAAH,gDAKZgmB,GAAqBhmB,kBAAOmkB,IAAV,mFAAGnkB,CAAH,4CAMlBqlB,GAAgBrlB,kBAAOimB,KAAV,8EAAGjmB,CAAH,gFACR,SAACgC,GAAD,OAAWA,EAAMC,MAAMwL,QAO5B+X,GAASxlB,kBAAOwE,KAAV,uEAAGxE,CAAH,yCAMN2lB,GAAO3lB,UAAOuhB,EAAV,qEAAGvhB,CAAH,2DAOK2N,uBAAUuX,I,o0GCzDnBgB,GADLvlB,a,umCAaCgP,a,0DAAe,2HACb,EAAK6N,YAAa,EAEZxP,EAAQ+F,KAHD,SAIS,EAAK/R,MAAMmkB,UAAUjjB,UAAU,CACnD8K,QACAiC,OAAQ,EAAKA,OACb4I,WAAY,EAAK7W,MAAMuO,MAAMV,OAAOuW,eAPzB,QAIP1U,EAJO,UAYS,IAAnBA,EAAQtG,QAAgBsG,EAAQtG,OAAS2I,MAE1C,EAAK7D,eAAgB,EAErB,EAAKD,QAAU8D,KAGjB,EAAKsS,UAAW,EAChB,EAAK7I,YAAa,EApBL,iD,EAuBf8I,oBAAsB,WACpB,GAAI,EAAKH,UAAU/a,OAAQ,CACzB,IAAMmI,EAAW,EAAKvR,MAAMjB,UAAU+c,SACpC,EAAK9b,MAAMuO,MAAMV,OAAOuW,cAE1B,IAAK7S,EAAU,OAEf,EAAKvR,MAAM0O,QAAQC,QACjBkU,aAAmBtR,EAAU,EAAK4S,UAAU,GAAG1iB,O,6GAoBrD8iB,eAAiB,WACf,IAAMhT,EAAW,EAAKvR,MAAMjB,UAAU+c,SACpC,EAAK9b,MAAMuO,MAAMV,OAAOuW,cAG1B,EAAKI,WAAaC,aAAYlT,I,wYA5DxBnP,KAAKyP,kB,OACXzP,KAAKkiB,sB,4JA8DE,WACD/S,EAAWnP,KAAKpC,MAAMjB,UAAU+c,SACpC1Z,KAAKpC,MAAMuO,MAAMV,OAAOuW,cAEpBM,GAAgBtiB,KAAKiiB,UAAYjiB,KAAKoZ,aAAgBjK,EAE5D,OAAInP,KAAKoiB,WAAmB,gBAAC,IAAD,CAAU5X,GAAIxK,KAAKoiB,WAAYtV,MAAI,IAG7D,gBAACyV,GAAD,KACE,gBAAC,GAAD,CAASliB,QAAM,GACb,gBAAC,GAAD,KACE,gBAACmiB,GAAD,gBACA,gBAAC/gB,EAAA,EAAD,CACEzF,KAAM,gBAAC,YAAD,MACNwE,QAASR,KAAKmiB,eACdzH,eAAa,EACbhZ,SAAO,KAGV4gB,EACC,gBAACG,GAAD,KACE,gBAAC,KAAD,CAAiBnG,MAAO,KAG1B,gBAAC,KAAD,CACEzN,KAAMC,KAAmBD,KAAKE,SAC9BC,wBAAyB,GAExBhP,KAAK+hB,UAAUla,KAAI,SAACmY,EAAU9Q,GAAX,OAClB,gBAAC,GAAD,CACE7N,IAAK2e,EAAS3gB,GACd2gB,SAAUA,EACV7Q,SAAUA,EACV4R,SAAoB,IAAV7R,EACV8R,SAAU,EAAKpjB,MAAMuO,MAAMV,OAAO4U,aAAeL,EAAS3gB,SAKjEW,KAAK8L,eACJ,gBAAC,KAAD,CAAUzK,IAAKrB,KAAK6L,OAAQ2D,QAASxP,KAAKyP,sB,oCAxDlD,IAAMN,EAAWnP,KAAKpC,MAAMjB,UAAU+c,SACpC1Z,KAAKpC,MAAMuO,MAAMV,OAAOuW,cAE1B,OAAK7S,EACEnP,KAAKpC,MAAMmkB,UAAUW,qBAAqBvT,EAAS9P,IADpC,O,iBA3DI2C,a,qEAC3BC,K,qFAA+B,K,uEAC/BA,K,qFAAiC,K,mEACjCA,K,qFAA4B,K,0EAC5BA,K,qFAAoC,K,uEACpCA,K,0IA2CAyN,K,0JACiB,iHAEX,EAAK5D,gBAAiB,EAAKsN,WAFhB,iEAGV,EAAK7N,eAHK,qD,YAuEdkX,GAAU7mB,UAAOC,IAAV,+EAAGD,CAAH,oBAIP6S,GAAU7S,kBAAOwE,KAAV,+EAAGxE,CAAH,kHAKE,SAACgC,GAAD,OAAWA,EAAMC,MAAM8kB,gBAMhCJ,GAAU3mB,kBAAOwE,KAAV,+EAAGxE,CAAH,0FAEG,SAACgC,GAAD,OAAWA,EAAMC,MAAMiT,cACxB,SAAClT,GAAD,OAAWA,EAAMC,MAAM8kB,gBACX,SAAC/kB,GAAD,OAAWA,EAAMC,MAAMC,UAG9CiS,aAAW,SAAXA,CAPS,mCAYPyS,GAAQ5mB,kBAAOwE,KAAV,6EAAGxE,CAAH,mLAaLgP,GAAShP,kBAAOwE,KAAV,8EAAGxE,CAAH,4GAIiB,SAACgC,GAAD,OAAWA,EAAMC,MAAMC,WACzC,SAACF,GAAD,OAAWA,EAAMC,MAAMwL,QChMnByY,GDoMA3f,YAAO,YAAa,YAApBA,CAAiC2f,I,qhGEzK1Cc,GADLrmB,a,8oCAQCsmB,qBAA+B,E,EAE/BlN,a,yEAAe,iBAAOlX,GAAP,sGACbA,EAAG0M,iBACH,EAAK2H,UAAW,EACV1T,EAAa,IAAI0jB,IACrB,CACEnjB,KAAM,EAAKA,KACXoW,QAAS,EAAKA,QACd/Z,KAAM,EAAKA,KACXa,MAAO,EAAKA,MACZ0C,WAAY,EAAKA,YAEnB,EAAK3B,MAAM6J,aAXA,kBAeLrI,EAAWqH,OAfN,OAgBX,EAAK7I,MAAMmE,WACX,EAAKnE,MAAM0O,QAAQQ,KAAK1N,EAAWkW,KAjBxB,kDAmBX,EAAK1X,MAAM4B,OAAOC,UAAU,KAAI8V,QAAS,CAAE3V,KAAM,UAnBtC,yBAqBX,EAAKkT,UAAW,EArBL,mF,wDAyBfuD,iBAAmB,SAAC5X,GAKlB,GAJA,EAAKkB,KAAOlB,EAAGE,OAAOR,OAIjB,EAAK0kB,oBAAqB,CAE7B,IADA,IACA,MADaE,OAAOC,KAAKC,MACzB,eAAwB,CAAnB,IAAM5hB,EAAG,KAEN6hB,EADOD,KAAM5hB,GACG6hB,SAAShN,MAAM,KAC/BiN,EAAY,EAAKxjB,KAAKyjB,cAAclN,MAAM,KAGhD,GAFgB,KAAaiN,EAAWD,GAE5Blc,OAAS,EAEnB,YADA,EAAKhL,KAAOqF,GAKhB,EAAKrF,KAAO,e,EAIhBqnB,qBAAuB,WACrB,EAAKR,qBAAsB,G,EAG7BS,uBAAyB,SAAC7kB,GACxB,EAAKc,WAAad,EAAGE,OAAOR,O,EAG9BmY,oBAAsB,SAAC7X,GACrB,EAAKsX,QAAUtX,EAAGE,OAAO4X,S,EAG3BlO,aAAe,SAACxL,EAAeb,GAC7B,EAAKa,MAAQA,EACb,EAAKb,KAAOA,G,4MAGL,MACagE,KAAKpC,MAAjBnB,EADD,EACCA,EAAGwD,EADJ,EACIA,KACLuW,IAAuBvW,EAAKE,MAAQF,EAAKE,KAAK4V,QAEpD,OACE,wBAAMhU,SAAU/B,KAAK2V,cACnB,gBAACrV,EAAA,EAAD,KACE,gBAACiD,EAAA,EAAD,0JAMF,gBAACnD,EAAA,EAAD,KACE,gBAACK,EAAA,EAAD,CACEb,KAAK,OACL3B,MAAOxB,EAAE,QACTkE,SAAUX,KAAKqW,iBACflY,MAAO6B,KAAKL,KACZ8W,UAAQ,EACR1R,WAAS,EACTlE,MAAI,IARR,IAWE,gBAAC6V,GAAA,EAAD,CACEO,OAAQjX,KAAKqjB,qBACb1iB,SAAUX,KAAKqI,aACfxL,MAAOmD,KAAKnD,MACZb,KAAMgE,KAAKhE,QAGf,gBAAC+B,sBAAD,CACEI,MAAO6B,KAAKT,WACZoB,SAAUX,KAAKsjB,uBACfrc,OAAK,IAEP,gBAAC3G,EAAA,EAAD,KACE,gBAACiD,EAAA,EAAD,sJAMDiT,GACC,gCACE,gBAACG,GAAA,EAAD,CACEtX,GAAG,UACHpB,MAAOxB,EAAE,2BACTkE,SAAUX,KAAKsW,oBACfC,QAASvW,KAAK+V,UAEhB,gBAACzV,EAAA,EAAD,KACE,gBAACiD,EAAA,EAAD,0EAON,gBAAC9B,EAAA,EAAD,CAAQ7B,KAAK,SAASwE,SAAUpE,KAAK8S,WAAa9S,KAAKL,MACpDK,KAAK8S,SAAL,UAAmBrW,EAAE,YAArB,KAAsCA,EAAE,gB,eAtIvBuF,a,+DACzBC,K,oFAA0B,M,+DAC1BA,K,oFAA0B,M,gEAC1BA,K,oFAA2B,a,kEAC3BA,K,qFAA8B,K,qEAC9BA,K,oFAAgC,gB,mEAChCA,K,0EAuIYC,iBACbC,YAAO,cAAe,SAAU,OAAhCA,CAAwC6N,YAAW4S,M,aC1J/CW,GAAQ3nB,UAAOC,IAAV,oEAAGD,CAAH,+UACI4nB,MAEJ,SAAC5lB,GAAD,OAAWA,EAAMC,MAAMsjB,SAClB,SAACvjB,GAAD,OAAWA,EAAMC,MAAM4lB,aAiBxBC,GA7BA,SAATA,OAAU,GAAqB,IAAnBpH,EAAmB,EAAnBA,MAChB,OAAKA,EAIE,gBAACiH,GAAD,KAAQjH,GAHN,M,0BCCIqH,GATM/nB,UAAOC,IAAV,mEAAGD,CAAH,+E,6gBCSlB,IAAMgoB,GAAS5hB,cACb,WAAgDiH,GAAQ,QAArDmN,iBAAqD,MAAzC,OAAyC,EAAjC5V,EAAiC,EAAjCA,QAASqjB,EAAwB,EAAxBA,MAC9B,OACE,gBAACC,GAAD,CAAYD,MAAOA,GACjB,gBAACE,GAAD,CAAc9a,IAAKA,EAAK+a,WAAY5N,EAAW5V,QAASA,GACtD,gBAACyP,MAAD,WAOG8T,GAAenoB,UAAOqoB,OAAV,2EAAGroB,CAAH,8MAKZ,SAACgC,GAAD,MAAiC,SAArBA,EAAMomB,WAAwB,GAAK,KAMjD,SAACpmB,GAAD,OAAWA,EAAMC,MAAMC,WAGrB,SAACF,GAAD,OAAWA,EAAMC,MAAM6S,cAGhCX,aAAW,SAAXA,CAjBqB,0BAuBZ+T,GAAaloB,UAAOC,IAAV,yEAAGD,CAAH,iIASXmoB,GAAgCA,GAIxChU,aAAW,SAAXA,CAbmB,2BAkBR6T,M,2xDCjDf,IACIM,IAAgB,EAMd3B,GAAUvgB,cACd,WAAsBiH,GAAQ,IAA3B7M,EAA2B,EAA3BA,SAA2B,wBACU4F,YAAe,GADzB,GACrBmiB,EADqB,KACPC,EADO,KAEtBvmB,EAAQwmB,qBACN5nB,EAAMC,cAAND,EACA0c,EAAOvc,cAAPuc,GACFxN,EAAW6Q,cACX8H,EAAmBC,aAAY5Y,GAE/BuE,EAAQiJ,EAAGwJ,aACX6B,EAAYrL,EAAGhI,WAAagI,EAAGsL,iBAC/BC,EAAW7mB,EAAM8mB,gBACjBC,EAAW/mB,EAAMgnB,gBAAkB,GACnCC,EAAW3L,EAAG4L,gBAZQ,wBAcA/iB,WAAe,GAdf,GAcrB6J,EAdqB,KAcbmZ,EAda,6BAeQhjB,YAAe,GAfvB,GAerBijB,EAfqB,KAeRC,EAfQ,6BAgBMljB,YAAe,GAhBrB,GAgBrBmjB,EAhBqB,KAgBTC,EAhBS,KAiBtBC,EAAuBnV,EAAQ0U,EAE/BU,EAAatjB,eACjB,SAAC0P,GAECA,EAAMvG,iBAGN,IAAM+E,EAAQqV,KAAKC,IAAI9T,EAAM+T,MAAQ5Z,EAAQ6Y,GAI3CI,EAHiC5U,EAAQ0U,EAAW,EAG3C/mB,EAAM6nB,sBAENxV,KAGb,CAACrS,EAAOgO,EAAQ+Y,EAAUF,EAAUI,IAGhCa,EAAiB3jB,eACrB,SAAC0P,IACC0T,GAAY,GAERjW,SAASwC,eACXxC,SAASwC,cAAcC,OAGrByT,GACiCnV,EAAQ0U,EAAW,GAGpDM,GAAa,GACbd,GAAc,GACdjL,EAAGyM,oBAEHd,EAASF,GACTM,GAAa,IAGfJ,EAAS5U,KAGb,CAACiJ,EAAIkM,EAAsBT,EAAU1U,EAAO4U,IAGxCe,EAAkB7jB,eACtB,SAAC0P,GACCsT,EAAUtT,EAAM+T,MAAQvV,GACxBkV,GAAY,GACZF,GAAa,KAEf,CAAChV,IAGHlO,aAAgB,WACVijB,GACF1S,YAAW,kBAAM2S,GAAa,KAlFnB,OAoFZ,CAACD,IAEJjjB,aAAgB,WACVmiB,GACF5R,YAAW,WACTuS,EAASF,GACTR,GAAc,KA1FL,OA6FZ,CAACU,EAAUF,EAAUT,IAExBniB,aAAgB,WAMd,OALImjB,IACFhW,SAAS2W,iBAAiB,YAAaR,GACvCnW,SAAS2W,iBAAiB,UAAWH,IAGhC,WACLxW,SAAS4W,oBAAoB,YAAaT,GAC1CnW,SAAS4W,oBAAoB,UAAWJ,MAEzC,CAACR,EAAYG,EAAYK,IAE5B,IAAMK,EAAchkB,eAAkB,WACpCmX,EAAG4L,gBAAgBlnB,EAAM8kB,gBACxB,CAACxJ,EAAItb,EAAM8kB,eAEd3gB,aAAgB,WACdmX,EAAG8M,mBAAmBd,KACrB,CAAChM,EAAIgM,IAERnjB,aAAgB,WACV2J,IAAa2Y,IACfJ,IAAgB,EAChB/K,EAAG+M,uBAEJ,CAAC/M,EAAIxN,EAAU2Y,IAElB,IAAMT,EAAQ7hB,WACZ,iBAAO,CACLkO,MAAO,GAAF,OAAKA,EAAL,SAEP,CAACA,IAGGiW,EAAcnkB,WAClB,iBAAO,CACLokB,MAAO,OACPC,WAAY,GAAF,OAAK7B,EAAY3mB,EAAM6nB,sBAAwBxV,EAA/C,SAEZ,CAACA,EAAOrS,EAAM6nB,sBAAuBlB,IAGjC8B,EACJ,gCACGnN,EAAGoN,sBACF,gBAAC,KAAD,KACE,gBAACC,GAAD,CAAUhmB,QAAS2Y,EAAGsN,uBAGzBrqB,EACD,gBAAC,GAAD,CACEsqB,YAAab,EACbc,cAAexN,EAAGsL,sBAAmBxjB,EAAY+kB,EACjDY,YAAazB,IAEdhM,EAAGsL,mBAAqBtL,EAAGhI,WAC1B,gBAAC,GAAD,CACE3Q,QAAS2Y,EAAG0N,uBACZzQ,UAAW,QACX1T,aAAYjG,EAAE,aAMtB,OACE,gCACE,gBAAC,GAAD,CACEwM,IAAKA,EACL4a,MAAOA,EACPiD,cAAe3N,EAAGwJ,aAClBoE,cAAe5C,EACf6C,aAAc/B,EACdgC,sBAAuB5B,EACvB6B,sBAAuB/N,EAAGoN,qBAC1BY,WAAY3C,EACZnkB,QAAM,GAEL6jB,GAAgB,gBAAC9V,GAAA,EAAD,KAAOkY,GAAkBA,IAE1CnN,EAAGhI,WACH,gBAAC,GAAD,CACE0S,MAAOsC,EACP3lB,QAAS2Y,EAAG0N,uBACZzQ,UAAW+C,EAAGsL,iBAAmB,QAAU,OAC3C/hB,aAAYyW,EAAGsL,iBAAmBhoB,EAAE,UAAYA,EAAE,kBAQxD+pB,GAAW5qB,UAAOwrB,EAAV,wEAAGxrB,CAAH,4HACCyrB,MAOF,SAACzpB,GAAD,OAAWA,EAAMC,MAAMypB,OAAOC,QAAU,KACrC,SAAC3pB,GAAD,OAAWA,EAAMC,MAAM2pB,YAGjC1Z,GAAYlS,kBAAOwE,KAAV,yEAAGxE,CAAH,6QAKC,SAACgC,GAAD,OAAWA,EAAMC,MAAMsL,qBAEjC,SAACvL,GAAD,OAAWA,EAAMC,MAAMuL,wBACrB,SAACxL,GAAD,OACAA,EAAMopB,aAAN,iBAjNW,IAiNX,eAA2D,MAE7D,SAACppB,GAAD,OAAYA,EAAMspB,sBAAwB,EAAI,WAEvC,SAACtpB,GAAD,OAAWA,EAAMC,MAAMypB,OAAOC,UAIvCzD,GASA/T,aAAW,SAAXA,CA1BW,0BA6Ba,SAACnS,GAAD,OACtBA,EAAMupB,WAAa,qBAAuB,KAK5B,SAACvpB,GAAD,OACZA,EAAMupB,WACF,+BACAvpB,EAAMqpB,sBACN,sCACA,SAEJnD,GAIAC,IAMS,SAACnmB,GAAD,OAAYA,EAAMupB,WAAa,IAAM,QAMvC5qB,eAASgmB,I,ggDClQxB,IAwFeV,GA5DC,SAAVA,QAAW,GAYJ,QAXX,gBAAgB4F,OAWL,MAXmB,OAWnB,MAVXC,uBAUW,MAVO,SAUP,EATXxG,EASW,EATXA,YACWyG,EAQA,EARX1H,UACA1E,EAOW,EAPXA,MACUqM,EAMC,EANXC,SACUC,EAKC,EALXnc,SACAoc,EAIW,EAJXA,OACOC,EAGI,EAHXnE,MACArZ,EAEW,EAFXA,GACGiJ,EACQ,oJACLwU,EAAUjmB,WACVuN,EAAUvN,aAAiBkmB,KAC3BC,EAAkBL,GAAgBvY,EAAQ5D,SAC1Cyc,EAzCoB,SAAtBC,oBAAuB7d,EAAI2d,GAC/B,MAAqB,iBAAP3d,EACV8d,aAAe9d,EAAI,KAAM,KAAM2d,GAC/B3d,EAsCe6d,CA5CK,SAApBE,kBAAqB/d,EAAI2d,GAAL,MACV,mBAAP3d,EAAoBA,EAAG2d,GAAmB3d,EA4C/C+d,CAAkB/d,EAAI2d,GACtBA,GAEgB3M,EAAS4M,EAAnB5b,SAEFgc,EAAchN,GAAQA,EAAKjP,QAAQ,4BAA6B,QAEhEJ,EAAQqc,EACVC,YAAUN,EAAgB3b,SAAU,CAClCgP,KAAMgN,EACNjN,QACAwM,WAEF,KACEF,KAAcD,EAChBA,EAAazb,EAAOgc,GACpBhc,GAEE8T,EAAY4H,EAtDG,SAAjBa,iBAAoC,2BAAfC,EAAe,yBAAfA,EAAe,gBACxC,OAAOA,EAAWC,QAAO,SAACC,GAAD,OAAOA,KAAGrQ,KAAK,KAsDpCkQ,CAAef,EAAeD,GAC9BC,EACE9D,EAAQgE,EAAW,6CAAKG,GAAc9G,GAAgB8G,EAE5DhmB,aAAgB,WACV6lB,GAAYI,EAAQ7V,SACtB0W,mBAAeb,EAAQ7V,QAAS,CAC9B2W,WAAY,YACZC,SAAU,cAGb,CAACf,EAASJ,IAEb,IAAMjqB,EAAQ,sBACZ,eAAiBiqB,GAAYJ,GAAgB,KAC7CxH,YACA4D,QACArZ,GAAI4d,GACD3U,GAGL,OAAO,gBAAC,IAAD,iBAAMxK,IAAKgf,GAAarqB,K,0sBCrEjC,SAASqrB,YAAT,EAoBEhgB,GACA,IAnBEjN,EAmBF,EAnBEA,KAEAwE,GAiBF,EAlBEpE,SAkBF,EAjBEoE,SACA0oB,EAgBF,EAhBEA,aACA1e,EAeF,EAfEA,GACAvM,EAcF,EAdEA,MACAkrB,EAaF,EAbEA,OACAC,EAYF,EAZEA,aACA9mB,EAWF,EAXEA,KACA+mB,EAUF,EAVEA,YACAxrB,EASF,EATEA,MACA0d,EAQF,EAREA,MACA+N,EAOF,EAPEA,KACAC,EAMF,EANEA,MAGAtJ,GAGF,EALE3T,QAKF,EAJEH,MAIF,EAHE8T,WAII4D,EAAQ7hB,WAAc,WAC1B,MAAO,CACLwnB,YAAa,GAAF,OAAoB,IAAdD,GAAS,GAAU,GAAzB,SAEZ,CAACA,IAEErI,E,qbAAc,EAClBuI,WAAY,IACZ5sB,MAAOgB,EAAMwL,KACbyH,WAAYjT,EAAM6rB,uBACf7F,GAOL,OACE,gCACE,gBAAC,GAAD,CACE8F,cAAeP,EACflI,YAAakI,EARK,CACtBK,WAAY,KAOsCvI,EAC9C2C,MAAOsF,EAASjI,EAAc2C,EAC9BrjB,QAASA,EACT0oB,aAAcA,EACd3N,OAAiB,IAAVA,EACP/Q,GAAIA,EACJF,GAAIE,OAAKvJ,EAAYqoB,EAAO,IAAM,MAClCA,KAAMA,EACNrJ,UAAWA,EACXhX,IAAKA,GAEJjN,GAAQ,gBAAC4tB,GAAD,KAAc5tB,GACvB,gBAAC6tB,GAAD,KAAQ5rB,IAETqE,GAAQ,gBAAC,GAAD,CAAS+mB,YAAaA,GAAc/mB,IAMnD,IAAMsnB,GAAchuB,UAAOkuB,KAAV,2EAAGluB,CAAH,kFAQX4J,GAAU5J,kBAAOmuB,MAAV,uEAAGnuB,CAAH,oLACA,SAACgC,GAAD,OAAYA,EAAMyrB,YAAc,cAAgB,UAIlD,SAACzrB,GAAD,OAAWA,EAAMC,MAAMkL,gBAIrB,SAACnL,GAAD,OAAWA,EAAMC,MAAMmsB,iBAc9Bzf,GAAO3O,kBAAOimB,IAAV,oEAAGjmB,CAAH,8XAOM,SAACgC,GAAD,OACZA,EAAM+rB,cAAgB/rB,EAAMC,MAAM4lB,UAAY,aACvC,SAAC7lB,GAAD,OACPA,EAAM+rB,cAAgB/rB,EAAMC,MAAMsjB,MAAQvjB,EAAMC,MAAM6S,eAMpD,SAAC9S,GAAD,OAAYA,EAAM+rB,cAAN,gBAA+B/rB,EAAMC,MAAMsjB,MAA3C,KAAsD,MAK3D,SAACvjB,GAAD,OAAWA,EAAMC,MAAMwL,QAClB,SAACzL,GAAD,OACZiT,aAAe,OAAQjT,EAAMC,MAAM6rB,yBAGrC3Z,aAAW,SAAXA,CA1BM,8BAgCMvK,GACCA,IAUF,SAAC5H,GAAD,OACPA,EAAM+rB,cAAgB/rB,EAAMC,MAAMsjB,MAAQvjB,EAAMC,MAAMwL,QAKxDwgB,GAAQjuB,UAAOC,IAAV,qEAAGD,CAAH,8FAUIoU,eAAWzG,oBAAUvH,aAAiBinB,e,q0CC/ItC1sB,oBAhCf,SAAS0tB,YAAT,GAAoC,QAO5B,EAPettB,EAAa,EAAbA,UACbuN,EAAatN,cAAbsN,SACAzN,EAAMC,cAAND,EACAgD,EAAckG,eAAdlG,UAH0B,4BAKsByqB,aAAQ,CAC9D5R,OAAQ,WACR6R,MAAI,E,uTAAA,0BAAE,iBAAOhpB,EAAMipB,GAAb,sGACEjb,EAAWxS,EAAU4K,IAAIpG,EAAK9B,IADhC,SAEE8P,EAASkb,UAFX,OAGJ5qB,EAAUhD,EAAE,qBAAsB,CAAEmD,KAAM,YAHtC,iDAAF,oDAKJ0qB,QAAS,iBAACnpB,EAAMipB,GAAP,OAAmBlgB,EAASE,UAAUjJ,EAAK9B,IAAIgrB,SACxDE,QAAS,iBAACH,GAAD,MAAc,CACrBI,mBAAoBJ,EAAQK,aAdE,GAKzBD,EALyB,KAKzBA,mBAAsBE,EALG,KAkBlC,OACE,uBAAKzhB,IAAKyhB,GACR,gBAAC,GAAD,CACElgB,GAAG,WACHxO,KAAM,gBAAC,cAAD,CAAaa,MAAM,eAAe8tB,KAAMH,IAC9CjP,OAAO,EACPtd,MAAOxB,EAAE,WACT0sB,QAAQ,UAAAxsB,EAAUwsB,cAAV,eAAkByB,eAAc,UAACjuB,EAAUwsB,cAAX,aAAC,EAAkB0B,WAC3DzB,aAAcoB,Q,qCChBtB,IAAMM,GAASlvB,kBAAO,OAAV,yEAAGA,CAAH,8NACC,SAACgC,GAAD,OAAYA,EAAM6sB,OAAS,EAAI,KAQxC,SAAC7sB,GAAD,MAA2B,gBAAfA,EAAMmtB,KAAyB,aAAe,mBAI5C,SAACntB,GAAD,OAAWA,EAAMC,MAAM4lB,aAU1Bla,wBAtCf,SAASyhB,WAAT,GAUG,IATD5B,EASC,EATDA,aACA6B,EAQC,EARDA,SAEAF,GAMC,EAPDltB,MAOC,EANDktB,MAOA,OAAO,gBAACD,GAAD,CAAQL,OAAQrB,EAAcngB,IAAKgiB,EAAUF,KAAMA,O,qPCsD5D,IAAMpS,GAAoB/c,UAAOC,IAAV,qFAAGD,CAAH,2BAGnB,gBAAGgd,EAAH,EAAGA,aAAc/a,EAAjB,EAAiBA,MAAjB,OACA+a,GACAC,cADY,0DAEIhb,EAAM4lB,UAET5lB,EAAMsjB,MAGPtjB,EAAMsjB,UAKP5kB,gBAnEf,SAAS2uB,aAAT,GAA+E,IAAvD9mB,EAAuD,EAAvDA,SAAUhI,EAA6C,EAA7CA,SAAU+C,EAAmC,EAAnCA,aAAcsV,EAAqB,EAArBA,WAChDhY,EAAMC,cAAND,EADqE,EAE7CG,cAAxBD,EAFqE,EAErEA,UAAWuN,EAF0D,EAE1DA,SACXzK,EAAckG,eAAdlG,UAHqE,EAIxC+U,kBACnCrV,EACAsV,GAFMI,EAJqE,EAIrEA,YAAaH,EAJwD,EAIxDA,YAKf7G,EAAM3D,EAASE,UAAUjL,GAEzB8a,EAAkBjY,eAAkB,WACxCvC,EACEhD,EAAE,oEACF,CAAEmD,KAAM,YAET,CAACnD,EAAGgD,IAEP,OAAI2E,IAAayJ,EAAIhD,OACZzO,EAIP,gBAAC,IAAD,CACEkc,OAAQ3b,EAAU4b,gBAAgBC,KAAK,MACvCmC,eAAgB9F,EAChB+F,eAAgBX,EAChBY,SAAO,EACPC,UAAQ,IAEP,gBACCC,EADD,EACCA,aACAC,EAFD,EAECA,cACApC,EAHD,EAGCA,aAHD,EAICqC,aAJD,EAKCC,aALD,OAOC,gBAAC,GAAD,wBACMH,IACA,CAAEnC,gBAFR,CAGEH,SAAS,OAET,wBAAWuC,KACVtG,GAAe,gBAACzG,GAAA,EAAD,MACf7R,S,i2CC6BX,IAAMqE,GAAQ7E,UAAO4M,MAAV,0EAAG5M,CAAH,kLAEA,SAACgC,GAAD,OAAWA,EAAMC,MAAM6S,eAClB,SAAC9S,GAAD,OAAWA,EAAMC,MAAMiT,cAGjB,SAAClT,GAAD,OAAWA,EAAMC,MAAMsW,sBAMxB,SAACvW,GAAD,OAAWA,EAAMC,MAAMgG,WAI7BsnB,GAjGf,SAASA,cAAT,GAA8D,IAArCpvB,EAAqC,EAArCA,MAAOgG,EAA8B,EAA9BA,SAAUqpB,EAAoB,EAApBA,UAAoB,8BAC1BppB,YAAe,GADW,GACrDmP,EADqD,KAC1Cka,EAD0C,mCAElBrpB,WAAejG,GAFG,GAErDuvB,EAFqD,KAEtCC,EAFsC,mCAGlCvpB,WAAejG,GAHmB,GAGrDoC,EAHqD,KAG9CqtB,EAH8C,KAIpD/rB,EAAckG,eAAdlG,UAERuC,aAAgB,WACdwpB,EAASzvB,KACR,CAACA,IAEJ,IAAMsM,EAAerG,eAAkB,SAAC0P,GACtC8Z,EAAS9Z,EAAM/S,OAAOR,SACrB,IAEGstB,EAAoBzpB,eAAkB,SAAC0P,GAC3CA,EAAMvG,iBACNuG,EAAMqG,kBACNsT,GAAa,KACZ,IAEGngB,EAAgBlJ,eACpB,SAAC0P,GACmB,WAAdA,EAAMrQ,MACRgqB,GAAa,GACbG,EAASF,MAGb,CAACA,IAGGzZ,EAAa7P,cAAA,iB,6TAAA,0BACjB,iBAAOvD,GAAP,kGACEA,EAAG0M,iBAEHkgB,GAAa,IAEPK,EAAevtB,EAAMwtB,UACNL,GAAyC,IAAxBI,EAAa1kB,OANrD,uBAOIwkB,EAASF,GAPb,8BAWMnc,SAXN,2CAaYpN,EAAS2pB,GAbrB,QAcMH,EAAiBG,GAdvB,wDAgBMF,EAASF,GACT7rB,EAAU,KAAM8V,QAAS,CACvB3V,KAAM,UAlBd,qEADiB,sDAyBjB,CAAC0rB,EAAe7rB,EAAWtB,EAAO4D,IAGpC,OACE,gCACGoP,EACC,wBAAMpP,SAAU8P,GACd,gBAAC,GAAD,CACE+Z,IAAI,OACJhsB,KAAK,OACLzB,MAAOA,EACPgQ,UAAWjD,EACXvK,SAAU0H,EACV8K,OAAQtB,EACR9M,WAAS,KAIb,wBAAM4hB,cAAeyE,EAAYK,OAAoBxqB,GAClD9C,K,upECvDX,SAAS0tB,aAAT,EAWE5iB,GACA,IAVE6iB,EAUF,EAVEA,KACAV,EASF,EATEA,UACAhsB,EAQF,EAREA,WACA2sB,EAOF,EAPEA,eACAC,EAMF,EANEA,iBACAzC,EAKF,EALEA,MACAra,EAIF,EAJEA,MACA+c,EAGF,EAHEA,SAGF,EACgCrvB,cAAxBD,EADR,EACQA,UAAWuN,EADnB,EACmBA,SACXzN,EAAMC,cAAND,EAEFyvB,EAAmBH,GAAkBA,EAAe1sB,KAAOysB,EAAKzsB,GAChE8sB,IAAsBL,EAAK1vB,SAAS4K,OAEpCmI,EAAWxS,EAAU4K,IAAIukB,EAAKzsB,IAC5B+sB,EAAwBzvB,EAAxByvB,oBAERpqB,aAAgB,WACVkqB,GAAoBC,GACtBC,EAAoBN,EAAKzsB,MAE1B,CAAC+sB,EAAqBN,EAAMK,EAAmBD,IAElD,IAAMG,EAAarqB,WACjB,kBACE5C,GAAcA,EAAWktB,eAAeR,EAAKzsB,IAAIwI,KAAI,SAAC0kB,GAAD,OAAWA,EAAMltB,QACxE,CAACD,EAAY0sB,IAGTU,EAAexqB,WAAc,WACjC,SACEmqB,GACAJ,GACA3sB,IACCA,EACEktB,eAAeP,EAAe1sB,IAC9BwI,KAAI,SAAC0kB,GAAD,OAAWA,EAAMltB,MACrBse,SAASmO,EAAKzsB,KACf6sB,MAEH,CAACC,EAAmBJ,EAAgBG,EAAkBJ,EAAM1sB,IAjC/D,6BAmCgC4C,WAAewqB,GAnC/C,GAmCOnS,EAnCP,KAmCiBnJ,EAnCjB,KAqCAlP,aAAgB,WACVwqB,GACFtb,EAAYsb,KAEb,CAACA,IAIJxqB,aAAgB,WACVqY,IAAa8R,GACfjb,GAAY,KAEb,CAACmJ,EAAU8R,IAEd,IAAMM,EAAwBzqB,eAC5B,SAACvD,GACCA,EAAG0M,iBACH1M,EAAGsZ,kBACH7G,GAAamJ,KAEf,CAACA,IAGGqS,EAAmB1qB,eACvB,SAACvD,GACCutB,EAAiBF,EAAKzsB,MAExB,CAAC2sB,EAAkBF,IAGfa,EAAoB3qB,cAAA,iB,0TAAA,0BACxB,iBAAOjG,GAAP,4FACOoT,EADP,iEAGQxS,EAAUkO,OAAO,CACrBxL,GAAI8P,EAAS9P,GACbutB,aAAczd,EAAS6Q,SACvB3W,KAAM8F,EAAS9F,KACftN,UAPJ,iDADwB,sDAWxB,CAACY,EAAWwS,IA9Ed,6BAiFoDvJ,eAjFpD,GAiFOinB,EAjFP,KAiFiBC,EAjFjB,KAiFiCC,EAjFjC,KAkFMC,EAAWrwB,EAAUswB,mBAAqBnB,EAAKzsB,GAC/C6tB,EAAwC,WAA3B9tB,aAAA,EAAAA,EAAY4W,KAAKG,OAnFpC,6BAsF+BgX,aAAQ,CACrCvtB,KAAM,WACNuB,KAAM,iDAAC,6BAAW2qB,GAAZ,IAAkBvC,QAAOJ,OAAQ+C,KACvC3B,QAAS,iBAACH,GAAD,MAAc,CACrBgD,aAAchD,EAAQgD,eAExBC,QAAS,iBAACjD,GACR,OACElgB,EAASE,UAAU0hB,EAAKzsB,IAAIiuB,MAC5BpjB,EAASE,UAAU0hB,EAAKzsB,IAAIgrB,SAC5BngB,EAASE,UAAU0hB,EAAKzsB,IAAI+G,UAhGlC,GAsFSgnB,EAtFT,KAsFSA,WAAcG,EAtFvB,KAqGMC,EAAiBxrB,SAAa,MAI9ByrB,EAAsBzrB,eAAkB,WACxCwrB,EAAepb,UACjBC,aAAamb,EAAepb,SAC5Bob,EAAepb,QAAU,QAE1B,IA9GH,6BAiHgE8X,aAAQ,CACtE5R,OAAQ,WACR6R,KAAM,cAAChpB,EAAMipB,GACPA,EAAQsD,WACPtuB,GACLzC,EAAU2wB,KAAKnsB,EAAK9B,GAAID,EAAWC,GAAIysB,EAAKzsB,KAG9CirB,QAAS,iBAACnpB,EAAMipB,GAAP,OACPiC,IAAeA,EAAW1O,SAASyM,EAAQuD,UAAUtuB,KAEvDuuB,MAAO,eAACzsB,EAAMipB,GAIV+B,GACA/B,EAAQE,WACRF,EAAQK,OAAO,CAAEoD,SAAS,MAErBL,EAAepb,UAClBob,EAAepb,QAAUG,YAAW,WAClCib,EAAepb,QAAU,KACrBgY,EAAQK,OAAO,CAAEoD,SAAS,KAC5B3c,GAAY,KAEb,QAKTqZ,QAAS,iBAACH,GAAD,MAAc,CACrB0D,iBAAkB1D,EAAQK,OAAO,CAAEoD,SAAS,IAC5CE,kBAAmB3D,EAAQE,cAjJ/B,UAiHSwD,EAjHT,EAiHSA,eAAgBC,EAjHzB,EAiHyBA,kBAAqBC,EAjH9C,kCAsJ2C9D,aAAQ,CACjD5R,OAAQ,WACR6R,KAAM,cAAChpB,EAAMipB,GACNhrB,GACD+B,EAAK9B,KAAOysB,EAAKzsB,KAEjBgb,EACF1d,EAAU2wB,KAAKnsB,EAAK9B,GAAID,EAAWC,GAAIysB,EAAKzsB,GAAI,GAIlD1C,EAAU2wB,KAAKnsB,EAAK9B,GAAID,EAAWC,GAAI4sB,EAAU/c,EAAQ,KAE3Dqb,QAAS,iBAACH,GAAD,MAAc,CACrB6D,gBAAiB7D,EAAQK,aApK7B,GAsJSwD,EAtJT,KAsJSA,cAAiBC,EAtJ1B,KAwKA,OACE,gCACE,uBAAKrK,MAAO,CAAEsK,SAAU,YAAcC,YAAaX,GACjD,gBAACY,GAAD,CACEhtB,IAAKyqB,EAAKzsB,GACV4J,IAAKskB,EACLe,YAAalB,EACbmB,UAAWvB,GAEX,uBAAK/jB,IAAK+kB,GACR,gBAAC,GAAD,CAAcvZ,WAAYqX,EAAKzsB,GAAIqoB,gBAAgB,kBACjD,gBAAC,GAAD,CACEwB,aAAcwD,EACdliB,GAAI,CACFgC,SAAUsf,EAAKxW,IACf3H,MAAO,CAAE5R,MAAO+vB,EAAK/vB,QAEvBkC,MACE,gCACGkuB,GACC,gBAAC,GAAD,CACE9R,SAAUA,IAAa+S,EACvB5sB,QAASisB,IAGb,gBAAC,GAAD,CACE1wB,MAAO+vB,EAAK/vB,OAASU,EAAE,YACvBsF,SAAU4qB,EACVvB,UAAWA,KAIjBhC,aAAc0E,GAAkBC,EAChCxE,MAAOA,EACPhO,OAAO,EACP8N,YAAawD,EACb5jB,IAAKA,EACL3G,KACE6M,IAAa6d,EACX,gBAAC5e,GAAA,EAAD,KACE,gBAACogB,GAAA,EAAD,CACErf,SAAUA,EACV8H,OAAQ6V,EACR5V,QAAS6V,UAGX9rB,OAMbisB,GACC,gBAAC,GAAD,CAAY9D,aAAc6E,EAAehD,SAAUiD,KAGtD7T,IAAa+S,GACZ,gCACGtB,EAAK1vB,SAASyL,KAAI,SAAC4mB,EAAWvf,GAAZ,OACjB,gBAACwf,GAAD,CACErtB,IAAKotB,EAAUpvB,GACfD,WAAYA,EACZ0sB,KAAM2C,EACN1C,eAAgBA,EAChBC,iBAAkBA,EAClBzC,MAAOA,EAAQ,EACf6B,UAAWA,EACXlc,MAAOA,EACP+c,SAAUH,EAAKzsB,UAS7B,IAAMgvB,GAAYzyB,kBAAO,OAAV,8EAAGA,CAAH,qCACF,SAACgC,GAAD,OAAYA,EAAM0wB,aAAe1wB,EAAM2wB,UAAY,GAAM,KAClD,SAAC3wB,GAAD,OAAYA,EAAM2wB,UAAY,OAAS,SAGrD/d,GAAa5U,kBAAO+yB,iBAAV,+EAAG/yB,CAAH,4FAKZ,qBAAGye,UAA4B,gCAG7BqU,GAAuBnyB,YAASyF,aAAiB6pB,eAExC6C,M,8sBCvOAnyB,oBAtDf,SAASqyB,mBAAT,GAA6E,IAA/CxvB,EAA+C,EAA/CA,WAAY6X,EAAmC,EAAnCA,OAAQC,EAA2B,EAA3BA,QACxCza,GADmE,gFAC7DC,cAAND,GACF6F,EAAOC,YAAa,CAAEC,OAAO,IAE7BqsB,EAAmB7sB,eACvB,SAACmU,GAEC,OADA7T,EAAKwsB,OACE1vB,EAAWqH,KAAK,CACrBuP,KAAM,CACJG,QACAC,UAAW,WAIjB,CAAChX,EAAYkD,IAGTysB,EAA6C,UAA1B3vB,EAAW4W,KAAKG,MAEzC,OACE,gCACE,gBAACzL,GAAA,EAAepI,GACb,SAAC1E,GAAD,OACC,gBAAC6S,GAAA,EAAD,4BAAY/N,aAAYjG,EAAE,mBAAuBmB,GAC9CmxB,EAAmB,gBAAC,uBAAD,MAA2B,gBAAC,iBAAD,UAIrD,gBAACpsB,GAAA,EAAD,8BACML,EADN,CAEE2U,OAAQA,EACRC,QAASA,EACTxU,aAAYjG,EAAE,qBAEd,gBAACmG,GAAA,EAAD,8BACMN,EADN,CAEEvB,MAAO,CACL,CACEhF,MAAOU,EAAE,qBACT+D,QAAS,0BAAMquB,EAAiB,UAChC7N,SAAU+N,GAEZ,CACEhzB,MAAOU,EAAE,eACT+D,QAAS,0BAAMquB,EAAiB,UAChC7N,UAAW+N,Y,gqDCkJzB,IAAMV,GAAYzyB,kBAAO,OAAV,gFAAGA,CAAH,qCACF,SAACgC,GAAD,OAAYA,EAAM0wB,aAAe1wB,EAAM2wB,UAAY,GAAM,KAClD,SAAC3wB,GAAD,OAAYA,EAAM2wB,UAAY,OAAS,UAGrDS,GAAyBpzB,kBAAOqtB,IAAV,6FAAGrtB,CAAH,yBAItBqzB,GAA+BrzB,kBAAOgzB,IAAV,mGAAGhzB,CAAH,uBAInBW,gBAhMf,SAAS2yB,eAAT,GAQU,IAPR9vB,EAOQ,EAPRA,WACA2sB,EAMQ,EANRA,eACAC,EAKQ,EALRA,iBACAZ,EAIQ,EAJRA,UACA+D,EAGQ,EAHRA,gBACAC,EAEQ,EAFRA,wBACAC,EACQ,EADRA,iBACQ,+BAC4CzpB,eAD5C,GACDinB,EADC,KACSC,EADT,KACyBC,EADzB,KAGFJ,EAAoB3qB,cAAA,0EACxB,iBAAOrC,GAAP,yGACQP,EAAWqH,KAAK,CAAE9G,SAD1B,iDADwB,sDAIxB,CAACP,IAPK,EAUyCxC,cAAzCuc,EAVA,EAUAA,GAAIxc,EAVJ,EAUIA,UAAWuN,EAVf,EAUeA,SAAUzC,EAVzB,EAUyBA,YAVzB,+BAYwBzF,WAC9B5C,EAAWC,KAAO8Z,EAAGmW,oBAbf,GAYDjV,EAZC,KAYSnJ,EAZT,KAgBRlP,aAAgB,WAEZkP,GADEke,GAGUhwB,EAAWC,KAAO8Z,EAAGmW,sBAElC,CAACF,EAAyBhwB,EAAWC,GAAI8Z,EAAGmW,qBAE/C,IAwBM,EAYA,EApCApC,EAAuC,UAA1B9tB,EAAW4W,KAAKG,MAC7BtI,EAAM3D,EAASE,UAAUhL,EAAWC,IACpCkwB,EAAuBJ,EAAkBA,EAAgBjgB,MAAQ,KA1B/D,+BA6B4Bgb,aAAQ,CAC1C5R,OAAQ,WACR6R,KAAM,cAAChpB,EAAMipB,GACPA,EAAQsD,WACPtuB,GACLzC,EAAU2wB,KAAKnsB,EAAK9B,GAAID,EAAWC,KAErCirB,QAAS,iBAACnpB,EAAMipB,GACd,OAAOlgB,EAASE,UAAUhL,EAAWC,IAAIwL,QAE3C0f,QAAS,iBAACH,GAAD,MAAc,CACrBK,SAAUL,EAAQK,OAAO,CAAEoD,SAAS,IACpCvD,QAASF,EAAQE,cAzCb,UA6BCG,EA7BD,EA6BCA,OAAQH,EA7BT,EA6BSA,QAAWH,EA7BpB,oCA8CmCD,aAAQ,CACjD5R,OAAQ,WACR6R,MAAI,2DAAE,kBAAOhpB,EAAMipB,GAAb,6FACChrB,EADD,iDAEJzC,EAAU2wB,KAAKnsB,EAAK9B,GAAID,EAAWC,QAAI4B,EAAW,GAF9C,kDAAF,iDAIJspB,QAAS,iBAACH,GAAD,MAAc,CACrB6D,gBAAiB7D,EAAQK,aArDrB,GA8CCwD,EA9CD,KA8CCA,cAAiBC,EA9ClB,oCA0DoDhE,aAAQ,CAClE5R,OAAQ,aACR6R,MAAI,2DAAE,kBAAOhpB,EAAMipB,GAAb,0FACJ3iB,EAAY6lB,KACVnsB,EAAK9B,GACLmwB,KAAgBpwB,EAAW8P,MAAOqgB,IAHhC,kDAAF,iDAMJjF,QAAS,iBAACnpB,EAAMipB,GACd,OACEhrB,EAAWC,KAAO8B,EAAK9B,MACrB8vB,GAAmBhuB,EAAK9B,KAAO8vB,EAAgB9vB,KAGrDkrB,QAAS,iBAACH,GAAD,MAAc,CACrBqF,qBAAsBrF,EAAQK,aAzE1B,GA0DCgF,EA1DD,KA0DCA,qBAAwBC,EA1DzB,oCA8EoDvC,aAAQ,CAClEvtB,KAAM,aACNuB,KAAM,gBAEJ,OADAkuB,GAAiB,GACV,CACLhwB,GAAID,EAAWC,KAGnBkrB,QAAS,iBAACH,GAAD,MAAc,CACrBuF,qBAAsBvF,EAAQgD,eAEhCC,QAAS,iBAACjD,GACR,OAAOvc,EAAIyf,MAEbsC,IAAK,aAACxF,GACJiF,GAAiB,MA7Fb,GA8ECM,EA9ED,KA8ECA,qBAAwBE,EA9EzB,KAiGR,OACE,gCACE,uBAAK5mB,IAAKkhB,EAAMtG,MAAO,CAAEsK,SAAU,aACjC,gBAAC,GAAD,CACE9sB,IAAKjC,EAAWC,GAChB4J,IAAK4mB,EACLvB,YAAaqB,EACbpB,UAAWoB,GAEX,gBAAC,GAAD,CAAcxwB,aAAcC,EAAWC,IACrC,gBAAC2vB,GAAD,CACExkB,GAAIpL,EAAWkW,IACftZ,KACE,gBAAC8O,GAAA,EAAD,CAAgB1L,WAAYA,EAAYib,SAAUA,IAEpD6F,UAAW9gB,EAAWvC,MACtBwd,SAAUA,EACVgP,YAAawD,GAAYxS,EACzB+O,aAAcqB,GAAUH,EACxBrsB,MACE,gBAAC,GAAD,CACElC,MAAOqD,EAAWO,KAClBoC,SAAU4qB,EACVvB,UAAWA,IAGf7P,OAAO,EACPjZ,KACE,gCACGuL,EAAIhD,QACH,gBAACokB,GAAD,CACE7vB,WAAYA,EACZ6X,OAAQ6V,EACR5V,QAAS6V,IAGb,gBAAC,GAAD,CACE3tB,WAAYA,EACZ6X,OAAQ6V,EACR5V,QAAS6V,SAOpB1S,GAAY6S,GACX,gBAAC,GAAD,CAAY9D,aAAc6E,EAAehD,SAAUiD,IAEpDkB,GACC,gBAAC,GAAD,CACEhG,aAAcqG,EACdxE,SAAUyE,KAKfrV,GACCjb,EAAWzC,UAAUkL,KAAI,SAACikB,EAAM5c,GAAP,OACvB,gBAAC,GAAD,CACE7N,IAAKyqB,EAAKzsB,GACVysB,KAAMA,EACN1sB,WAAYA,EACZ2sB,eAAgBA,EAChBC,iBAAkBA,EAClBZ,UAAWA,EACX7B,MAAO,IACPra,MAAOA,WC5LJtE,GATAhP,kBAAOwE,KAAV,yDAAGxE,CAAH,8GAID,SAACgC,GAAD,OAAWA,EAAMC,MAAM6S,eCOlC,IAAMjC,GAAU7S,UAAOC,IAAV,sFAAGD,CAAH,gCAKEk0B,GAff,SAASA,yBACP,OACE,gBAAC,GAAD,KACE,gBAACzT,GAAA,EAAD,MACA,gBAACA,GAAA,EAAD,CAAiB5B,MAAO,KACxB,gBAAC4B,GAAA,EAAD,CAAiB5B,MAAO,O,4nDCiHfle,oBArGf,SAASwzB,YAAT,GAAoD,IAA7BC,EAA6B,EAA7BA,mBAA6B,4BAChBhuB,YAAe,GADC,GAC3CoX,EAD2C,KAC/BC,EAD+B,iCAEdrX,aAFc,GAE3CiuB,EAF2C,KAE/BC,EAF+B,OAGDtzB,cAAzCuc,EAH0C,EAG1CA,GAAIjP,EAHsC,EAGtCA,SAAUvN,EAH4B,EAG5BA,UAAW8K,EAHiB,EAGjBA,YACzBhI,EAAckG,eAAdlG,UACF0wB,IAAyB1oB,EAAYG,YAAYZ,OAC/CvK,EAAMC,cAAND,EACF0D,EAAO8J,eACPmmB,EAAqB3oB,EAAYG,YACjCiG,EAAM3D,EAASE,UAAUjK,EAAKd,IATc,4BAUY2C,YAC5D,GAXgD,GAU3CotB,EAV2C,KAUlBiB,EAVkB,KAclDruB,aAAgB,WAAM,oFACpB,+GACOyF,EAAYwa,UAAa7I,GAAe6W,EAD/C,iCAGM5W,GAAY,GAHlB,SAIY5R,EAAY3I,UAAU,CAAE8K,MAAO,MAJ3C,uDAMMnK,EACEhD,EAAE,0DACF,CACEmD,KAAM,UAGVswB,EAAc,EAAD,IAZnB,yBAcM7W,GAAY,GAdlB,mFADoB,gCACLW,OADK,mCAmBpBA,KACC,CAACvS,EAAa2R,EAAY3Z,EAAWwwB,EAAYxzB,IAlCF,IAsC5C,EAtC4C,4BAoCUytB,aAAQ,CAClE5R,OAAQ,aACR6R,MAAI,wDAAE,kBAAOhpB,EAAMipB,GAAb,0FACJ3iB,EAAY6lB,KACVnsB,EAAK9B,GACLmwB,KAAgB,KAAMY,EAAmB,GAAGlhB,QAH1C,kDAAF,oDAMJob,QAAS,iBAACnpB,EAAMipB,GACd,OAAOjpB,EAAK9B,KAAO+wB,EAAmB,GAAG/wB,IAE3CkrB,QAAS,iBAACH,GAAD,MAAc,CACrBqF,qBAAsBrF,EAAQK,aAhDgB,GAoCzCgF,EApCyC,KAoCzCA,qBAAwBC,EApCiB,KAoD5CpJ,EACJ,gCACE,gBAAC,GAAD,CACE8C,aAAcqG,EACdxE,SAAUyE,EACV3E,KAAK,gBAENqF,EAAmBvoB,KAAI,SAACzI,EAAY8P,GAAb,OACtB,gBAAC,GAAD,CACE7N,IAAKjC,EAAWC,GAChBD,WAAYA,EACZ2sB,eAAgBpvB,EAAUwsB,OAC1B6C,iBAAkBrvB,EAAUqvB,iBAC5BZ,UAAWlhB,EAASE,UAAUhL,EAAWC,IAAIwL,OAC7CsO,GAAIA,EACJiW,wBAAyBA,EACzBC,iBAAkBgB,EAClBlB,gBAAiBiB,EAAmBlhB,EAAQ,QAG/CrB,EAAIyiB,kBACH,gBAAC,GAAD,CACE9lB,GAAG,eACHhK,QAASwvB,EACTh0B,KAAM,gBAAC,WAAD,CAAUa,MAAM,iBACtBoB,MAAK,UAAKxB,EAAE,kBAAP,KACL8e,OAAK,KAMb,OAAK9T,EAAYwa,UAAYgO,EAEzB,gBAAC7vB,EAAA,EAAD,CAAMC,QAAM,GACV,gBAAC,GAAD,KAAS5D,EAAE,gBACX,gBAAC,GAAD,OAMJ,gBAAC2D,EAAA,EAAD,CAAMC,QAAM,GACV,gBAAC,GAAD,KAAS5D,EAAE,gBACV0zB,EAAc7J,EAAU,gBAAClY,GAAA,EAAD,KAAOkY,OCtGvBiK,GAZC30B,kBAAOwE,KAAV,0DAAGxE,CAAH,6HAIE,SAACgC,GAAD,OAAWA,EAAMC,MAAMgnB,mB,2rBCOtC,IAAM2L,GAAaxuB,cACjB,WAAoEiH,GAApE,IAAGwnB,EAAH,EAAGA,eAAgB3rB,EAAnB,EAAmBA,SAAU4rB,EAA7B,EAA6BA,WAAYC,EAAzC,EAAyCA,QAAYld,EAArD,kGACE,gBAAC,GAAD,KACE,gBAAC,GAAD,oBAAQmd,QAAQ,aAAazsB,MAAM,SAAS8E,IAAKA,GAASwK,GACxD,gBAACod,GAAA,EAAD,CACEC,IAAG,UAAKhsB,EAAL,SACHd,IAAK2sB,EACLzgB,MAAO,GACPC,OAAQ,KAEV,gBAAC/P,EAAA,EAAD,CAAM+D,MAAM,aAAa9D,QAAM,GAC7B,gBAAC0wB,GAAD,CAAUN,gBAAc,GACrB3rB,EADH,IACc2rB,GAAkB,gBAAC,GAAD,CAAY5zB,MAAM,kBAElD,gBAAC,GAAD,KAAa6zB,SAOjBlgB,GAAa5U,kBAAOo1B,gBAAV,6EAAGp1B,CAAH,sCAMVwB,GAAaxB,UAAOC,IAAV,6EAAGD,CAAH,6GAML,SAACgC,GAAD,OAAWA,EAAMC,MAAM6S,eAG5BqgB,GAAWn1B,UAAOC,IAAV,2EAAGD,CAAH,8IAKH,SAACgC,GAAD,OAAWA,EAAMC,MAAMwL,QAM5BoF,GAAU7S,UAAOC,IAAV,0EAAGD,CAAH,oCAKPgP,GAAShP,UAAOqoB,OAAV,yEAAGroB,CAAH,4OAeM,SAACgC,GAAD,OAAWA,EAAMC,MAAM6rB,yBAI1B8G,M,4qCCzBAj0B,oBAjDf,SAAS00B,UAAT,GAAkC,MAAbt0B,EAAa,EAAbA,UACXuN,EAAatN,cAAbsN,SACAzN,EAAMC,cAAND,EAFwB,0BAGAy0B,qBAHA,GAGzB/hB,EAHyB,KAGfgiB,EAHe,+BAKsBjH,aAAQ,CAC5D5R,OAAQ,WACR6R,KAAM,cAAChpB,EAAMipB,GACX,IAAM/U,EAAM1Y,EAAU4K,IAAIpG,EAAK9B,IAG/BkT,YAAW,kBAAM4e,EAAY9b,KAAM,IAErCiV,QAAS,iBAACnpB,EAAMipB,GAAP,OAAmBlgB,EAASE,UAAUjJ,EAAK9B,IAAI+G,QACxDmkB,QAAS,iBAACH,GAAD,MAAc,CACrBI,mBAAoBJ,EAAQK,aAfA,GAKvBD,EALuB,KAKvBA,mBAAsB4G,EALC,KAmBhC,OACE,gCACE,uBAAKnoB,IAAKmoB,GACR,gBAAC,GAAD,CACE5mB,GAAG,SACHxO,KAAM,gBAAC,YAAD,CAAWa,MAAM,eAAe8tB,KAAMH,IAC5CjP,OAAO,EACPtd,MAAOxB,EAAE,SACT0sB,OAAM,UAAExsB,EAAUwsB,cAAZ,aAAE,EAAkB0B,UAC1BzB,aAAcoB,KAGjBrb,GACC,gBAACxN,EAAA,EAAD,CACE5F,MAAOU,EAAE,4BAA6B,CACpC40B,aAAcliB,EAASmiB,OAEzB1vB,eAAgB,iCAAMuvB,OAAYlwB,IAClCY,QAAM,GAEN,gBAAC0vB,GAAA,EAAD,CACEpiB,SAAUA,EACVpN,SAAU,2BAAMovB,OAAYlwB,W,+6CCxBxC,IAAMuwB,GAAiBxvB,cAAiB,SAACpE,EAAOqL,GAAQ,IAC9CkQ,EAAOvc,cAAPuc,GACA1c,EAAMC,cAAND,EACF6F,EAAOC,cAEb,OACE,gCACE,gBAACmI,GAAA,EAAD,qBAAYzB,IAAKA,GAAS3G,EAAU1E,EAApC,CAA2C4C,QAAS8B,EAAKmvB,QACtD,SAAC7zB,GAAD,OACC,gBAAC,KAAeA,EACd,gBAAC8zB,GAAD,CAAad,QAAQ,iBAClBn0B,EAAE,cACmB,UAArB0c,EAAGwY,cAA4B,gBAAC,UAAD,MAAc,gBAAC,WAAD,WAKtD,gBAAChvB,GAAA,EAAD,uBAAiBL,EAAjB,CAAuBI,aAAYjG,EAAE,gBACnC,gBAACikB,GAAA,EAAD,uBACMpe,EADN,CAEE9B,QAAS,0BAAM2Y,EAAGyY,SAAS,WAC3B5Q,SAAuB,WAAb7H,EAAGtb,QAEZpB,EAAE,WAEL,gBAACikB,GAAA,EAAD,uBACMpe,EADN,CAEE9B,QAAS,0BAAM2Y,EAAGyY,SAAS,UAC3B5Q,SAAuB,UAAb7H,EAAGtb,QAEZpB,EAAE,UAEL,gBAACikB,GAAA,EAAD,uBACMpe,EADN,CAEE9B,QAAS,0BAAM2Y,EAAGyY,SAAS,SAC3B5Q,SAAuB,SAAb7H,EAAGtb,QAEZpB,EAAE,cAqEb,IAAMi1B,GAAc91B,kBAAOwE,KAAV,2EAAGxE,CAAH,iBAIFW,gBAlEf,SAASs1B,YAAYj0B,GACnB,IAAM0E,EAAOC,YAAa,CACxBuvB,gBAAiB,CAAC,EAAG,GACrB9a,UAAW,eACXxU,OAAO,IAJwB,EAMZ5F,cAAbqD,EANyB,EAMzBA,KAAMkZ,EANmB,EAMnBA,GACR4Y,EAAgBxN,aAAYpL,EAAGtb,OAC7BpB,EAAMC,cAAND,EARyB,4BAa7BmJ,eAb6B,GAU/BosB,EAV+B,KAW/BC,EAX+B,KAY/BC,EAZ+B,KAqBjC,OANAlwB,aAAgB,WACVmX,EAAGtb,QAAUk0B,GACfzvB,EAAKwsB,SAEN,CAACxsB,EAAM6W,EAAGtb,MAAOk0B,IAGlB,gCACE,gBAACI,GAAA,EAAD,CACEtwB,OAAQmwB,EACRpwB,eAAgBswB,EAChBn2B,MAAOU,EAAE,uBAET,gBAAC21B,GAAA,EAAD,OAEF,gBAAC1nB,GAAA,EAAepI,EAAO1E,EAAMxB,UAC7B,gBAACuG,GAAA,EAAD,uBAAiBL,EAAjB,CAAuBI,aAAYjG,EAAE,aACnC,gBAACikB,GAAA,EAAD,uBAAcpe,EAAd,CAAoBgI,GAAIC,IAAMC,GAAI6nB,iBAC/B51B,EAAE,aAEL,gBAACikB,GAAA,EAAD,uBAAcpe,EAAd,CAAoB9B,QAASyxB,IAC1Bx1B,EAAE,uBAEL,gBAACikB,GAAA,EAAD,uBAAcpe,EAAd,CAAoBgnB,KAAMgJ,eAAc3zB,OAAO,WAC5ClC,EAAE,sBAEL,gBAACkkB,GAAA,EAAcre,GACf,gBAACoe,GAAA,EAAD,uBAAcpe,EAAd,CAAoBgnB,KAAMiJ,eAAa5zB,OAAO,WAC3ClC,EAAE,cAEL,gBAACikB,GAAA,EAAD,uBAAcpe,EAAd,CAAoBgnB,KAAMkJ,eAAa7zB,OAAO,WAC3ClC,EAAE,qBAEL,gBAACikB,GAAA,EAAD,uBAAcpe,EAAd,CAAoBgnB,KAAMmJ,eAAmB9zB,OAAO,WACjDlC,EAAE,iBAEL,gBAACkkB,GAAA,EAAcre,GACf,gBAACoe,GAAA,EAAD,uBAAcpe,EAAd,CAAoBgI,GAAIknB,MACxB,gBAAC7Q,GAAA,EAAcre,GACf,gBAACoe,GAAA,EAAD,uBAAcpe,EAAd,CAAoB9B,QAASP,EAAKyyB,SAC/Bj2B,EAAE,iB,41CCoEb,IAAMqgB,GAASlhB,kBAAOwE,KAAV,mEAAGxE,CAAH,kBClMG2mB,GDsMAhmB,aAtKf,SAASo2B,cAAc,IACbl2B,EAAMC,cAAND,EADa,EAEWG,cAAxBsN,EAFa,EAEbA,SAAUvN,EAFG,EAEHA,UACZwD,EAAO8J,eACP/J,EAAOwF,eAJQ,qBAKyB1D,YAAe,GALxC,GAKduC,EALc,KAKGquB,EALH,0BASjB5wB,YAAe,GATE,GAOnB6wB,EAPmB,KAQnBC,EARmB,KAWrB9wB,aAAgB,WACdrF,EAAUqgB,cACVrgB,EAAU0iB,mBACT,CAAC1iB,IAEJ,IAAMo2B,EAAkC/wB,eACtC,SAACvD,GACCA,EAAG0M,iBACH2nB,GAA6B,KAE/B,IAGIE,EAAmChxB,eAAkB,WACzD8wB,GAA6B,KAC5B,IAEGxuB,EAAwBtC,eAAkB,SAACvD,GAC/CA,EAAG0M,iBACHynB,GAAmB,KAClB,IAEGpuB,EAAyBxC,eAAkB,WAC/C4wB,GAAmB,KAClB,IAnCkB,qBAqCS5wB,aArCT,GAqCdixB,EArCc,KAqCLC,EArCK,KAsCfC,EAAmBnxB,eAAkB,SAAC8pB,GAAD,OAAUoH,EAAWpH,KAAO,IACjEsH,EAAepxB,WAAc,iBAAO,CAAEqxB,YAAaJ,KAAY,CACnEA,IAGIplB,EAAM3D,EAASE,UAAUjK,EAAKd,IAEpC,OACE,gBAAC,GAAD,CAAS4J,IAAKkqB,GACXF,GACC,gBAACK,GAAA,EAAD,CAAaC,QAASC,KAAct1B,QAASk1B,GAC3C,gBAAC,GAAD,MACG,SAACx1B,GAAD,OACC,gBAAC,GAAD,gBACMA,EADN,CAEE8yB,WAAYxwB,EAAKP,KACjBmF,SAAU3E,EAAKR,KACfgxB,QAASxwB,EAAK8D,UACdwsB,gBAAc,QAIpB,gBAACgD,GAAA,EAAD,CAAY5yB,MAAI,EAAC6yB,WAAS,GACxB,gBAAC,GAAD,KACE,gBAAC,GAAD,CACElpB,GAAG,QACHxO,KAAM,gBAAC,WAAD,CAAUa,MAAM,iBACtB0e,OAAO,EACPtd,MAAOxB,EAAE,UAEX,gBAAC,GAAD,CACE+N,GAAI,CACFgC,SAAU,UACVmB,MAAO,CAAEC,UAAU,IAErB5R,KAAM,gBAAC,aAAD,CAAYa,MAAM,iBACxBoB,MAAOxB,EAAE,UACT8e,OAAO,IAET,gBAAC,GAAD,CACE/Q,GAAG,WACHxO,KAAM,gBAAC,cAAD,CAAaa,MAAM,iBACzB0e,OAAO,EACPtd,MAAOxB,EAAE,aAEVoR,EAAIxD,gBACH,gBAAC,GAAD,CACEG,GAAG,UACHxO,KAAM,gBAAC,WAAD,CAAUa,MAAM,iBACtBoB,MACE,gBAAC,GAAD,CAAQkG,MAAM,UACX1H,EAAE,UACH,gBAAC,GAAD,CAAQ6f,MAAO3f,EAAUg3B,eAG7BxK,OACExsB,EAAUwsB,QACLxsB,EAAUwsB,OAAOyK,cACjBj3B,EAAUwsB,OAAO0B,YACjBluB,EAAUwsB,OAAO0K,gBAClB5yB,KAKZ,gBAAC,GAAD,CAAS8M,MAAI,GACX,gBAAC,GAAD,CACEiiB,mBAAoB+C,KAGxB,gBAAC,GAAD,KACGllB,EAAIxD,gBACH,gCACE,gBAAC,GAAD,CACEG,GAAG,aACHxO,KAAM,gBAAC,aAAD,CAAYa,MAAM,iBACxB0e,OAAO,EACPtd,MAAOxB,EAAE,aACT0sB,OACExsB,EAAUwsB,OAASxsB,EAAUwsB,OAAOxM,cAAW1b,IAGnD,gBAAC,GAAD,CAAatE,UAAWA,IACxB,gBAAC,GAAD,CAAWA,UAAWA,KAG1B,gBAAC,GAAD,CACE6N,GAAG,YACHxO,KAAM,gBAAC,eAAD,CAAca,MAAM,iBAC1B0e,OAAO,EACPtd,MAAOxB,EAAE,cAEVoR,EAAIimB,YACH,gBAAC,GAAD,CACEtpB,GAAG,oBACHhK,QAAS8D,EACTtI,KAAM,gBAAC,WAAD,CAAUa,MAAM,iBACtBoB,MAAK,UAAKxB,EAAE,iBAAP,SAKZoR,EAAIimB,YACH,gBAACnyB,EAAA,EAAD,CACE5F,MAAOU,EAAE,iBACTmF,eAAgB4C,EAChB3C,OAAQ0C,GAER,gBAACS,EAAA,EAAD,CAAQjD,SAAUyC,KAGtB,gBAAC7C,EAAA,EAAD,CACE5F,MAAOU,EAAE,uBACTmF,eAAgBoxB,EAChBnxB,OAAQgxB,GAER,gBAAC,GAAD,CAAe9wB,SAAUixB,U,s1EErLtB,SAASe,UAAU,4BACY/xB,WAAe,GAD3B,GACzBgyB,EADyB,KACTC,EADS,KAqBhC,OAlBAjyB,aAAgB,WAAM,gGACpB,iIACMkyB,EAAM,EADZ,SAEoBj3B,MAChB,yDAHJ,cAEQk3B,EAFR,gBAKyBA,EAAIC,OAL7B,OAKQC,EALR,2CAMwBA,GANxB,qEAOgBC,WAAR,WAAyBC,MAPjC,0CAQaN,EAAkBC,IAR/B,QAUMA,IAVN,+MADoB,gCACLM,eADK,2CAepBA,KACC,IAGD,gBAAC,GAAD,CACElL,KAAK,8CACLrrB,MACE,oCACIs2B,KACF,2BACA,gBAACE,GAAD,KACsB,IAAnBT,EACG,aADH,UAEMA,EAFN,mBAGwB,IAAnBA,EAAuB,GAAK,IAHjC,eAYb,IAAMS,GAAW74B,kBAAO+H,KAAV,wEAAG/H,CAAH,oBCfR84B,GAA8B,W,UAAnBC,EAAIC,WAsHrB,IAAMC,GAAWj5B,kBAAOo1B,gBAAV,yEAAGp1B,CAAH,+CAKRk5B,GAAcl5B,kBAAOwE,KAAV,4EAAGxE,CAAH,kBAIFW,gBA7Hf,SAASw4B,kBAAkB,IACjBt4B,EAAMC,cAAND,EACF6P,EAAUsI,cACVzU,EAAO8J,eAEP4D,EADejR,cAAbsN,SACaE,UAAUjK,EAAKd,IAE9B21B,EAAoBhzB,eAAkB,WAC1CsK,EAAQQ,KAAK,WACZ,CAACR,IAEJ,OACE,gBAAC,GAAD,KACE,gBAAC,GAAD,CACEokB,WACE,gBAACoE,GAAD,CAAa3wB,MAAM,UACjB,gBAAC0wB,GAAD,CAAUh4B,MAAM,iBADlB,IACqCJ,EAAE,kBAGzCqI,SAAU3E,EAAKR,KACfgxB,QAASxwB,EAAK8D,UACdzD,QAASw0B,IAGX,gBAAC50B,EAAA,EAAD,CAAM2N,MAAI,EAAC1N,QAAM,GACf,gBAACozB,GAAA,EAAD,CAAYC,WAAS,GACnB,gBAAC,GAAD,KACE,gBAAC,GAAD,KAASj3B,EAAE,YACX,gBAAC,GAAD,CACE+N,GAAG,YACHxO,KAAM,gBAAC,cAAD,CAAaa,MAAM,iBACzBoB,MAAOxB,EAAE,aAEX,gBAAC,GAAD,CACE+N,GAAG,0BACHxO,KAAM,gBAAC,YAAD,CAAWa,MAAM,iBACvBoB,MAAOxB,EAAE,mBAEVoR,EAAIonB,cACH,gBAAC,GAAD,CACEzqB,GAAG,mBACHxO,KAAM,gBAAC,WAAD,CAAUa,MAAM,iBACtBoB,MAAOxB,EAAE,iBAIf,gBAAC,GAAD,KACE,gBAAC,GAAD,KAASA,EAAE,SACVoR,EAAIhD,QACH,gBAAC,GAAD,CACEL,GAAG,oBACHxO,KAAM,gBAAC,WAAD,CAAUa,MAAM,iBACtBoB,MAAOxB,EAAE,aAGZoR,EAAIhD,QACH,gBAAC,GAAD,CACEL,GAAG,qBACHxO,KAAM,gBAAC,cAAD,CAAaa,MAAM,iBACzBoB,MAAOxB,EAAE,cAGb,gBAAC,GAAD,CACE+N,GAAG,oBACHxO,KAAM,gBAAC,WAAD,CAAUa,MAAM,iBACtB0e,OAAO,EACPtd,MAAOxB,EAAE,aAEX,gBAAC,GAAD,CACE+N,GAAG,mBACHxO,KAAM,gBAAC,YAAD,CAAWa,MAAM,iBACvB0e,OAAO,EACPtd,MAAOxB,EAAE,YAEX,gBAAC,GAAD,CACE+N,GAAG,mBACHxO,KAAM,gBAAC,WAAD,CAAUa,MAAM,iBACtBoB,MAAOxB,EAAE,iBAEVoR,EAAIiJ,QACH,gBAAC,GAAD,CACEtM,GAAG,0BACHxO,KAAM,gBAAC,eAAD,CAAca,MAAM,iBAC1BoB,MAAK,UAAKxB,EAAE,UAAP,cAAsBA,EAAE,cAIlCoR,EAAIhD,QACH,gBAAC,GAAD,KACE,gBAAC,GAAD,KAASpO,EAAE,iBACX,gBAAC,GAAD,CACE+N,GAAG,+BACHxO,KAAM,gBAACk5B,GAAA,EAAD,CAAWr4B,MAAM,iBACvBoB,MAAM,UAEPy2B,IACC,gBAAC,GAAD,CACElqB,GAAG,gCACHxO,KAAM,gBAACm5B,GAAA,EAAD,CAAYt4B,MAAM,iBACxBoB,MAAM,YAKb4P,EAAIhD,SAAW6pB,IACd,gBAAC,GAAD,KACE,gBAAC,GAAD,KAASj4B,EAAE,iBACX,gBAACs3B,QAAD,aC3ID10B,GAAK,WAEH,SAAS+1B,iBACtB,OAAO,uBAAK/1B,GAAIA,KCDH,SAASg2B,cACtB,OAAO,gBAACC,GAAD,CAAQhM,KAAI,WAAMjqB,KAAlB,mBAGT,I,2BAAMi2B,GAAS15B,UAAOwrB,EAAV,sEAAGxrB,CAAH,yQAgBM,SAACgC,GAAD,OAAWA,EAAMC,MAAMiT,cAC5B,SAAClT,GAAD,OAAWA,EAAMC,MAAMwL,QACf,SAACzL,GAAD,OAAWA,EAAMC,MAAMgG,WAC7B,SAACjG,GAAD,OAAWA,EAAMC,MAAMypB,OAAOiO,W,4+FC2BvCC,I,GAWHxqB,aAAQ,GAAD,OAAIqD,KAAJ,O,GAKPrD,aAAQ,W,GASRA,aAAQ,CAAC,IAAK,IAAN,UAAcqD,KAAd,Q,GAORrD,aAAQ,K,GAKRA,aAAQ,KAtCVzO,a,4sBAsBCk5B,6BAA+B,WAC7B,EAAKzD,uBAAwB,G,wMAhBzBhyB,KAAKoiB,aACPpiB,KAAKoiB,gBAAanhB,K,gEAMpBjB,KAAKpC,MAAMub,GAAG0N,2B,gFAKd7mB,KAAKgyB,uBAAwB,I,4CAQpBvzB,GACTA,EAAG0M,iBACH1M,EAAGsZ,kBACH/X,KAAKoiB,WAAalV,iB,oDAKlBlN,KAAKoiB,WAAaxM,iB,wDAIF,IACR0Z,EAAuBtvB,KAAKpC,MAAMub,GAAlCmW,mBACHA,IAEOtvB,KAAKpC,MAAMsM,SAASE,UAAUklB,GACjCzkB,QAET7K,KAAKpC,MAAM0O,QAAQQ,KAAKrC,aAAe6kB,O,sCAGhC,MACiBtvB,KAAKpC,MAArBqC,EADD,EACCA,KAAMxD,EADP,EACOA,EAAG0c,EADV,EACUA,GACTjZ,EAAeD,EAAfC,KAAMC,EAASF,EAATE,KACRu1B,EAAcz1B,EAAK01B,eAAiBz1B,GAAQC,EAC5CskB,EAAmBtL,EAAGhI,WAAagI,EAAGsL,iBAE5C,OAAIxkB,EAAK21B,YAAoB,gBAAC,GAAD,MACzB51B,KAAKoiB,WAAmB,gBAAC,IAAD,CAAU5X,GAAIxK,KAAKoiB,WAAYtV,MAAI,IAG7D,gBAAC,GAAD,CAAWzM,QAAM,EAAC0N,MAAI,GACpB,gBAAC8nB,GAAA,EAAD,KACE,6BAAQ11B,GAAQA,EAAKR,KAAOQ,EAAKR,KAAO,WACxC,wBACEA,KAAK,WACL2mB,QAAQ,2CAGZ,gBAAC+O,YAAD,MAECr1B,KAAKpC,MAAMub,GAAG2c,oBAAsB,gBAAC7nB,GAAA,EAAD,MACpCjO,KAAKpC,MAAMm4B,cAEZ,gBAACC,GAAD,CACEx1B,QAAS2Y,EAAGsN,oBACZzqB,KAAM,gBAAC,WAAD,MACNkkB,UAAU,eACVxe,SAAO,IAGT,gBAAC,GAAD,CAAWqM,MAAI,GACZ2nB,GACC,gBAAC,IAAD,KACE,gBAAC,IAAD,CAAOla,KAAK,YAAYya,UAAWlB,KACnC,gBAAC,IAAD,CAAOkB,UAAW1T,MAItB,gBAAC6S,eAAD,MACA,gBAACc,GAAD,CACEnoB,MAAI,EACJ6iB,QAAQ,SACRhK,YAAazN,EAAGgd,kBAChBC,kBAAmB3R,EACnBZ,MACEY,OACIxjB,EACA,CAAEolB,WAAY,GAAF,OAAKlN,EAAGwJ,aAAR,QAGjB3iB,KAAKpC,MAAMxB,UAGd,gBAAC,IAAD,KACE,gBAAC,IAAD,CACEof,KAAI,eAAU6a,KAAV,yBACJJ,UAAWnU,OAIjB,gBAACqQ,GAAA,EAAD,CACEtwB,OAAQ7B,KAAKgyB,sBACbpwB,eAAgB5B,KAAKy1B,6BACrB15B,MAAOU,EAAE,uBAET,gBAAC21B,GAAA,EAAD,Y,QAjHWpwB,a,8DAElBC,K,uIACAA,K,qFAA4C,K,yvBAqHzC6L,GAAYlS,kBAAOwE,KAAV,oEAAGxE,CAAH,iFACC,SAACgC,GAAD,OAAWA,EAAMC,MAAMiT,cACvB,SAAClT,GAAD,OAAWA,EAAMC,MAAMuL,wBAMjC4sB,GAAmBp6B,kBAAO6F,KAAV,2EAAG7F,CAAH,mFAIT,SAACgC,GAAD,OAAWA,EAAMC,MAAMypB,OAAOC,QAAU,IAEjDxX,aAAW,SAAXA,CANkB,0BAehBmmB,GAAUt6B,kBAAOwE,KAAV,kEAAGxE,CAAH,wEAEG,SAACgC,GAAD,OACZA,EAAMgpB,YAAc,OAApB,+BAMA7W,aAAW,SAAU,SAArBA,CATS,0BAaTA,aAAW,SAAXA,CAbS,oBAcP,SAACnS,GAAD,OACAA,EAAMw4B,mBAAN,uBACgBx4B,EAAMC,MAAM6nB,sBAD5B,WAKSxjB,iBACbC,YAAO,OAAQ,KAAM,YAAa,WAAlCA,CAA8C6N,YAAWwlB,M,0BCtMrDc,GAAiBt0B,QAAW,kBAChC,oFAEIu0B,GAAgBv0B,QAAW,kBAC/B,sQAIIw0B,GAAW,SAAXA,WAAW,OAAM,gBAAC,GAAD,CAAQnpB,UAAQ,KACjCopB,GAAmB,SAAnBA,iBAAoB,GAAD,IAAGtqB,EAAH,EAAGA,MAAH,OACvB,gBAAC,IAAD,CACE3B,GACE2B,EAAMV,OAAOuW,aAAb,eAAoC7V,EAAMV,OAAOuW,cAAiB,WAKzD,SAAS0U,sBACtB,OACE,gBAACC,GAAA,EAAD,KACE,gBAAC,GAAD,KACE,gBAAC,WAAD,CACE3jB,SACE,gBAAClD,GAAA,EAAD,KACE,gBAAC+M,GAAA,EAAD,QAIJ,gBAAC,IAAD,KACE,gBAAC,IAAD,CAAUkO,KAAK,aAAavgB,GAAG,UAC/B,gBAAC,KAAD,CAAOgR,KAAK,aAAaya,UAAWzX,KACpC,gBAAC,KAAD,CAAOhD,KAAK,QAAQya,UAAWzX,KAC/B,gBAAC,KAAD,CAAOjD,OAAK,EAACC,KAAK,WAAWya,UAAWlX,KACxC,gBAAC,KAAD,CAAOxD,OAAK,EAACC,KAAK,iBAAiBya,UAAWlX,KAC9C,gBAAC,KAAD,CAAOxD,OAAK,EAACC,KAAK,aAAaya,UAAW7W,KAC1C,gBAAC,KAAD,CAAO7D,OAAK,EAACC,KAAK,mBAAmBya,UAAW7W,KAChD,gBAAC,KAAD,CAAO7D,OAAK,EAACC,KAAK,UAAUya,UAAWnZ,KACvC,gBAAC,KAAD,CAAOvB,OAAK,EAACC,KAAK,WAAWya,UAAWz5B,IACxC,gBAAC,KAAD,CAAO+e,OAAK,EAACC,KAAK,SAASya,UAAWxW,KACtC,gBAAC,IAAD,CAAUlE,OAAK,EAACwP,KAAK,iBAAiBvgB,GAAG,kBACzC,gBAAC,KAAD,CAAO+Q,OAAK,EAACC,KAAK,sBAAsBya,UAAW1Z,KACnD,gBAAC,KAAD,CAAOhB,OAAK,EAACC,KAAK,uBAAuBya,UAAWnT,KACpD,gBAAC,KAAD,CAAOvH,OAAK,EAACC,KAAK,kBAAkBya,UAAWnT,KAC/C,gBAAC,KAAD,CAAOvH,OAAK,EAACC,KAAI,aAAQ6a,MAAQJ,UAAWQ,KAC5C,gBAAC,KAAD,CACElb,OAAK,EACLC,KAAI,eAAU6a,KAAV,yBACJJ,UAAWM,KAEb,gBAAC,KAAD,CAAOhb,OAAK,EAACC,KAAI,eAAU6a,KAAV,SAAuBJ,UAAWM,KACnD,gBAAC,KAAD,CAAO/a,KAAI,eAAU6a,MAAQJ,UAAWM,KACxC,gBAAC,KAAD,CAAOhb,OAAK,EAACC,KAAK,UAAUya,UAAWlrB,KACvC,gBAAC,KAAD,CAAOwQ,OAAK,EAACC,KAAK,gBAAgBya,UAAWlrB,KAC7C,gBAAC,KAAD,CAAOyQ,KAAK,OAAOya,UAAWW,OAE9B,gBAACN,GAAD,MACA,gBAAC,KAAD,CAAOL,UAAWO,MACV,S,+vCC5Eb,SAAS/Y,iBAAiB,qBACfoZ,UAAUrZ,SAAStH,MAAM,KADV,GACxB4gB,EADwB,KAEzBC,GAFyB,MAEVD,GAAIE,cACzB,gBAAUF,EAAV,YAAgBC,GAGX,SAASE,eAAeC,EAA2BC,GACpDD,GAAoBC,EAAK3Z,WAAa0Z,GAGxCC,EAAKF,eAAeC,EAAiB3qB,QAAQ,IAAK,Q,wkFCJtD,IAAMzJ,EAASlH,UAAOw7B,OAAV,yEAAGx7B,CAAH,iKAOD,SAACgC,GAAD,OAAWA,EAAMC,MAAMwL,QAIhB,SAACzL,GAAD,OAAWA,EAAMC,MAAMw5B,2BAK5B,SAACz5B,GAAD,OAAWA,EAAMC,MAAM6C,eAI9B+N,EAAU7S,UAAOqC,MAAV,0EAAGrC,CAAH,kCAEE,SAACgC,GAAD,OAAYA,EAAMqJ,MAAQ,QAAU,UAiB7CjJ,EADLzB,a,klBAICyX,WAAa,WACX,EAAKD,SAAU,G,EAGjBD,YAAc,WACZ,EAAKC,SAAU,G,mKAGR,MAQH/T,KAAKpC,MANPK,EAFK,EAELA,MACAgiB,EAHK,EAGLA,UACArf,EAJK,EAILA,YACA1C,EALK,EAKLA,QACA+I,EANK,EAMLA,MACGwM,EAPE,kFAUD6jB,EAAe,gBAAC,IAAD,KAAYr5B,GAEjC,OACE,gBAACwQ,EAAD,CAASxH,MAAOA,GACbhJ,IACE2C,EACC,gBAAC,IAAD,KAAiB02B,GAEjBA,GAEJ,gBAAC,IAAD,CAASvjB,QAAS/T,KAAK+T,QAASkM,UAAWA,GACzC,gBAACnd,EAAD,UAAQqQ,OAAQnT,KAAKgU,WAAYK,QAASrU,KAAK8T,aAAiBL,GAC7DvV,EAAQ2J,KAAI,SAAC+V,GAAD,OACX,0BAAQzf,MAAOyf,EAAOzf,MAAOkD,IAAKuc,EAAOzf,OACtCyf,EAAO3f,iB,aAnCE+D,a,4dACvBC,K,qFAA8B,K,SA4ClBjE,O,66CCHAzB,iBAvEf,SAASuF,SAAT,GAAuC,IAAnBC,EAAmB,EAAnBA,SACVlD,EAAWjC,cAAXiC,OACApC,EAAMC,cAAND,EACAgD,EAAckG,cAAdlG,UAH6B,iBAIbuC,aAJa,GAI9BrC,EAJ8B,KAIxB43B,EAJwB,sBAKLv1B,aALK,GAK9B8Q,EAL8B,KAKpB0kB,EALoB,sBAMXx1B,aANW,GAM9BhD,EAN8B,KAMvBy4B,EANuB,KAQ/B9hB,EAAY,iB,oRAAA,0BAAG,iBAAOlX,GAAP,sGACnBA,EAAG0M,iBACHqsB,GAAY,GACNx4B,EAAQ,IAAI04B,IAChB,CACE/3B,KAAMA,GAERd,GAPiB,cAWjB44B,EAXiB,SAWFz4B,EAAMyH,OAXJ,oFAajBhH,EAAU,KAAI8V,QAAS,CAAE3V,KAAM,UAbd,yBAejB43B,GAAY,GAfK,mFAAH,gBAAZ7hB,aAAY,sCAuBlB,OACE,gCACE,wBAAM5T,SAAU4T,GACd,gBAAC,IAAD,KACE,gBAAC,IAAD,uJAMF,gBAAC,IAAD,KACE,gBAAC,IAAD,CACE/V,KAAK,OACL3B,MAAM,OACN0C,SAlBe,SAAnB0V,iBAAoB5X,GACxB84B,EAAQ94B,EAAGE,OAAOR,QAkBVA,MAAOwB,EACP8W,UAAQ,EACR1R,WAAS,EACTlE,MAAI,KAGR,gBAAC,IAAD,KACE,gBAAC,IAAD,yDAGF,gBAAC,IAAD,CAAQjB,KAAK,SAASwE,SAAU0O,IAAanT,GAC1CmT,EAAW,GAAH,OAAMrW,EAAE,YAAR,KAAyBA,EAAE,cAGxC,gBAAC,IAAD,CACEV,MAAOU,EAAE,iBACTmF,eAAgBG,EAChBF,SAAU7C,GAEV,gBAAC,IAAD,CAAcA,MAAOA,U,sZC1D7B,IAqDM24B,EAAgB/7B,UAAOC,IAAV,+EAAGD,CAAH,sCAKbg8B,EAAOh8B,kBAAO0E,KAAV,sEAAG1E,CAAH,gGAMC,SAACgC,GAAD,OAAWA,EAAMC,MAAMkL,gBAG5B8uB,EAAej8B,kBAAO6F,KAAV,8EAAG7F,CAAH,wHASdk8B,KAKErpB,EAAU7S,UAAOC,IAAV,yEAAGD,CAAH,uBAIEkM,IArFO,SAAhBA,cAAiB,GAOV,IANX5J,EAMW,EANXA,QAMW,IALX6J,iBAKW,MALC,GAKD,EAJXC,EAIW,EAJXA,aAIW,IAHXC,sBAGW,MAHM,GAGN,EAFXgY,EAEW,EAFXA,UACAvY,EACW,EADXA,SAEMpF,EAAOC,YAAa,CAAEC,OAAO,IAC7Bwe,EAAW,IAAK9iB,EAAS,CAAEmD,IAAK0G,KAAgB7J,EAAQ,GACxD65B,EAAgB/W,EAAW,GAAH,OAAM/Y,EAAN,YAAwB+Y,EAAS/iB,OAAU,GAEzE,OACE,gBAACwQ,EAAD,KACE,gBAAC,IAAenM,GACb,SAAC1E,GAAD,OACC,gBAACi6B,EAAD,YACMj6B,EADN,CAEEqiB,UAAWA,EACXve,SAAO,EACPs2B,YAAU,EACVrtB,OAAK,IAEJ5C,EAAYgwB,EAAgB/vB,MAInC,gBAAC,IAAD,UAAatF,aAAYsF,GAAkB1F,GACxCpE,EAAQ2J,KAAI,SAAC+V,GAAD,OACX,gBAAC,IAAD,UACEvc,IAAKuc,EAAOvc,IACZb,QAAS,mBACPkH,EAASkW,EAAOvc,KAChBiB,EAAKwsB,QAEP9N,SAAUpD,EAAOvc,MAAQ0G,GACrBzF,GAEHsb,EAAOlU,KACN,gBAACiuB,EAAD,KACG/Z,EAAO3f,MACR,gBAAC25B,EAAD,KAAOha,EAAOlU,OAGhBkU,EAAO3f,c,sjEC3CfmD,EADL7E,a,mmBAIC07B,uBAAyB,WACvB,EAAKC,kBAAmB,G,EAG1BC,wBAA0B,WACxB,EAAKD,kBAAmB,G,qKAGjB,MAC0Dl4B,KAAKpC,MAA9DoB,EADD,EACCA,MAAOo5B,EADR,EACQA,iBAAkB92B,EAD1B,EAC0BA,aAAcC,EADxC,EACwCA,cAEzC82B,EAAcr5B,EAAMq5B,YAGpB5zB,EADqB2zB,EAAiBE,QAAQt5B,EAAMK,IAEvDk5B,MAAM,EAAGC,KACT3wB,KAAI,SAAC4wB,GAAD,OAAQA,EAAGv4B,QAEZw4B,EAAWL,EAAc5zB,EAAMuC,OAErC,OACE,gCACE,gBAAC,IAAD,CACElD,MACE,gBAAC60B,EAAD,KACE,gBAAC,YAAD,CAAWz0B,KAAM,MAGrBnI,MACE,gBAACymB,EAAD,CAAOhiB,QAASR,KAAKi4B,wBAAyBj5B,EAAMW,MAEtD0D,SACE,gCACGg1B,EADH,UACuC,IAAhBA,EAAoB,GAAK,KAGlDn8B,QACE,gBAAC,IAAD,CAAMiI,MAAM,UACT7C,GACC,gBAAC,IAAD,CACEd,QAASR,KAAKi4B,uBACdxzB,MAAOA,EACPi0B,SAAUA,IALhB,IASGn3B,EAAc,CACb+D,iBAAkBtF,KAAKi4B,4BAK/B,gBAAC,IAAD,CACEl8B,MAAM,gBACN6F,eAAgB5B,KAAKm4B,wBACrBt2B,OAAQ7B,KAAKk4B,kBAEb,gBAAC,IAAD,CAAcl5B,MAAOA,EAAO+C,SAAU/B,KAAKm4B,gC,eA5DzBn2B,a,qeACzBC,K,qFAAuC,K,SAkEpC02B,EAAQ/8B,kBAAOwE,KAAV,uEAAGxE,CAAH,yGAKK,SAACgC,GAAD,OAAWA,EAAMC,MAAMkT,uBAIjCyR,EAAQ5mB,UAAOkuB,KAAV,uEAAGluB,CAAH,wDAOIuG,gBAAO,mBAAPA,CAA2Bf,I,kCC5G1C,IAEMtE,EAFN,UAEgBlB,QAAOg9B,GAAV,8DAAGh9B,CAAH,oIAGT,SAACgC,GAAD,OAAYA,EAAMvB,SAAW,sBAAwB,MAW1CS,O,m/DC6Mf,IAAM+7B,EAAYj9B,kBAAO,OAAV,oEAAGA,CAAH,kCAKTk9B,EAASl9B,kBAAO,OAAV,iEAAGA,CAAH,mDAMGW,iBA3Mf,SAASyI,OAAT,GAAqC,IAAnBjD,EAAmB,EAAnBA,SAAmB,iBACHC,aADG,GAC5B8Q,EAD4B,KAClB0kB,EADkB,sBAECx1B,YAAwB,GAFzB,GAE5B+2B,EAF4B,KAEhBC,EAFgB,sBAGLh3B,WAAgC,CAC5D,CAAEi3B,MAAO,GAAIt5B,KAAM,IACnB,CAAEs5B,MAAO,GAAIt5B,KAAM,IACnB,CAAEs5B,MAAO,GAAIt5B,KAAM,MANc,GAG5Bu5B,EAH4B,KAGnBC,EAHmB,OASPv8B,cAApB6H,EAT2B,EAS3BA,MAAOyF,EAToB,EASpBA,SACPzK,EAAckG,cAAdlG,UACFS,EAAOwF,cACPvF,EAAO8J,cACLxN,EAAMC,cAAND,EAEF28B,EAAkBl5B,EAAK+4B,MAAM/iB,MAAM,KAAK,GACxCrI,EAAM3D,EAASE,UAAUjK,EAAKd,IAE9BsW,EAAe3T,cAAA,iB,oRAAA,0BACnB,iBAAOvD,GAAP,gGACEA,EAAG0M,iBACHqsB,GAAY,GAFd,kBAKU/yB,EAAM40B,OAAOH,GALvB,OAMIn3B,IACAtC,EAAUhD,EAAE,6BAA8B,CAAEmD,KAAM,YAPtD,gDASIH,EAAU,KAAI8V,QAAS,CAAE3V,KAAM,UATnC,yBAWI43B,GAAY,GAXhB,kFADmB,sDAenB,CAACz1B,EAAUtC,EAAWy5B,EAASz8B,EAAGgI,IAG9B4D,EAAerG,eAAkB,SAACvD,EAAIyQ,GAC1CiqB,GAAW,SAACG,GACV,IAAMC,EAAa,mBAAID,GAEvB,OADAC,EAAWrqB,GAAOzQ,EAAGE,OAAOgB,MAAQlB,EAAGE,OAAOR,MACvCo7B,OAER,IAEGC,EAAYx3B,eAAkB,WAC9Bk3B,EAAQlyB,QAxDI,IAyDdvH,EACEhD,EAAE,6DAA8D,CAC9Dg9B,YA3DU,KA6DZ,CAAE75B,KAAM,YAIZu5B,GAAW,SAACG,GACV,IAAMC,EAAa,mBAAID,GAEvB,OADAC,EAAWzsB,KAAK,CAAEmsB,MAAO,GAAIt5B,KAAM,KAC5B45B,OAER,CAAC95B,EAAWy5B,EAASz8B,IAElBi9B,EAAe13B,eACnB,SAACvD,EAAsByQ,GACrBzQ,EAAG0M,iBAEHguB,GAAW,SAACG,GACV,IAAMC,EAAa,mBAAID,GAEvB,OADAC,EAAW7lB,OAAOxE,EAAO,GAClBqqB,OAGX,IAGIjZ,EAAate,eAAkB,WACnCg3B,GAAc,GACdv5B,EAAUhD,EAAE,qBAAsB,CAChCmD,KAAM,cAEP,CAACH,EAAWhD,IAEf,OACE,wBAAMsF,SAAU4T,GACbxV,EAAKw5B,YACJ,gBAAC,IAAD,KACE,gBAAC,IAAD,CACEzyB,SAAS,yIACTC,OAAQ,CAAEyyB,cAAez5B,EAAKy5B,kBAIlC,gBAAC,IAAD,KACE,gBAAC,IAAD,CACE1yB,SAAS,qGACTC,OAAQ,CAAEyyB,cAAez5B,EAAKy5B,iBAC7B,IACF/rB,EAAIhD,QACH,gBAAC,IAAD,gCAC2B,IACzB,gBAAC,IAAD,CAAML,GAAG,sBAAT,wBAFF,MAOLrK,EAAK05B,WACJ,gBAAChB,EAAD,KACE,gBAAC,IAAD,CAAM10B,MAAM,YACV,gBAAC,IAAD,CACEvE,KAAK,OACLzB,MAAOgC,EAAKmV,IACZrX,MAAOxB,EAAE,iDACTyW,UAAQ,EACRrS,MAAI,IANR,KASE,gBAAC,IAAD,CAAiBwI,KAAMlJ,EAAKmV,IAAKuL,OAAQP,GACvC,gBAAC,IAAD,CACE1gB,KAAK,SACL5D,KAAM,gBAAC,WAAD,MACN6nB,MAAO,CAAEiW,aAAc,QACvBp4B,SAAO,GAEOjF,EAAbs8B,EAAe,cAAmB,gBAIzC,yBACE,6BAILG,EAAQrxB,KAAI,SAACwxB,EAAQnqB,GAAT,OACX,gBAAC,IAAD,CAAM7N,IAAK6N,GACT,gBAAC,IAAD,CACEtP,KAAK,QACLD,KAAK,QACL1B,MAAOxB,EAAE,SACTmE,YAAuB,IAAVsO,EACbvO,SAAU,kBAAClC,GAAD,OAAQ4J,EAAa5J,EAAIyQ,IACnCxO,YAAW,kBAAa04B,GACxBj7B,MAAOk7B,EAAOJ,MACdxiB,SAAoB,IAAVvH,EACVnK,UAAqB,IAAVmK,EACXrO,MAAI,IAXR,KAcE,gBAAC,IAAD,CACEjB,KAAK,OACLD,KAAK,OACL1B,MAAOxB,EAAE,aACTmE,YAAuB,IAAVsO,EACbvO,SAAU,kBAAClC,GAAD,OAAQ4J,EAAa5J,EAAIyQ,IACnC/Q,MAAOk7B,EAAO15B,KACd8W,WAAY4iB,EAAOJ,MACnBp4B,MAAI,IAEK,IAAVqO,GACC,gBAAC4pB,EAAD,KACE,gBAAC,IAAD,CAASve,QAAS9d,EAAE,iBAAkBua,UAAU,OAC9C,gBAAC,IAAD,CAAYxW,QAAS,iBAAC/B,GAAD,OAAQi7B,EAAaj7B,EAAIyQ,KAC5C,gBAAC,YAAD,aAQZ,gBAAC,IAAD,CAAM0hB,QAAQ,iBACXsI,EAAQlyB,QApLG,GAqLV,gBAAC,IAAD,CAAQpH,KAAK,SAASY,QAASg5B,EAAW93B,SAAO,GAC/C,gBAAC,IAAD,oBADF,KAIA,6BAGF,gBAAC,IAAD,CACE9B,KAAK,SACLwE,SAAU0O,EACVinB,UAAQ,QACRC,sBAAoB,SACpBC,oBAAkB,eAEjBnnB,EAAW,GAAH,OAAMrW,EAAE,YAAR,KAAyBA,EAAE,kBAGxC,gC,grBCtLSF,I,QAAAA,eAtBf,SAAS29B,gBAAT,GAA8C,IAAnB73B,EAAmB,EAAnBA,SACjB5F,EAAMC,cAAND,EACF6F,EAAOC,YAAa,CAAEC,OAAO,IAEnC,OACE,gCACE,gBAACC,EAAA,EAAD,UAAoBC,aAAYjG,EAAE,cAAkB6F,IACpD,gBAACK,EAAA,EAAD,YAAiBL,EAAjB,CAAuBI,aAAYjG,EAAE,0BACnC,gBAACmG,EAAA,EAAD,YACMN,EADN,CAEEvB,MAAO,CACL,CACEhF,MAAOU,EAAE,UACT+D,QAAS6B,YCuBR83B,EAhCa,SAAtBA,oBAAuB,GAAqC,IAAnCj6B,EAAmC,EAAnCA,KAAMmC,EAA6B,EAA7BA,SAAUa,EAAmB,EAAnBA,MAC7C,OACE,gBAAC,IAAD,CACEnH,MAAOmE,EAAKP,KACZ0D,SACE,gCACGnD,EAAKoD,aACJ,0CACS,gBAACE,EAAA,EAAD,CAAMC,SAAUvD,EAAKoD,eAD9B,QAIA,kBAEDpD,EAAKwD,WAAa,gBAACC,EAAA,EAAD,gBAClBzD,EAAK0D,SAAW,gBAACD,EAAA,EAAD,CAAOE,QAAS3D,EAAK0D,SAArB,UAGrBE,MAAO,gBAACC,EAAA,EAAD,CAAQC,IAAK9D,EAAK+D,UAAWC,KAAM,KAC1ChI,QACE,gBAACkE,EAAA,EAAD,CAAM+D,MAAM,UACT9B,GAAY,gBAAC,EAAD,CAAiBA,SAAUA,IACvCa,GACC,gBAACzB,EAAA,EAAD,CAAQjB,QAAS0C,EAAOxB,SAAO,GAA/B,W,8pFCNN04B,EADL79B,a,grBAKC+H,sBAAwB,WACtB,EAAKC,iBAAkB,G,EAGzBC,uBAAyB,WACvB,EAAKD,iBAAkB,G,EAGzB/F,aAAe,SAACC,GACd,EAAKC,MAAQD,EAAGE,OAAOR,MACvB,EAAKS,kB,EAGPA,eAAiB,KAAS,WACxB,EAAKhB,MAAM6G,MAAM3F,UAAU,CACzBJ,MAAO,EAAKA,UAEb,K,EAEHgG,c,4DAAgB,iBAAOxE,GAAP,sGACNzD,EAAM,EAAKmB,MAAXnB,EADM,kBAIN,EAAKmB,MAAMw6B,iBAAiBl5B,OAAO,CACvCI,QAAS,EAAK1B,MAAMoB,MAAMK,GAC1BuF,OAAQ1E,EAAKb,KANH,OAQZ,EAAKzB,MAAM4B,OAAOC,UAChBhD,EAAE,sCAAuC,CAAEoI,SAAU3E,EAAKP,OAC1D,CAAEC,KAAM,YAVE,gDAaZ,EAAKhC,MAAM4B,OAAOC,UAAUhD,EAAE,sBAAuB,CAAEmD,KAAM,UAbjD,+D,8NAiBP,aAC2BI,KAAKpC,MAA/B6G,EADD,EACCA,MAAOzF,EADR,EACQA,MAAOiB,EADf,EACeA,KAAMxD,EADrB,EACqBA,EACpByD,EAAeD,EAAfC,KAAMC,EAASF,EAATE,KACd,OAAKD,GAASC,EAGZ,gBAACC,EAAA,EAAD,CAAMC,QAAM,GACV,gBAACC,EAAA,EAAD,KACG7D,EACC,+GACC,IACH,gBAAC8D,EAAA,EAAD,CAAYC,QAASR,KAAKsE,uBACvB7H,EAAE,8BAA+B,CAAEqI,SAAU3E,EAAKR,QALvD,KASA,gBAACc,EAAA,EAAD,CACEb,KAAK,SACLc,YAAW,UAAKjE,EAAE,kBAAP,KACX0B,MAAO6B,KAAKtB,MACZiC,SAAUX,KAAKxB,aACfP,MAAOxB,EAAE,iBACTmE,aAAW,EACXmE,WAAS,EACTlE,MAAI,IAEN,gBAACC,EAAA,EAAD,CACExD,MACE0C,KAAKtB,MACH,gBAACnB,EAAA,EAAD,KAAQd,EAAE,mCAEV,gBAACc,EAAA,EAAD,KAAQd,EAAE,0BAGdsE,MAAO0D,EAAM41B,WAAWr7B,EAAMK,GAAIW,KAAKtB,OACvCzB,MAAO+C,KAAKtB,WAAQuC,EAAYwD,EAAM3F,UACtCoC,WAAY,oBAACC,GAAD,OACV,gBAAC,EAAD,CACEE,IAAKF,EAAK9B,GACVa,KAAMiB,EACN+B,MAAO,wBAAM,EAAKwB,cAAcvD,SAItC,gBAACQ,EAAA,EAAD,CACE5F,MAAOU,EAAE,iBACTmF,eAAgB5B,KAAKwE,uBACrB3C,OAAQ7B,KAAKuE,iBAEb,gBAACS,EAAA,EAAD,CAAQjD,SAAU/B,KAAKwE,2BA9CF,S,kBA3CAxC,a,2DAC5BC,K,qFAAsC,K,iDACtCA,K,oFAA2B,M,SA8FfC,gBACbC,YAAO,OAAQ,QAAS,mBAAoB,SAA5CA,CAAsDi4B,I,swCCjBzC79B,mBA1Ff,SAAS+9B,aAAT,GAAwC,IAAhBt7B,EAAgB,EAAhBA,MAAgB,iBACEgD,aADF,GAC/Bu4B,EAD+B,KACjBC,EADiB,OAEQ59B,cAAtC6H,EAF8B,EAE9BA,MAAO2zB,EAFuB,EAEvBA,iBAAkBluB,EAFK,EAELA,SACzBzK,EAAckG,cAAdlG,UACAhD,EAAMC,cAAND,EACFoR,EAAM3D,EAASE,UAAUpL,EAAMK,IAE/Bo7B,EAAiB,SAAjBA,eAAkB9sB,GACtB6sB,EAAgB7sB,IAGZxH,EAAgB,iB,0TAAA,0BAAG,iBAAOjG,GAAP,kHAEfk4B,EAAiBhyB,OAAO,CAC5B9G,QAASN,EAAMK,GACfuF,OAAQ1E,EAAKb,KAJM,OAMrBI,EACEhD,EAAE,0CAA2C,CAAEoI,SAAU3E,EAAKP,OAC9D,CAAEC,KAAM,YARW,+CAWrBH,EAAUhD,EAAE,yBAA0B,CAAEmD,KAAM,UAXzB,8DAAH,gBAAhBuG,iBAAgB,sCAetB,OACE,gBAAC/F,EAAA,EAAD,CAAMC,QAAM,GACTwN,EAAIhD,OACH,gCACE,gBAACvK,EAAA,EAAD,KACE,gBAACiD,EAAA,EAAD,CACE2D,SAAS,qKACTC,OAAQ,CAAEzH,UAAWV,EAAMW,MAC3ByH,WAAY,CAAEC,GAAI,mCAGtB,4BACE,gBAAC5F,EAAA,EAAD,CACE7B,KAAK,SACLY,QAAS,0BAAMi6B,GAAe,IAC9Bz+B,KAAM,gBAAC,WAAD,MACN0F,SAAO,GAENjF,EAAE,cANL,OAWJ,gBAAC6D,EAAA,EAAD,KACE,gBAACiD,EAAA,EAAD,CACE2D,SAAS,4DACTC,OAAQ,CAAEzH,UAAWV,EAAMW,MAC3ByH,WAAY,CAAEC,GAAI,mCAKxB,gBAACjK,EAAA,EAAD,KACE,gBAACmG,EAAA,EAAD,iBAEF,gBAACzC,EAAA,EAAD,CACEC,MAAO0D,EAAM6zB,QAAQt5B,EAAMK,IAC3BpC,MAAOm7B,EAAiBt5B,UACxBZ,QAAS,CAAEmB,GAAIL,EAAMK,IACrB/B,MAAO,gBAACC,EAAA,EAAD,KAAQd,EAAE,+BACjByE,WAAY,oBAACC,GAAD,OACV,gBAAC,EAAD,CACEE,IAAKF,EAAK9B,GACVa,KAAMiB,EACNkB,SAAUwL,EAAIhD,OAAS,kBAAM1E,EAAiBhF,SAAQF,OAI3D4M,EAAIhD,QACH,gBAAClJ,EAAA,EAAD,CACE5F,MAAOU,EAAE,8BAA+B,CAAEiD,UAAWV,EAAMW,OAC3DiC,eAAgB,iCAAM64B,GAAe,IACrC54B,OAAQ04B,GAER,gBAAC,EAAD,CACEv7B,MAAOA,EACP+C,SAAU,2BAAM04B,GAAe,WCvG5BH,O,6FCDf,0DAMe,SAASpF,UAAT,GAAiD,QAA5Br4B,aAA4B,MAApB,UAAoB,EAC9D,OACE,uBACEwT,KAAMxT,EACNqT,MAAM,OACNC,OAAO,OACPC,QAAQ,YACRmkB,QAAQ,OAER,wBAAMhkB,EAAE,+xE,kCCfd,2DAMe,SAAS4kB,WAAT,GAAkD,QAA5Bt4B,aAA4B,MAApB,UAAoB,EAC/D,OACE,uBACEwT,KAAMxT,EACNqT,MAAM,OACNC,OAAO,OACPC,QAAQ,YACRmkB,QAAQ,OAER,wBAAMhkB,EAAE,s0D,kCCfd,IAEMsgB,EAFN,UAEiBj1B,QAAO8+B,IAAV,8DAAG9+B,CAAH,+GACH,SAACgC,GAAD,OACPA,EAAMsS,MAAN,UAAiBtS,EAAMsS,MAAvB,MAAmCtS,EAAMsG,MAAQ,UACzC,SAACtG,GAAD,OACRA,EAAMuS,OAAN,UAAkBvS,EAAMuS,OAAxB,MAAqCvS,EAAMsG,MAAQ,UAEvC,SAACtG,GAAD,OAAWA,EAAMC,MAAMiT,cACjB,SAAClT,GAAD,OAAWA,EAAMC,MAAMC,WAK9B+yB,O,uGCNA,SAAStwB,WAAW3C,GACjC,OAAO,gBAAC6D,EAAW7D,GAGrB,IAAM6D,E,UAAS7F,QAAOqoB,OAAV,yEAAGroB,CAAH,oHAID,SAACgC,GAAD,OAAWA,EAAMC,MAAM88B","file":"authenticated-routes.d9542ac955e1760cf048.js","sourcesContent":["// @flow\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport CenteredContent from \"components/CenteredContent\";\nimport Header from \"components/Header\";\nimport PageTitle from \"components/PageTitle\";\n\ntype Props = {|\n  icon?: React.Node,\n  title: React.Node,\n  textTitle?: string,\n  children: React.Node,\n  breadcrumb?: React.Node,\n  actions?: React.Node,\n  centered?: boolean,\n|};\n\nfunction Scene({\n  title,\n  icon,\n  textTitle,\n  actions,\n  breadcrumb,\n  children,\n  centered,\n}: Props) {\n  return (\n    <FillWidth>\n      <PageTitle title={textTitle || title} />\n      <Header\n        title={\n          icon ? (\n            <>\n              {icon}&nbsp;{title}\n            </>\n          ) : (\n            title\n          )\n        }\n        actions={actions}\n        breadcrumb={breadcrumb}\n      />\n      {centered !== false ? (\n        <CenteredContent withStickyHeader>{children}</CenteredContent>\n      ) : (\n        children\n      )}\n    </FillWidth>\n  );\n}\n\nconst FillWidth = styled.div`\n  width: 100%;\n`;\n\nexport default Scene;\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { ArchiveIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Empty from \"components/Empty\";\nimport Heading from \"components/Heading\";\nimport PaginatedDocumentList from \"components/PaginatedDocumentList\";\nimport Scene from \"components/Scene\";\nimport Subheading from \"components/Subheading\";\nimport useStores from \"hooks/useStores\";\n\nfunction Archive() {\n  const { t } = useTranslation();\n  const { documents } = useStores();\n\n  return (\n    <Scene icon={<ArchiveIcon color=\"currentColor\" />} title={t(\"Archive\")}>\n      <Heading>{t(\"Archive\")}</Heading>\n      <PaginatedDocumentList\n        documents={documents.archived}\n        fetch={documents.fetchArchived}\n        heading={<Subheading sticky>{t(\"Documents\")}</Subheading>}\n        empty={\n          <Empty>{t(\"The document archive is empty at the moment.\")}</Empty>\n        }\n        showCollection\n        showTemplate\n      />\n    </Scene>\n  );\n}\n\nexport default observer(Archive);\n","// @flow\nimport styled from \"styled-components\";\n\nconst Divider = styled.hr`\n  border: 0;\n  border-bottom: 1px solid ${(props) => props.theme.divider};\n  margin: 0;\n  padding: 0;\n`;\n\nexport default Divider;\n","// @flow\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport InputSelect, { type Props, type Option } from \"./InputSelect\";\n\nexport default function InputSelectPermission(\n  props: $Rest<Props, { options: Array<Option> }>\n) {\n  const { t } = useTranslation();\n\n  return (\n    <InputSelect\n      label={t(\"Default access\")}\n      options={[\n        { label: t(\"View and edit\"), value: \"read_write\" },\n        { label: t(\"View only\"), value: \"read\" },\n        { label: t(\"No access\"), value: \"\" },\n      ]}\n      {...props}\n    />\n  );\n}\n","// @flow\nimport { debounce } from \"lodash\";\nimport { observable } from \"mobx\";\nimport { inject, observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { withTranslation, type TFunction } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport AuthStore from \"stores/AuthStore\";\nimport CollectionGroupMembershipsStore from \"stores/CollectionGroupMembershipsStore\";\nimport GroupsStore from \"stores/GroupsStore\";\nimport ToastsStore from \"stores/ToastsStore\";\nimport Collection from \"models/Collection\";\nimport Group from \"models/Group\";\nimport GroupNew from \"scenes/GroupNew\";\nimport Button from \"components/Button\";\nimport ButtonLink from \"components/ButtonLink\";\nimport Empty from \"components/Empty\";\nimport Flex from \"components/Flex\";\nimport GroupListItem from \"components/GroupListItem\";\nimport HelpText from \"components/HelpText\";\nimport Input from \"components/Input\";\nimport Modal from \"components/Modal\";\nimport PaginatedList from \"components/PaginatedList\";\n\ntype Props = {\n  toasts: ToastsStore,\n  auth: AuthStore,\n  collection: Collection,\n  collectionGroupMemberships: CollectionGroupMembershipsStore,\n  groups: GroupsStore,\n  onSubmit: () => void,\n  t: TFunction,\n};\n\n@observer\nclass AddGroupsToCollection extends React.Component<Props> {\n  @observable newGroupModalOpen: boolean = false;\n  @observable query: string = \"\";\n\n  handleNewGroupModalOpen = () => {\n    this.newGroupModalOpen = true;\n  };\n\n  handleNewGroupModalClose = () => {\n    this.newGroupModalOpen = false;\n  };\n\n  handleFilter = (ev: SyntheticInputEvent<>) => {\n    this.query = ev.target.value;\n    this.debouncedFetch();\n  };\n\n  debouncedFetch = debounce(() => {\n    this.props.groups.fetchPage({\n      query: this.query,\n    });\n  }, 250);\n\n  handleAddGroup = (group: Group) => {\n    const { t } = this.props;\n\n    try {\n      this.props.collectionGroupMemberships.create({\n        collectionId: this.props.collection.id,\n        groupId: group.id,\n        permission: \"read_write\",\n      });\n      this.props.toasts.showToast(\n        t(\"{{ groupName }} was added to the collection\", {\n          groupName: group.name,\n        }),\n        { type: \"success\" }\n      );\n    } catch (err) {\n      this.props.toasts.showToast(t(\"Could not add user\"), { type: \"error\" });\n      console.error(err);\n    }\n  };\n\n  render() {\n    const { groups, collection, auth, t } = this.props;\n    const { user, team } = auth;\n    if (!user || !team) return null;\n\n    return (\n      <Flex column>\n        <HelpText>\n          {t(\"Cant find the group youre looking for?\")}{\" \"}\n          <ButtonLink onClick={this.handleNewGroupModalOpen}>\n            {t(\"Create a group\")}\n          </ButtonLink>\n          .\n        </HelpText>\n\n        <Input\n          type=\"search\"\n          placeholder={`${t(\"Search by group name\")}`}\n          value={this.query}\n          onChange={this.handleFilter}\n          label={t(\"Search groups\")}\n          labelHidden\n          flex\n        />\n        <PaginatedList\n          empty={\n            this.query ? (\n              <Empty>{t(\"No groups matching your search\")}</Empty>\n            ) : (\n              <Empty>{t(\"No groups left to add\")}</Empty>\n            )\n          }\n          items={groups.notInCollection(collection.id, this.query)}\n          fetch={this.query ? undefined : groups.fetchPage}\n          renderItem={(item) => (\n            <GroupListItem\n              key={item.id}\n              group={item}\n              showFacepile\n              renderActions={() => (\n                <ButtonWrap>\n                  <Button onClick={() => this.handleAddGroup(item)} neutral>\n                    {t(\"Add\")}\n                  </Button>\n                </ButtonWrap>\n              )}\n            />\n          )}\n        />\n        <Modal\n          title={t(\"Create a group\")}\n          onRequestClose={this.handleNewGroupModalClose}\n          isOpen={this.newGroupModalOpen}\n        >\n          <GroupNew onSubmit={this.handleNewGroupModalClose} />\n        </Modal>\n      </Flex>\n    );\n  }\n}\n\nconst ButtonWrap = styled.div`\n  margin-left: 6px;\n`;\n\nexport default withTranslation()<AddGroupsToCollection>(\n  inject(\n    \"auth\",\n    \"groups\",\n    \"collectionGroupMemberships\",\n    \"toasts\"\n  )(AddGroupsToCollection)\n);\n","// @flow\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useMenuState } from \"reakit/Menu\";\nimport ContextMenu from \"components/ContextMenu\";\nimport OverflowMenuButton from \"components/ContextMenu/OverflowMenuButton\";\nimport Template from \"components/ContextMenu/Template\";\n\ntype Props = {|\n  onRemove: () => void,\n|};\n\nfunction MemberMenu({ onRemove }: Props) {\n  const { t } = useTranslation();\n  const menu = useMenuState({ modal: true });\n\n  return (\n    <>\n      <OverflowMenuButton aria-label={t(\"Show menu\")} {...menu} />\n      <ContextMenu {...menu} aria-label={t(\"Member options\")}>\n        <Template\n          {...menu}\n          items={[\n            {\n              title: t(\"Remove\"),\n              onClick: onRemove,\n            },\n          ]}\n        />\n      </ContextMenu>\n    </>\n  );\n}\n\nexport default MemberMenu;\n","// @flow\nimport * as React from \"react\";\nimport { Trans, useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport Membership from \"models/Membership\";\nimport User from \"models/User\";\nimport Avatar from \"components/Avatar\";\nimport Badge from \"components/Badge\";\nimport Button from \"components/Button\";\nimport Flex from \"components/Flex\";\nimport InputSelect from \"components/InputSelect\";\nimport ListItem from \"components/List/Item\";\nimport Time from \"components/Time\";\nimport MemberMenu from \"menus/MemberMenu\";\n\ntype Props = {\n  user: User,\n  membership?: ?Membership,\n  canEdit: boolean,\n  onAdd?: () => any,\n  onRemove?: () => any,\n  onUpdate?: (permission: string) => any,\n};\n\nconst MemberListItem = ({\n  user,\n  membership,\n  onRemove,\n  onUpdate,\n  onAdd,\n  canEdit,\n}: Props) => {\n  const { t } = useTranslation();\n\n  const PERMISSIONS = React.useMemo(\n    () => [\n      { label: t(\"View only\"), value: \"read\" },\n      { label: t(\"View and edit\"), value: \"read_write\" },\n    ],\n    [t]\n  );\n\n  return (\n    <ListItem\n      title={user.name}\n      subtitle={\n        <>\n          {user.lastActiveAt ? (\n            <Trans>\n              Active <Time dateTime={user.lastActiveAt} /> ago\n            </Trans>\n          ) : (\n            t(\"Never signed in\")\n          )}\n          {user.isInvited && <Badge>{t(\"Invited\")}</Badge>}\n          {user.isAdmin && <Badge primary={user.isAdmin}>{t(\"Admin\")}</Badge>}\n        </>\n      }\n      image={<Avatar src={user.avatarUrl} size={32} />}\n      actions={\n        <Flex align=\"center\">\n          {onUpdate && (\n            <Select\n              label={t(\"Permissions\")}\n              options={PERMISSIONS}\n              value={membership ? membership.permission : undefined}\n              onChange={(ev) => onUpdate(ev.target.value)}\n              disabled={!canEdit}\n              labelHidden\n            />\n          )}\n          {canEdit && (\n            <>\n              <Spacer />\n              {onRemove && <MemberMenu onRemove={onRemove} />}\n              {onAdd && (\n                <Button onClick={onAdd} neutral>\n                  {t(\"Add\")}\n                </Button>\n              )}\n            </>\n          )}\n        </Flex>\n      }\n    />\n  );\n};\n\nconst Spacer = styled.div`\n  width: 8px;\n`;\n\nconst Select = styled(InputSelect)`\n  margin: 0;\n  font-size: 14px;\n  border-color: transparent;\n\n  select {\n    margin: 0;\n  }\n`;\n\nexport default MemberListItem;\n","// @flow\nimport { debounce } from \"lodash\";\nimport { observable } from \"mobx\";\nimport { inject, observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { withTranslation, type TFunction } from \"react-i18next\";\nimport AuthStore from \"stores/AuthStore\";\nimport MembershipsStore from \"stores/MembershipsStore\";\nimport ToastsStore from \"stores/ToastsStore\";\nimport UsersStore from \"stores/UsersStore\";\nimport Collection from \"models/Collection\";\nimport User from \"models/User\";\nimport Invite from \"scenes/Invite\";\nimport ButtonLink from \"components/ButtonLink\";\nimport Empty from \"components/Empty\";\nimport Flex from \"components/Flex\";\nimport HelpText from \"components/HelpText\";\nimport Input from \"components/Input\";\nimport Modal from \"components/Modal\";\nimport PaginatedList from \"components/PaginatedList\";\nimport MemberListItem from \"./components/MemberListItem\";\n\ntype Props = {\n  toasts: ToastsStore,\n  auth: AuthStore,\n  collection: Collection,\n  memberships: MembershipsStore,\n  users: UsersStore,\n  onSubmit: () => void,\n  t: TFunction,\n};\n\n@observer\nclass AddPeopleToCollection extends React.Component<Props> {\n  @observable inviteModalOpen: boolean = false;\n  @observable query: string = \"\";\n\n  handleInviteModalOpen = () => {\n    this.inviteModalOpen = true;\n  };\n\n  handleInviteModalClose = () => {\n    this.inviteModalOpen = false;\n  };\n\n  handleFilter = (ev: SyntheticInputEvent<>) => {\n    this.query = ev.target.value;\n    this.debouncedFetch();\n  };\n\n  debouncedFetch = debounce(() => {\n    this.props.users.fetchPage({\n      query: this.query,\n    });\n  }, 250);\n\n  handleAddUser = (user: User) => {\n    const { t } = this.props;\n    try {\n      this.props.memberships.create({\n        collectionId: this.props.collection.id,\n        userId: user.id,\n        permission: \"read_write\",\n      });\n      this.props.toasts.showToast(\n        t(\"{{ userName }} was added to the collection\", {\n          userName: user.name,\n        }),\n        { type: \"success\" }\n      );\n    } catch (err) {\n      this.props.toasts.showToast(t(\"Could not add user\"), { type: \"error\" });\n    }\n  };\n\n  render() {\n    const { users, collection, auth, t } = this.props;\n    const { user, team } = auth;\n    if (!user || !team) return null;\n\n    return (\n      <Flex column>\n        <HelpText>\n          {t(\"Need to add someone whos not yet on the team yet?\")}{\" \"}\n          <ButtonLink onClick={this.handleInviteModalOpen}>\n            {t(\"Invite people to {{ teamName }}\", { teamName: team.name })}\n          </ButtonLink>\n          .\n        </HelpText>\n\n        <Input\n          type=\"search\"\n          placeholder={`${t(\"Search by name\")}`}\n          value={this.query}\n          onChange={this.handleFilter}\n          label={t(\"Search people\")}\n          autoFocus\n          labelHidden\n          flex\n        />\n        <PaginatedList\n          empty={\n            this.query ? (\n              <Empty>{t(\"No people matching your search\")}</Empty>\n            ) : (\n              <Empty>{t(\"No people left to add\")}</Empty>\n            )\n          }\n          items={users.notInCollection(collection.id, this.query)}\n          fetch={this.query ? undefined : users.fetchPage}\n          renderItem={(item) => (\n            <MemberListItem\n              key={item.id}\n              user={item}\n              onAdd={() => this.handleAddUser(item)}\n              canEdit\n            />\n          )}\n        />\n        <Modal\n          title={t(\"Invite people\")}\n          onRequestClose={this.handleInviteModalClose}\n          isOpen={this.inviteModalOpen}\n        >\n          <Invite onSubmit={this.handleInviteModalClose} />\n        </Modal>\n      </Flex>\n    );\n  }\n}\n\nexport default withTranslation()<AddPeopleToCollection>(\n  inject(\"auth\", \"users\", \"memberships\", \"toasts\")(AddPeopleToCollection)\n);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useMenuState } from \"reakit/Menu\";\nimport ContextMenu from \"components/ContextMenu\";\nimport OverflowMenuButton from \"components/ContextMenu/OverflowMenuButton\";\nimport Template from \"components/ContextMenu/Template\";\n\ntype Props = {|\n  onMembers: () => void,\n  onRemove: () => void,\n|};\n\nfunction CollectionGroupMemberMenu({ onMembers, onRemove }: Props) {\n  const { t } = useTranslation();\n  const menu = useMenuState({ modal: true });\n\n  return (\n    <>\n      <OverflowMenuButton aria-label={t(\"Show menu\")} {...menu} />\n      <ContextMenu {...menu} aria-label={t(\"Group member options\")}>\n        <Template\n          {...menu}\n          items={[\n            {\n              title: t(\"Members\"),\n              onClick: onMembers,\n            },\n            {\n              type: \"separator\",\n            },\n            {\n              title: t(\"Remove\"),\n              onClick: onRemove,\n            },\n          ]}\n        />\n      </ContextMenu>\n    </>\n  );\n}\n\nexport default observer(CollectionGroupMemberMenu);\n","// @flow\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport CollectionGroupMembership from \"models/CollectionGroupMembership\";\nimport Group from \"models/Group\";\nimport GroupListItem from \"components/GroupListItem\";\nimport InputSelect from \"components/InputSelect\";\nimport CollectionGroupMemberMenu from \"menus/CollectionGroupMemberMenu\";\n\ntype Props = {|\n  group: Group,\n  collectionGroupMembership: ?CollectionGroupMembership,\n  onUpdate: (permission: string) => any,\n  onRemove: () => any,\n|};\n\nconst CollectionGroupMemberListItem = ({\n  group,\n  collectionGroupMembership,\n  onUpdate,\n  onRemove,\n}: Props) => {\n  const { t } = useTranslation();\n\n  const PERMISSIONS = React.useMemo(\n    () => [\n      { label: t(\"View only\"), value: \"read\" },\n      { label: t(\"View and edit\"), value: \"read_write\" },\n    ],\n    [t]\n  );\n\n  return (\n    <GroupListItem\n      group={group}\n      onRemove={onRemove}\n      onUpdate={onUpdate}\n      showAvatar\n      renderActions={({ openMembersModal }) => (\n        <>\n          <Select\n            label={t(\"Permissions\")}\n            options={PERMISSIONS}\n            value={\n              collectionGroupMembership\n                ? collectionGroupMembership.permission\n                : undefined\n            }\n            onChange={(ev) => onUpdate(ev.target.value)}\n            labelHidden\n          />\n          <Spacer />\n          <CollectionGroupMemberMenu\n            onMembers={openMembersModal}\n            onRemove={onRemove}\n          />\n        </>\n      )}\n    />\n  );\n};\n\nconst Spacer = styled.div`\n  width: 8px;\n`;\n\nconst Select = styled(InputSelect)`\n  margin: 0;\n  font-size: 14px;\n  border-color: transparent;\n\n  select {\n    margin: 0;\n  }\n`;\n\nexport default CollectionGroupMemberListItem;\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { PlusIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport Collection from \"models/Collection\";\nimport Button from \"components/Button\";\nimport Divider from \"components/Divider\";\nimport Flex from \"components/Flex\";\nimport HelpText from \"components/HelpText\";\nimport InputSelectPermission from \"components/InputSelectPermission\";\nimport Labeled from \"components/Labeled\";\nimport Modal from \"components/Modal\";\nimport PaginatedList from \"components/PaginatedList\";\nimport AddGroupsToCollection from \"./AddGroupsToCollection\";\nimport AddPeopleToCollection from \"./AddPeopleToCollection\";\nimport CollectionGroupMemberListItem from \"./components/CollectionGroupMemberListItem\";\nimport MemberListItem from \"./components/MemberListItem\";\nimport useBoolean from \"hooks/useBoolean\";\nimport useCurrentUser from \"hooks/useCurrentUser\";\nimport useStores from \"hooks/useStores\";\nimport useToasts from \"hooks/useToasts\";\n\ntype Props = {|\n  collection: Collection,\n|};\n\nfunction CollectionPermissions({ collection }: Props) {\n  const { t } = useTranslation();\n  const user = useCurrentUser();\n  const {\n    memberships,\n    collectionGroupMemberships,\n    users,\n    groups,\n  } = useStores();\n  const { showToast } = useToasts();\n  const [\n    addGroupModalOpen,\n    handleAddGroupModalOpen,\n    handleAddGroupModalClose,\n  ] = useBoolean();\n  const [\n    addMemberModalOpen,\n    handleAddMemberModalOpen,\n    handleAddMemberModalClose,\n  ] = useBoolean();\n\n  const handleRemoveUser = React.useCallback(\n    async (user) => {\n      try {\n        await memberships.delete({\n          collectionId: collection.id,\n          userId: user.id,\n        });\n        showToast(\n          t(`{{ userName }} was removed from the collection`, {\n            userName: user.name,\n          }),\n          {\n            type: \"success\",\n          }\n        );\n      } catch (err) {\n        showToast(t(\"Could not remove user\"), { type: \"error\" });\n      }\n    },\n    [memberships, showToast, collection, t]\n  );\n\n  const handleUpdateUser = React.useCallback(\n    async (user, permission) => {\n      try {\n        await memberships.create({\n          collectionId: collection.id,\n          userId: user.id,\n          permission,\n        });\n        showToast(\n          t(`{{ userName }} permissions were updated`, { userName: user.name }),\n          {\n            type: \"success\",\n          }\n        );\n      } catch (err) {\n        showToast(t(\"Could not update user\"), { type: \"error\" });\n      }\n    },\n    [memberships, showToast, collection, t]\n  );\n\n  const handleRemoveGroup = React.useCallback(\n    async (group) => {\n      try {\n        await collectionGroupMemberships.delete({\n          collectionId: collection.id,\n          groupId: group.id,\n        });\n        showToast(\n          t(`The {{ groupName }} group was removed from the collection`, {\n            groupName: group.name,\n          }),\n          {\n            type: \"success\",\n          }\n        );\n      } catch (err) {\n        showToast(t(\"Could not remove group\"), { type: \"error\" });\n      }\n    },\n    [collectionGroupMemberships, showToast, collection, t]\n  );\n\n  const handleUpdateGroup = React.useCallback(\n    async (group, permission) => {\n      try {\n        await collectionGroupMemberships.create({\n          collectionId: collection.id,\n          groupId: group.id,\n          permission,\n        });\n        showToast(\n          t(`{{ groupName }} permissions were updated`, {\n            groupName: group.name,\n          }),\n          {\n            type: \"success\",\n          }\n        );\n      } catch (err) {\n        showToast(t(\"Could not update user\"), { type: \"error\" });\n      }\n    },\n    [collectionGroupMemberships, showToast, collection, t]\n  );\n\n  const handleChangePermission = React.useCallback(\n    async (ev) => {\n      try {\n        await collection.save({ permission: ev.target.value });\n        showToast(t(\"Default access permissions were updated\"), {\n          type: \"success\",\n        });\n      } catch (err) {\n        showToast(t(\"Could not update permissions\"), { type: \"error\" });\n      }\n    },\n    [collection, showToast, t]\n  );\n\n  const fetchOptions = React.useMemo(() => ({ id: collection.id }), [\n    collection.id,\n  ]);\n\n  const collectionName = collection.name;\n  const collectionGroups = groups.inCollection(collection.id);\n  const collectionUsers = users.inCollection(collection.id);\n  const isEmpty = !collectionGroups.length && !collectionUsers.length;\n\n  return (\n    <Flex column>\n      <InputSelectPermission\n        onChange={handleChangePermission}\n        value={collection.permission || \"\"}\n        short\n      />\n      <PermissionExplainer>\n        {!collection.permission && (\n          <Trans\n            defaults=\"The <em>{{ collectionName }}</em> collection is private. Team members have no access to it by default.\"\n            values={{ collectionName }}\n            components={{ em: <strong /> }}\n          />\n        )}\n        {collection.permission === \"read\" && (\n          <Trans\n            defaults=\"Team members can view documents in the <em>{{ collectionName }}</em> collection by default.\"\n            values={{ collectionName }}\n            components={{ em: <strong /> }}\n          />\n        )}\n        {collection.permission === \"read_write\" && (\n          <Trans\n            defaults=\"Team members can view and edit documents in the <em>{{ collectionName }}</em> collection by\n          default.\"\n            values={{ collectionName }}\n            components={{ em: <strong /> }}\n          />\n        )}\n      </PermissionExplainer>\n      <Labeled label={t(\"Additional access\")}>\n        <Actions>\n          <Button\n            type=\"button\"\n            onClick={handleAddGroupModalOpen}\n            icon={<PlusIcon />}\n            neutral\n          >\n            {t(\"Add groups\")}\n          </Button>{\" \"}\n          <Button\n            type=\"button\"\n            onClick={handleAddMemberModalOpen}\n            icon={<PlusIcon />}\n            neutral\n          >\n            {t(\"Add people\")}\n          </Button>\n        </Actions>\n      </Labeled>\n      <Divider />\n      {isEmpty && (\n        <Empty>\n          <Trans>\n            Add specific access for individual groups and team members\n          </Trans>\n        </Empty>\n      )}\n      <PaginatedList\n        items={collectionGroups}\n        fetch={collectionGroupMemberships.fetchPage}\n        options={fetchOptions}\n        renderItem={(group) => (\n          <CollectionGroupMemberListItem\n            key={group.id}\n            group={group}\n            collectionGroupMembership={collectionGroupMemberships.get(\n              `${group.id}-${collection.id}`\n            )}\n            onRemove={() => handleRemoveGroup(group)}\n            onUpdate={(permission) => handleUpdateGroup(group, permission)}\n          />\n        )}\n      />\n      {collectionGroups.length ? <Divider /> : null}\n      <PaginatedList\n        key={`collection-users-${collection.permission || \"none\"}`}\n        items={collectionUsers}\n        fetch={memberships.fetchPage}\n        options={fetchOptions}\n        renderItem={(item) => (\n          <MemberListItem\n            key={item.id}\n            user={item}\n            membership={memberships.get(`${item.id}-${collection.id}`)}\n            canEdit={item.id !== user.id}\n            onRemove={() => handleRemoveUser(item)}\n            onUpdate={(permission) => handleUpdateUser(item, permission)}\n          />\n        )}\n      />\n      <Modal\n        title={t(`Add groups to {{ collectionName }}`, {\n          collectionName: collection.name,\n        })}\n        onRequestClose={handleAddGroupModalClose}\n        isOpen={addGroupModalOpen}\n      >\n        <AddGroupsToCollection\n          collection={collection}\n          onSubmit={handleAddGroupModalClose}\n        />\n      </Modal>\n      <Modal\n        title={t(`Add people to {{ collectionName }}`, {\n          collectionName: collection.name,\n        })}\n        onRequestClose={handleAddMemberModalClose}\n        isOpen={addMemberModalOpen}\n      >\n        <AddPeopleToCollection\n          collection={collection}\n          onSubmit={handleAddMemberModalClose}\n        />\n      </Modal>\n    </Flex>\n  );\n}\n\nconst Empty = styled(HelpText)`\n  margin-top: 8px;\n`;\n\nconst PermissionExplainer = styled(HelpText)`\n  margin-top: -8px;\n  margin-bottom: 24px;\n`;\n\nconst Actions = styled.div`\n  margin-bottom: 12px;\n`;\n\nexport default observer(CollectionPermissions);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport FilterOptions from \"components/FilterOptions\";\nimport useStores from \"hooks/useStores\";\n\ntype Props = {|\n  collectionId: ?string,\n  onSelect: (key: ?string) => void,\n|};\n\nfunction CollectionFilter(props: Props) {\n  const { t } = useTranslation();\n  const { collections } = useStores();\n  const { onSelect, collectionId } = props;\n\n  const options = React.useMemo(() => {\n    const collectionOptions = collections.orderedData.map((user) => ({\n      key: user.id,\n      label: user.name,\n    }));\n\n    return [\n      {\n        key: \"\",\n        label: t(\"Any collection\"),\n      },\n      ...collectionOptions,\n    ];\n  }, [collections.orderedData, t]);\n\n  return (\n    <FilterOptions\n      options={options}\n      activeKey={collectionId}\n      onSelect={onSelect}\n      defaultLabel={t(\"Any collection\")}\n      selectedPrefix={`${t(\"Collection\")}:`}\n    />\n  );\n}\n\nexport default observer(CollectionFilter);\n","// @flow\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport FilterOptions from \"components/FilterOptions\";\n\ntype Props = {|\n  dateFilter: ?string,\n  onSelect: (key: ?string) => void,\n|};\n\nconst DateFilter = ({ dateFilter, onSelect }: Props) => {\n  const { t } = useTranslation();\n\n  const options = React.useMemo(\n    () => [\n      { key: \"\", label: t(\"Any time\") },\n      { key: \"day\", label: t(\"Past day\") },\n      { key: \"week\", label: t(\"Past week\") },\n      { key: \"month\", label: t(\"Past month\") },\n      { key: \"year\", label: t(\"Past year\") },\n    ],\n    [t]\n  );\n\n  return (\n    <FilterOptions\n      options={options}\n      activeKey={dateFilter}\n      onSelect={onSelect}\n      defaultLabel={t(\"Any time\")}\n    />\n  );\n};\n\nexport default DateFilter;\n","// @flow\nimport { SearchIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport styled, { withTheme } from \"styled-components\";\nimport Flex from \"components/Flex\";\nimport { type Theme } from \"types\";\n\ntype Props = {\n  onChange: (string) => void,\n  defaultValue?: string,\n  placeholder?: string,\n  theme: Theme,\n};\n\nclass SearchField extends React.Component<Props> {\n  input: ?HTMLInputElement;\n\n  componentDidMount() {\n    if (this.props && this.input) {\n      // ensure that focus is placed at end of input\n      const len = (this.props.defaultValue || \"\").length;\n      this.input.setSelectionRange(len, len);\n    }\n  }\n\n  handleChange = (ev: SyntheticEvent<HTMLInputElement>) => {\n    this.props.onChange(ev.currentTarget.value ? ev.currentTarget.value : \"\");\n  };\n\n  focusInput = (ev: SyntheticEvent<>) => {\n    if (this.input) this.input.focus();\n  };\n\n  render() {\n    return (\n      <Field align=\"center\">\n        <StyledIcon\n          type=\"Search\"\n          size={46}\n          color={this.props.theme.textTertiary}\n          onClick={this.focusInput}\n        />\n        <StyledInput\n          {...this.props}\n          ref={(ref) => (this.input = ref)}\n          onChange={this.handleChange}\n          spellCheck=\"false\"\n          placeholder={this.props.placeholder}\n          type=\"search\"\n          autoFocus\n        />\n      </Field>\n    );\n  }\n}\n\nconst Field = styled(Flex)`\n  position: relative;\n  margin-bottom: 8px;\n`;\n\nconst StyledInput = styled.input`\n  width: 100%;\n  padding: 10px 10px 10px 60px;\n  font-size: 36px;\n  font-weight: 400;\n  outline: none;\n  border: 0;\n  background: ${(props) => props.theme.sidebarBackground};\n  transition: ${(props) => props.theme.backgroundTransition};\n  border-radius: 4px;\n\n  color: ${(props) => props.theme.text};\n\n  ::-webkit-search-cancel-button {\n    -webkit-appearance: none;\n  }\n  ::-webkit-input-placeholder {\n    color: ${(props) => props.theme.placeholder};\n  }\n  :-moz-placeholder {\n    color: ${(props) => props.theme.placeholder};\n  }\n  ::-moz-placeholder {\n    color: ${(props) => props.theme.placeholder};\n  }\n  :-ms-input-placeholder {\n    color: ${(props) => props.theme.placeholder};\n  }\n`;\n\nconst StyledIcon = styled(SearchIcon)`\n  position: absolute;\n  left: 8px;\n`;\n\nexport default withTheme(SearchField);\n","// @flow\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport FilterOptions from \"components/FilterOptions\";\n\ntype Props = {|\n  includeArchived?: boolean,\n  onSelect: (key: ?string) => void,\n|};\n\nconst StatusFilter = ({ includeArchived, onSelect }: Props) => {\n  const { t } = useTranslation();\n\n  const options = React.useMemo(\n    () => [\n      {\n        key: \"\",\n        label: t(\"Active documents\"),\n        note: t(\"Documents in collections you are able to access\"),\n      },\n      {\n        key: \"true\",\n        label: t(\"All documents\"),\n        note: t(\"Include documents that are in the archive\"),\n      },\n    ],\n    [t]\n  );\n\n  return (\n    <FilterOptions\n      options={options}\n      activeKey={includeArchived ? \"true\" : undefined}\n      onSelect={onSelect}\n      defaultLabel={t(\"Active documents\")}\n    />\n  );\n};\n\nexport default StatusFilter;\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport FilterOptions from \"components/FilterOptions\";\nimport useStores from \"hooks/useStores\";\n\ntype Props = {|\n  userId: ?string,\n  onSelect: (key: ?string) => void,\n|};\n\nfunction UserFilter(props: Props) {\n  const { onSelect, userId } = props;\n  const { t } = useTranslation();\n  const { users } = useStores();\n\n  React.useEffect(() => {\n    users.fetchPage({ limit: 100 });\n  }, [users]);\n\n  const options = React.useMemo(() => {\n    const userOptions = users.all.map((user) => ({\n      key: user.id,\n      label: user.name,\n    }));\n\n    return [\n      {\n        key: \"\",\n        label: t(\"Any author\"),\n      },\n      ...userOptions,\n    ];\n  }, [users.all, t]);\n\n  return (\n    <FilterOptions\n      options={options}\n      activeKey={userId}\n      onSelect={onSelect}\n      defaultLabel={t(\"Any author\")}\n      selectedPrefix={`${t(\"Author\")}:`}\n    />\n  );\n}\n\nexport default observer(UserFilter);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { PlusIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport { MenuButton, useMenuState } from \"reakit/Menu\";\nimport styled from \"styled-components\";\nimport Button from \"components/Button\";\nimport CollectionIcon from \"components/CollectionIcon\";\nimport ContextMenu from \"components/ContextMenu\";\nimport Header from \"components/ContextMenu/Header\";\nimport Template from \"components/ContextMenu/Template\";\nimport Flex from \"components/Flex\";\nimport useCurrentTeam from \"hooks/useCurrentTeam\";\nimport useStores from \"hooks/useStores\";\nimport { newDocumentUrl } from \"utils/routeHelpers\";\n\nfunction NewDocumentMenu() {\n  const menu = useMenuState({ modal: true });\n  const { t } = useTranslation();\n  const team = useCurrentTeam();\n  const { collections, policies } = useStores();\n  const singleCollection = collections.orderedData.length === 1;\n  const can = policies.abilities(team.id);\n\n  if (!can.createDocument) {\n    return null;\n  }\n\n  if (singleCollection) {\n    return (\n      <Button\n        as={Link}\n        to={newDocumentUrl(collections.orderedData[0].id)}\n        icon={<PlusIcon />}\n      >\n        {t(\"New doc\")}\n      </Button>\n    );\n  }\n\n  return (\n    <>\n      <MenuButton {...menu}>\n        {(props) => (\n          <Button icon={<PlusIcon />} {...props} small>\n            {`${t(\"New doc\")}`}\n          </Button>\n        )}\n      </MenuButton>\n      <ContextMenu {...menu} aria-label={t(\"New document\")}>\n        <Header>{t(\"Choose a collection\")}</Header>\n        <Template\n          {...menu}\n          items={collections.orderedData.map((collection) => ({\n            to: newDocumentUrl(collection.id),\n            disabled: !policies.abilities(collection.id).update,\n            title: (\n              <Flex align=\"center\">\n                <CollectionIcon collection={collection} />\n                <CollectionName>{collection.name}</CollectionName>\n              </Flex>\n            ),\n          }))}\n        />\n      </ContextMenu>\n    </>\n  );\n}\n\nconst CollectionName = styled.div`\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n`;\n\nexport default observer(NewDocumentMenu);\n","// @flow\nimport ArrowKeyNavigation from \"boundless-arrow-key-navigation\";\nimport { debounce, isEqual } from \"lodash\";\nimport { observable, action } from \"mobx\";\nimport { observer, inject } from \"mobx-react\";\nimport { PlusIcon } from \"outline-icons\";\nimport queryString from \"query-string\";\nimport * as React from \"react\";\nimport { withTranslation, Trans, type TFunction } from \"react-i18next\";\nimport keydown from \"react-keydown\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport type { RouterHistory, Match } from \"react-router-dom\";\nimport { Waypoint } from \"react-waypoint\";\nimport styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\n\nimport AuthStore from \"stores/AuthStore\";\nimport { DEFAULT_PAGINATION_LIMIT } from \"stores/BaseStore\";\nimport DocumentsStore from \"stores/DocumentsStore\";\nimport PoliciesStore from \"stores/PoliciesStore\";\nimport UsersStore from \"stores/UsersStore\";\n\nimport Button from \"components/Button\";\nimport CenteredContent from \"components/CenteredContent\";\nimport DocumentListItem from \"components/DocumentListItem\";\nimport Empty from \"components/Empty\";\nimport Fade from \"components/Fade\";\nimport Flex from \"components/Flex\";\nimport HelpText from \"components/HelpText\";\nimport LoadingIndicator from \"components/LoadingIndicator\";\nimport PageTitle from \"components/PageTitle\";\nimport CollectionFilter from \"./components/CollectionFilter\";\nimport DateFilter from \"./components/DateFilter\";\nimport SearchField from \"./components/SearchField\";\nimport StatusFilter from \"./components/StatusFilter\";\nimport UserFilter from \"./components/UserFilter\";\nimport NewDocumentMenu from \"menus/NewDocumentMenu\";\nimport { type LocationWithState } from \"types\";\nimport { metaDisplay } from \"utils/keyboard\";\nimport { newDocumentUrl, searchUrl } from \"utils/routeHelpers\";\nimport { decodeURIComponentSafe } from \"utils/urls\";\n\ntype Props = {\n  history: RouterHistory,\n  match: Match,\n  location: LocationWithState,\n  documents: DocumentsStore,\n  auth: AuthStore,\n  users: UsersStore,\n  policies: PoliciesStore,\n  notFound: ?boolean,\n  t: TFunction,\n};\n\n@observer\nclass Search extends React.Component<Props> {\n  firstDocument: ?React.Component<any>;\n  lastQuery: string = \"\";\n  lastParams: Object;\n\n  @observable\n  query: string = decodeURIComponentSafe(this.props.match.params.term || \"\");\n  @observable params: URLSearchParams = new URLSearchParams();\n  @observable offset: number = 0;\n  @observable allowLoadMore: boolean = true;\n  @observable isLoading: boolean = false;\n  @observable pinToTop: boolean = !!this.props.match.params.term;\n\n  componentDidMount() {\n    this.handleTermChange();\n\n    if (this.props.location.search) {\n      this.handleQueryChange();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.location.search !== this.props.location.search) {\n      this.handleQueryChange();\n    }\n    if (prevProps.match.params.term !== this.props.match.params.term) {\n      this.handleTermChange();\n    }\n  }\n\n  @keydown(\"esc\")\n  goBack() {\n    this.props.history.goBack();\n  }\n\n  handleKeyDown = (ev: SyntheticKeyboardEvent<>) => {\n    if (ev.key === \"Enter\") {\n      this.fetchResults();\n      return;\n    }\n\n    if (ev.key === \"Escape\") {\n      ev.preventDefault();\n      return this.goBack();\n    }\n\n    if (ev.key === \"ArrowDown\") {\n      ev.preventDefault();\n      if (this.firstDocument) {\n        if (this.firstDocument instanceof HTMLElement) {\n          this.firstDocument.focus();\n        }\n      }\n    }\n  };\n\n  handleQueryChange = () => {\n    this.params = new URLSearchParams(this.props.location.search);\n    this.offset = 0;\n    this.allowLoadMore = true;\n\n    // To prevent \"no results\" showing before debounce kicks in\n    this.isLoading = true;\n\n    this.fetchResultsDebounced();\n  };\n\n  handleTermChange = () => {\n    const query = decodeURIComponentSafe(this.props.match.params.term || \"\");\n    this.query = query ? query : \"\";\n    this.offset = 0;\n    this.allowLoadMore = true;\n\n    // To prevent \"no results\" showing before debounce kicks in\n    this.isLoading = !!this.query;\n\n    this.fetchResultsDebounced();\n  };\n\n  handleFilterChange = (search: {\n    collectionId?: ?string,\n    userId?: ?string,\n    dateFilter?: ?string,\n    includeArchived?: ?string,\n  }) => {\n    this.props.history.replace({\n      pathname: this.props.location.pathname,\n      search: queryString.stringify(\n        {\n          ...queryString.parse(this.props.location.search),\n          ...search,\n        },\n        { skipEmptyString: true }\n      ),\n    });\n  };\n\n  handleNewDoc = () => {\n    if (this.collectionId) {\n      this.props.history.push(newDocumentUrl(this.collectionId));\n    }\n  };\n\n  get includeArchived() {\n    return this.params.get(\"includeArchived\") === \"true\";\n  }\n\n  get collectionId() {\n    const id = this.params.get(\"collectionId\");\n    return id ? id : undefined;\n  }\n\n  get userId() {\n    const id = this.params.get(\"userId\");\n    return id ? id : undefined;\n  }\n\n  get dateFilter() {\n    const id = this.params.get(\"dateFilter\");\n    return id ? id : undefined;\n  }\n\n  get isFiltered() {\n    return (\n      this.dateFilter ||\n      this.userId ||\n      this.collectionId ||\n      this.includeArchived\n    );\n  }\n\n  get title() {\n    const query = this.query;\n    const title = this.props.t(\"Search\");\n    if (query) return `${query}  ${title}`;\n    return title;\n  }\n\n  @action\n  loadMoreResults = async () => {\n    // Don't paginate if there aren't more results or were in the middle of fetching\n    if (!this.allowLoadMore || this.isLoading) return;\n\n    // Fetch more results\n    await this.fetchResults();\n  };\n\n  @action\n  fetchResults = async () => {\n    if (this.query) {\n      const params = {\n        offset: this.offset,\n        limit: DEFAULT_PAGINATION_LIMIT,\n        dateFilter: this.dateFilter,\n        includeArchived: this.includeArchived,\n        includeDrafts: true,\n        collectionId: this.collectionId,\n        userId: this.userId,\n      };\n\n      // we just requested this thing  no need to try again\n      if (this.lastQuery === this.query && isEqual(params, this.lastParams)) {\n        this.isLoading = false;\n        return;\n      }\n\n      this.isLoading = true;\n      this.lastQuery = this.query;\n      this.lastParams = params;\n\n      try {\n        const results = await this.props.documents.search(this.query, params);\n\n        this.pinToTop = true;\n\n        if (results.length === 0 || results.length < DEFAULT_PAGINATION_LIMIT) {\n          this.allowLoadMore = false;\n        } else {\n          this.offset += DEFAULT_PAGINATION_LIMIT;\n        }\n      } catch (err) {\n        this.lastQuery = \"\";\n        throw err;\n      } finally {\n        this.isLoading = false;\n      }\n    } else {\n      this.pinToTop = false;\n      this.lastQuery = this.query;\n    }\n  };\n\n  fetchResultsDebounced = debounce(this.fetchResults, 500, {\n    leading: false,\n    trailing: true,\n  });\n\n  updateLocation = (query: string) => {\n    this.props.history.replace({\n      pathname: searchUrl(query),\n      search: this.props.location.search,\n    });\n  };\n\n  setFirstDocumentRef = (ref: any) => {\n    this.firstDocument = ref;\n  };\n\n  render() {\n    const { documents, notFound, location, t, auth, policies } = this.props;\n    const results = documents.searchResults(this.query);\n    const showEmpty = !this.isLoading && this.query && results.length === 0;\n    const showShortcutTip =\n      !this.pinToTop && location.state && location.state.fromMenu;\n    const can = policies.abilities(auth.team?.id ? auth.team.id : \"\");\n\n    return (\n      <Container auto>\n        <PageTitle title={this.title} />\n        {this.isLoading && <LoadingIndicator />}\n        {notFound && (\n          <div>\n            <h1>{t(\"Not Found\")}</h1>\n            <Empty>\n              {t(\"We were unable to find the page youre looking for.\")}\n            </Empty>\n          </div>\n        )}\n        <ResultsWrapper pinToTop={this.pinToTop} column auto>\n          <SearchField\n            placeholder={`${t(\"Search\")}`}\n            onKeyDown={this.handleKeyDown}\n            onChange={this.updateLocation}\n            defaultValue={this.query}\n          />\n          {showShortcutTip && (\n            <Fade>\n              <HelpText small>\n                <Trans\n                  defaults=\"Use the <em>{{ meta }}+K</em> shortcut to search from anywhere in your knowledge base\"\n                  values={{ meta: metaDisplay }}\n                  components={{ em: <strong /> }}\n                />\n              </HelpText>\n            </Fade>\n          )}\n          {this.pinToTop && (\n            <Filters>\n              <StatusFilter\n                includeArchived={this.includeArchived}\n                onSelect={(includeArchived) =>\n                  this.handleFilterChange({ includeArchived })\n                }\n              />\n              <CollectionFilter\n                collectionId={this.collectionId}\n                onSelect={(collectionId) =>\n                  this.handleFilterChange({ collectionId })\n                }\n              />\n              <UserFilter\n                userId={this.userId}\n                onSelect={(userId) => this.handleFilterChange({ userId })}\n              />\n              <DateFilter\n                dateFilter={this.dateFilter}\n                onSelect={(dateFilter) =>\n                  this.handleFilterChange({ dateFilter })\n                }\n              />\n            </Filters>\n          )}\n          {showEmpty && (\n            <Fade>\n              <Centered column>\n                <HelpText>\n                  <Trans>\n                    No documents found for your search filters. <br />\n                  </Trans>\n                  {can.createDocument && <Trans>Create a new document?</Trans>}\n                </HelpText>\n                <Wrapper>\n                  {this.collectionId && can.createDocument ? (\n                    <Button\n                      onClick={this.handleNewDoc}\n                      icon={<PlusIcon />}\n                      primary\n                    >\n                      {t(\"New doc\")}\n                    </Button>\n                  ) : (\n                    <NewDocumentMenu />\n                  )}\n                  &nbsp;&nbsp;\n                  <Button as={Link} to=\"/search\" neutral>\n                    {t(\"Clear filters\")}\n                  </Button>\n                </Wrapper>\n              </Centered>\n            </Fade>\n          )}\n          <ResultList column visible={this.pinToTop}>\n            <StyledArrowKeyNavigation\n              mode={ArrowKeyNavigation.mode.VERTICAL}\n              defaultActiveChildIndex={0}\n            >\n              {results.map((result, index) => {\n                const document = documents.data.get(result.document.id);\n                if (!document) return null;\n\n                return (\n                  <DocumentListItem\n                    ref={(ref) => index === 0 && this.setFirstDocumentRef(ref)}\n                    key={document.id}\n                    document={document}\n                    highlight={this.query}\n                    context={result.context}\n                    showCollection\n                    showTemplate\n                  />\n                );\n              })}\n            </StyledArrowKeyNavigation>\n            {this.allowLoadMore && (\n              <Waypoint key={this.offset} onEnter={this.loadMoreResults} />\n            )}\n          </ResultList>\n        </ResultsWrapper>\n      </Container>\n    );\n  }\n}\n\nconst Wrapper = styled(Flex)`\n  justify-content: center;\n  margin: 10px 0;\n`;\n\nconst Centered = styled(Flex)`\n  text-align: center;\n  margin: 30vh auto 0;\n  max-width: 380px;\n  transform: translateY(-50%);\n`;\n\nconst Container = styled(CenteredContent)`\n  > div {\n    position: relative;\n    height: 100%;\n  }\n`;\n\nconst ResultsWrapper = styled(Flex)`\n  position: absolute;\n  transition: all 300ms cubic-bezier(0.65, 0.05, 0.36, 1);\n  top: ${(props) => (props.pinToTop ? \"0%\" : \"50%\")};\n  width: 100%;\n\n  ${breakpoint(\"tablet\")`\t\n    margin-top: ${(props) => (props.pinToTop ? \"40px\" : \"-75px\")};\n  `};\n`;\n\nconst ResultList = styled(Flex)`\n  margin-bottom: 150px;\n  opacity: ${(props) => (props.visible ? \"1\" : \"0\")};\n  transition: all 400ms cubic-bezier(0.65, 0.05, 0.36, 1);\n`;\n\nconst StyledArrowKeyNavigation = styled(ArrowKeyNavigation)`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n`;\n\nconst Filters = styled(Flex)`\n  margin-bottom: 12px;\n  opacity: 0.85;\n  transition: opacity 100ms ease-in-out;\n  overflow-y: hidden;\n  overflow-x: auto;\n  padding: 8px 0;\n\n  ${breakpoint(\"tablet\")`\t\n    padding: 0;\n  `};\n\n  &:hover {\n    opacity: 1;\n  }\n`;\n\nexport default withTranslation()<Search>(\n  withRouter(inject(\"documents\", \"auth\", \"policies\")(Search))\n);\n","// @flow\nimport Search from \"./Search\";\nexport default Search;\n","// @flow\nimport * as React from \"react\";\n\nexport default function Arrow() {\n  return (\n    <svg\n      width=\"13\"\n      height=\"30\"\n      viewBox=\"0 0 13 30\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        fill=\"currentColor\"\n        d=\"M7.40242 1.48635C8.23085 0.0650039 10.0656 -0.421985 11.5005 0.39863C12.9354 1.21924 13.427 3.03671 12.5986 4.45806L5.59858 16.4681C4.77015 17.8894 2.93538 18.3764 1.5005 17.5558C0.065623 16.7352 -0.426002 14.9177 0.402425 13.4964L7.40242 1.48635Z\"\n      />\n      <path\n        fill=\"currentColor\"\n        d=\"M12.5986 25.5419C13.427 26.9633 12.9354 28.7808 11.5005 29.6014C10.0656 30.422 8.23087 29.935 7.40244 28.5136L0.402438 16.5036C-0.425989 15.0823 0.0656365 13.2648 1.50051 12.4442C2.93539 11.6236 4.77016 12.1106 5.59859 13.5319L12.5986 25.5419Z\"\n      />\n    </svg>\n  );\n}\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { transparentize } from \"polished\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport Collection from \"models/Collection\";\nimport Arrow from \"components/Arrow\";\nimport ButtonLink from \"components/ButtonLink\";\nimport Editor from \"components/Editor\";\nimport LoadingIndicator from \"components/LoadingIndicator\";\nimport NudeButton from \"components/NudeButton\";\nimport useDebouncedCallback from \"hooks/useDebouncedCallback\";\nimport useStores from \"hooks/useStores\";\nimport useToasts from \"hooks/useToasts\";\n\ntype Props = {|\n  collection: Collection,\n|};\n\nfunction CollectionDescription({ collection }: Props) {\n  const { collections, policies } = useStores();\n  const { showToast } = useToasts();\n  const { t } = useTranslation();\n  const [isExpanded, setExpanded] = React.useState(false);\n  const [isEditing, setEditing] = React.useState(false);\n  const [isDirty, setDirty] = React.useState(false);\n  const can = policies.abilities(collection.id);\n\n  const handleStartEditing = React.useCallback(() => {\n    setEditing(true);\n  }, []);\n\n  const handleStopEditing = React.useCallback(() => {\n    setEditing(false);\n  }, []);\n\n  const handleClickDisclosure = React.useCallback(\n    (event) => {\n      event.preventDefault();\n\n      if (isExpanded && document.activeElement) {\n        document.activeElement.blur();\n      }\n\n      setExpanded(!isExpanded);\n    },\n    [isExpanded]\n  );\n\n  const handleSave = useDebouncedCallback(async (getValue) => {\n    try {\n      await collection.save({\n        description: getValue(),\n      });\n      setDirty(false);\n    } catch (err) {\n      showToast(\n        t(\"Sorry, an error occurred saving the collection\", {\n          type: \"error\",\n        })\n      );\n      throw err;\n    }\n  }, 1000);\n\n  const handleChange = React.useCallback(\n    (getValue) => {\n      setDirty(true);\n      handleSave(getValue);\n    },\n    [handleSave]\n  );\n\n  React.useEffect(() => {\n    setEditing(false);\n  }, [collection.id]);\n\n  const placeholder = `${t(\"Add a description\")}`;\n  const key = isEditing || isDirty ? \"draft\" : collection.updatedAt;\n\n  return (\n    <MaxHeight data-editing={isEditing} data-expanded={isExpanded}>\n      <Input\n        $isEditable={can.update}\n        data-editing={isEditing}\n        data-expanded={isExpanded}\n      >\n        <span onClick={can.update ? handleStartEditing : undefined}>\n          {collections.isSaving && <LoadingIndicator />}\n          {collection.hasDescription || isEditing || isDirty ? (\n            <React.Suspense fallback={<Placeholder>Loading</Placeholder>}>\n              <Editor\n                key={key}\n                defaultValue={collection.description || \"\"}\n                onChange={handleChange}\n                placeholder={placeholder}\n                readOnly={!isEditing}\n                autoFocus={isEditing}\n                onBlur={handleStopEditing}\n                maxLength={1000}\n                disableEmbeds\n                readOnlyWriteCheckboxes\n                grow\n              />\n            </React.Suspense>\n          ) : (\n            can.update && <Placeholder>{placeholder}</Placeholder>\n          )}\n        </span>\n      </Input>\n      {!isEditing && (\n        <Disclosure\n          onClick={handleClickDisclosure}\n          aria-label={isExpanded ? t(\"Collapse\") : t(\"Expand\")}\n          size={30}\n        >\n          <Arrow />\n        </Disclosure>\n      )}\n    </MaxHeight>\n  );\n}\n\nconst Disclosure = styled(NudeButton)`\n  opacity: 0;\n  color: ${(props) => props.theme.divider};\n  position: absolute;\n  top: calc(25vh - 50px);\n  left: 50%;\n  z-index: 1;\n  transform: rotate(-90deg) translateX(-50%);\n  transition: opacity 100ms ease-in-out;\n\n  &:focus,\n  &:hover {\n    opacity: 1;\n  }\n\n  &:active {\n    color: ${(props) => props.theme.sidebarText};\n  }\n`;\n\nconst Placeholder = styled(ButtonLink)`\n  color: ${(props) => props.theme.placeholder};\n  cursor: text;\n  min-height: 27px;\n`;\n\nconst MaxHeight = styled.div`\n  position: relative;\n  max-height: 25vh;\n  overflow: hidden;\n  margin: -12px -8px -8px;\n  padding: 8px;\n\n  &[data-editing=\"true\"],\n  &[data-expanded=\"true\"] {\n    max-height: initial;\n    overflow: initial;\n\n    ${Disclosure} {\n      top: initial;\n      bottom: 0;\n      transform: rotate(90deg) translateX(-50%);\n    }\n  }\n\n  &:hover ${Disclosure} {\n    opacity: 1;\n  }\n`;\n\nconst Input = styled.div`\n  margin: -8px;\n  padding: 8px;\n  border-radius: 8px;\n  transition: ${(props) => props.theme.backgroundTransition};\n\n  &:after {\n    content: \"\";\n    position: absolute;\n    top: calc(25vh - 50px);\n    left: 0;\n    right: 0;\n    height: 50px;\n    pointer-events: none;\n    background: linear-gradient(\n      180deg,\n      ${(props) => transparentize(1, props.theme.background)} 0%,\n      ${(props) => props.theme.background} 100%\n    );\n  }\n\n  &[data-editing=\"true\"],\n  &[data-expanded=\"true\"] {\n    &:after {\n      background: transparent;\n    }\n  }\n\n  &[data-editing=\"true\"] {\n    background: ${(props) => props.theme.secondaryBackground};\n  }\n\n  .block-menu-trigger,\n  .heading-anchor {\n    display: none !important;\n  }\n`;\n\nexport default observer(CollectionDescription);\n","// @flow\nimport * as React from \"react\";\n\nexport default function useDebouncedCallback(\n  callback: (any) => mixed,\n  wait: number\n) {\n  // track args & timeout handle between calls\n  const argsRef = React.useRef();\n  const timeout = React.useRef();\n\n  function cleanup() {\n    if (timeout.current) {\n      clearTimeout(timeout.current);\n    }\n  }\n\n  // make sure our timeout gets cleared if consuming component gets unmounted\n  React.useEffect(() => cleanup, []);\n\n  return function (...args: any) {\n    argsRef.current = args;\n    cleanup();\n\n    timeout.current = setTimeout(() => {\n      if (argsRef.current) {\n        callback(...argsRef.current);\n      }\n    }, wait);\n  };\n}\n","// @flow\nimport ArrowKeyNavigation from \"boundless-arrow-key-navigation\";\nimport * as React from \"react\";\nimport Document from \"models/Document\";\nimport DocumentListItem from \"components/DocumentListItem\";\n\ntype Props = {|\n  documents: Document[],\n  limit?: number,\n  showCollection?: boolean,\n  showPublished?: boolean,\n  showPin?: boolean,\n  showDraft?: boolean,\n  showTemplate?: boolean,\n|};\n\nexport default function DocumentList({ limit, documents, ...rest }: Props) {\n  const items = limit ? documents.splice(0, limit) : documents;\n\n  return (\n    <ArrowKeyNavigation\n      mode={ArrowKeyNavigation.mode.VERTICAL}\n      defaultActiveChildIndex={0}\n    >\n      {items.map((document) => (\n        <DocumentListItem key={document.id} document={document} {...rest} />\n      ))}\n    </ArrowKeyNavigation>\n  );\n}\n","// @flow\nimport { observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport { SearchIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { withTranslation, type TFunction } from \"react-i18next\";\nimport keydown from \"react-keydown\";\nimport { withRouter, type RouterHistory } from \"react-router-dom\";\nimport styled, { withTheme } from \"styled-components\";\nimport Input from \"./Input\";\nimport { type Theme } from \"types\";\nimport { meta } from \"utils/keyboard\";\nimport { searchUrl } from \"utils/routeHelpers\";\n\ntype Props = {\n  history: RouterHistory,\n  theme: Theme,\n  source: string,\n  placeholder?: string,\n  label?: string,\n  labelHidden?: boolean,\n  collectionId?: string,\n  value: string,\n  onChange: (event: SyntheticInputEvent<>) => mixed,\n  onKeyDown: (event: SyntheticKeyboardEvent<HTMLInputElement>) => mixed,\n  t: TFunction,\n};\n\n@observer\nclass InputSearchPage extends React.Component<Props> {\n  input: ?Input;\n  @observable focused: boolean = false;\n\n  @keydown(`${meta}+f`)\n  focus(ev: SyntheticEvent<>) {\n    ev.preventDefault();\n\n    if (this.input) {\n      this.input.focus();\n    }\n  }\n\n  handleSearchInput = (ev: SyntheticInputEvent<>) => {\n    ev.preventDefault();\n    this.props.history.push(\n      searchUrl(ev.target.value, {\n        collectionId: this.props.collectionId,\n        ref: this.props.source,\n      })\n    );\n  };\n\n  handleFocus = () => {\n    this.focused = true;\n  };\n\n  handleBlur = () => {\n    this.focused = false;\n  };\n\n  render() {\n    const { t, value, onChange, onKeyDown } = this.props;\n    const { theme, placeholder = `${t(\"Search\")}` } = this.props;\n\n    return (\n      <InputMaxWidth\n        ref={(ref) => (this.input = ref)}\n        type=\"search\"\n        placeholder={placeholder}\n        onInput={this.handleSearchInput}\n        value={value}\n        onChange={onChange}\n        onKeyDown={onKeyDown}\n        icon={\n          <SearchIcon\n            color={this.focused ? theme.inputBorderFocused : theme.inputBorder}\n          />\n        }\n        label={this.props.label}\n        onFocus={this.handleFocus}\n        onBlur={this.handleBlur}\n        margin={0}\n        labelHidden\n      />\n    );\n  }\n}\n\nconst InputMaxWidth = styled(Input)`\n  max-width: 30vw;\n`;\n\nexport default withTranslation()<InputSearchPage>(\n  withTheme(withRouter(InputSearchPage))\n);\n","// @flow\nimport invariant from \"invariant\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport useStores from \"hooks/useStores\";\nimport useToasts from \"hooks/useToasts\";\n\nlet importingLock = false;\n\nexport default function useImportDocument(\n  collectionId: string,\n  documentId?: string\n): {| handleFiles: (files: File[]) => Promise<void>, isImporting: boolean |} {\n  const { documents } = useStores();\n  const { showToast } = useToasts();\n  const [isImporting, setImporting] = React.useState(false);\n  const { t } = useTranslation();\n  const history = useHistory();\n\n  const handleFiles = React.useCallback(\n    async (files = []) => {\n      if (importingLock) {\n        return;\n      }\n\n      // Because this is the onChange handler it's possible for the change to be\n      // from previously selecting a file to not selecting a file  aka empty\n      if (!files.length) {\n        return;\n      }\n\n      setImporting(true);\n      importingLock = true;\n\n      try {\n        let cId = collectionId;\n        const redirect = files.length === 1;\n\n        if (documentId && !collectionId) {\n          const { document } = await documents.fetch(documentId);\n          invariant(document, \"Document not available\");\n          cId = document.collectionId;\n        }\n\n        for (const file of files) {\n          const doc = await documents.import(file, documentId, cId, {\n            publish: true,\n          });\n\n          if (redirect) {\n            history.push(doc.url);\n          }\n        }\n      } catch (err) {\n        showToast(`${t(\"Could not import file\")}. ${err.message}`, {\n          type: \"error\",\n        });\n      } finally {\n        setImporting(false);\n        importingLock = false;\n      }\n    },\n    [t, documents, history, showToast, collectionId, documentId]\n  );\n\n  return {\n    handleFiles,\n    isImporting,\n  };\n}\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport Collection from \"models/Collection\";\nimport Button from \"components/Button\";\nimport Flex from \"components/Flex\";\nimport HelpText from \"components/HelpText\";\nimport useToasts from \"hooks/useToasts\";\nimport { homeUrl } from \"utils/routeHelpers\";\n\ntype Props = {\n  collection: Collection,\n  onSubmit: () => void,\n};\n\nfunction CollectionDelete({ collection, onSubmit }: Props) {\n  const [isDeleting, setIsDeleting] = React.useState();\n  const { showToast } = useToasts();\n  const history = useHistory();\n  const { t } = useTranslation();\n\n  const handleSubmit = React.useCallback(\n    async (ev: SyntheticEvent<>) => {\n      ev.preventDefault();\n      setIsDeleting(true);\n\n      try {\n        await collection.delete();\n        history.push(homeUrl());\n        onSubmit();\n      } catch (err) {\n        showToast(err.message, { type: \"error\" });\n      } finally {\n        setIsDeleting(false);\n      }\n    },\n    [showToast, onSubmit, collection, history]\n  );\n\n  return (\n    <Flex column>\n      <form onSubmit={handleSubmit}>\n        <HelpText>\n          <Trans\n            defaults=\"Are you sure about that? Deleting the <em>{{collectionName}}</em> collection is permanent and cannot be restored, however documents within will be moved to the trash.\"\n            values={{ collectionName: collection.name }}\n            components={{ em: <strong /> }}\n          />\n        </HelpText>\n        <Button type=\"submit\" disabled={isDeleting} autoFocus danger>\n          {isDeleting ? `${t(\"Deleting\")}` : t(\"Im sure Delete\")}\n        </Button>\n      </form>\n    </Flex>\n  );\n}\n\nexport default observer(CollectionDelete);\n","// @flow\nimport { observable } from \"mobx\";\nimport { inject, observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { withTranslation, Trans, type TFunction } from \"react-i18next\";\nimport AuthStore from \"stores/AuthStore\";\nimport ToastsStore from \"stores/ToastsStore\";\nimport Collection from \"models/Collection\";\nimport Button from \"components/Button\";\nimport Flex from \"components/Flex\";\nimport HelpText from \"components/HelpText\";\nimport IconPicker from \"components/IconPicker\";\nimport Input from \"components/Input\";\nimport InputSelect from \"components/InputSelect\";\nimport Switch from \"components/Switch\";\n\ntype Props = {\n  collection: Collection,\n  toasts: ToastsStore,\n  auth: AuthStore,\n  onSubmit: () => void,\n  t: TFunction,\n};\n\n@observer\nclass CollectionEdit extends React.Component<Props> {\n  @observable name: string = this.props.collection.name;\n  @observable sharing: boolean = this.props.collection.sharing;\n  @observable icon: string = this.props.collection.icon;\n  @observable color: string = this.props.collection.color || \"#4E5C6E\";\n  @observable sort: { field: string, direction: \"asc\" | \"desc\" } = this.props\n    .collection.sort;\n  @observable isSaving: boolean;\n\n  handleSubmit = async (ev: SyntheticEvent<*>) => {\n    ev.preventDefault();\n    this.isSaving = true;\n    const { t } = this.props;\n\n    try {\n      await this.props.collection.save({\n        name: this.name,\n        icon: this.icon,\n        color: this.color,\n        sharing: this.sharing,\n        sort: this.sort,\n      });\n      this.props.onSubmit();\n      this.props.toasts.showToast(t(\"The collection was updated\"), {\n        type: \"success\",\n      });\n    } catch (err) {\n      this.props.toasts.showToast(err.message, { type: \"error\" });\n    } finally {\n      this.isSaving = false;\n    }\n  };\n\n  handleSortChange = (ev: SyntheticInputEvent<HTMLSelectElement>) => {\n    const [field, direction] = ev.target.value.split(\".\");\n\n    if (direction === \"asc\" || direction === \"desc\") {\n      this.sort = { field, direction };\n    }\n  };\n\n  handleNameChange = (ev: SyntheticInputEvent<*>) => {\n    this.name = ev.target.value;\n  };\n\n  handleChange = (color: string, icon: string) => {\n    this.color = color;\n    this.icon = icon;\n  };\n\n  handleSharingChange = (ev: SyntheticInputEvent<*>) => {\n    this.sharing = ev.target.checked;\n  };\n\n  render() {\n    const { auth, t } = this.props;\n    const teamSharingEnabled = !!auth.team && auth.team.sharing;\n\n    return (\n      <Flex column>\n        <form onSubmit={this.handleSubmit}>\n          <HelpText>\n            <Trans>\n              You can edit the name and other details at any time, however doing\n              so often might confuse your team mates.\n            </Trans>\n          </HelpText>\n          <Flex>\n            <Input\n              type=\"text\"\n              label={t(\"Name\")}\n              onChange={this.handleNameChange}\n              value={this.name}\n              required\n              autoFocus\n              flex\n            />\n            &nbsp;\n            <IconPicker\n              onChange={this.handleChange}\n              color={this.color}\n              icon={this.icon}\n            />\n          </Flex>\n          <InputSelect\n            label={t(\"Sort in sidebar\")}\n            options={[\n              { label: t(\"Alphabetical\"), value: \"title.asc\" },\n              { label: t(\"Manual sort\"), value: \"index.asc\" },\n            ]}\n            value={`${this.sort.field}.${this.sort.direction}`}\n            onChange={this.handleSortChange}\n          />\n          <Switch\n            id=\"sharing\"\n            label={t(\"Public document sharing\")}\n            onChange={this.handleSharingChange}\n            checked={this.sharing && teamSharingEnabled}\n            disabled={!teamSharingEnabled}\n          />\n          <HelpText>\n            {teamSharingEnabled ? (\n              <Trans>\n                When enabled, documents can be shared publicly on the internet.\n              </Trans>\n            ) : (\n              <Trans>\n                Public sharing is currently disabled in the team security\n                settings.\n              </Trans>\n            )}\n          </HelpText>\n          <Button\n            type=\"submit\"\n            disabled={this.isSaving || !this.props.collection.name}\n          >\n            {this.isSaving ? `${t(\"Saving\")}` : t(\"Save\")}\n          </Button>\n        </form>\n      </Flex>\n    );\n  }\n}\n\nexport default withTranslation()<CollectionEdit>(\n  inject(\"toasts\", \"auth\")(CollectionEdit)\n);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport Collection from \"models/Collection\";\nimport Button from \"components/Button\";\nimport Flex from \"components/Flex\";\nimport HelpText from \"components/HelpText\";\n\ntype Props = {\n  collection: Collection,\n  onSubmit: () => void,\n};\n\nfunction CollectionExport({ collection, onSubmit }: Props) {\n  const [isLoading, setIsLoading] = React.useState();\n  const { t } = useTranslation();\n\n  const handleSubmit = React.useCallback(\n    async (ev: SyntheticEvent<>) => {\n      ev.preventDefault();\n\n      setIsLoading(true);\n      await collection.export();\n      setIsLoading(false);\n      onSubmit();\n    },\n    [collection, onSubmit]\n  );\n\n  return (\n    <Flex column>\n      <form onSubmit={handleSubmit}>\n        <HelpText>\n          <Trans\n            defaults=\"Exporting the collection <em>{{collectionName}}</em> may take a few seconds. Your documents will be downloaded as a zip of folders with files in Markdown format.\"\n            values={{ collectionName: collection.name }}\n            components={{ em: <strong /> }}\n          />\n        </HelpText>\n        <Button type=\"submit\" disabled={isLoading} primary>\n          {isLoading ? `${t(\"Exporting\")}` : t(\"Export Collection\")}\n        </Button>\n      </form>\n    </Flex>\n  );\n}\n\nexport default observer(CollectionExport);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport { useMenuState, MenuButton } from \"reakit/Menu\";\nimport { VisuallyHidden } from \"reakit/VisuallyHidden\";\nimport Collection from \"models/Collection\";\nimport CollectionDelete from \"scenes/CollectionDelete\";\nimport CollectionEdit from \"scenes/CollectionEdit\";\nimport CollectionExport from \"scenes/CollectionExport\";\nimport CollectionPermissions from \"scenes/CollectionPermissions\";\nimport ContextMenu from \"components/ContextMenu\";\nimport OverflowMenuButton from \"components/ContextMenu/OverflowMenuButton\";\nimport Template, { filterTemplateItems } from \"components/ContextMenu/Template\";\nimport Modal from \"components/Modal\";\nimport useStores from \"hooks/useStores\";\nimport useToasts from \"hooks/useToasts\";\nimport getDataTransferFiles from \"utils/getDataTransferFiles\";\nimport { newDocumentUrl } from \"utils/routeHelpers\";\n\ntype Props = {|\n  collection: Collection,\n  placement?: string,\n  modal?: boolean,\n  label?: (any) => React.Node,\n  onOpen?: () => void,\n  onClose?: () => void,\n|};\n\nfunction CollectionMenu({\n  collection,\n  label,\n  modal = true,\n  placement,\n  onOpen,\n  onClose,\n}: Props) {\n  const menu = useMenuState({ modal, placement });\n  const [renderModals, setRenderModals] = React.useState(false);\n  const { documents, policies } = useStores();\n  const { showToast } = useToasts();\n  const { t } = useTranslation();\n  const history = useHistory();\n\n  const file = React.useRef<?HTMLInputElement>();\n  const [\n    showCollectionPermissions,\n    setShowCollectionPermissions,\n  ] = React.useState(false);\n  const [showCollectionEdit, setShowCollectionEdit] = React.useState(false);\n  const [showCollectionDelete, setShowCollectionDelete] = React.useState(false);\n  const [showCollectionExport, setShowCollectionExport] = React.useState(false);\n\n  const handleOpen = React.useCallback(() => {\n    setRenderModals(true);\n    if (onOpen) {\n      onOpen();\n    }\n  }, [onOpen]);\n\n  const handleNewDocument = React.useCallback(\n    (ev: SyntheticEvent<>) => {\n      ev.preventDefault();\n      history.push(newDocumentUrl(collection.id));\n    },\n    [history, collection.id]\n  );\n\n  const stopPropagation = React.useCallback((ev: SyntheticEvent<>) => {\n    ev.stopPropagation();\n  }, []);\n\n  const handleImportDocument = React.useCallback(\n    (ev: SyntheticEvent<>) => {\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      // simulate a click on the file upload input element\n      if (file.current) {\n        file.current.click();\n      }\n    },\n    [file]\n  );\n\n  const handleFilePicked = React.useCallback(\n    async (ev: SyntheticEvent<>) => {\n      const files = getDataTransferFiles(ev);\n\n      // Because this is the onChange handler it's possible for the change to be\n      // from previously selecting a file to not selecting a file  aka empty\n      if (!files.length) {\n        return;\n      }\n\n      try {\n        const file = files[0];\n        const document = await documents.import(file, null, collection.id, {\n          publish: true,\n        });\n        history.push(document.url);\n      } catch (err) {\n        showToast(err.message, {\n          type: \"error\",\n        });\n\n        throw err;\n      }\n    },\n    [history, showToast, collection.id, documents]\n  );\n\n  const can = policies.abilities(collection.id);\n  const items = React.useMemo(\n    () =>\n      filterTemplateItems([\n        {\n          title: t(\"New document\"),\n          visible: can.update,\n          onClick: handleNewDocument,\n        },\n        {\n          title: t(\"Import document\"),\n          visible: can.update,\n          onClick: handleImportDocument,\n        },\n        {\n          type: \"separator\",\n        },\n        {\n          title: `${t(\"Edit\")}`,\n          visible: can.update,\n          onClick: () => setShowCollectionEdit(true),\n        },\n        {\n          title: `${t(\"Permissions\")}`,\n          visible: can.update,\n          onClick: () => setShowCollectionPermissions(true),\n        },\n        {\n          title: `${t(\"Export\")}`,\n          visible: !!(collection && can.export),\n          onClick: () => setShowCollectionExport(true),\n        },\n        {\n          type: \"separator\",\n        },\n        {\n          title: `${t(\"Delete\")}`,\n          visible: !!(collection && can.delete),\n          onClick: () => setShowCollectionDelete(true),\n        },\n      ]),\n    [can, collection, handleNewDocument, handleImportDocument, t]\n  );\n\n  if (!items.length) {\n    return null;\n  }\n\n  return (\n    <>\n      <VisuallyHidden>\n        <input\n          type=\"file\"\n          ref={file}\n          onChange={handleFilePicked}\n          onClick={stopPropagation}\n          accept={documents.importFileTypes.join(\", \")}\n          tabIndex=\"-1\"\n        />\n      </VisuallyHidden>\n      {label ? (\n        <MenuButton {...menu}>{label}</MenuButton>\n      ) : (\n        <OverflowMenuButton aria-label={t(\"Show menu\")} {...menu} />\n      )}\n      <ContextMenu\n        {...menu}\n        onOpen={handleOpen}\n        onClose={onClose}\n        aria-label={t(\"Collection\")}\n      >\n        <Template {...menu} items={items} />\n      </ContextMenu>\n      {renderModals && (\n        <>\n          <Modal\n            title={t(\"Collection permissions\")}\n            onRequestClose={() => setShowCollectionPermissions(false)}\n            isOpen={showCollectionPermissions}\n          >\n            <CollectionPermissions collection={collection} />\n          </Modal>\n          <Modal\n            title={t(\"Edit collection\")}\n            isOpen={showCollectionEdit}\n            onRequestClose={() => setShowCollectionEdit(false)}\n          >\n            <CollectionEdit\n              onSubmit={() => setShowCollectionEdit(false)}\n              collection={collection}\n            />\n          </Modal>\n          <Modal\n            title={t(\"Delete collection\")}\n            isOpen={showCollectionDelete}\n            onRequestClose={() => setShowCollectionDelete(false)}\n          >\n            <CollectionDelete\n              onSubmit={() => setShowCollectionDelete(false)}\n              collection={collection}\n            />\n          </Modal>\n          <Modal\n            title={t(\"Export collection\")}\n            isOpen={showCollectionExport}\n            onRequestClose={() => setShowCollectionExport(false)}\n          >\n            <CollectionExport\n              onSubmit={() => setShowCollectionExport(false)}\n              collection={collection}\n            />\n          </Modal>\n        </>\n      )}\n    </>\n  );\n}\n\nexport default observer(CollectionMenu);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { NewDocumentIcon, PlusIcon, PinIcon, MoreIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport Dropzone from \"react-dropzone\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport {\n  useParams,\n  Redirect,\n  Link,\n  Switch,\n  Route,\n  useHistory,\n  useRouteMatch,\n} from \"react-router-dom\";\nimport styled, { css } from \"styled-components\";\nimport CollectionPermissions from \"scenes/CollectionPermissions\";\nimport Search from \"scenes/Search\";\nimport { Action, Separator } from \"components/Actions\";\nimport Badge from \"components/Badge\";\nimport Button from \"components/Button\";\nimport CenteredContent from \"components/CenteredContent\";\nimport CollectionDescription from \"components/CollectionDescription\";\nimport CollectionIcon from \"components/CollectionIcon\";\nimport DocumentList from \"components/DocumentList\";\nimport Flex from \"components/Flex\";\nimport Heading from \"components/Heading\";\nimport HelpText from \"components/HelpText\";\nimport InputSearchPage from \"components/InputSearchPage\";\nimport PlaceholderList from \"components/List/Placeholder\";\nimport LoadingIndicator from \"components/LoadingIndicator\";\nimport Modal from \"components/Modal\";\nimport PaginatedDocumentList from \"components/PaginatedDocumentList\";\nimport PlaceholderText from \"components/PlaceholderText\";\nimport Scene from \"components/Scene\";\nimport Subheading from \"components/Subheading\";\nimport Tab from \"components/Tab\";\nimport Tabs from \"components/Tabs\";\nimport Tooltip from \"components/Tooltip\";\nimport Collection from \"../models/Collection\";\nimport { updateCollectionUrl } from \"../utils/routeHelpers\";\nimport useBoolean from \"hooks/useBoolean\";\nimport useCurrentTeam from \"hooks/useCurrentTeam\";\nimport useImportDocument from \"hooks/useImportDocument\";\nimport useStores from \"hooks/useStores\";\nimport useToasts from \"hooks/useToasts\";\nimport CollectionMenu from \"menus/CollectionMenu\";\nimport { newDocumentUrl, collectionUrl } from \"utils/routeHelpers\";\n\nfunction CollectionScene() {\n  const params = useParams();\n  const history = useHistory();\n  const match = useRouteMatch();\n  const { t } = useTranslation();\n  const { documents, policies, collections, ui } = useStores();\n  const { showToast } = useToasts();\n  const team = useCurrentTeam();\n  const [isFetching, setFetching] = React.useState();\n  const [error, setError] = React.useState();\n  const [\n    permissionsModalOpen,\n    handlePermissionsModalOpen,\n    handlePermissionsModalClose,\n  ] = useBoolean();\n\n  const id = params.id || \"\";\n  const collection: ?Collection =\n    collections.getByUrl(id) || collections.get(id);\n  const can = policies.abilities(collection?.id || \"\");\n  const canUser = policies.abilities(team.id);\n  const { handleFiles, isImporting } = useImportDocument(collection?.id || \"\");\n\n  React.useEffect(() => {\n    if (collection) {\n      const canonicalUrl = updateCollectionUrl(match.url, collection);\n      if (match.url !== canonicalUrl) {\n        history.replace(canonicalUrl);\n      }\n    }\n  }, [collection, history, id, match.url]);\n\n  React.useEffect(() => {\n    if (collection) {\n      ui.setActiveCollection(collection);\n    }\n  }, [ui, collection]);\n\n  React.useEffect(() => {\n    setError(null);\n    if (collection) {\n      documents.fetchPinned({ collectionId: collection.id });\n    }\n  }, [documents, collection]);\n\n  React.useEffect(() => {\n    async function load() {\n      if ((!can || !collection) && !error && !isFetching) {\n        try {\n          setError(null);\n          setFetching(true);\n          await collections.fetch(id);\n        } catch (err) {\n          setError(err);\n        } finally {\n          setFetching(false);\n        }\n      }\n    }\n    load();\n  }, [collections, isFetching, collection, error, id, can]);\n\n  const handleRejection = React.useCallback(() => {\n    showToast(\n      t(\"Document not supported  try Markdown, Plain text, HTML, or Word\"),\n      { type: \"error\" }\n    );\n  }, [t, showToast]);\n\n  if (!collection && error) {\n    return <Search notFound />;\n  }\n\n  const pinnedDocuments = collection\n    ? documents.pinnedInCollection(collection.id)\n    : [];\n  const collectionName = collection ? collection.name : \"\";\n  const hasPinnedDocuments = !!pinnedDocuments.length;\n\n  return collection ? (\n    <Scene\n      centered={false}\n      textTitle={collection.name}\n      title={\n        <>\n          <CollectionIcon collection={collection} expanded />\n          &nbsp;\n          {collection.name}\n        </>\n      }\n      actions={\n        <>\n          <Action>\n            <InputSearchPage\n              source=\"collection\"\n              placeholder={`${t(\"Search in collection\")}`}\n              label={`${t(\"Search in collection\")}`}\n              collectionId={collection.id}\n            />\n          </Action>\n          {can.update && (\n            <>\n              <Action>\n                <Tooltip\n                  tooltip={t(\"New document\")}\n                  shortcut=\"n\"\n                  delay={500}\n                  placement=\"bottom\"\n                >\n                  <Button\n                    as={Link}\n                    to={collection ? newDocumentUrl(collection.id) : \"\"}\n                    disabled={!collection}\n                    icon={<PlusIcon />}\n                  >\n                    {t(\"New doc\")}\n                  </Button>\n                </Tooltip>\n              </Action>\n              <Separator />\n            </>\n          )}\n          <Action>\n            <CollectionMenu\n              collection={collection}\n              placement=\"bottom-end\"\n              label={(props) => (\n                <Button\n                  icon={<MoreIcon />}\n                  {...props}\n                  borderOnHover\n                  neutral\n                  small\n                />\n              )}\n            />\n          </Action>\n        </>\n      }\n    >\n      <Dropzone\n        accept={documents.importFileTypes.join(\", \")}\n        onDropAccepted={handleFiles}\n        onDropRejected={handleRejection}\n        disabled={!can.update}\n        noClick\n        multiple\n      >\n        {({\n          getRootProps,\n          getInputProps,\n          isDragActive,\n          isDragAccept,\n          isDragReject,\n        }) => (\n          <DropzoneContainer\n            {...getRootProps()}\n            isDragActive={isDragActive}\n            tabIndex=\"-1\"\n          >\n            <input {...getInputProps()} />\n            {isImporting && <LoadingIndicator />}\n\n            <CenteredContent withStickyHeader>\n              {collection.isEmpty ? (\n                <Centered column>\n                  <HelpText>\n                    <Trans\n                      defaults=\"<em>{{ collectionName }}</em> doesnt contain any\n                    documents yet.\"\n                      values={{ collectionName }}\n                      components={{ em: <strong /> }}\n                    />\n                    <br />\n                    {canUser.createDocument && (\n                      <Trans>Get started by creating a new one!</Trans>\n                    )}\n                  </HelpText>\n                  <Empty>\n                    {canUser.createDocument && (\n                      <Link to={newDocumentUrl(collection.id)}>\n                        <Button icon={<NewDocumentIcon color=\"currentColor\" />}>\n                          {t(\"Create a document\")}\n                        </Button>\n                      </Link>\n                    )}\n                    &nbsp;&nbsp;\n                    <Button onClick={handlePermissionsModalOpen} neutral>\n                      {t(\"Manage permissions\")}\n                    </Button>\n                  </Empty>\n                  <Modal\n                    title={t(\"Collection permissions\")}\n                    onRequestClose={handlePermissionsModalClose}\n                    isOpen={permissionsModalOpen}\n                  >\n                    <CollectionPermissions collection={collection} />\n                  </Modal>\n                </Centered>\n              ) : (\n                <>\n                  <Heading>\n                    <CollectionIcon\n                      collection={collection}\n                      size={40}\n                      expanded\n                    />{\" \"}\n                    {collection.name}{\" \"}\n                    {!collection.permission && (\n                      <Tooltip\n                        tooltip={t(\n                          \"This collection is only visible to those given access\"\n                        )}\n                        placement=\"bottom\"\n                      >\n                        <Badge>{t(\"Private\")}</Badge>\n                      </Tooltip>\n                    )}\n                  </Heading>\n                  <CollectionDescription collection={collection} />\n\n                  {hasPinnedDocuments && (\n                    <>\n                      <Subheading sticky>\n                        <TinyPinIcon size={18} color=\"currentColor\" />{\" \"}\n                        {t(\"Pinned\")}\n                      </Subheading>\n                      <DocumentList documents={pinnedDocuments} showPin />\n                    </>\n                  )}\n\n                  <Tabs>\n                    <Tab to={collectionUrl(collection.url)} exact>\n                      {t(\"Documents\")}\n                    </Tab>\n                    <Tab to={collectionUrl(collection.url, \"updated\")} exact>\n                      {t(\"Recently updated\")}\n                    </Tab>\n                    <Tab to={collectionUrl(collection.url, \"published\")} exact>\n                      {t(\"Recently published\")}\n                    </Tab>\n                    <Tab to={collectionUrl(collection.url, \"old\")} exact>\n                      {t(\"Least recently updated\")}\n                    </Tab>\n                    <Tab\n                      to={collectionUrl(collection.url, \"alphabetical\")}\n                      exact\n                    >\n                      {t(\"AZ\")}\n                    </Tab>\n                  </Tabs>\n                  <Switch>\n                    <Route path={collectionUrl(collection.url, \"alphabetical\")}>\n                      <PaginatedDocumentList\n                        key=\"alphabetical\"\n                        documents={documents.alphabeticalInCollection(\n                          collection.id\n                        )}\n                        fetch={documents.fetchAlphabetical}\n                        options={{ collectionId: collection.id }}\n                        showPin\n                      />\n                    </Route>\n                    <Route path={collectionUrl(collection.url, \"old\")}>\n                      <PaginatedDocumentList\n                        key=\"old\"\n                        documents={documents.leastRecentlyUpdatedInCollection(\n                          collection.id\n                        )}\n                        fetch={documents.fetchLeastRecentlyUpdated}\n                        options={{ collectionId: collection.id }}\n                        showPin\n                      />\n                    </Route>\n                    <Route path={collectionUrl(collection.url, \"recent\")}>\n                      <Redirect\n                        to={collectionUrl(collection.url, \"published\")}\n                      />\n                    </Route>\n                    <Route path={collectionUrl(collection.url, \"published\")}>\n                      <PaginatedDocumentList\n                        key=\"published\"\n                        documents={documents.recentlyPublishedInCollection(\n                          collection.id\n                        )}\n                        fetch={documents.fetchRecentlyPublished}\n                        options={{ collectionId: collection.id }}\n                        showPublished\n                        showPin\n                      />\n                    </Route>\n                    <Route path={collectionUrl(collection.url, \"updated\")}>\n                      <PaginatedDocumentList\n                        key=\"updated\"\n                        documents={documents.recentlyUpdatedInCollection(\n                          collection.id\n                        )}\n                        fetch={documents.fetchRecentlyUpdated}\n                        options={{ collectionId: collection.id }}\n                        showPin\n                      />\n                    </Route>\n                    <Route path={collectionUrl(collection.url)} exact>\n                      <PaginatedDocumentList\n                        documents={documents.rootInCollection(collection.id)}\n                        fetch={documents.fetchPage}\n                        options={{\n                          collectionId: collection.id,\n                          parentDocumentId: null,\n                          sort: collection.sort.field,\n                          direction: \"ASC\",\n                        }}\n                        showNestedDocuments\n                        showPin\n                      />\n                    </Route>\n                  </Switch>\n                </>\n              )}\n              <DropMessage>{t(\"Drop documents to import\")}</DropMessage>\n            </CenteredContent>\n          </DropzoneContainer>\n        )}\n      </Dropzone>\n    </Scene>\n  ) : (\n    <CenteredContent>\n      <Heading>\n        <PlaceholderText height={35} />\n      </Heading>\n      <PlaceholderList count={5} />\n    </CenteredContent>\n  );\n}\n\nconst DropMessage = styled(HelpText)`\n  opacity: 0;\n  pointer-events: none;\n`;\n\nconst DropzoneContainer = styled.div`\n  min-height: calc(100% - 56px);\n  position: relative;\n\n  ${({ isDragActive, theme }) =>\n    isDragActive &&\n    css`\n      &:after {\n        display: block;\n        content: \"\";\n        position: absolute;\n        top: 24px;\n        right: 24px;\n        bottom: 24px;\n        left: 24px;\n        background: ${theme.background};\n        border-radius: 8px;\n        border: 1px dashed ${theme.divider};\n        z-index: 1;\n      }\n\n      ${DropMessage} {\n        opacity: 1;\n        z-index: 2;\n        position: absolute;\n        text-align: center;\n        top: 50%;\n        left: 50%;\n        transform: translateX(-50%);\n      }\n    `}\n`;\n\nconst Centered = styled(Flex)`\n  text-align: center;\n  margin: 40vh auto 0;\n  max-width: 380px;\n  transform: translateY(-50%);\n`;\n\nconst TinyPinIcon = styled(PinIcon)`\n  position: relative;\n  top: 4px;\n  opacity: 0.8;\n`;\n\nconst Empty = styled(Flex)`\n  justify-content: center;\n  margin: 10px 0;\n`;\n\nexport default observer(CollectionScene);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport queryString from \"query-string\";\nimport * as React from \"react\";\nimport { useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useHistory, useLocation, useRouteMatch } from \"react-router-dom\";\nimport CenteredContent from \"components/CenteredContent\";\nimport Flex from \"components/Flex\";\nimport PlaceholderDocument from \"components/PlaceholderDocument\";\nimport useStores from \"hooks/useStores\";\nimport useToasts from \"hooks/useToasts\";\nimport { editDocumentUrl } from \"utils/routeHelpers\";\n\nfunction DocumentNew() {\n  const history = useHistory();\n  const location = useLocation();\n  const match = useRouteMatch();\n  const { t } = useTranslation();\n  const { documents, collections } = useStores();\n  const { showToast } = useToasts();\n  const id = match.params.id || \"\";\n\n  useEffect(() => {\n    async function createDocument() {\n      const params = queryString.parse(location.search);\n      try {\n        const collection = await collections.fetch(id);\n\n        const document = await documents.create({\n          collectionId: collection.id,\n          parentDocumentId: params.parentDocumentId,\n          templateId: params.templateId,\n          template: params.template,\n          title: \"\",\n          text: \"\",\n        });\n\n        history.replace(editDocumentUrl(document));\n      } catch (err) {\n        showToast(t(\"Couldnt create the document, try again?\"), {\n          type: \"error\",\n        });\n        history.goBack();\n      }\n    }\n    createDocument();\n  });\n\n  return (\n    <Flex column auto>\n      <CenteredContent>\n        <PlaceholderDocument />\n      </CenteredContent>\n    </Flex>\n  );\n}\n\nexport default observer(DocumentNew);\n","// @flow\nimport { observable } from \"mobx\";\nimport { inject, observer } from \"mobx-react\";\nimport { EditIcon } from \"outline-icons\";\nimport queryString from \"query-string\";\nimport * as React from \"react\";\nimport { withTranslation, type TFunction } from \"react-i18next\";\nimport { type RouterHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport DocumentsStore from \"stores/DocumentsStore\";\nimport CollectionFilter from \"scenes/Search/components/CollectionFilter\";\nimport DateFilter from \"scenes/Search/components/DateFilter\";\nimport { Action } from \"components/Actions\";\nimport Empty from \"components/Empty\";\nimport Flex from \"components/Flex\";\nimport Heading from \"components/Heading\";\nimport InputSearchPage from \"components/InputSearchPage\";\nimport PaginatedDocumentList from \"components/PaginatedDocumentList\";\nimport Scene from \"components/Scene\";\nimport Subheading from \"components/Subheading\";\nimport NewDocumentMenu from \"menus/NewDocumentMenu\";\nimport { type LocationWithState } from \"types\";\n\ntype Props = {|\n  documents: DocumentsStore,\n  history: RouterHistory,\n  location: LocationWithState,\n  t: TFunction,\n|};\n\n@observer\nclass Drafts extends React.Component<Props> {\n  @observable params: URLSearchParams = new URLSearchParams(\n    this.props.location.search\n  );\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.location.search !== this.props.location.search) {\n      this.handleQueryChange();\n    }\n  }\n\n  handleQueryChange = () => {\n    this.params = new URLSearchParams(this.props.location.search);\n  };\n\n  handleFilterChange = (search: {\n    dateFilter?: ?string,\n    collectionId?: ?string,\n  }) => {\n    this.props.history.replace({\n      pathname: this.props.location.pathname,\n      search: queryString.stringify(\n        {\n          ...queryString.parse(this.props.location.search),\n          ...search,\n        },\n        { skipEmptyString: true }\n      ),\n    });\n  };\n\n  get collectionId() {\n    const id = this.params.get(\"collectionId\");\n    return id ? id : undefined;\n  }\n\n  get dateFilter() {\n    const id = this.params.get(\"dateFilter\");\n    return id ? id : undefined;\n  }\n\n  render() {\n    const { t } = this.props;\n    const { drafts, fetchDrafts } = this.props.documents;\n    const isFiltered = this.collectionId || this.dateFilter;\n    const options = {\n      dateFilter: this.dateFilter,\n      collectionId: this.collectionId,\n    };\n\n    return (\n      <Scene\n        icon={<EditIcon color=\"currentColor\" />}\n        title={t(\"Drafts\")}\n        actions={\n          <>\n            <Action>\n              <InputSearchPage source=\"drafts\" label={t(\"Search documents\")} />\n            </Action>\n            <Action>\n              <NewDocumentMenu />\n            </Action>\n          </>\n        }\n      >\n        <Heading>{t(\"Drafts\")}</Heading>\n        <Subheading sticky>\n          {t(\"Documents\")}\n          <Filters>\n            <CollectionFilter\n              collectionId={this.collectionId}\n              onSelect={(collectionId) =>\n                this.handleFilterChange({ collectionId })\n              }\n            />\n            <DateFilter\n              dateFilter={this.dateFilter}\n              onSelect={(dateFilter) => this.handleFilterChange({ dateFilter })}\n            />\n          </Filters>\n        </Subheading>\n\n        <PaginatedDocumentList\n          empty={\n            <Empty>\n              {isFiltered\n                ? t(\"No documents found for your filters.\")\n                : t(\"Youve not got any drafts at the moment.\")}\n            </Empty>\n          }\n          fetch={fetchDrafts}\n          documents={drafts(options)}\n          options={options}\n          showCollection\n        />\n      </Scene>\n    );\n  }\n}\n\nconst Filters = styled(Flex)`\n  opacity: 0.85;\n  transition: opacity 100ms ease-in-out;\n  position: absolute;\n  right: -8px;\n  bottom: 0;\n  padding: 0 0 6px;\n\n  &:hover {\n    opacity: 1;\n  }\n`;\n\nexport default withTranslation()<Drafts>(inject(\"documents\")(Drafts));\n","// @flow\nimport styled from \"styled-components\";\n\nconst Notice = styled.p`\n  background: ${(props) => props.theme.brand.marine};\n  color: ${(props) => props.theme.almostBlack};\n  padding: 10px 12px;\n  margin-top: 24px;\n  border-radius: 4px;\n  position: relative;\n\n  a {\n    color: ${(props) => props.theme.almostBlack};\n    font-weight: 500;\n  }\n\n  a:hover {\n    text-decoration: underline;\n  }\n`;\n\nexport default Notice;\n","// @flow\nimport { find } from \"lodash\";\nimport * as React from \"react\";\nimport { Trans, useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport { languages, languageOptions } from \"shared/i18n\";\nimport ButtonLink from \"components/ButtonLink\";\nimport Flex from \"components/Flex\";\nimport NoticeTip from \"components/NoticeTip\";\nimport useCurrentUser from \"hooks/useCurrentUser\";\nimport useStores from \"hooks/useStores\";\nimport { detectLanguage } from \"utils/language\";\n\nfunction Icon(props) {\n  return (\n    <svg\n      width=\"32\"\n      height=\"32\"\n      viewBox=\"0 0 32 32\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M21 18H16L14 16V6C14 4.89543 14.8954 4 16 4H28C29.1046 4 30 4.89543 30 6V16C30 17.1046 29.1046 18 28 18H27L25.4142 19.5858C24.6332 20.3668 23.3668 20.3668 22.5858 19.5858L21 18ZM16 15.1716V6H28V16H27H26.1716L25.5858 16.5858L24 18.1716L22.4142 16.5858L21.8284 16H21H16.8284L16 15.1716Z\"\n        fill=\"#2B2F35\"\n      />\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M16 13H4C2.89543 13 2 13.8954 2 15V25C2 26.1046 2.89543 27 4 27H5L6.58579 28.5858C7.36684 29.3668 8.63316 29.3668 9.41421 28.5858L11 27H16C17.1046 27 18 26.1046 18 25V15C18 13.8954 17.1046 13 16 13ZM9 17L6 16.9681C6 16.9681 5 17.016 5 18C5 18.984 6 19 6 19H8.5H10C10 19 9.57627 20.1885 8.38983 21.0831C7.20339 21.9777 5.7197 23 5.7197 23C5.7197 23 4.99153 23.6054 5.5 24.5C6.00847 25.3946 7 24.8403 7 24.8403L9.74576 22.8722L11.9492 24.6614C11.9492 24.6614 12.6271 25.3771 13.3051 24.4825C13.9831 23.5879 13.3051 23.0512 13.3051 23.0512L11.1017 21.262C11.1017 21.262 11.5 21 12 20L12.5 19H14C14 19 15 19.0319 15 18C15 16.9681 14 16.9681 14 16.9681L11 17V16C11 16 11.0169 15 10 15C8.98305 15 9 16 9 16V17Z\"\n        fill=\"#2B2F35\"\n      />\n      <path\n        d=\"M23.6672 12.5221L23.5526 12.1816H23.1934H20.8818H20.5215L20.4075 12.5235L20.082 13.5H19.2196L21.2292 8.10156H21.8774L21.5587 9.06116L20.7633 11.4562L20.5449 12.1138H21.2378H22.8374H23.5327L23.3114 11.4546L22.5072 9.05959L22.1855 8.10156H22.768L24.7887 13.5H23.9964L23.6672 12.5221Z\"\n        fill=\"#2B2F35\"\n        stroke=\"#2B2F35\"\n      />\n    </svg>\n  );\n}\n\nexport default function LanguagePrompt() {\n  const { auth, ui } = useStores();\n  const { t } = useTranslation();\n  const user = useCurrentUser();\n  const language = detectLanguage();\n\n  if (language === \"en_US\" || language === user.language) {\n    return null;\n  }\n\n  if (!languages.includes(language)) {\n    return null;\n  }\n\n  const option = find(languageOptions, (o) => o.value === language);\n  const optionLabel = option ? option.label : \"\";\n\n  return (\n    <NoticeTip>\n      <Flex align=\"center\">\n        <LanguageIcon />\n        <span>\n          <Trans>\n            Outline is available in your language {{ optionLabel }}, would you\n            like to change?\n          </Trans>\n          <br />\n          <Link\n            onClick={() => {\n              auth.updateUser({\n                language,\n              });\n              ui.setLanguagePromptDismissed();\n            }}\n          >\n            {t(\"Change Language\")}\n          </Link>{\" \"}\n          &middot;{\" \"}\n          <Link onClick={ui.setLanguagePromptDismissed}>{t(\"Dismiss\")}</Link>\n        </span>\n      </Flex>\n    </NoticeTip>\n  );\n}\n\nconst Link = styled(ButtonLink)`\n  color: ${(props) => props.theme.almostBlack};\n  font-weight: 500;\n\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n\nconst LanguageIcon = styled(Icon)`\n  margin-right: 12px;\n`;\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { HomeIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { Action } from \"components/Actions\";\nimport Empty from \"components/Empty\";\nimport Heading from \"components/Heading\";\nimport InputSearchPage from \"components/InputSearchPage\";\nimport LanguagePrompt from \"components/LanguagePrompt\";\nimport Scene from \"components/Scene\";\nimport Tab from \"components/Tab\";\nimport Tabs from \"components/Tabs\";\nimport PaginatedDocumentList from \"../components/PaginatedDocumentList\";\nimport useStores from \"../hooks/useStores\";\nimport NewDocumentMenu from \"menus/NewDocumentMenu\";\n\nfunction Home() {\n  const { documents, ui, auth } = useStores();\n  const { t } = useTranslation();\n\n  if (!auth.user || !auth.team) return null;\n  const user = auth.user.id;\n\n  return (\n    <Scene\n      icon={<HomeIcon color=\"currentColor\" />}\n      title={t(\"Home\")}\n      actions={\n        <>\n          <Action>\n            <InputSearchPage source=\"dashboard\" label={t(\"Search documents\")} />\n          </Action>\n          <Action>\n            <NewDocumentMenu />\n          </Action>\n        </>\n      }\n    >\n      {!ui.languagePromptDismissed && <LanguagePrompt />}\n      <Heading>{t(\"Home\")}</Heading>\n      <Tabs>\n        <Tab to=\"/home\" exact>\n          {t(\"Recently viewed\")}\n        </Tab>\n        <Tab to=\"/home/recent\" exact>\n          {t(\"Recently updated\")}\n        </Tab>\n        <Tab to=\"/home/created\">{t(\"Created by me\")}</Tab>\n      </Tabs>\n      <Switch>\n        <Route path=\"/home/recent\">\n          <PaginatedDocumentList\n            documents={documents.recentlyUpdated}\n            fetch={documents.fetchRecentlyUpdated}\n            empty={<Empty>{t(\"Weird, this shouldnt ever be empty\")}</Empty>}\n            showCollection\n          />\n        </Route>\n        <Route path=\"/home/created\">\n          <PaginatedDocumentList\n            key=\"created\"\n            documents={documents.createdByUser(user)}\n            fetch={documents.fetchOwned}\n            options={{ user }}\n            empty={<Empty>{t(\"Weird, this shouldnt ever be empty\")}</Empty>}\n            showCollection\n          />\n        </Route>\n        <Route path=\"/home\">\n          <PaginatedDocumentList\n            key=\"recent\"\n            documents={documents.recentlyViewed}\n            fetch={documents.fetchRecentlyViewed}\n            empty={\n              <Empty>\n                {t(\n                  \"Documents youve recently viewed will be here for easy access\"\n                )}\n              </Empty>\n            }\n            showCollection\n          />\n        </Route>\n      </Switch>\n    </Scene>\n  );\n}\n\nexport default observer(Home);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { StarredIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { type Match } from \"react-router-dom\";\nimport { Action } from \"components/Actions\";\nimport Empty from \"components/Empty\";\nimport Heading from \"components/Heading\";\nimport InputSearchPage from \"components/InputSearchPage\";\nimport PaginatedDocumentList from \"components/PaginatedDocumentList\";\nimport Scene from \"components/Scene\";\nimport Tab from \"components/Tab\";\nimport Tabs from \"components/Tabs\";\nimport useStores from \"hooks/useStores\";\nimport NewDocumentMenu from \"menus/NewDocumentMenu\";\n\ntype Props = {\n  match: Match,\n};\n\nfunction Starred(props: Props) {\n  const { documents } = useStores();\n  const { t } = useTranslation();\n  const { fetchStarred, starred, starredAlphabetical } = documents;\n  const { sort } = props.match.params;\n\n  return (\n    <Scene\n      icon={<StarredIcon color=\"currentColor\" />}\n      title={t(\"Starred\")}\n      actions={\n        <>\n          <Action>\n            <InputSearchPage source=\"starred\" label={t(\"Search documents\")} />\n          </Action>\n          <Action>\n            <NewDocumentMenu />\n          </Action>\n        </>\n      }\n    >\n      <Heading>{t(\"Starred\")}</Heading>\n      <PaginatedDocumentList\n        heading={\n          <Tabs>\n            <Tab to=\"/starred\" exact>\n              {t(\"Recently updated\")}\n            </Tab>\n            <Tab to=\"/starred/alphabetical\" exact>\n              {t(\"Alphabetical\")}\n            </Tab>\n          </Tabs>\n        }\n        empty={<Empty>{t(\"Youve not starred any documents yet.\")}</Empty>}\n        fetch={fetchStarred}\n        documents={sort === \"alphabetical\" ? starredAlphabetical : starred}\n        showCollection\n      />\n    </Scene>\n  );\n}\n\nexport default observer(Starred);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { PlusIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useMenuState, MenuButton } from \"reakit/Menu\";\nimport styled from \"styled-components\";\nimport Button from \"components/Button\";\nimport CollectionIcon from \"components/CollectionIcon\";\nimport ContextMenu from \"components/ContextMenu\";\nimport Header from \"components/ContextMenu/Header\";\nimport Template from \"components/ContextMenu/Template\";\nimport Flex from \"components/Flex\";\nimport useCurrentTeam from \"hooks/useCurrentTeam\";\nimport useStores from \"hooks/useStores\";\nimport { newDocumentUrl } from \"utils/routeHelpers\";\n\nfunction NewTemplateMenu() {\n  const menu = useMenuState({ modal: true });\n  const { t } = useTranslation();\n  const team = useCurrentTeam();\n  const { collections, policies } = useStores();\n  const can = policies.abilities(team.id);\n\n  if (!can.createDocument) {\n    return null;\n  }\n\n  return (\n    <>\n      <MenuButton {...menu}>\n        {(props) => (\n          <Button icon={<PlusIcon />} {...props} small>\n            {t(\"New template\")}\n          </Button>\n        )}\n      </MenuButton>\n      <ContextMenu aria-label={t(\"New template\")} {...menu}>\n        <Header>{t(\"Choose a collection\")}</Header>\n        <Template\n          {...menu}\n          items={collections.orderedData.map((collection) => ({\n            to: newDocumentUrl(collection.id, {\n              template: true,\n            }),\n            disabled: !policies.abilities(collection.id).update,\n            title: (\n              <Flex align=\"center\">\n                <CollectionIcon collection={collection} />\n                <CollectionName>{collection.name}</CollectionName>\n              </Flex>\n            ),\n          }))}\n        />\n      </ContextMenu>\n    </>\n  );\n}\n\nconst CollectionName = styled.div`\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n`;\n\nexport default observer(NewTemplateMenu);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { TemplateIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { type Match } from \"react-router-dom\";\nimport { Action } from \"components/Actions\";\nimport Empty from \"components/Empty\";\nimport Heading from \"components/Heading\";\nimport PaginatedDocumentList from \"components/PaginatedDocumentList\";\nimport Scene from \"components/Scene\";\nimport Tab from \"components/Tab\";\nimport Tabs from \"components/Tabs\";\nimport useCurrentTeam from \"hooks/useCurrentTeam\";\nimport useStores from \"hooks/useStores\";\nimport NewTemplateMenu from \"menus/NewTemplateMenu\";\n\ntype Props = {\n  match: Match,\n};\n\nfunction Templates(props: Props) {\n  const { documents, policies } = useStores();\n  const { t } = useTranslation();\n  const team = useCurrentTeam();\n  const { fetchTemplates, templates, templatesAlphabetical } = documents;\n  const { sort } = props.match.params;\n  const can = policies.abilities(team.id);\n\n  return (\n    <Scene\n      icon={<TemplateIcon color=\"currentColor\" />}\n      title={t(\"Templates\")}\n      actions={\n        <Action>\n          <NewTemplateMenu />\n        </Action>\n      }\n    >\n      <Heading>{t(\"Templates\")}</Heading>\n      <PaginatedDocumentList\n        heading={\n          <Tabs>\n            <Tab to=\"/templates\" exact>\n              {t(\"Recently updated\")}\n            </Tab>\n            <Tab to=\"/templates/alphabetical\" exact>\n              {t(\"Alphabetical\")}\n            </Tab>\n          </Tabs>\n        }\n        empty={\n          <Empty>\n            {t(\"There are no templates just yet.\")}\n            {can.createDocument &&\n              t(\n                \"You can create templates to help your team create consistent and accurate documentation.\"\n              )}\n          </Empty>\n        }\n        fetch={fetchTemplates}\n        documents={sort === \"alphabetical\" ? templatesAlphabetical : templates}\n        showCollection\n        showDraft\n      />\n    </Scene>\n  );\n}\n\nexport default observer(Templates);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { TrashIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Empty from \"components/Empty\";\nimport Heading from \"components/Heading\";\nimport PaginatedDocumentList from \"components/PaginatedDocumentList\";\nimport Scene from \"components/Scene\";\nimport Subheading from \"components/Subheading\";\nimport useStores from \"hooks/useStores\";\n\nfunction Trash() {\n  const { t } = useTranslation();\n  const { documents } = useStores();\n\n  return (\n    <Scene icon={<TrashIcon color=\"currentColor\" />} title={t(\"Trash\")}>\n      <Heading>{t(\"Trash\")}</Heading>\n      <PaginatedDocumentList\n        documents={documents.deleted}\n        fetch={documents.fetchDeleted}\n        heading={<Subheading sticky>{t(\"Documents\")}</Subheading>}\n        empty={<Empty>{t(\"Trash is empty at the moment.\")}</Empty>}\n        showCollection\n        showTemplate\n      />\n    </Scene>\n  );\n}\n\nexport default observer(Trash);\n","// @flow\nimport { inject, observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\n\nimport AuthStore from \"stores/AuthStore\";\nimport CenteredContent from \"components/CenteredContent\";\nimport PageTitle from \"components/PageTitle\";\n\nconst ErrorSuspended = ({ auth }: { auth: AuthStore }) => {\n  const { t } = useTranslation();\n\n  return (\n    <CenteredContent>\n      <PageTitle title={t(\"Your account has been suspended\")} />\n      <h1>\n        <span role=\"img\" aria-label=\"Warning sign\">\n          \n        </span>{\" \"}\n        {t(\"Your account has been suspended\")}\n      </h1>\n\n      <p>\n        <Trans\n          defaults=\"A team admin (<em>{{ suspendedContactEmail }}</em>) has suspended your account. To re-activate your account, please reach out to them directly.\"\n          values={{ suspendedContactEmail: auth.suspendedContactEmail }}\n          components={{ em: <strong /> }}\n        />\n      </p>\n    </CenteredContent>\n  );\n};\n\nexport default inject(\"auth\")(observer(ErrorSuspended));\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport { useMenuState } from \"reakit/Menu\";\nimport Document from \"models/Document\";\nimport Revision from \"models/Revision\";\nimport ContextMenu from \"components/ContextMenu\";\nimport MenuItem from \"components/ContextMenu/MenuItem\";\nimport OverflowMenuButton from \"components/ContextMenu/OverflowMenuButton\";\nimport Separator from \"components/ContextMenu/Separator\";\nimport CopyToClipboard from \"components/CopyToClipboard\";\nimport useToasts from \"hooks/useToasts\";\nimport { documentHistoryUrl } from \"utils/routeHelpers\";\n\ntype Props = {|\n  document: Document,\n  revision: Revision,\n  iconColor?: string,\n  className?: string,\n|};\n\nfunction RevisionMenu({ document, revision, className, iconColor }: Props) {\n  const { showToast } = useToasts();\n  const menu = useMenuState({ modal: true });\n  const { t } = useTranslation();\n  const history = useHistory();\n\n  const handleRestore = React.useCallback(\n    async (ev: SyntheticEvent<>) => {\n      ev.preventDefault();\n      await document.restore({ revisionId: revision.id });\n      showToast(t(\"Document restored\"), { type: \"success\" });\n      history.push(document.url);\n    },\n    [history, showToast, t, document, revision]\n  );\n\n  const handleCopy = React.useCallback(() => {\n    showToast(t(\"Link copied\"), { type: \"info\" });\n  }, [showToast, t]);\n\n  const url = `${window.location.origin}${documentHistoryUrl(\n    document,\n    revision.id\n  )}`;\n\n  return (\n    <>\n      <OverflowMenuButton\n        className={className}\n        iconColor={iconColor}\n        aria-label={t(\"Show menu\")}\n        {...menu}\n      />\n      <ContextMenu {...menu} aria-label={t(\"Revision options\")}>\n        <MenuItem {...menu} onClick={handleRestore}>\n          {t(\"Restore version\")}\n        </MenuItem>\n        <Separator />\n        <CopyToClipboard text={url} onCopy={handleCopy}>\n          <MenuItem {...menu}>{t(\"Copy link\")}</MenuItem>\n        </CopyToClipboard>\n      </ContextMenu>\n    </>\n  );\n}\n\nexport default observer(RevisionMenu);\n","// @flow\nimport { format } from \"date-fns\";\nimport * as React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport styled, { withTheme } from \"styled-components\";\n\nimport Document from \"models/Document\";\nimport Revision from \"models/Revision\";\nimport Avatar from \"components/Avatar\";\nimport Flex from \"components/Flex\";\nimport Time from \"components/Time\";\nimport RevisionMenu from \"menus/RevisionMenu\";\nimport { type Theme } from \"types\";\n\nimport { documentHistoryUrl } from \"utils/routeHelpers\";\n\ntype Props = {\n  theme: Theme,\n  showMenu: boolean,\n  selected: boolean,\n  document: Document,\n  revision: Revision,\n};\n\nclass RevisionListItem extends React.Component<Props> {\n  render() {\n    const { revision, document, showMenu, selected, theme } = this.props;\n\n    return (\n      <StyledNavLink\n        to={documentHistoryUrl(document, revision.id)}\n        activeStyle={{ background: theme.primary, color: theme.white }}\n      >\n        <Author>\n          <StyledAvatar src={revision.createdBy.avatarUrl} />{\" \"}\n          {revision.createdBy.name}\n        </Author>\n        <Meta>\n          <Time dateTime={revision.createdAt} tooltipDelay={250}>\n            {format(Date.parse(revision.createdAt), \"MMMM do, yyyy h:mm a\")}\n          </Time>\n        </Meta>\n        {showMenu && (\n          <StyledRevisionMenu\n            document={document}\n            revision={revision}\n            iconColor={selected ? theme.white : theme.textTertiary}\n          />\n        )}\n      </StyledNavLink>\n    );\n  }\n}\n\nconst StyledAvatar = styled(Avatar)`\n  border-color: transparent;\n  margin-right: 4px;\n`;\n\nconst StyledRevisionMenu = styled(RevisionMenu)`\n  position: absolute;\n  right: 16px;\n  top: 20px;\n`;\n\nconst StyledNavLink = styled(NavLink)`\n  color: ${(props) => props.theme.text};\n  display: block;\n  padding: 8px 16px;\n  font-size: 15px;\n  position: relative;\n`;\n\nconst Author = styled(Flex)`\n  font-weight: 500;\n  padding: 0;\n  margin: 0;\n`;\n\nconst Meta = styled.p`\n  font-size: 14px;\n  opacity: 0.75;\n  margin: 0 0 2px;\n  padding: 0;\n`;\n\nexport default withTheme(RevisionListItem);\n","// @flow\nimport ArrowKeyNavigation from \"boundless-arrow-key-navigation\";\nimport { action, observable } from \"mobx\";\nimport { inject, observer } from \"mobx-react\";\nimport { CloseIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { type Match, Redirect, type RouterHistory } from \"react-router-dom\";\nimport { Waypoint } from \"react-waypoint\";\nimport styled from \"styled-components\";\n\nimport breakpoint from \"styled-components-breakpoint\";\nimport { DEFAULT_PAGINATION_LIMIT } from \"stores/BaseStore\";\nimport DocumentsStore from \"stores/DocumentsStore\";\nimport RevisionsStore from \"stores/RevisionsStore\";\n\nimport Button from \"components/Button\";\nimport Flex from \"components/Flex\";\nimport PlaceholderList from \"components/List/Placeholder\";\nimport Revision from \"./components/Revision\";\nimport { documentHistoryUrl, documentUrl } from \"utils/routeHelpers\";\n\ntype Props = {\n  match: Match,\n  documents: DocumentsStore,\n  revisions: RevisionsStore,\n  history: RouterHistory,\n};\n\n@observer\nclass DocumentHistory extends React.Component<Props> {\n  @observable isLoaded: boolean = false;\n  @observable isFetching: boolean = false;\n  @observable offset: number = 0;\n  @observable allowLoadMore: boolean = true;\n  @observable redirectTo: ?string;\n\n  async componentDidMount() {\n    await this.loadMoreResults();\n    this.selectFirstRevision();\n  }\n\n  fetchResults = async () => {\n    this.isFetching = true;\n\n    const limit = DEFAULT_PAGINATION_LIMIT;\n    const results = await this.props.revisions.fetchPage({\n      limit,\n      offset: this.offset,\n      documentId: this.props.match.params.documentSlug,\n    });\n\n    if (\n      results &&\n      (results.length === 0 || results.length < DEFAULT_PAGINATION_LIMIT)\n    ) {\n      this.allowLoadMore = false;\n    } else {\n      this.offset += DEFAULT_PAGINATION_LIMIT;\n    }\n\n    this.isLoaded = true;\n    this.isFetching = false;\n  };\n\n  selectFirstRevision = () => {\n    if (this.revisions.length) {\n      const document = this.props.documents.getByUrl(\n        this.props.match.params.documentSlug\n      );\n      if (!document) return;\n\n      this.props.history.replace(\n        documentHistoryUrl(document, this.revisions[0].id)\n      );\n    }\n  };\n\n  @action\n  loadMoreResults = async () => {\n    // Don't paginate if there aren't more results or were in the middle of fetching\n    if (!this.allowLoadMore || this.isFetching) return;\n    await this.fetchResults();\n  };\n\n  get revisions() {\n    const document = this.props.documents.getByUrl(\n      this.props.match.params.documentSlug\n    );\n    if (!document) return [];\n    return this.props.revisions.getDocumentRevisions(document.id);\n  }\n\n  onCloseHistory = () => {\n    const document = this.props.documents.getByUrl(\n      this.props.match.params.documentSlug\n    );\n\n    this.redirectTo = documentUrl(document);\n  };\n\n  render() {\n    const document = this.props.documents.getByUrl(\n      this.props.match.params.documentSlug\n    );\n    const showLoading = (!this.isLoaded && this.isFetching) || !document;\n\n    if (this.redirectTo) return <Redirect to={this.redirectTo} push />;\n\n    return (\n      <Sidebar>\n        <Wrapper column>\n          <Header>\n            <Title>History</Title>\n            <Button\n              icon={<CloseIcon />}\n              onClick={this.onCloseHistory}\n              borderOnHover\n              neutral\n            />\n          </Header>\n          {showLoading ? (\n            <Loading>\n              <PlaceholderList count={5} />\n            </Loading>\n          ) : (\n            <ArrowKeyNavigation\n              mode={ArrowKeyNavigation.mode.VERTICAL}\n              defaultActiveChildIndex={0}\n            >\n              {this.revisions.map((revision, index) => (\n                <Revision\n                  key={revision.id}\n                  revision={revision}\n                  document={document}\n                  showMenu={index !== 0}\n                  selected={this.props.match.params.revisionId === revision.id}\n                />\n              ))}\n            </ArrowKeyNavigation>\n          )}\n          {this.allowLoadMore && (\n            <Waypoint key={this.offset} onEnter={this.loadMoreResults} />\n          )}\n        </Wrapper>\n      </Sidebar>\n    );\n  }\n}\n\nconst Loading = styled.div`\n  margin: 0 16px;\n`;\n\nconst Wrapper = styled(Flex)`\n  position: fixed;\n  top: 0;\n  right: 0;\n  z-index: 1;\n  min-width: ${(props) => props.theme.sidebarWidth}px;\n  height: 100%;\n  overflow-y: auto;\n  overscroll-behavior: none;\n`;\n\nconst Sidebar = styled(Flex)`\n  display: none;\n  background: ${(props) => props.theme.background};\n  min-width: ${(props) => props.theme.sidebarWidth}px;\n  border-left: 1px solid ${(props) => props.theme.divider};\n  z-index: 1;\n\n  ${breakpoint(\"tablet\")`\n    display: flex;\n  `};\n`;\n\nconst Title = styled(Flex)`\n  font-size: 16px;\n  font-weight: 600;\n  text-align: center;\n  align-items: center;\n  justify-content: flex-start;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  width: 0;\n  flex-grow: 1;\n`;\n\nconst Header = styled(Flex)`\n  align-items: center;\n  position: relative;\n  padding: 12px;\n  border-bottom: 1px solid ${(props) => props.theme.divider};\n  color: ${(props) => props.theme.text};\n  flex-shrink: 0;\n`;\n\nexport default inject(\"documents\", \"revisions\")(DocumentHistory);\n","// @flow\nimport DocumentHistory from \"./DocumentHistory\";\nexport default DocumentHistory;\n","// @flow\nimport { intersection } from \"lodash\";\nimport { observable } from \"mobx\";\nimport { inject, observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { withTranslation, type TFunction, Trans } from \"react-i18next\";\nimport { withRouter, type RouterHistory } from \"react-router-dom\";\nimport AuthStore from \"stores/AuthStore\";\nimport CollectionsStore from \"stores/CollectionsStore\";\nimport ToastsStore from \"stores/ToastsStore\";\nimport Collection from \"models/Collection\";\nimport Button from \"components/Button\";\nimport Flex from \"components/Flex\";\nimport HelpText from \"components/HelpText\";\nimport IconPicker, { icons } from \"components/IconPicker\";\nimport Input from \"components/Input\";\nimport InputSelectPermission from \"components/InputSelectPermission\";\nimport Switch from \"components/Switch\";\n\ntype Props = {\n  history: RouterHistory,\n  auth: AuthStore,\n  toasts: ToastsStore,\n  collections: CollectionsStore,\n  onSubmit: () => void,\n  t: TFunction,\n};\n\n@observer\nclass CollectionNew extends React.Component<Props> {\n  @observable name: string = \"\";\n  @observable icon: string = \"\";\n  @observable color: string = \"#4E5C6E\";\n  @observable sharing: boolean = true;\n  @observable permission: string = \"read_write\";\n  @observable isSaving: boolean;\n  hasOpenedIconPicker: boolean = false;\n\n  handleSubmit = async (ev: SyntheticEvent<>) => {\n    ev.preventDefault();\n    this.isSaving = true;\n    const collection = new Collection(\n      {\n        name: this.name,\n        sharing: this.sharing,\n        icon: this.icon,\n        color: this.color,\n        permission: this.permission,\n      },\n      this.props.collections\n    );\n\n    try {\n      await collection.save();\n      this.props.onSubmit();\n      this.props.history.push(collection.url);\n    } catch (err) {\n      this.props.toasts.showToast(err.message, { type: \"error\" });\n    } finally {\n      this.isSaving = false;\n    }\n  };\n\n  handleNameChange = (ev: SyntheticInputEvent<>) => {\n    this.name = ev.target.value;\n\n    // If the user hasn't picked an icon yet, go ahead and suggest one based on\n    // the name of the collection. It's the little things sometimes.\n    if (!this.hasOpenedIconPicker) {\n      const keys = Object.keys(icons);\n      for (const key of keys) {\n        const icon = icons[key];\n        const keywords = icon.keywords.split(\" \");\n        const namewords = this.name.toLowerCase().split(\" \");\n        const matches = intersection(namewords, keywords);\n\n        if (matches.length > 0) {\n          this.icon = key;\n          return;\n        }\n      }\n\n      this.icon = \"collection\";\n    }\n  };\n\n  handleIconPickerOpen = () => {\n    this.hasOpenedIconPicker = true;\n  };\n\n  handlePermissionChange = (ev: SyntheticInputEvent<HTMLInputElement>) => {\n    this.permission = ev.target.value;\n  };\n\n  handleSharingChange = (ev: SyntheticInputEvent<HTMLInputElement>) => {\n    this.sharing = ev.target.checked;\n  };\n\n  handleChange = (color: string, icon: string) => {\n    this.color = color;\n    this.icon = icon;\n  };\n\n  render() {\n    const { t, auth } = this.props;\n    const teamSharingEnabled = !!auth.team && auth.team.sharing;\n\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <HelpText>\n          <Trans>\n            Collections are for grouping your documents. They work best when\n            organized around a topic or internal team  Product or Engineering\n            for example.\n          </Trans>\n        </HelpText>\n        <Flex>\n          <Input\n            type=\"text\"\n            label={t(\"Name\")}\n            onChange={this.handleNameChange}\n            value={this.name}\n            required\n            autoFocus\n            flex\n          />\n          &nbsp;\n          <IconPicker\n            onOpen={this.handleIconPickerOpen}\n            onChange={this.handleChange}\n            color={this.color}\n            icon={this.icon}\n          />\n        </Flex>\n        <InputSelectPermission\n          value={this.permission}\n          onChange={this.handlePermissionChange}\n          short\n        />\n        <HelpText>\n          <Trans>\n            This is the default level of access given to team members, you can\n            give specific users or groups more access once the collection is\n            created.\n          </Trans>\n        </HelpText>\n        {teamSharingEnabled && (\n          <>\n            <Switch\n              id=\"sharing\"\n              label={t(\"Public document sharing\")}\n              onChange={this.handleSharingChange}\n              checked={this.sharing}\n            />\n            <HelpText>\n              <Trans>\n                When enabled, documents can be shared publicly on the internet.\n              </Trans>\n            </HelpText>\n          </>\n        )}\n\n        <Button type=\"submit\" disabled={this.isSaving || !this.name}>\n          {this.isSaving ? `${t(\"Creating\")}` : t(\"Create\")}\n        </Button>\n      </form>\n    );\n  }\n}\n\nexport default withTranslation()<CollectionNew>(\n  inject(\"collections\", \"toasts\", \"auth\")(withRouter(CollectionNew))\n);\n","// @flow\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport { bounceIn } from \"styles/animations\";\n\ntype Props = {|\n  count: number,\n|};\n\nconst Bubble = ({ count }: Props) => {\n  if (!count) {\n    return null;\n  }\n\n  return <Count>{count}</Count>;\n};\n\nconst Count = styled.div`\n  animation: ${bounceIn} 600ms;\n  transform-origin: center center;\n  color: ${(props) => props.theme.white};\n  background: ${(props) => props.theme.slateDark};\n  display: inline-block;\n  font-feature-settings: \"tnum\";\n  font-weight: 600;\n  font-size: 9px;\n  white-space: nowrap;\n  vertical-align: baseline;\n  min-width: 16px;\n  min-height: 16px;\n  line-height: 16px;\n  border-radius: 8px;\n  text-align: center;\n  padding: 0 4px;\n  margin-left: 8px;\n  user-select: none;\n`;\n\nexport default Bubble;\n","// @flow\nimport styled from \"styled-components\";\n\nconst ResizeBorder = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: -6px;\n  width: 12px;\n  cursor: col-resize;\n`;\n\nexport default ResizeBorder;\n","// @flow\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport Arrow from \"components/Arrow\";\n\ntype Props = {\n  direction: \"left\" | \"right\",\n  style?: Object,\n  onClick?: () => any,\n};\n\nconst Toggle = React.forwardRef<Props, HTMLButtonElement>(\n  ({ direction = \"left\", onClick, style }: Props, ref) => {\n    return (\n      <Positioner style={style}>\n        <ToggleButton ref={ref} $direction={direction} onClick={onClick}>\n          <Arrow />\n        </ToggleButton>\n      </Positioner>\n    );\n  }\n);\n\nexport const ToggleButton = styled.button`\n  opacity: 0;\n  background: none;\n  transition: opacity 100ms ease-in-out;\n  transform: translateY(-50%)\n    scaleX(${(props) => (props.$direction === \"left\" ? 1 : -1)});\n  position: fixed;\n  top: 50vh;\n  padding: 8px;\n  border: 0;\n  pointer-events: none;\n  color: ${(props) => props.theme.divider};\n\n  &:active {\n    color: ${(props) => props.theme.sidebarText};\n  }\n\n  ${breakpoint(\"tablet\")`\n    pointer-events: all;\n    cursor: pointer;\n  `}\n`;\n\nexport const Positioner = styled.div`\n  display: none;\n  z-index: 2;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: -30px;\n  width: 30px;\n\n  &:hover ${ToggleButton}, &:focus-within ${ToggleButton} {\n    opacity: 1;\n  }\n\n  ${breakpoint(\"tablet\")`\n    display: block;\n  `}\n`;\n\nexport default Toggle;\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Portal } from \"react-portal\";\nimport { useLocation } from \"react-router-dom\";\nimport styled, { useTheme } from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport Fade from \"components/Fade\";\nimport Flex from \"components/Flex\";\nimport ResizeBorder from \"./components/ResizeBorder\";\nimport Toggle, { ToggleButton, Positioner } from \"./components/Toggle\";\nimport usePrevious from \"hooks/usePrevious\";\nimport useStores from \"hooks/useStores\";\nimport { fadeIn } from \"styles/animations\";\n\nlet ANIMATION_MS = 250;\nlet isFirstRender = true;\n\ntype Props = {|\n  children: React.Node,\n|};\n\nconst Sidebar = React.forwardRef<Props, HTMLButtonElement>(\n  ({ children }: Props, ref) => {\n    const [isCollapsing, setCollapsing] = React.useState(false);\n    const theme = useTheme();\n    const { t } = useTranslation();\n    const { ui } = useStores();\n    const location = useLocation();\n    const previousLocation = usePrevious(location);\n\n    const width = ui.sidebarWidth;\n    const collapsed = ui.isEditing || ui.sidebarCollapsed;\n    const maxWidth = theme.sidebarMaxWidth;\n    const minWidth = theme.sidebarMinWidth + 16; // padding\n    const setWidth = ui.setSidebarWidth;\n\n    const [offset, setOffset] = React.useState(0);\n    const [isAnimating, setAnimating] = React.useState(false);\n    const [isResizing, setResizing] = React.useState(false);\n    const isSmallerThanMinimum = width < minWidth;\n\n    const handleDrag = React.useCallback(\n      (event: MouseEvent) => {\n        // suppresses text selection\n        event.preventDefault();\n\n        // this is simple because the sidebar is always against the left edge\n        const width = Math.min(event.pageX - offset, maxWidth);\n        const isSmallerThanCollapsePoint = width < minWidth / 2;\n\n        if (isSmallerThanCollapsePoint) {\n          setWidth(theme.sidebarCollapsedWidth);\n        } else {\n          setWidth(width);\n        }\n      },\n      [theme, offset, minWidth, maxWidth, setWidth]\n    );\n\n    const handleStopDrag = React.useCallback(\n      (event: MouseEvent) => {\n        setResizing(false);\n\n        if (document.activeElement) {\n          document.activeElement.blur();\n        }\n\n        if (isSmallerThanMinimum) {\n          const isSmallerThanCollapsePoint = width < minWidth / 2;\n\n          if (isSmallerThanCollapsePoint) {\n            setAnimating(false);\n            setCollapsing(true);\n            ui.collapseSidebar();\n          } else {\n            setWidth(minWidth);\n            setAnimating(true);\n          }\n        } else {\n          setWidth(width);\n        }\n      },\n      [ui, isSmallerThanMinimum, minWidth, width, setWidth]\n    );\n\n    const handleMouseDown = React.useCallback(\n      (event: MouseEvent) => {\n        setOffset(event.pageX - width);\n        setResizing(true);\n        setAnimating(false);\n      },\n      [width]\n    );\n\n    React.useEffect(() => {\n      if (isAnimating) {\n        setTimeout(() => setAnimating(false), ANIMATION_MS);\n      }\n    }, [isAnimating]);\n\n    React.useEffect(() => {\n      if (isCollapsing) {\n        setTimeout(() => {\n          setWidth(minWidth);\n          setCollapsing(false);\n        }, ANIMATION_MS);\n      }\n    }, [setWidth, minWidth, isCollapsing]);\n\n    React.useEffect(() => {\n      if (isResizing) {\n        document.addEventListener(\"mousemove\", handleDrag);\n        document.addEventListener(\"mouseup\", handleStopDrag);\n      }\n\n      return () => {\n        document.removeEventListener(\"mousemove\", handleDrag);\n        document.removeEventListener(\"mouseup\", handleStopDrag);\n      };\n    }, [isResizing, handleDrag, handleStopDrag]);\n\n    const handleReset = React.useCallback(() => {\n      ui.setSidebarWidth(theme.sidebarWidth);\n    }, [ui, theme.sidebarWidth]);\n\n    React.useEffect(() => {\n      ui.setSidebarResizing(isResizing);\n    }, [ui, isResizing]);\n\n    React.useEffect(() => {\n      if (location !== previousLocation) {\n        isFirstRender = false;\n        ui.hideMobileSidebar();\n      }\n    }, [ui, location, previousLocation]);\n\n    const style = React.useMemo(\n      () => ({\n        width: `${width}px`,\n      }),\n      [width]\n    );\n\n    const toggleStyle = React.useMemo(\n      () => ({\n        right: \"auto\",\n        marginLeft: `${collapsed ? theme.sidebarCollapsedWidth : width}px`,\n      }),\n      [width, theme.sidebarCollapsedWidth, collapsed]\n    );\n\n    const content = (\n      <>\n        {ui.mobileSidebarVisible && (\n          <Portal>\n            <Backdrop onClick={ui.toggleMobileSidebar} />\n          </Portal>\n        )}\n        {children}\n        <ResizeBorder\n          onMouseDown={handleMouseDown}\n          onDoubleClick={ui.sidebarCollapsed ? undefined : handleReset}\n          $isResizing={isResizing}\n        />\n        {ui.sidebarCollapsed && !ui.isEditing && (\n          <Toggle\n            onClick={ui.toggleCollapsedSidebar}\n            direction={\"right\"}\n            aria-label={t(\"Expand\")}\n          />\n        )}\n      </>\n    );\n\n    return (\n      <>\n        <Container\n          ref={ref}\n          style={style}\n          $sidebarWidth={ui.sidebarWidth}\n          $isCollapsing={isCollapsing}\n          $isAnimating={isAnimating}\n          $isSmallerThanMinimum={isSmallerThanMinimum}\n          $mobileSidebarVisible={ui.mobileSidebarVisible}\n          $collapsed={collapsed}\n          column\n        >\n          {isFirstRender ? <Fade>{content}</Fade> : content}\n        </Container>\n        {!ui.isEditing && (\n          <Toggle\n            style={toggleStyle}\n            onClick={ui.toggleCollapsedSidebar}\n            direction={ui.sidebarCollapsed ? \"right\" : \"left\"}\n            aria-label={ui.sidebarCollapsed ? t(\"Expand\") : t(\"Collapse\")}\n          />\n        )}\n      </>\n    );\n  }\n);\n\nconst Backdrop = styled.a`\n  animation: ${fadeIn} 250ms ease-in-out;\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  cursor: default;\n  z-index: ${(props) => props.theme.depths.sidebar - 1};\n  background: ${(props) => props.theme.backdrop};\n`;\n\nconst Container = styled(Flex)`\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  background: ${(props) => props.theme.sidebarBackground};\n  transition: box-shadow 100ms ease-in-out, transform 100ms ease-out,\n    ${(props) => props.theme.backgroundTransition}\n      ${(props) =>\n        props.$isAnimating ? `,width ${ANIMATION_MS}ms ease-out` : \"\"};\n  transform: translateX(\n    ${(props) => (props.$mobileSidebarVisible ? 0 : \"-100%\")}\n  );\n  z-index: ${(props) => props.theme.depths.sidebar};\n  max-width: 70%;\n  min-width: 280px;\n\n  ${Positioner} {\n    display: none;\n  }\n\n  @media print {\n    display: none;\n    transform: none;\n  }\n\n  ${breakpoint(\"tablet\")`\n    margin: 0;\n    min-width: 0;\n    transform: translateX(${(props) =>\n      props.$collapsed ? \"calc(-100% + 16px)\" : 0});\n\n    &:hover,\n    &:focus-within {\n      transform: none;\n      box-shadow: ${(props) =>\n        props.$collapsed\n          ? \"rgba(0, 0, 0, 0.2) 1px 0 4px\"\n          : props.$isSmallerThanMinimum\n          ? \"rgba(0, 0, 0, 0.1) inset -1px 0 2px\"\n          : \"none\"};\n\n      ${Positioner} {\n        display: block;\n      }\n\n      ${ToggleButton} {\n        opacity: 1;\n      }\n    }\n\n    &:not(:hover):not(:focus-within) > div {\n      opacity: ${(props) => (props.$collapsed ? \"0\" : \"1\")};\n      transition: opacity 100ms ease-in-out;\n    }\n  `};\n`;\n\nexport default observer(Sidebar);\n","// @flow\n// ref: https://github.com/ReactTraining/react-router/blob/master/packages/react-router-dom/modules/NavLink.js\n\n// This file is pulled almost 100% from react-router with the addition of one\n// thing, automatic scroll to the active link. It's worth the copy paste because\n// it avoids recalculating the link match again.\nimport { createLocation } from \"history\";\nimport * as React from \"react\";\nimport {\n  __RouterContext as RouterContext,\n  matchPath,\n  type Location,\n} from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport scrollIntoView from \"smooth-scroll-into-view-if-needed\";\n\nconst resolveToLocation = (to, currentLocation) =>\n  typeof to === \"function\" ? to(currentLocation) : to;\n\nconst normalizeToLocation = (to, currentLocation) => {\n  return typeof to === \"string\"\n    ? createLocation(to, null, null, currentLocation)\n    : to;\n};\n\nconst joinClassnames = (...classnames) => {\n  return classnames.filter((i) => i).join(\" \");\n};\n\ntype Props = {|\n  activeClassName?: String,\n  activeStyle?: Object,\n  className?: string,\n  exact?: boolean,\n  isActive?: any,\n  location?: Location,\n  strict?: boolean,\n  style?: Object,\n  to: string,\n|};\n\n/**\n * A <Link> wrapper that knows if it's \"active\" or not.\n */\nconst NavLink = ({\n  \"aria-current\": ariaCurrent = \"page\",\n  activeClassName = \"active\",\n  activeStyle,\n  className: classNameProp,\n  exact,\n  isActive: isActiveProp,\n  location: locationProp,\n  strict,\n  style: styleProp,\n  to,\n  ...rest\n}: Props) => {\n  const linkRef = React.useRef();\n  const context = React.useContext(RouterContext);\n  const currentLocation = locationProp || context.location;\n  const toLocation = normalizeToLocation(\n    resolveToLocation(to, currentLocation),\n    currentLocation\n  );\n  const { pathname: path } = toLocation;\n  // Regex taken from: https://github.com/pillarjs/path-to-regexp/blob/master/index.js#L202\n  const escapedPath = path && path.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n\n  const match = escapedPath\n    ? matchPath(currentLocation.pathname, {\n        path: escapedPath,\n        exact,\n        strict,\n      })\n    : null;\n  const isActive = !!(isActiveProp\n    ? isActiveProp(match, currentLocation)\n    : match);\n\n  const className = isActive\n    ? joinClassnames(classNameProp, activeClassName)\n    : classNameProp;\n  const style = isActive ? { ...styleProp, ...activeStyle } : styleProp;\n\n  React.useEffect(() => {\n    if (isActive && linkRef.current) {\n      scrollIntoView(linkRef.current, {\n        scrollMode: \"if-needed\",\n        behavior: \"instant\",\n      });\n    }\n  }, [linkRef, isActive]);\n\n  const props = {\n    \"aria-current\": (isActive && ariaCurrent) || null,\n    className,\n    style,\n    to: toLocation,\n    ...rest,\n  };\n\n  return <Link ref={linkRef} {...props} />;\n};\n\nexport default NavLink;\n","// @flow\nimport { transparentize } from \"polished\";\nimport * as React from \"react\";\nimport { withRouter, type RouterHistory, type Match } from \"react-router-dom\";\nimport styled, { withTheme } from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport EventBoundary from \"components/EventBoundary\";\nimport NavLink from \"./NavLink\";\nimport { type Theme } from \"types\";\n\ntype Props = {\n  to?: string | Object,\n  href?: string | Object,\n  innerRef?: (?HTMLElement) => void,\n  onClick?: (SyntheticEvent<>) => void,\n  onMouseEnter?: (SyntheticEvent<>) => void,\n  className?: string,\n  children?: React.Node,\n  icon?: React.Node,\n  label?: React.Node,\n  menu?: React.Node,\n  showActions?: boolean,\n  iconColor?: string,\n  active?: boolean,\n  isActiveDrop?: boolean,\n  history: RouterHistory,\n  match: Match,\n  theme: Theme,\n  exact?: boolean,\n  depth?: number,\n};\n\nfunction SidebarLink(\n  {\n    icon,\n    children,\n    onClick,\n    onMouseEnter,\n    to,\n    label,\n    active,\n    isActiveDrop,\n    menu,\n    showActions,\n    theme,\n    exact,\n    href,\n    depth,\n    history,\n    match,\n    className,\n  }: Props,\n  ref\n) {\n  const style = React.useMemo(() => {\n    return {\n      paddingLeft: `${(depth || 0) * 16 + 16}px`,\n    };\n  }, [depth]);\n\n  const activeStyle = {\n    fontWeight: 600,\n    color: theme.text,\n    background: theme.sidebarItemBackground,\n    ...style,\n  };\n\n  const activeDropStyle = {\n    fontWeight: 600,\n  };\n\n  return (\n    <>\n      <Link\n        $isActiveDrop={isActiveDrop}\n        activeStyle={isActiveDrop ? activeDropStyle : activeStyle}\n        style={active ? activeStyle : style}\n        onClick={onClick}\n        onMouseEnter={onMouseEnter}\n        exact={exact !== false}\n        to={to}\n        as={to ? undefined : href ? \"a\" : \"div\"}\n        href={href}\n        className={className}\n        ref={ref}\n      >\n        {icon && <IconWrapper>{icon}</IconWrapper>}\n        <Label>{label}</Label>\n      </Link>\n      {menu && <Actions showActions={showActions}>{menu}</Actions>}\n    </>\n  );\n}\n\n// accounts for whitespace around icon\nconst IconWrapper = styled.span`\n  margin-left: -4px;\n  margin-right: 4px;\n  height: 24px;\n  overflow: hidden;\n  flex-shrink: 0;\n`;\n\nconst Actions = styled(EventBoundary)`\n  display: ${(props) => (props.showActions ? \"inline-flex\" : \"none\")};\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  color: ${(props) => props.theme.textTertiary};\n  transition: opacity 50ms;\n\n  svg {\n    color: ${(props) => props.theme.textSecondary};\n    fill: currentColor;\n    opacity: 0.5;\n  }\n\n  &:hover {\n    display: inline-flex;\n\n    svg {\n      opacity: 0.75;\n    }\n  }\n`;\n\nconst Link = styled(NavLink)`\n  display: flex;\n  position: relative;\n  text-overflow: ellipsis;\n  padding: 6px 16px;\n  border-radius: 4px;\n  transition: background 50ms, color 50ms;\n  background: ${(props) =>\n    props.$isActiveDrop ? props.theme.slateDark : \"inherit\"};\n  color: ${(props) =>\n    props.$isActiveDrop ? props.theme.white : props.theme.sidebarText};\n  font-size: 16px;\n  cursor: pointer;\n  overflow: hidden;\n\n  svg {\n    ${(props) => (props.$isActiveDrop ? `fill: ${props.theme.white};` : \"\")}\n    transition: fill 50ms;\n  }\n\n  &:focus {\n    color: ${(props) => props.theme.text};\n    background: ${(props) =>\n      transparentize(\"0.25\", props.theme.sidebarItemBackground)};\n  }\n\n  ${breakpoint(\"tablet\")`\n    padding: 4px 32px 4px 16px;\n    font-size: 15px;\n  `}\n\n  @media (hover: hover) {\n    &:hover + ${Actions},\n    &:active + ${Actions} {\n        display: inline-flex;\n\n        svg {\n          opacity: 0.75;\n        }\n      }\n    }\n\n    &:hover {\n      color: ${(props) =>\n        props.$isActiveDrop ? props.theme.white : props.theme.text};\n    }\n  }\n`;\n\nconst Label = styled.div`\n  position: relative;\n  width: 100%;\n  max-height: 4.8em;\n  line-height: 1.6;\n  * {\n    unicode-bidi: plaintext;\n  }\n`;\n\nexport default withRouter(withTheme(React.forwardRef(SidebarLink)));\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { ArchiveIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useDrop } from \"react-dnd\";\nimport { useTranslation } from \"react-i18next\";\nimport useStores from \"../../../hooks/useStores\";\nimport SidebarLink from \"./SidebarLink\";\nimport useToasts from \"hooks/useToasts\";\n\nfunction ArchiveLink({ documents }) {\n  const { policies } = useStores();\n  const { t } = useTranslation();\n  const { showToast } = useToasts();\n\n  const [{ isDocumentDropping }, dropToArchiveDocument] = useDrop({\n    accept: \"document\",\n    drop: async (item, monitor) => {\n      const document = documents.get(item.id);\n      await document.archive();\n      showToast(t(\"Document archived\"), { type: \"success\" });\n    },\n    canDrop: (item, monitor) => policies.abilities(item.id).archive,\n    collect: (monitor) => ({\n      isDocumentDropping: monitor.isOver(),\n    }),\n  });\n\n  return (\n    <div ref={dropToArchiveDocument}>\n      <SidebarLink\n        to=\"/archive\"\n        icon={<ArchiveIcon color=\"currentColor\" open={isDocumentDropping} />}\n        exact={false}\n        label={t(\"Archive\")}\n        active={documents.active?.isArchived && !documents.active?.isDeleted}\n        isActiveDrop={isDocumentDropping}\n      />\n    </div>\n  );\n}\n\nexport default observer(ArchiveLink);\n","// @flow\nimport * as React from \"react\";\nimport styled, { withTheme } from \"styled-components\";\nimport { type Theme } from \"types\";\n\nfunction DropCursor({\n  isActiveDrop,\n  innerRef,\n  theme,\n  from,\n}: {\n  isActiveDrop: boolean,\n  innerRef: React.Ref<any>,\n  theme: Theme,\n  from: string,\n}) {\n  return <Cursor isOver={isActiveDrop} ref={innerRef} from={from} />;\n}\n\n// transparent hover zone with a thin visible band vertically centered\nconst Cursor = styled(\"div\")`\n  opacity: ${(props) => (props.isOver ? 1 : 0)};\n  transition: opacity 150ms;\n\n  position: absolute;\n  z-index: 1;\n\n  width: 100%;\n  height: 14px;\n  ${(props) => (props.from === \"collections\" ? \"top: 15px;\" : \"bottom: -7px;\")}\n  background: transparent;\n\n  ::after {\n    background: ${(props) => props.theme.slateDark};\n    position: absolute;\n    top: 6px;\n    content: \"\";\n    height: 2px;\n    border-radius: 2px;\n    width: 100%;\n  }\n`;\n\nexport default withTheme(DropCursor);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport Dropzone from \"react-dropzone\";\nimport { useTranslation } from \"react-i18next\";\nimport styled, { css } from \"styled-components\";\nimport LoadingIndicator from \"components/LoadingIndicator\";\nimport useImportDocument from \"hooks/useImportDocument\";\nimport useStores from \"hooks/useStores\";\nimport useToasts from \"hooks/useToasts\";\n\ntype Props = {|\n  children: React.Node,\n  collectionId: string,\n  documentId?: string,\n  disabled: boolean,\n  staticContext: Object,\n|};\n\nfunction DropToImport({ disabled, children, collectionId, documentId }: Props) {\n  const { t } = useTranslation();\n  const { documents, policies } = useStores();\n  const { showToast } = useToasts();\n  const { handleFiles, isImporting } = useImportDocument(\n    collectionId,\n    documentId\n  );\n\n  const can = policies.abilities(collectionId);\n\n  const handleRejection = React.useCallback(() => {\n    showToast(\n      t(\"Document not supported  try Markdown, Plain text, HTML, or Word\"),\n      { type: \"error\" }\n    );\n  }, [t, showToast]);\n\n  if (disabled || !can.update) {\n    return children;\n  }\n\n  return (\n    <Dropzone\n      accept={documents.importFileTypes.join(\", \")}\n      onDropAccepted={handleFiles}\n      onDropRejected={handleRejection}\n      noClick\n      multiple\n    >\n      {({\n        getRootProps,\n        getInputProps,\n        isDragActive,\n        isDragAccept,\n        isDragReject,\n      }) => (\n        <DropzoneContainer\n          {...getRootProps()}\n          {...{ isDragActive }}\n          tabIndex=\"-1\"\n        >\n          <input {...getInputProps()} />\n          {isImporting && <LoadingIndicator />}\n          {children}\n        </DropzoneContainer>\n      )}\n    </Dropzone>\n  );\n}\n\nconst DropzoneContainer = styled.div`\n  border-radius: 4px;\n\n  ${({ isDragActive, theme }) =>\n    isDragActive &&\n    css`\n      background: ${theme.slateDark};\n      a {\n        color: ${theme.white} !important;\n      }\n      svg {\n        fill: ${theme.white};\n      }\n    `}\n`;\n\nexport default observer(DropToImport);\n","// @flow\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport useToasts from \"hooks/useToasts\";\n\ntype Props = {|\n  onSubmit: (title: string) => Promise<void>,\n  title: string,\n  canUpdate: boolean,\n|};\n\nfunction EditableTitle({ title, onSubmit, canUpdate }: Props) {\n  const [isEditing, setIsEditing] = React.useState(false);\n  const [originalValue, setOriginalValue] = React.useState(title);\n  const [value, setValue] = React.useState(title);\n  const { showToast } = useToasts();\n\n  React.useEffect(() => {\n    setValue(title);\n  }, [title]);\n\n  const handleChange = React.useCallback((event) => {\n    setValue(event.target.value);\n  }, []);\n\n  const handleDoubleClick = React.useCallback((event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    setIsEditing(true);\n  }, []);\n\n  const handleKeyDown = React.useCallback(\n    (event) => {\n      if (event.key === \"Escape\") {\n        setIsEditing(false);\n        setValue(originalValue);\n      }\n    },\n    [originalValue]\n  );\n\n  const handleSave = React.useCallback(\n    async (ev) => {\n      ev.preventDefault();\n\n      setIsEditing(false);\n\n      const trimmedValue = value.trim();\n      if (trimmedValue === originalValue || trimmedValue.length === 0) {\n        setValue(originalValue);\n        return;\n      }\n\n      if (document) {\n        try {\n          await onSubmit(trimmedValue);\n          setOriginalValue(trimmedValue);\n        } catch (error) {\n          setValue(originalValue);\n          showToast(error.message, {\n            type: \"error\",\n          });\n          throw error;\n        }\n      }\n    },\n    [originalValue, showToast, value, onSubmit]\n  );\n\n  return (\n    <>\n      {isEditing ? (\n        <form onSubmit={handleSave}>\n          <Input\n            dir=\"auto\"\n            type=\"text\"\n            value={value}\n            onKeyDown={handleKeyDown}\n            onChange={handleChange}\n            onBlur={handleSave}\n            autoFocus\n          />\n        </form>\n      ) : (\n        <span onDoubleClick={canUpdate ? handleDoubleClick : undefined}>\n          {value}\n        </span>\n      )}\n    </>\n  );\n}\n\nconst Input = styled.input`\n  margin-left: -4px;\n  color: ${(props) => props.theme.sidebarText};\n  background: ${(props) => props.theme.background};\n  width: calc(100% - 10px);\n  border-radius: 3px;\n  border: 1px solid ${(props) => props.theme.inputBorderFocused};\n  padding: 5px 6px;\n  margin: -4px;\n  height: 32px;\n\n  &:focus {\n    outline-color: ${(props) => props.theme.primary};\n  }\n`;\n\nexport default EditableTitle;\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { CollapsedIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useDrag, useDrop } from \"react-dnd\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport Collection from \"models/Collection\";\nimport Document from \"models/Document\";\nimport Fade from \"components/Fade\";\nimport DropCursor from \"./DropCursor\";\nimport DropToImport from \"./DropToImport\";\nimport EditableTitle from \"./EditableTitle\";\nimport SidebarLink from \"./SidebarLink\";\nimport useBoolean from \"hooks/useBoolean\";\nimport useStores from \"hooks/useStores\";\nimport DocumentMenu from \"menus/DocumentMenu\";\nimport { type NavigationNode } from \"types\";\n\ntype Props = {|\n  node: NavigationNode,\n  canUpdate: boolean,\n  collection?: Collection,\n  activeDocument: ?Document,\n  prefetchDocument: (documentId: string) => Promise<void>,\n  depth: number,\n  index: number,\n  parentId?: string,\n|};\n\nfunction DocumentLink(\n  {\n    node,\n    canUpdate,\n    collection,\n    activeDocument,\n    prefetchDocument,\n    depth,\n    index,\n    parentId,\n  }: Props,\n  ref\n) {\n  const { documents, policies } = useStores();\n  const { t } = useTranslation();\n\n  const isActiveDocument = activeDocument && activeDocument.id === node.id;\n  const hasChildDocuments = !!node.children.length;\n\n  const document = documents.get(node.id);\n  const { fetchChildDocuments } = documents;\n\n  React.useEffect(() => {\n    if (isActiveDocument && hasChildDocuments) {\n      fetchChildDocuments(node.id);\n    }\n  }, [fetchChildDocuments, node, hasChildDocuments, isActiveDocument]);\n\n  const pathToNode = React.useMemo(\n    () =>\n      collection && collection.pathToDocument(node.id).map((entry) => entry.id),\n    [collection, node]\n  );\n\n  const showChildren = React.useMemo(() => {\n    return !!(\n      hasChildDocuments &&\n      activeDocument &&\n      collection &&\n      (collection\n        .pathToDocument(activeDocument.id)\n        .map((entry) => entry.id)\n        .includes(node.id) ||\n        isActiveDocument)\n    );\n  }, [hasChildDocuments, activeDocument, isActiveDocument, node, collection]);\n\n  const [expanded, setExpanded] = React.useState(showChildren);\n\n  React.useEffect(() => {\n    if (showChildren) {\n      setExpanded(showChildren);\n    }\n  }, [showChildren]);\n\n  // when the last child document is removed,\n  // also close the local folder state to closed\n  React.useEffect(() => {\n    if (expanded && !hasChildDocuments) {\n      setExpanded(false);\n    }\n  }, [expanded, hasChildDocuments]);\n\n  const handleDisclosureClick = React.useCallback(\n    (ev: SyntheticEvent<>) => {\n      ev.preventDefault();\n      ev.stopPropagation();\n      setExpanded(!expanded);\n    },\n    [expanded]\n  );\n\n  const handleMouseEnter = React.useCallback(\n    (ev: SyntheticEvent<>) => {\n      prefetchDocument(node.id);\n    },\n    [prefetchDocument, node]\n  );\n\n  const handleTitleChange = React.useCallback(\n    async (title: string) => {\n      if (!document) return;\n\n      await documents.update({\n        id: document.id,\n        lastRevision: document.revision,\n        text: document.text,\n        title,\n      });\n    },\n    [documents, document]\n  );\n\n  const [menuOpen, handleMenuOpen, handleMenuClose] = useBoolean();\n  const isMoving = documents.movingDocumentId === node.id;\n  const manualSort = collection?.sort.field === \"index\";\n\n  // Draggable\n  const [{ isDragging }, drag] = useDrag({\n    type: \"document\",\n    item: () => ({ ...node, depth, active: isActiveDocument }),\n    collect: (monitor) => ({\n      isDragging: !!monitor.isDragging(),\n    }),\n    canDrag: (monitor) => {\n      return (\n        policies.abilities(node.id).move ||\n        policies.abilities(node.id).archive ||\n        policies.abilities(node.id).delete\n      );\n    },\n  });\n\n  const hoverExpanding = React.useRef(null);\n\n  // We set a timeout when the user first starts hovering over the document link,\n  // to trigger expansion of children. Clear this timeout when they stop hovering.\n  const resetHoverExpanding = React.useCallback(() => {\n    if (hoverExpanding.current) {\n      clearTimeout(hoverExpanding.current);\n      hoverExpanding.current = null;\n    }\n  }, []);\n\n  // Drop to re-parent\n  const [{ isOverReparent, canDropToReparent }, dropToReparent] = useDrop({\n    accept: \"document\",\n    drop: (item, monitor) => {\n      if (monitor.didDrop()) return;\n      if (!collection) return;\n      documents.move(item.id, collection.id, node.id);\n    },\n\n    canDrop: (item, monitor) =>\n      pathToNode && !pathToNode.includes(monitor.getItem().id),\n\n    hover: (item, monitor) => {\n      // Enables expansion of document children when hovering over the document\n      // for more than half a second.\n      if (\n        hasChildDocuments &&\n        monitor.canDrop() &&\n        monitor.isOver({ shallow: true })\n      ) {\n        if (!hoverExpanding.current) {\n          hoverExpanding.current = setTimeout(() => {\n            hoverExpanding.current = null;\n            if (monitor.isOver({ shallow: true })) {\n              setExpanded(true);\n            }\n          }, 500);\n        }\n      }\n    },\n\n    collect: (monitor) => ({\n      isOverReparent: !!monitor.isOver({ shallow: true }),\n      canDropToReparent: monitor.canDrop(),\n    }),\n  });\n\n  // Drop to reorder\n  const [{ isOverReorder }, dropToReorder] = useDrop({\n    accept: \"document\",\n    drop: (item, monitor) => {\n      if (!collection) return;\n      if (item.id === node.id) return;\n\n      if (expanded) {\n        documents.move(item.id, collection.id, node.id, 0);\n        return;\n      }\n\n      documents.move(item.id, collection.id, parentId, index + 1);\n    },\n    collect: (monitor) => ({\n      isOverReorder: !!monitor.isOver(),\n    }),\n  });\n\n  return (\n    <>\n      <div style={{ position: \"relative\" }} onDragLeave={resetHoverExpanding}>\n        <Draggable\n          key={node.id}\n          ref={drag}\n          $isDragging={isDragging}\n          $isMoving={isMoving}\n        >\n          <div ref={dropToReparent}>\n            <DropToImport documentId={node.id} activeClassName=\"activeDropZone\">\n              <SidebarLink\n                onMouseEnter={handleMouseEnter}\n                to={{\n                  pathname: node.url,\n                  state: { title: node.title },\n                }}\n                label={\n                  <>\n                    {hasChildDocuments && (\n                      <Disclosure\n                        expanded={expanded && !isDragging}\n                        onClick={handleDisclosureClick}\n                      />\n                    )}\n                    <EditableTitle\n                      title={node.title || t(\"Untitled\")}\n                      onSubmit={handleTitleChange}\n                      canUpdate={canUpdate}\n                    />\n                  </>\n                }\n                isActiveDrop={isOverReparent && canDropToReparent}\n                depth={depth}\n                exact={false}\n                showActions={menuOpen}\n                ref={ref}\n                menu={\n                  document && !isMoving ? (\n                    <Fade>\n                      <DocumentMenu\n                        document={document}\n                        onOpen={handleMenuOpen}\n                        onClose={handleMenuClose}\n                      />\n                    </Fade>\n                  ) : undefined\n                }\n              />\n            </DropToImport>\n          </div>\n        </Draggable>\n        {manualSort && (\n          <DropCursor isActiveDrop={isOverReorder} innerRef={dropToReorder} />\n        )}\n      </div>\n      {expanded && !isDragging && (\n        <>\n          {node.children.map((childNode, index) => (\n            <ObservedDocumentLink\n              key={childNode.id}\n              collection={collection}\n              node={childNode}\n              activeDocument={activeDocument}\n              prefetchDocument={prefetchDocument}\n              depth={depth + 1}\n              canUpdate={canUpdate}\n              index={index}\n              parentId={node.id}\n            />\n          ))}\n        </>\n      )}\n    </>\n  );\n}\n\nconst Draggable = styled(\"div\")`\n  opacity: ${(props) => (props.$isDragging || props.$isMoving ? 0.5 : 1)};\n  pointer-events: ${(props) => (props.$isMoving ? \"none\" : \"all\")};\n`;\n\nconst Disclosure = styled(CollapsedIcon)`\n  transition: transform 100ms ease, fill 50ms !important;\n  position: absolute;\n  left: -24px;\n\n  ${({ expanded }) => !expanded && \"transform: rotate(-90deg);\"};\n`;\n\nconst ObservedDocumentLink = observer(React.forwardRef(DocumentLink));\n\nexport default ObservedDocumentLink;\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { AlphabeticalSortIcon, ManualSortIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useMenuState, MenuButton } from \"reakit/Menu\";\nimport Collection from \"models/Collection\";\nimport ContextMenu from \"components/ContextMenu\";\nimport Template from \"components/ContextMenu/Template\";\nimport NudeButton from \"components/NudeButton\";\n\ntype Props = {|\n  collection: Collection,\n  onOpen?: () => void,\n  onClose?: () => void,\n|};\n\nfunction CollectionSortMenu({ collection, onOpen, onClose, ...rest }: Props) {\n  const { t } = useTranslation();\n  const menu = useMenuState({ modal: true });\n\n  const handleChangeSort = React.useCallback(\n    (field: string) => {\n      menu.hide();\n      return collection.save({\n        sort: {\n          field,\n          direction: \"asc\",\n        },\n      });\n    },\n    [collection, menu]\n  );\n\n  const alphabeticalSort = collection.sort.field === \"title\";\n\n  return (\n    <>\n      <MenuButton {...menu}>\n        {(props) => (\n          <NudeButton aria-label={t(\"Show sort menu\")} {...props}>\n            {alphabeticalSort ? <AlphabeticalSortIcon /> : <ManualSortIcon />}\n          </NudeButton>\n        )}\n      </MenuButton>\n      <ContextMenu\n        {...menu}\n        onOpen={onOpen}\n        onClose={onClose}\n        aria-label={t(\"Sort in sidebar\")}\n      >\n        <Template\n          {...menu}\n          items={[\n            {\n              title: t(\"Alphabetical sort\"),\n              onClick: () => handleChangeSort(\"title\"),\n              selected: alphabeticalSort,\n            },\n            {\n              title: t(\"Manual sort\"),\n              onClick: () => handleChangeSort(\"index\"),\n              selected: !alphabeticalSort,\n            },\n          ]}\n        />\n      </ContextMenu>\n    </>\n  );\n}\n\nexport default observer(CollectionSortMenu);\n","// @flow\nimport fractionalIndex from \"fractional-index\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useDrop, useDrag } from \"react-dnd\";\nimport styled from \"styled-components\";\nimport Collection from \"models/Collection\";\nimport Document from \"models/Document\";\nimport CollectionIcon from \"components/CollectionIcon\";\nimport DocumentLink from \"./DocumentLink\";\nimport DropCursor from \"./DropCursor\";\nimport DropToImport from \"./DropToImport\";\nimport EditableTitle from \"./EditableTitle\";\nimport SidebarLink from \"./SidebarLink\";\nimport useBoolean from \"hooks/useBoolean\";\nimport useStores from \"hooks/useStores\";\nimport CollectionMenu from \"menus/CollectionMenu\";\nimport CollectionSortMenu from \"menus/CollectionSortMenu\";\n\ntype Props = {|\n  collection: Collection,\n  canUpdate: boolean,\n  activeDocument: ?Document,\n  prefetchDocument: (id: string) => Promise<void>,\n  belowCollection: Collection | void,\n  isDraggingAnyCollection: boolean,\n  onChangeDragging: (dragging: boolean) => void,\n|};\n\nfunction CollectionLink({\n  collection,\n  activeDocument,\n  prefetchDocument,\n  canUpdate,\n  belowCollection,\n  isDraggingAnyCollection,\n  onChangeDragging,\n}: Props) {\n  const [menuOpen, handleMenuOpen, handleMenuClose] = useBoolean();\n\n  const handleTitleChange = React.useCallback(\n    async (name: string) => {\n      await collection.save({ name });\n    },\n    [collection]\n  );\n\n  const { ui, documents, policies, collections } = useStores();\n\n  const [expanded, setExpanded] = React.useState(\n    collection.id === ui.activeCollectionId\n  );\n\n  React.useEffect(() => {\n    if (isDraggingAnyCollection) {\n      setExpanded(false);\n    } else {\n      setExpanded(collection.id === ui.activeCollectionId);\n    }\n  }, [isDraggingAnyCollection, collection.id, ui.activeCollectionId]);\n\n  const manualSort = collection.sort.field === \"index\";\n  const can = policies.abilities(collection.id);\n  const belowCollectionIndex = belowCollection ? belowCollection.index : null;\n\n  // Drop to re-parent\n  const [{ isOver, canDrop }, drop] = useDrop({\n    accept: \"document\",\n    drop: (item, monitor) => {\n      if (monitor.didDrop()) return;\n      if (!collection) return;\n      documents.move(item.id, collection.id);\n    },\n    canDrop: (item, monitor) => {\n      return policies.abilities(collection.id).update;\n    },\n    collect: (monitor) => ({\n      isOver: !!monitor.isOver({ shallow: true }),\n      canDrop: monitor.canDrop(),\n    }),\n  });\n\n  // Drop to reorder\n  const [{ isOverReorder }, dropToReorder] = useDrop({\n    accept: \"document\",\n    drop: async (item, monitor) => {\n      if (!collection) return;\n      documents.move(item.id, collection.id, undefined, 0);\n    },\n    collect: (monitor) => ({\n      isOverReorder: !!monitor.isOver(),\n    }),\n  });\n\n  // Drop to reorder Collection\n  const [{ isCollectionDropping }, dropToReorderCollection] = useDrop({\n    accept: \"collection\",\n    drop: async (item, monitor) => {\n      collections.move(\n        item.id,\n        fractionalIndex(collection.index, belowCollectionIndex)\n      );\n    },\n    canDrop: (item, monitor) => {\n      return (\n        collection.id !== item.id &&\n        (!belowCollection || item.id !== belowCollection.id)\n      );\n    },\n    collect: (monitor) => ({\n      isCollectionDropping: monitor.isOver(),\n    }),\n  });\n\n  // Drag to reorder Collection\n  const [{ isCollectionDragging }, dragToReorderCollection] = useDrag({\n    type: \"collection\",\n    item: () => {\n      onChangeDragging(true);\n      return {\n        id: collection.id,\n      };\n    },\n    collect: (monitor) => ({\n      isCollectionDragging: monitor.isDragging(),\n    }),\n    canDrag: (monitor) => {\n      return can.move;\n    },\n    end: (monitor) => {\n      onChangeDragging(false);\n    },\n  });\n\n  return (\n    <>\n      <div ref={drop} style={{ position: \"relative\" }}>\n        <Draggable\n          key={collection.id}\n          ref={dragToReorderCollection}\n          $isDragging={isCollectionDragging}\n          $isMoving={isCollectionDragging}\n        >\n          <DropToImport collectionId={collection.id}>\n            <SidebarLinkWithPadding\n              to={collection.url}\n              icon={\n                <CollectionIcon collection={collection} expanded={expanded} />\n              }\n              iconColor={collection.color}\n              expanded={expanded}\n              showActions={menuOpen || expanded}\n              isActiveDrop={isOver && canDrop}\n              label={\n                <EditableTitle\n                  title={collection.name}\n                  onSubmit={handleTitleChange}\n                  canUpdate={canUpdate}\n                />\n              }\n              exact={false}\n              menu={\n                <>\n                  {can.update && (\n                    <CollectionSortMenuWithMargin\n                      collection={collection}\n                      onOpen={handleMenuOpen}\n                      onClose={handleMenuClose}\n                    />\n                  )}\n                  <CollectionMenu\n                    collection={collection}\n                    onOpen={handleMenuOpen}\n                    onClose={handleMenuClose}\n                  />\n                </>\n              }\n            />\n          </DropToImport>\n        </Draggable>\n        {expanded && manualSort && (\n          <DropCursor isActiveDrop={isOverReorder} innerRef={dropToReorder} />\n        )}\n        {isDraggingAnyCollection && (\n          <DropCursor\n            isActiveDrop={isCollectionDropping}\n            innerRef={dropToReorderCollection}\n          />\n        )}\n      </div>\n\n      {expanded &&\n        collection.documents.map((node, index) => (\n          <DocumentLink\n            key={node.id}\n            node={node}\n            collection={collection}\n            activeDocument={activeDocument}\n            prefetchDocument={prefetchDocument}\n            canUpdate={canUpdate}\n            depth={1.5}\n            index={index}\n          />\n        ))}\n    </>\n  );\n}\n\nconst Draggable = styled(\"div\")`\n  opacity: ${(props) => (props.$isDragging || props.$isMoving ? 0.5 : 1)};\n  pointer-events: ${(props) => (props.$isMoving ? \"none\" : \"auto\")};\n`;\n\nconst SidebarLinkWithPadding = styled(SidebarLink)`\n  padding-right: 60px;\n`;\n\nconst CollectionSortMenuWithMargin = styled(CollectionSortMenu)`\n  margin-right: 4px;\n`;\n\nexport default observer(CollectionLink);\n","// @flow\nimport styled from \"styled-components\";\nimport Flex from \"components/Flex\";\n\nconst Header = styled(Flex)`\n  font-size: 11px;\n  font-weight: 600;\n  text-transform: uppercase;\n  color: ${(props) => props.theme.sidebarText};\n  letter-spacing: 0.04em;\n  margin: 4px 16px;\n`;\n\nexport default Header;\n","// @flow\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport PlaceholderText from \"components/PlaceholderText\";\n\nfunction PlaceholderCollections() {\n  return (\n    <Wrapper>\n      <PlaceholderText />\n      <PlaceholderText delay={0.2} />\n      <PlaceholderText delay={0.4} />\n    </Wrapper>\n  );\n}\n\nconst Wrapper = styled.div`\n  margin: 4px 16px;\n  width: 75%;\n`;\n\nexport default PlaceholderCollections;\n","// @flow\nimport fractionalIndex from \"fractional-index\";\nimport { observer } from \"mobx-react\";\nimport { PlusIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useDrop } from \"react-dnd\";\nimport { useTranslation } from \"react-i18next\";\nimport Fade from \"components/Fade\";\nimport Flex from \"components/Flex\";\nimport useStores from \"../../../hooks/useStores\";\nimport CollectionLink from \"./CollectionLink\";\nimport DropCursor from \"./DropCursor\";\nimport Header from \"./Header\";\nimport PlaceholderCollections from \"./PlaceholderCollections\";\nimport SidebarLink from \"./SidebarLink\";\nimport useCurrentTeam from \"hooks/useCurrentTeam\";\nimport useToasts from \"hooks/useToasts\";\n\ntype Props = {\n  onCreateCollection: () => void,\n};\n\nfunction Collections({ onCreateCollection }: Props) {\n  const [isFetching, setFetching] = React.useState(false);\n  const [fetchError, setFetchError] = React.useState();\n  const { ui, policies, documents, collections } = useStores();\n  const { showToast } = useToasts();\n  const isPreloaded: boolean = !!collections.orderedData.length;\n  const { t } = useTranslation();\n  const team = useCurrentTeam();\n  const orderedCollections = collections.orderedData;\n  const can = policies.abilities(team.id);\n  const [isDraggingAnyCollection, setIsDraggingAnyCollection] = React.useState(\n    false\n  );\n\n  React.useEffect(() => {\n    async function load() {\n      if (!collections.isLoaded && !isFetching && !fetchError) {\n        try {\n          setFetching(true);\n          await collections.fetchPage({ limit: 100 });\n        } catch (error) {\n          showToast(\n            t(\"Collections could not be loaded, please reload the app\"),\n            {\n              type: \"error\",\n            }\n          );\n          setFetchError(error);\n        } finally {\n          setFetching(false);\n        }\n      }\n    }\n    load();\n  }, [collections, isFetching, showToast, fetchError, t]);\n\n  const [{ isCollectionDropping }, dropToReorderCollection] = useDrop({\n    accept: \"collection\",\n    drop: async (item, monitor) => {\n      collections.move(\n        item.id,\n        fractionalIndex(null, orderedCollections[0].index)\n      );\n    },\n    canDrop: (item, monitor) => {\n      return item.id !== orderedCollections[0].id;\n    },\n    collect: (monitor) => ({\n      isCollectionDropping: monitor.isOver(),\n    }),\n  });\n\n  const content = (\n    <>\n      <DropCursor\n        isActiveDrop={isCollectionDropping}\n        innerRef={dropToReorderCollection}\n        from=\"collections\"\n      />\n      {orderedCollections.map((collection, index) => (\n        <CollectionLink\n          key={collection.id}\n          collection={collection}\n          activeDocument={documents.active}\n          prefetchDocument={documents.prefetchDocument}\n          canUpdate={policies.abilities(collection.id).update}\n          ui={ui}\n          isDraggingAnyCollection={isDraggingAnyCollection}\n          onChangeDragging={setIsDraggingAnyCollection}\n          belowCollection={orderedCollections[index + 1]}\n        />\n      ))}\n      {can.createCollection && (\n        <SidebarLink\n          to=\"/collections\"\n          onClick={onCreateCollection}\n          icon={<PlusIcon color=\"currentColor\" />}\n          label={`${t(\"New collection\")}`}\n          exact\n        />\n      )}\n    </>\n  );\n\n  if (!collections.isLoaded || fetchError) {\n    return (\n      <Flex column>\n        <Header>{t(\"Collections\")}</Header>\n        <PlaceholderCollections />\n      </Flex>\n    );\n  }\n\n  return (\n    <Flex column>\n      <Header>{t(\"Collections\")}</Header>\n      {isPreloaded ? content : <Fade>{content}</Fade>}\n    </Flex>\n  );\n}\n\nexport default observer(Collections);\n","// @flow\nimport styled from \"styled-components\";\nimport Flex from \"components/Flex\";\n\nconst Section = styled(Flex)`\n  position: relative;\n  flex-direction: column;\n  margin: 0 8px 20px;\n  min-width: ${(props) => props.theme.sidebarMinWidth}px;\n  flex-shrink: 0;\n\n  &:first-child {\n    margin-top: 20px;\n  }\n`;\n\nexport default Section;\n","// @flow\nimport { ExpandedIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport Flex from \"components/Flex\";\nimport TeamLogo from \"components/TeamLogo\";\n\ntype Props = {|\n  teamName: string,\n  subheading: React.Node,\n  showDisclosure?: boolean,\n  onClick: (event: SyntheticEvent<>) => void,\n  logoUrl: string,\n|};\n\nconst TeamButton = React.forwardRef<Props, any>(\n  ({ showDisclosure, teamName, subheading, logoUrl, ...rest }: Props, ref) => (\n    <Wrapper>\n      <Header justify=\"flex-start\" align=\"center\" ref={ref} {...rest}>\n        <TeamLogo\n          alt={`${teamName} logo`}\n          src={logoUrl}\n          width={38}\n          height={38}\n        />\n        <Flex align=\"flex-start\" column>\n          <TeamName showDisclosure>\n            {teamName} {showDisclosure && <Disclosure color=\"currentColor\" />}\n          </TeamName>\n          <Subheading>{subheading}</Subheading>\n        </Flex>\n      </Header>\n    </Wrapper>\n  )\n);\n\nconst Disclosure = styled(ExpandedIcon)`\n  position: absolute;\n  right: 0;\n  top: 0;\n`;\n\nconst Subheading = styled.div`\n  padding-left: 10px;\n  font-size: 11px;\n  text-transform: uppercase;\n  font-weight: 500;\n  white-space: nowrap;\n  color: ${(props) => props.theme.sidebarText};\n`;\n\nconst TeamName = styled.div`\n  position: relative;\n  padding-left: 10px;\n  padding-right: 24px;\n  font-weight: 600;\n  color: ${(props) => props.theme.text};\n  white-space: nowrap;\n  text-decoration: none;\n  font-size: 16px;\n`;\n\nconst Wrapper = styled.div`\n  flex-shrink: 0;\n  overflow: hidden;\n`;\n\nconst Header = styled.button`\n  display: flex;\n  align-items: center;\n  background: none;\n  line-height: inherit;\n  border: 0;\n  padding: 8px;\n  margin: 8px;\n  border-radius: 4px;\n  cursor: pointer;\n  width: calc(100% - 16px);\n\n  &:active,\n  &:hover {\n    transition: background 100ms ease-in-out;\n    background: ${(props) => props.theme.sidebarItemBackground};\n  }\n`;\n\nexport default TeamButton;\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { TrashIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useState } from \"react\";\nimport { useDrop } from \"react-dnd\";\nimport { useTranslation } from \"react-i18next\";\nimport DocumentDelete from \"scenes/DocumentDelete\";\nimport Modal from \"components/Modal\";\nimport useStores from \"../../../hooks/useStores\";\nimport SidebarLink from \"./SidebarLink\";\n\nfunction TrashLink({ documents }) {\n  const { policies } = useStores();\n  const { t } = useTranslation();\n  const [document, setDocument] = useState();\n\n  const [{ isDocumentDropping }, dropToTrashDocument] = useDrop({\n    accept: \"document\",\n    drop: (item, monitor) => {\n      const doc = documents.get(item.id);\n      // without setTimeout it was not working in firefox v89.0.2-ubuntu\n      // on dropping mouseup is considered as clicking outside the modal, and it immediately closes\n      setTimeout(() => setDocument(doc), 1);\n    },\n    canDrop: (item, monitor) => policies.abilities(item.id).delete,\n    collect: (monitor) => ({\n      isDocumentDropping: monitor.isOver(),\n    }),\n  });\n\n  return (\n    <>\n      <div ref={dropToTrashDocument}>\n        <SidebarLink\n          to=\"/trash\"\n          icon={<TrashIcon color=\"currentColor\" open={isDocumentDropping} />}\n          exact={false}\n          label={t(\"Trash\")}\n          active={documents.active?.isDeleted}\n          isActiveDrop={isDocumentDropping}\n        />\n      </div>\n      {document && (\n        <Modal\n          title={t(\"Delete {{ documentName }}\", {\n            documentName: document.noun,\n          })}\n          onRequestClose={() => setDocument(undefined)}\n          isOpen\n        >\n          <DocumentDelete\n            document={document}\n            onSubmit={() => setDocument(undefined)}\n          />\n        </Modal>\n      )}\n    </>\n  );\n}\n\nexport default observer(TrashLink);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { SunIcon, MoonIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport { useMenuState, MenuButton } from \"reakit/Menu\";\nimport styled from \"styled-components\";\nimport {\n  developers,\n  changelog,\n  githubIssuesUrl,\n  mailToUrl,\n  settings,\n} from \"shared/utils/routeHelpers\";\nimport KeyboardShortcuts from \"scenes/KeyboardShortcuts\";\nimport ContextMenu from \"components/ContextMenu\";\nimport MenuItem, { MenuAnchor } from \"components/ContextMenu/MenuItem\";\nimport Separator from \"components/ContextMenu/Separator\";\nimport Flex from \"components/Flex\";\nimport Guide from \"components/Guide\";\nimport useBoolean from \"hooks/useBoolean\";\nimport usePrevious from \"hooks/usePrevious\";\nimport useStores from \"hooks/useStores\";\n\ntype Props = {|\n  children: (props: any) => React.Node,\n|};\n\nconst AppearanceMenu = React.forwardRef((props, ref) => {\n  const { ui } = useStores();\n  const { t } = useTranslation();\n  const menu = useMenuState();\n\n  return (\n    <>\n      <MenuButton ref={ref} {...menu} {...props} onClick={menu.show}>\n        {(props) => (\n          <MenuAnchor {...props}>\n            <ChangeTheme justify=\"space-between\">\n              {t(\"Appearance\")}\n              {ui.resolvedTheme === \"light\" ? <SunIcon /> : <MoonIcon />}\n            </ChangeTheme>\n          </MenuAnchor>\n        )}\n      </MenuButton>\n      <ContextMenu {...menu} aria-label={t(\"Appearance\")}>\n        <MenuItem\n          {...menu}\n          onClick={() => ui.setTheme(\"system\")}\n          selected={ui.theme === \"system\"}\n        >\n          {t(\"System\")}\n        </MenuItem>\n        <MenuItem\n          {...menu}\n          onClick={() => ui.setTheme(\"light\")}\n          selected={ui.theme === \"light\"}\n        >\n          {t(\"Light\")}\n        </MenuItem>\n        <MenuItem\n          {...menu}\n          onClick={() => ui.setTheme(\"dark\")}\n          selected={ui.theme === \"dark\"}\n        >\n          {t(\"Dark\")}\n        </MenuItem>\n      </ContextMenu>\n    </>\n  );\n});\n\nfunction AccountMenu(props: Props) {\n  const menu = useMenuState({\n    unstable_offset: [8, 0],\n    placement: \"bottom-start\",\n    modal: true,\n  });\n  const { auth, ui } = useStores();\n  const previousTheme = usePrevious(ui.theme);\n  const { t } = useTranslation();\n  const [\n    keyboardShortcutsOpen,\n    handleKeyboardShortcutsOpen,\n    handleKeyboardShortcutsClose,\n  ] = useBoolean();\n\n  React.useEffect(() => {\n    if (ui.theme !== previousTheme) {\n      menu.hide();\n    }\n  }, [menu, ui.theme, previousTheme]);\n\n  return (\n    <>\n      <Guide\n        isOpen={keyboardShortcutsOpen}\n        onRequestClose={handleKeyboardShortcutsClose}\n        title={t(\"Keyboard shortcuts\")}\n      >\n        <KeyboardShortcuts />\n      </Guide>\n      <MenuButton {...menu}>{props.children}</MenuButton>\n      <ContextMenu {...menu} aria-label={t(\"Account\")}>\n        <MenuItem {...menu} as={Link} to={settings()}>\n          {t(\"Settings\")}\n        </MenuItem>\n        <MenuItem {...menu} onClick={handleKeyboardShortcutsOpen}>\n          {t(\"Keyboard shortcuts\")}\n        </MenuItem>\n        <MenuItem {...menu} href={developers()} target=\"_blank\">\n          {t(\"API documentation\")}\n        </MenuItem>\n        <Separator {...menu} />\n        <MenuItem {...menu} href={changelog()} target=\"_blank\">\n          {t(\"Changelog\")}\n        </MenuItem>\n        <MenuItem {...menu} href={mailToUrl()} target=\"_blank\">\n          {t(\"Send us feedback\")}\n        </MenuItem>\n        <MenuItem {...menu} href={githubIssuesUrl()} target=\"_blank\">\n          {t(\"Report a bug\")}\n        </MenuItem>\n        <Separator {...menu} />\n        <MenuItem {...menu} as={AppearanceMenu} />\n        <Separator {...menu} />\n        <MenuItem {...menu} onClick={auth.logout}>\n          {t(\"Log out\")}\n        </MenuItem>\n      </ContextMenu>\n    </>\n  );\n}\n\nconst ChangeTheme = styled(Flex)`\n  width: 100%;\n`;\n\nexport default observer(AccountMenu);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport {\n  EditIcon,\n  HomeIcon,\n  PlusIcon,\n  SearchIcon,\n  SettingsIcon,\n  ShapesIcon,\n  StarredIcon,\n} from \"outline-icons\";\nimport * as React from \"react\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport CollectionNew from \"scenes/CollectionNew\";\nimport Invite from \"scenes/Invite\";\nimport Bubble from \"components/Bubble\";\nimport Flex from \"components/Flex\";\nimport Modal from \"components/Modal\";\nimport Scrollable from \"components/Scrollable\";\nimport Sidebar from \"./Sidebar\";\nimport ArchiveLink from \"./components/ArchiveLink\";\nimport Collections from \"./components/Collections\";\nimport Section from \"./components/Section\";\nimport SidebarLink from \"./components/SidebarLink\";\nimport TeamButton from \"./components/TeamButton\";\nimport TrashLink from \"./components/TrashLink\";\nimport useCurrentTeam from \"hooks/useCurrentTeam\";\nimport useCurrentUser from \"hooks/useCurrentUser\";\nimport useStores from \"hooks/useStores\";\nimport AccountMenu from \"menus/AccountMenu\";\n\nfunction MainSidebar() {\n  const { t } = useTranslation();\n  const { policies, documents } = useStores();\n  const team = useCurrentTeam();\n  const user = useCurrentUser();\n  const [inviteModalOpen, setInviteModalOpen] = React.useState(false);\n  const [\n    createCollectionModalOpen,\n    setCreateCollectionModalOpen,\n  ] = React.useState(false);\n\n  React.useEffect(() => {\n    documents.fetchDrafts();\n    documents.fetchTemplates();\n  }, [documents]);\n\n  const handleCreateCollectionModalOpen = React.useCallback(\n    (ev: SyntheticEvent<>) => {\n      ev.preventDefault();\n      setCreateCollectionModalOpen(true);\n    },\n    []\n  );\n\n  const handleCreateCollectionModalClose = React.useCallback(() => {\n    setCreateCollectionModalOpen(false);\n  }, []);\n\n  const handleInviteModalOpen = React.useCallback((ev: SyntheticEvent<>) => {\n    ev.preventDefault();\n    setInviteModalOpen(true);\n  }, []);\n\n  const handleInviteModalClose = React.useCallback(() => {\n    setInviteModalOpen(false);\n  }, []);\n\n  const [dndArea, setDndArea] = React.useState();\n  const handleSidebarRef = React.useCallback((node) => setDndArea(node), []);\n  const html5Options = React.useMemo(() => ({ rootElement: dndArea }), [\n    dndArea,\n  ]);\n\n  const can = policies.abilities(team.id);\n\n  return (\n    <Sidebar ref={handleSidebarRef}>\n      {dndArea && (\n        <DndProvider backend={HTML5Backend} options={html5Options}>\n          <AccountMenu>\n            {(props) => (\n              <TeamButton\n                {...props}\n                subheading={user.name}\n                teamName={team.name}\n                logoUrl={team.avatarUrl}\n                showDisclosure\n              />\n            )}\n          </AccountMenu>\n          <Scrollable flex topShadow>\n            <Section>\n              <SidebarLink\n                to=\"/home\"\n                icon={<HomeIcon color=\"currentColor\" />}\n                exact={false}\n                label={t(\"Home\")}\n              />\n              <SidebarLink\n                to={{\n                  pathname: \"/search\",\n                  state: { fromMenu: true },\n                }}\n                icon={<SearchIcon color=\"currentColor\" />}\n                label={t(\"Search\")}\n                exact={false}\n              />\n              <SidebarLink\n                to=\"/starred\"\n                icon={<StarredIcon color=\"currentColor\" />}\n                exact={false}\n                label={t(\"Starred\")}\n              />\n              {can.createDocument && (\n                <SidebarLink\n                  to=\"/drafts\"\n                  icon={<EditIcon color=\"currentColor\" />}\n                  label={\n                    <Drafts align=\"center\">\n                      {t(\"Drafts\")}\n                      <Bubble count={documents.totalDrafts} />\n                    </Drafts>\n                  }\n                  active={\n                    documents.active\n                      ? !documents.active.publishedAt &&\n                        !documents.active.isDeleted &&\n                        !documents.active.isTemplate\n                      : undefined\n                  }\n                />\n              )}\n            </Section>\n            <Section auto>\n              <Collections\n                onCreateCollection={handleCreateCollectionModalOpen}\n              />\n            </Section>\n            <Section>\n              {can.createDocument && (\n                <>\n                  <SidebarLink\n                    to=\"/templates\"\n                    icon={<ShapesIcon color=\"currentColor\" />}\n                    exact={false}\n                    label={t(\"Templates\")}\n                    active={\n                      documents.active ? documents.active.template : undefined\n                    }\n                  />\n                  <ArchiveLink documents={documents} />\n                  <TrashLink documents={documents} />\n                </>\n              )}\n              <SidebarLink\n                to=\"/settings\"\n                icon={<SettingsIcon color=\"currentColor\" />}\n                exact={false}\n                label={t(\"Settings\")}\n              />\n              {can.inviteUser && (\n                <SidebarLink\n                  to=\"/settings/members\"\n                  onClick={handleInviteModalOpen}\n                  icon={<PlusIcon color=\"currentColor\" />}\n                  label={`${t(\"Invite people\")}`}\n                />\n              )}\n            </Section>\n          </Scrollable>\n          {can.inviteUser && (\n            <Modal\n              title={t(\"Invite people\")}\n              onRequestClose={handleInviteModalClose}\n              isOpen={inviteModalOpen}\n            >\n              <Invite onSubmit={handleInviteModalClose} />\n            </Modal>\n          )}\n          <Modal\n            title={t(\"Create a collection\")}\n            onRequestClose={handleCreateCollectionModalClose}\n            isOpen={createCollectionModalOpen}\n          >\n            <CollectionNew onSubmit={handleCreateCollectionModalClose} />\n          </Modal>\n        </DndProvider>\n      )}\n    </Sidebar>\n  );\n}\n\nconst Drafts = styled(Flex)`\n  height: 24px;\n`;\n\nexport default observer(MainSidebar);\n","// @flow\nimport Sidebar from \"./Main\";\nexport default Sidebar;\n","// @flow\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport Badge from \"components/Badge\";\nimport { version } from \"../../../../package.json\";\nimport SidebarLink from \"./SidebarLink\";\n\nexport default function Version() {\n  const [releasesBehind, setReleasesBehind] = React.useState(0);\n\n  React.useEffect(() => {\n    async function loadReleases() {\n      let out = 0;\n      const res = await fetch(\n        \"https://api.github.com/repos/outline/outline/releases\"\n      );\n      const releases = await res.json();\n      for (const release of releases) {\n        if (release.tag_name === `v${version}`) {\n          return setReleasesBehind(out);\n        } else {\n          out++;\n        }\n      }\n    }\n    loadReleases();\n  }, []);\n\n  return (\n    <SidebarLink\n      href=\"https://github.com/outline/outline/releases\"\n      label={\n        <>\n          v{version}\n          <br />\n          <LilBadge>\n            {releasesBehind === 0\n              ? \"Up to date\"\n              : `${releasesBehind} version${\n                  releasesBehind === 1 ? \"\" : \"s\"\n                } behind`}\n          </LilBadge>\n        </>\n      }\n    />\n  );\n}\n\nconst LilBadge = styled(Badge)`\n  margin-left: 0;\n`;\n","// @flow\nimport { observer } from \"mobx-react\";\nimport {\n  DocumentIcon,\n  EmailIcon,\n  ProfileIcon,\n  PadlockIcon,\n  CodeIcon,\n  UserIcon,\n  GroupIcon,\n  LinkIcon,\n  TeamIcon,\n  ExpandedIcon,\n} from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport Flex from \"components/Flex\";\nimport Scrollable from \"components/Scrollable\";\n\nimport SlackIcon from \"components/SlackIcon\";\nimport ZapierIcon from \"components/ZapierIcon\";\nimport Sidebar from \"./Sidebar\";\nimport Header from \"./components/Header\";\nimport Section from \"./components/Section\";\nimport SidebarLink from \"./components/SidebarLink\";\nimport TeamButton from \"./components/TeamButton\";\nimport Version from \"./components/Version\";\nimport env from \"env\";\nimport useCurrentTeam from \"hooks/useCurrentTeam\";\nimport useStores from \"hooks/useStores\";\n\nconst isHosted = env.DEPLOYMENT === \"hosted\";\n\nfunction SettingsSidebar() {\n  const { t } = useTranslation();\n  const history = useHistory();\n  const team = useCurrentTeam();\n  const { policies } = useStores();\n  const can = policies.abilities(team.id);\n\n  const returnToDashboard = React.useCallback(() => {\n    history.push(\"/home\");\n  }, [history]);\n\n  return (\n    <Sidebar>\n      <TeamButton\n        subheading={\n          <ReturnToApp align=\"center\">\n            <BackIcon color=\"currentColor\" /> {t(\"Return to App\")}\n          </ReturnToApp>\n        }\n        teamName={team.name}\n        logoUrl={team.avatarUrl}\n        onClick={returnToDashboard}\n      />\n\n      <Flex auto column>\n        <Scrollable topShadow>\n          <Section>\n            <Header>{t(\"Account\")}</Header>\n            <SidebarLink\n              to=\"/settings\"\n              icon={<ProfileIcon color=\"currentColor\" />}\n              label={t(\"Profile\")}\n            />\n            <SidebarLink\n              to=\"/settings/notifications\"\n              icon={<EmailIcon color=\"currentColor\" />}\n              label={t(\"Notifications\")}\n            />\n            {can.createApiKey && (\n              <SidebarLink\n                to=\"/settings/tokens\"\n                icon={<CodeIcon color=\"currentColor\" />}\n                label={t(\"API Tokens\")}\n              />\n            )}\n          </Section>\n          <Section>\n            <Header>{t(\"Team\")}</Header>\n            {can.update && (\n              <SidebarLink\n                to=\"/settings/details\"\n                icon={<TeamIcon color=\"currentColor\" />}\n                label={t(\"Details\")}\n              />\n            )}\n            {can.update && (\n              <SidebarLink\n                to=\"/settings/security\"\n                icon={<PadlockIcon color=\"currentColor\" />}\n                label={t(\"Security\")}\n              />\n            )}\n            <SidebarLink\n              to=\"/settings/members\"\n              icon={<UserIcon color=\"currentColor\" />}\n              exact={false}\n              label={t(\"Members\")}\n            />\n            <SidebarLink\n              to=\"/settings/groups\"\n              icon={<GroupIcon color=\"currentColor\" />}\n              exact={false}\n              label={t(\"Groups\")}\n            />\n            <SidebarLink\n              to=\"/settings/shares\"\n              icon={<LinkIcon color=\"currentColor\" />}\n              label={t(\"Share Links\")}\n            />\n            {can.export && (\n              <SidebarLink\n                to=\"/settings/import-export\"\n                icon={<DocumentIcon color=\"currentColor\" />}\n                label={`${t(\"Import\")} / ${t(\"Export\")}`}\n              />\n            )}\n          </Section>\n          {can.update && (\n            <Section>\n              <Header>{t(\"Integrations\")}</Header>\n              <SidebarLink\n                to=\"/settings/integrations/slack\"\n                icon={<SlackIcon color=\"currentColor\" />}\n                label=\"Slack\"\n              />\n              {isHosted && (\n                <SidebarLink\n                  to=\"/settings/integrations/zapier\"\n                  icon={<ZapierIcon color=\"currentColor\" />}\n                  label=\"Zapier\"\n                />\n              )}\n            </Section>\n          )}\n          {can.update && !isHosted && (\n            <Section>\n              <Header>{t(\"Installation\")}</Header>\n              <Version />\n            </Section>\n          )}\n        </Scrollable>\n      </Flex>\n    </Sidebar>\n  );\n}\n\nconst BackIcon = styled(ExpandedIcon)`\n  transform: rotate(90deg);\n  margin-left: -8px;\n`;\n\nconst ReturnToApp = styled(Flex)`\n  height: 16px;\n`;\n\nexport default observer(SettingsSidebar);\n","// @flow\nimport * as React from \"react\";\n\nexport const id = \"skip-nav\";\n\nexport default function SkipNavContent() {\n  return <div id={id} />;\n}\n","// @flow\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport { id } from \"components/SkipNavContent\";\n\nexport default function SkipNavLink() {\n  return <Anchor href={`#${id}`}>Skip navigation</Anchor>;\n}\n\nconst Anchor = styled.a`\n  border: 0;\n  clip: rect(0 0 0 0);\n  height: 1px;\n  width: 1px;\n  margin: -1px;\n  padding: 0;\n  overflow: hidden;\n  position: absolute;\n  z-index: 1;\n\n  &:focus {\n    padding: 1rem;\n    position: fixed;\n    top: 12px;\n    left: 12px;\n    background: ${(props) => props.theme.background};\n    color: ${(props) => props.theme.text};\n    outline-color: ${(props) => props.theme.primary};\n    z-index: ${(props) => props.theme.depths.popover};\n    width: auto;\n    height: auto;\n    clip: auto;\n  }\n`;\n","// @flow\nimport { observable } from \"mobx\";\nimport { observer, inject } from \"mobx-react\";\nimport { MenuIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { withTranslation, type TFunction } from \"react-i18next\";\nimport keydown from \"react-keydown\";\nimport {\n  Switch,\n  Route,\n  Redirect,\n  withRouter,\n  type RouterHistory,\n} from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport AuthStore from \"stores/AuthStore\";\nimport DocumentsStore from \"stores/DocumentsStore\";\nimport PoliciesStore from \"stores/PoliciesStore\";\nimport UiStore from \"stores/UiStore\";\nimport ErrorSuspended from \"scenes/ErrorSuspended\";\nimport KeyboardShortcuts from \"scenes/KeyboardShortcuts\";\nimport Button from \"components/Button\";\nimport DocumentHistory from \"components/DocumentHistory\";\nimport Flex from \"components/Flex\";\nimport Guide from \"components/Guide\";\nimport { LoadingIndicatorBar } from \"components/LoadingIndicator\";\nimport Sidebar from \"components/Sidebar\";\nimport SettingsSidebar from \"components/Sidebar/Settings\";\nimport SkipNavContent from \"components/SkipNavContent\";\nimport SkipNavLink from \"components/SkipNavLink\";\nimport { meta } from \"utils/keyboard\";\nimport {\n  homeUrl,\n  searchUrl,\n  matchDocumentSlug as slug,\n  newDocumentUrl,\n} from \"utils/routeHelpers\";\n\ntype Props = {\n  documents: DocumentsStore,\n  children?: ?React.Node,\n  actions?: ?React.Node,\n  title?: ?React.Node,\n  auth: AuthStore,\n  ui: UiStore,\n  history: RouterHistory,\n  policies: PoliciesStore,\n  notifications?: React.Node,\n  i18n: Object,\n  t: TFunction,\n};\n\n@observer\nclass Layout extends React.Component<Props> {\n  scrollable: ?HTMLDivElement;\n  @observable redirectTo: ?string;\n  @observable keyboardShortcutsOpen: boolean = false;\n\n  componentDidUpdate() {\n    if (this.redirectTo) {\n      this.redirectTo = undefined;\n    }\n  }\n\n  @keydown(`${meta}+.`)\n  handleToggleSidebar() {\n    this.props.ui.toggleCollapsedSidebar();\n  }\n\n  @keydown(\"shift+/\")\n  handleOpenKeyboardShortcuts() {\n    this.keyboardShortcutsOpen = true;\n  }\n\n  handleCloseKeyboardShortcuts = () => {\n    this.keyboardShortcutsOpen = false;\n  };\n\n  @keydown([\"t\", \"/\", `${meta}+k`])\n  goToSearch(ev: SyntheticEvent<>) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    this.redirectTo = searchUrl();\n  }\n\n  @keydown(\"d\")\n  goToDashboard() {\n    this.redirectTo = homeUrl();\n  }\n\n  @keydown(\"n\")\n  goToNewDocument() {\n    const { activeCollectionId } = this.props.ui;\n    if (!activeCollectionId) return;\n\n    const can = this.props.policies.abilities(activeCollectionId);\n    if (!can.update) return;\n\n    this.props.history.push(newDocumentUrl(activeCollectionId));\n  }\n\n  render() {\n    const { auth, t, ui } = this.props;\n    const { user, team } = auth;\n    const showSidebar = auth.authenticated && user && team;\n    const sidebarCollapsed = ui.isEditing || ui.sidebarCollapsed;\n\n    if (auth.isSuspended) return <ErrorSuspended />;\n    if (this.redirectTo) return <Redirect to={this.redirectTo} push />;\n\n    return (\n      <Container column auto>\n        <Helmet>\n          <title>{team && team.name ? team.name : \"Outline\"}</title>\n          <meta\n            name=\"viewport\"\n            content=\"width=device-width, initial-scale=1.0\"\n          />\n        </Helmet>\n        <SkipNavLink />\n\n        {this.props.ui.progressBarVisible && <LoadingIndicatorBar />}\n        {this.props.notifications}\n\n        <MobileMenuButton\n          onClick={ui.toggleMobileSidebar}\n          icon={<MenuIcon />}\n          iconColor=\"currentColor\"\n          neutral\n        />\n\n        <Container auto>\n          {showSidebar && (\n            <Switch>\n              <Route path=\"/settings\" component={SettingsSidebar} />\n              <Route component={Sidebar} />\n            </Switch>\n          )}\n\n          <SkipNavContent />\n          <Content\n            auto\n            justify=\"center\"\n            $isResizing={ui.sidebarIsResizing}\n            $sidebarCollapsed={sidebarCollapsed}\n            style={\n              sidebarCollapsed\n                ? undefined\n                : { marginLeft: `${ui.sidebarWidth}px` }\n            }\n          >\n            {this.props.children}\n          </Content>\n\n          <Switch>\n            <Route\n              path={`/doc/${slug}/history/:revisionId?`}\n              component={DocumentHistory}\n            />\n          </Switch>\n        </Container>\n        <Guide\n          isOpen={this.keyboardShortcutsOpen}\n          onRequestClose={this.handleCloseKeyboardShortcuts}\n          title={t(\"Keyboard shortcuts\")}\n        >\n          <KeyboardShortcuts />\n        </Guide>\n      </Container>\n    );\n  }\n}\n\nconst Container = styled(Flex)`\n  background: ${(props) => props.theme.background};\n  transition: ${(props) => props.theme.backgroundTransition};\n  position: relative;\n  width: 100%;\n  min-height: 100%;\n`;\n\nconst MobileMenuButton = styled(Button)`\n  position: fixed;\n  top: 12px;\n  left: 12px;\n  z-index: ${(props) => props.theme.depths.sidebar - 1};\n\n  ${breakpoint(\"tablet\")`\n    display: none;\n  `};\n\n  @media print {\n    display: none;\n  }\n`;\n\nconst Content = styled(Flex)`\n  margin: 0;\n  transition: ${(props) =>\n    props.$isResizing ? \"none\" : `margin-left 100ms ease-out`};\n\n  @media print {\n    margin: 0 !important;\n  }\n\n  ${breakpoint(\"mobile\", \"tablet\")`\n    margin-left: 0 !important;\n  `}\n\n  ${breakpoint(\"tablet\")`\n    ${(props) =>\n      props.$sidebarCollapsed &&\n      `margin-left: ${props.theme.sidebarCollapsedWidth}px;`}\n  `};\n`;\n\nexport default withTranslation()<Layout>(\n  inject(\"auth\", \"ui\", \"documents\", \"policies\")(withRouter(Layout))\n);\n","// @flow\nimport * as React from \"react\";\nimport { Switch, Redirect, type Match } from \"react-router-dom\";\nimport Archive from \"scenes/Archive\";\nimport Collection from \"scenes/Collection\";\nimport DocumentNew from \"scenes/DocumentNew\";\nimport Drafts from \"scenes/Drafts\";\nimport Error404 from \"scenes/Error404\";\nimport Home from \"scenes/Home\";\nimport Search from \"scenes/Search\";\nimport Starred from \"scenes/Starred\";\nimport Templates from \"scenes/Templates\";\nimport Trash from \"scenes/Trash\";\n\nimport CenteredContent from \"components/CenteredContent\";\nimport Layout from \"components/Layout\";\nimport PlaceholderDocument from \"components/PlaceholderDocument\";\nimport Route from \"components/ProfiledRoute\";\nimport SocketProvider from \"components/SocketProvider\";\nimport { matchDocumentSlug as slug } from \"utils/routeHelpers\";\n\nconst SettingsRoutes = React.lazy(() =>\n  import(/* webpackChunkName: \"settings\" */ \"./settings\")\n);\nconst KeyedDocument = React.lazy(() =>\n  import(\n    /* webpackChunkName: \"keyed-document\" */ \"scenes/Document/KeyedDocument\"\n  )\n);\nconst NotFound = () => <Search notFound />;\nconst RedirectDocument = ({ match }: { match: Match }) => (\n  <Redirect\n    to={\n      match.params.documentSlug ? `/doc/${match.params.documentSlug}` : \"/home\"\n    }\n  />\n);\n\nexport default function AuthenticatedRoutes() {\n  return (\n    <SocketProvider>\n      <Layout>\n        <React.Suspense\n          fallback={\n            <CenteredContent>\n              <PlaceholderDocument />\n            </CenteredContent>\n          }\n        >\n          <Switch>\n            <Redirect from=\"/dashboard\" to=\"/home\" />\n            <Route path=\"/home/:tab\" component={Home} />\n            <Route path=\"/home\" component={Home} />\n            <Route exact path=\"/starred\" component={Starred} />\n            <Route exact path=\"/starred/:sort\" component={Starred} />\n            <Route exact path=\"/templates\" component={Templates} />\n            <Route exact path=\"/templates/:sort\" component={Templates} />\n            <Route exact path=\"/drafts\" component={Drafts} />\n            <Route exact path=\"/archive\" component={Archive} />\n            <Route exact path=\"/trash\" component={Trash} />\n            <Redirect exact from=\"/collections/*\" to=\"/collection/*\" />\n            <Route exact path=\"/collection/:id/new\" component={DocumentNew} />\n            <Route exact path=\"/collection/:id/:tab\" component={Collection} />\n            <Route exact path=\"/collection/:id\" component={Collection} />\n            <Route exact path={`/d/${slug}`} component={RedirectDocument} />\n            <Route\n              exact\n              path={`/doc/${slug}/history/:revisionId?`}\n              component={KeyedDocument}\n            />\n            <Route exact path={`/doc/${slug}/edit`} component={KeyedDocument} />\n            <Route path={`/doc/${slug}`} component={KeyedDocument} />\n            <Route exact path=\"/search\" component={Search} />\n            <Route exact path=\"/search/:term\" component={Search} />\n            <Route path=\"/404\" component={Error404} />\n\n            <SettingsRoutes />\n            <Route component={NotFound} />\n          </Switch>{\" \"}\n        </React.Suspense>\n      </Layout>\n    </SocketProvider>\n  );\n}\n","// @flow\n\nexport function detectLanguage() {\n  const [ln, r] = navigator.language.split(\"-\");\n  const region = (r || ln).toUpperCase();\n  return `${ln}_${region}`;\n}\n\nexport function changeLanguage(toLanguageString: ?string, i18n: any) {\n  if (toLanguageString && i18n.language !== toLanguageString) {\n    // Languages are stored in en_US format in the database, however the\n    // frontend translation framework (i18next) expects en-US\n    i18n.changeLanguage(toLanguageString.replace(\"_\", \"-\"));\n  }\n}\n","// @flow\nimport { observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { VisuallyHidden } from \"reakit/VisuallyHidden\";\nimport styled from \"styled-components\";\nimport { Outline, LabelText } from \"./Input\";\n\nconst Select = styled.select`\n  border: 0;\n  flex: 1;\n  padding: 4px 0;\n  margin: 0 12px;\n  outline: none;\n  background: none;\n  color: ${(props) => props.theme.text};\n  height: 30px;\n\n  option {\n    background: ${(props) => props.theme.buttonNeutralBackground};\n  }\n\n  &:disabled,\n  &::placeholder {\n    color: ${(props) => props.theme.placeholder};\n  }\n`;\n\nconst Wrapper = styled.label`\n  display: block;\n  max-width: ${(props) => (props.short ? \"350px\" : \"100%\")};\n`;\n\nexport type Option = { label: string, value: string };\n\nexport type Props = {\n  value?: string,\n  label?: string,\n  short?: boolean,\n  className?: string,\n  labelHidden?: boolean,\n  options: Option[],\n  onBlur?: () => void,\n  onFocus?: () => void,\n};\n\n@observer\nclass InputSelect extends React.Component<Props> {\n  @observable focused: boolean = false;\n\n  handleBlur = () => {\n    this.focused = false;\n  };\n\n  handleFocus = () => {\n    this.focused = true;\n  };\n\n  render() {\n    const {\n      label,\n      className,\n      labelHidden,\n      options,\n      short,\n      ...rest\n    } = this.props;\n\n    const wrappedLabel = <LabelText>{label}</LabelText>;\n\n    return (\n      <Wrapper short={short}>\n        {label &&\n          (labelHidden ? (\n            <VisuallyHidden>{wrappedLabel}</VisuallyHidden>\n          ) : (\n            wrappedLabel\n          ))}\n        <Outline focused={this.focused} className={className}>\n          <Select onBlur={this.handleBlur} onFocus={this.handleFocus} {...rest}>\n            {options.map((option) => (\n              <option value={option.value} key={option.value}>\n                {option.label}\n              </option>\n            ))}\n          </Select>\n        </Outline>\n      </Wrapper>\n    );\n  }\n}\n\nexport default InputSelect;\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport Group from \"models/Group\";\nimport GroupMembers from \"scenes/GroupMembers\";\nimport Button from \"components/Button\";\nimport Flex from \"components/Flex\";\nimport HelpText from \"components/HelpText\";\nimport Input from \"components/Input\";\nimport Modal from \"components/Modal\";\nimport useStores from \"hooks/useStores\";\nimport useToasts from \"hooks/useToasts\";\n\ntype Props = {\n  onSubmit: () => void,\n};\n\nfunction GroupNew({ onSubmit }: Props) {\n  const { groups } = useStores();\n  const { t } = useTranslation();\n  const { showToast } = useToasts();\n  const [name, setName] = React.useState();\n  const [isSaving, setIsSaving] = React.useState();\n  const [group, setGroup] = React.useState();\n\n  const handleSubmit = async (ev: SyntheticEvent<>) => {\n    ev.preventDefault();\n    setIsSaving(true);\n    const group = new Group(\n      {\n        name: name,\n      },\n      groups\n    );\n\n    try {\n      setGroup(await group.save());\n    } catch (err) {\n      showToast(err.message, { type: \"error\" });\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleNameChange = (ev: SyntheticInputEvent<*>) => {\n    setName(ev.target.value);\n  };\n\n  return (\n    <>\n      <form onSubmit={handleSubmit}>\n        <HelpText>\n          <Trans>\n            Groups are for organizing your team. They work best when centered\n            around a function or a responsibility  Support or Engineering for\n            example.\n          </Trans>\n        </HelpText>\n        <Flex>\n          <Input\n            type=\"text\"\n            label=\"Name\"\n            onChange={handleNameChange}\n            value={name}\n            required\n            autoFocus\n            flex\n          />\n        </Flex>\n        <HelpText>\n          <Trans>Youll be able to add people to the group next.</Trans>\n        </HelpText>\n\n        <Button type=\"submit\" disabled={isSaving || !name}>\n          {isSaving ? `${t(\"Creating\")}` : t(\"Continue\")}\n        </Button>\n      </form>\n      <Modal\n        title={t(\"Group members\")}\n        onRequestClose={onSubmit}\n        isOpen={!!group}\n      >\n        <GroupMembers group={group} />\n      </Modal>\n    </>\n  );\n}\n\nexport default observer(GroupNew);\n","// @flow\nimport { find } from \"lodash\";\nimport * as React from \"react\";\nimport { useMenuState, MenuButton } from \"reakit/Menu\";\nimport styled from \"styled-components\";\nimport Button, { Inner } from \"components/Button\";\nimport ContextMenu from \"components/ContextMenu\";\nimport MenuItem from \"components/ContextMenu/MenuItem\";\nimport HelpText from \"components/HelpText\";\n\ntype TFilterOption = {|\n  key: string,\n  label: string,\n  note?: string,\n|};\n\ntype Props = {|\n  options: TFilterOption[],\n  activeKey: ?string,\n  defaultLabel?: string,\n  selectedPrefix?: string,\n  className?: string,\n  onSelect: (key: ?string) => void,\n|};\n\nconst FilterOptions = ({\n  options,\n  activeKey = \"\",\n  defaultLabel,\n  selectedPrefix = \"\",\n  className,\n  onSelect,\n}: Props) => {\n  const menu = useMenuState({ modal: true });\n  const selected = find(options, { key: activeKey }) || options[0];\n  const selectedLabel = selected ? `${selectedPrefix} ${selected.label}` : \"\";\n\n  return (\n    <Wrapper>\n      <MenuButton {...menu}>\n        {(props) => (\n          <StyledButton\n            {...props}\n            className={className}\n            neutral\n            disclosure\n            small\n          >\n            {activeKey ? selectedLabel : defaultLabel}\n          </StyledButton>\n        )}\n      </MenuButton>\n      <ContextMenu aria-label={defaultLabel} {...menu}>\n        {options.map((option) => (\n          <MenuItem\n            key={option.key}\n            onClick={() => {\n              onSelect(option.key);\n              menu.hide();\n            }}\n            selected={option.key === activeKey}\n            {...menu}\n          >\n            {option.note ? (\n              <LabelWithNote>\n                {option.label}\n                <Note>{option.note}</Note>\n              </LabelWithNote>\n            ) : (\n              option.label\n            )}\n          </MenuItem>\n        ))}\n      </ContextMenu>\n    </Wrapper>\n  );\n};\n\nconst LabelWithNote = styled.div`\n  font-weight: 500;\n  text-align: left;\n`;\n\nconst Note = styled(HelpText)`\n  margin-top: 2px;\n  margin-bottom: 0;\n  line-height: 1.2em;\n  font-size: 14px;\n  font-weight: 400;\n  color: ${(props) => props.theme.textTertiary};\n`;\n\nconst StyledButton = styled(Button)`\n  box-shadow: none;\n  text-transform: none;\n  border-color: transparent;\n\n  &:hover {\n    background: transparent;\n  }\n\n  ${Inner} {\n    line-height: 28px;\n  }\n`;\n\nconst Wrapper = styled.div`\n  margin-right: 8px;\n`;\n\nexport default FilterOptions;\n","// @flow\nimport { observable } from \"mobx\";\nimport { observer, inject } from \"mobx-react\";\nimport { GroupIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport { MAX_AVATAR_DISPLAY } from \"shared/constants\";\nimport GroupMembershipsStore from \"stores/GroupMembershipsStore\";\nimport CollectionGroupMembership from \"models/CollectionGroupMembership\";\nimport Group from \"models/Group\";\nimport GroupMembers from \"scenes/GroupMembers\";\nimport Facepile from \"components/Facepile\";\nimport Flex from \"components/Flex\";\nimport ListItem from \"components/List/Item\";\nimport Modal from \"components/Modal\";\n\ntype Props = {\n  group: Group,\n  groupMemberships: GroupMembershipsStore,\n  membership?: CollectionGroupMembership,\n  showFacepile?: boolean,\n  showAvatar?: boolean,\n  renderActions: ({ openMembersModal: () => void }) => React.Node,\n};\n\n@observer\nclass GroupListItem extends React.Component<Props> {\n  @observable membersModalOpen: boolean = false;\n\n  handleMembersModalOpen = () => {\n    this.membersModalOpen = true;\n  };\n\n  handleMembersModalClose = () => {\n    this.membersModalOpen = false;\n  };\n\n  render() {\n    const { group, groupMemberships, showFacepile, renderActions } = this.props;\n\n    const memberCount = group.memberCount;\n\n    const membershipsInGroup = groupMemberships.inGroup(group.id);\n    const users = membershipsInGroup\n      .slice(0, MAX_AVATAR_DISPLAY)\n      .map((gm) => gm.user);\n\n    const overflow = memberCount - users.length;\n\n    return (\n      <>\n        <ListItem\n          image={\n            <Image>\n              <GroupIcon size={24} />\n            </Image>\n          }\n          title={\n            <Title onClick={this.handleMembersModalOpen}>{group.name}</Title>\n          }\n          subtitle={\n            <>\n              {memberCount} member{memberCount === 1 ? \"\" : \"s\"}\n            </>\n          }\n          actions={\n            <Flex align=\"center\">\n              {showFacepile && (\n                <Facepile\n                  onClick={this.handleMembersModalOpen}\n                  users={users}\n                  overflow={overflow}\n                />\n              )}\n              &nbsp;\n              {renderActions({\n                openMembersModal: this.handleMembersModalOpen,\n              })}\n            </Flex>\n          }\n        />\n        <Modal\n          title=\"Group members\"\n          onRequestClose={this.handleMembersModalClose}\n          isOpen={this.membersModalOpen}\n        >\n          <GroupMembers group={group} onSubmit={this.handleMembersModalClose} />\n        </Modal>\n      </>\n    );\n  }\n}\n\nconst Image = styled(Flex)`\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: ${(props) => props.theme.secondaryBackground};\n  border-radius: 32px;\n`;\n\nconst Title = styled.span`\n  &:hover {\n    text-decoration: underline;\n    cursor: pointer;\n  }\n`;\n\nexport default inject(\"groupMemberships\")(GroupListItem);\n","// @flow\nimport styled from \"styled-components\";\n\nconst Heading = styled.h1`\n  display: flex;\n  align-items: center;\n  ${(props) => (props.centered ? \"text-align: center;\" : \"\")}\n\n  svg {\n    margin-top: 4px;\n    margin-left: -6px;\n    margin-right: 2px;\n    align-self: flex-start;\n    flex-shrink: 0;\n  }\n`;\n\nexport default Heading;\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { LinkIcon, CloseIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport Button from \"components/Button\";\nimport CopyToClipboard from \"components/CopyToClipboard\";\nimport Flex from \"components/Flex\";\nimport HelpText from \"components/HelpText\";\nimport Input from \"components/Input\";\nimport NudeButton from \"components/NudeButton\";\nimport Tooltip from \"components/Tooltip\";\nimport useCurrentTeam from \"hooks/useCurrentTeam\";\nimport useCurrentUser from \"hooks/useCurrentUser\";\nimport useStores from \"hooks/useStores\";\nimport useToasts from \"hooks/useToasts\";\n\nconst MAX_INVITES = 20;\n\ntype Props = {|\n  onSubmit: () => void,\n|};\n\ntype InviteRequest = {\n  email: string,\n  name: string,\n};\n\nfunction Invite({ onSubmit }: Props) {\n  const [isSaving, setIsSaving] = React.useState();\n  const [linkCopied, setLinkCopied] = React.useState<boolean>(false);\n  const [invites, setInvites] = React.useState<InviteRequest[]>([\n    { email: \"\", name: \"\" },\n    { email: \"\", name: \"\" },\n    { email: \"\", name: \"\" },\n  ]);\n\n  const { users, policies } = useStores();\n  const { showToast } = useToasts();\n  const user = useCurrentUser();\n  const team = useCurrentTeam();\n  const { t } = useTranslation();\n\n  const predictedDomain = user.email.split(\"@\")[1];\n  const can = policies.abilities(team.id);\n\n  const handleSubmit = React.useCallback(\n    async (ev: SyntheticEvent<>) => {\n      ev.preventDefault();\n      setIsSaving(true);\n\n      try {\n        await users.invite(invites);\n        onSubmit();\n        showToast(t(\"We sent out your invites!\"), { type: \"success\" });\n      } catch (err) {\n        showToast(err.message, { type: \"error\" });\n      } finally {\n        setIsSaving(false);\n      }\n    },\n    [onSubmit, showToast, invites, t, users]\n  );\n\n  const handleChange = React.useCallback((ev, index) => {\n    setInvites((prevInvites) => {\n      const newInvites = [...prevInvites];\n      newInvites[index][ev.target.name] = ev.target.value;\n      return newInvites;\n    });\n  }, []);\n\n  const handleAdd = React.useCallback(() => {\n    if (invites.length >= MAX_INVITES) {\n      showToast(\n        t(\"Sorry, you can only send {{MAX_INVITES}} invites at a time\", {\n          MAX_INVITES,\n        }),\n        { type: \"warning\" }\n      );\n    }\n\n    setInvites((prevInvites) => {\n      const newInvites = [...prevInvites];\n      newInvites.push({ email: \"\", name: \"\" });\n      return newInvites;\n    });\n  }, [showToast, invites, t]);\n\n  const handleRemove = React.useCallback(\n    (ev: SyntheticEvent<>, index: number) => {\n      ev.preventDefault();\n\n      setInvites((prevInvites) => {\n        const newInvites = [...prevInvites];\n        newInvites.splice(index, 1);\n        return newInvites;\n      });\n    },\n    []\n  );\n\n  const handleCopy = React.useCallback(() => {\n    setLinkCopied(true);\n    showToast(t(\"Share link copied\"), {\n      type: \"success\",\n    });\n  }, [showToast, t]);\n\n  return (\n    <form onSubmit={handleSubmit}>\n      {team.guestSignin ? (\n        <HelpText>\n          <Trans\n            defaults=\"Invite team members or guests to join your knowledge base. Team members can sign in with {{signinMethods}} or use their email address.\"\n            values={{ signinMethods: team.signinMethods }}\n          />\n        </HelpText>\n      ) : (\n        <HelpText>\n          <Trans\n            defaults=\"Invite team members to join your knowledge base. They will need to sign in with {{signinMethods}}.\"\n            values={{ signinMethods: team.signinMethods }}\n          />{\" \"}\n          {can.update && (\n            <Trans>\n              As an admin you can also{\" \"}\n              <Link to=\"/settings/security\">enable email sign-in</Link>.\n            </Trans>\n          )}\n        </HelpText>\n      )}\n      {team.subdomain && (\n        <CopyBlock>\n          <Flex align=\"flex-end\">\n            <Input\n              type=\"text\"\n              value={team.url}\n              label={t(\"Want a link to share directly with your team?\")}\n              readOnly\n              flex\n            />\n            &nbsp;&nbsp;\n            <CopyToClipboard text={team.url} onCopy={handleCopy}>\n              <Button\n                type=\"button\"\n                icon={<LinkIcon />}\n                style={{ marginBottom: \"16px\" }}\n                neutral\n              >\n                {linkCopied ? t(\"Link copied\") : t(\"Copy link\")}\n              </Button>\n            </CopyToClipboard>\n          </Flex>\n          <p>\n            <hr />\n          </p>\n        </CopyBlock>\n      )}\n      {invites.map((invite, index) => (\n        <Flex key={index}>\n          <Input\n            type=\"email\"\n            name=\"email\"\n            label={t(\"Email\")}\n            labelHidden={index !== 0}\n            onChange={(ev) => handleChange(ev, index)}\n            placeholder={`example@${predictedDomain}`}\n            value={invite.email}\n            required={index === 0}\n            autoFocus={index === 0}\n            flex\n          />\n          &nbsp;&nbsp;\n          <Input\n            type=\"text\"\n            name=\"name\"\n            label={t(\"Full name\")}\n            labelHidden={index !== 0}\n            onChange={(ev) => handleChange(ev, index)}\n            value={invite.name}\n            required={!!invite.email}\n            flex\n          />\n          {index !== 0 && (\n            <Remove>\n              <Tooltip tooltip={t(\"Remove invite\")} placement=\"top\">\n                <NudeButton onClick={(ev) => handleRemove(ev, index)}>\n                  <CloseIcon />\n                </NudeButton>\n              </Tooltip>\n            </Remove>\n          )}\n        </Flex>\n      ))}\n\n      <Flex justify=\"space-between\">\n        {invites.length <= MAX_INVITES ? (\n          <Button type=\"button\" onClick={handleAdd} neutral>\n            <Trans>Add another</Trans>\n          </Button>\n        ) : (\n          <span />\n        )}\n\n        <Button\n          type=\"submit\"\n          disabled={isSaving}\n          data-on=\"click\"\n          data-event-category=\"invite\"\n          data-event-action=\"sendInvites\"\n        >\n          {isSaving ? `${t(\"Inviting\")}` : t(\"Send Invites\")}\n        </Button>\n      </Flex>\n      <br />\n    </form>\n  );\n}\n\nconst CopyBlock = styled(\"div\")`\n  margin: 2em 0;\n  font-size: 14px;\n`;\n\nconst Remove = styled(\"div\")`\n  margin-top: 6px;\n  position: absolute;\n  right: -32px;\n`;\n\nexport default observer(Invite);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useMenuState } from \"reakit/Menu\";\nimport ContextMenu from \"components/ContextMenu\";\nimport OverflowMenuButton from \"components/ContextMenu/OverflowMenuButton\";\nimport Template from \"components/ContextMenu/Template\";\n\ntype Props = {|\n  onRemove: () => void,\n|};\n\nfunction GroupMemberMenu({ onRemove }: Props) {\n  const { t } = useTranslation();\n  const menu = useMenuState({ modal: true });\n\n  return (\n    <>\n      <OverflowMenuButton aria-label={t(\"Show menu\")} {...menu} />\n      <ContextMenu {...menu} aria-label={t(\"Group member options\")}>\n        <Template\n          {...menu}\n          items={[\n            {\n              title: t(\"Remove\"),\n              onClick: onRemove,\n            },\n          ]}\n        />\n      </ContextMenu>\n    </>\n  );\n}\n\nexport default observer(GroupMemberMenu);\n","// @flow\nimport * as React from \"react\";\nimport User from \"models/User\";\nimport Avatar from \"components/Avatar\";\nimport Badge from \"components/Badge\";\nimport Button from \"components/Button\";\nimport Flex from \"components/Flex\";\nimport ListItem from \"components/List/Item\";\nimport Time from \"components/Time\";\nimport GroupMemberMenu from \"menus/GroupMemberMenu\";\n\ntype Props = {|\n  user: User,\n  onAdd?: () => Promise<void>,\n  onRemove?: () => Promise<void>,\n|};\n\nconst GroupMemberListItem = ({ user, onRemove, onAdd }: Props) => {\n  return (\n    <ListItem\n      title={user.name}\n      subtitle={\n        <>\n          {user.lastActiveAt ? (\n            <>\n              Active <Time dateTime={user.lastActiveAt} /> ago\n            </>\n          ) : (\n            \"Never signed in\"\n          )}\n          {user.isInvited && <Badge>Invited</Badge>}\n          {user.isAdmin && <Badge primary={user.isAdmin}>Admin</Badge>}\n        </>\n      }\n      image={<Avatar src={user.avatarUrl} size={32} />}\n      actions={\n        <Flex align=\"center\">\n          {onRemove && <GroupMemberMenu onRemove={onRemove} />}\n          {onAdd && (\n            <Button onClick={onAdd} neutral>\n              Add\n            </Button>\n          )}\n        </Flex>\n      }\n    />\n  );\n};\n\nexport default GroupMemberListItem;\n","// @flow\nimport { debounce } from \"lodash\";\nimport { observable } from \"mobx\";\nimport { inject, observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { withTranslation, type TFunction } from \"react-i18next\";\nimport AuthStore from \"stores/AuthStore\";\nimport GroupMembershipsStore from \"stores/GroupMembershipsStore\";\nimport ToastsStore from \"stores/ToastsStore\";\nimport UsersStore from \"stores/UsersStore\";\nimport Group from \"models/Group\";\nimport User from \"models/User\";\nimport Invite from \"scenes/Invite\";\nimport ButtonLink from \"components/ButtonLink\";\nimport Empty from \"components/Empty\";\nimport Flex from \"components/Flex\";\nimport HelpText from \"components/HelpText\";\nimport Input from \"components/Input\";\nimport Modal from \"components/Modal\";\nimport PaginatedList from \"components/PaginatedList\";\nimport GroupMemberListItem from \"./components/GroupMemberListItem\";\n\ntype Props = {\n  toasts: ToastsStore,\n  auth: AuthStore,\n  group: Group,\n  groupMemberships: GroupMembershipsStore,\n  users: UsersStore,\n  onSubmit: () => void,\n  t: TFunction,\n};\n\n@observer\nclass AddPeopleToGroup extends React.Component<Props> {\n  @observable inviteModalOpen: boolean = false;\n  @observable query: string = \"\";\n\n  handleInviteModalOpen = () => {\n    this.inviteModalOpen = true;\n  };\n\n  handleInviteModalClose = () => {\n    this.inviteModalOpen = false;\n  };\n\n  handleFilter = (ev: SyntheticInputEvent<>) => {\n    this.query = ev.target.value;\n    this.debouncedFetch();\n  };\n\n  debouncedFetch = debounce(() => {\n    this.props.users.fetchPage({\n      query: this.query,\n    });\n  }, 250);\n\n  handleAddUser = async (user: User) => {\n    const { t } = this.props;\n\n    try {\n      await this.props.groupMemberships.create({\n        groupId: this.props.group.id,\n        userId: user.id,\n      });\n      this.props.toasts.showToast(\n        t(`{{userName}} was added to the group`, { userName: user.name }),\n        { type: \"success\" }\n      );\n    } catch (err) {\n      this.props.toasts.showToast(t(\"Could not add user\"), { type: \"error\" });\n    }\n  };\n\n  render() {\n    const { users, group, auth, t } = this.props;\n    const { user, team } = auth;\n    if (!user || !team) return null;\n\n    return (\n      <Flex column>\n        <HelpText>\n          {t(\n            \"Add team members below to give them access to the group. Need to add someone whos not yet on the team yet?\"\n          )}{\" \"}\n          <ButtonLink onClick={this.handleInviteModalOpen}>\n            {t(\"Invite them to {{teamName}}\", { teamName: team.name })}\n          </ButtonLink>\n          .\n        </HelpText>\n        <Input\n          type=\"search\"\n          placeholder={`${t(\"Search by name\")}`}\n          value={this.query}\n          onChange={this.handleFilter}\n          label={t(\"Search people\")}\n          labelHidden\n          autoFocus\n          flex\n        />\n        <PaginatedList\n          empty={\n            this.query ? (\n              <Empty>{t(\"No people matching your search\")}</Empty>\n            ) : (\n              <Empty>{t(\"No people left to add\")}</Empty>\n            )\n          }\n          items={users.notInGroup(group.id, this.query)}\n          fetch={this.query ? undefined : users.fetchPage}\n          renderItem={(item) => (\n            <GroupMemberListItem\n              key={item.id}\n              user={item}\n              onAdd={() => this.handleAddUser(item)}\n            />\n          )}\n        />\n        <Modal\n          title={t(\"Invite people\")}\n          onRequestClose={this.handleInviteModalClose}\n          isOpen={this.inviteModalOpen}\n        >\n          <Invite onSubmit={this.handleInviteModalClose} />\n        </Modal>\n      </Flex>\n    );\n  }\n}\n\nexport default withTranslation()<AddPeopleToGroup>(\n  inject(\"auth\", \"users\", \"groupMemberships\", \"toasts\")(AddPeopleToGroup)\n);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { PlusIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport Group from \"models/Group\";\nimport User from \"models/User\";\nimport Button from \"components/Button\";\nimport Empty from \"components/Empty\";\nimport Flex from \"components/Flex\";\nimport HelpText from \"components/HelpText\";\nimport Modal from \"components/Modal\";\nimport PaginatedList from \"components/PaginatedList\";\nimport Subheading from \"components/Subheading\";\nimport AddPeopleToGroup from \"./AddPeopleToGroup\";\nimport GroupMemberListItem from \"./components/GroupMemberListItem\";\nimport useStores from \"hooks/useStores\";\nimport useToasts from \"hooks/useToasts\";\n\ntype Props = {\n  group: Group,\n};\n\nfunction GroupMembers({ group }: Props) {\n  const [addModalOpen, setAddModalOpen] = React.useState();\n  const { users, groupMemberships, policies } = useStores();\n  const { showToast } = useToasts();\n  const { t } = useTranslation();\n  const can = policies.abilities(group.id);\n\n  const handleAddModal = (state) => {\n    setAddModalOpen(state);\n  };\n\n  const handleRemoveUser = async (user: User) => {\n    try {\n      await groupMemberships.delete({\n        groupId: group.id,\n        userId: user.id,\n      });\n      showToast(\n        t(`{{userName}} was removed from the group`, { userName: user.name }),\n        { type: \"success\" }\n      );\n    } catch (err) {\n      showToast(t(\"Could not remove user\"), { type: \"error\" });\n    }\n  };\n\n  return (\n    <Flex column>\n      {can.update ? (\n        <>\n          <HelpText>\n            <Trans\n              defaults=\"Add and remove team members in the <em>{{groupName}}</em> group. Adding people to the group will give them access to any collections this group has been added to.\"\n              values={{ groupName: group.name }}\n              components={{ em: <strong /> }}\n            />\n          </HelpText>\n          <span>\n            <Button\n              type=\"button\"\n              onClick={() => handleAddModal(true)}\n              icon={<PlusIcon />}\n              neutral\n            >\n              {t(\"Add people\")}\n            </Button>\n          </span>\n        </>\n      ) : (\n        <HelpText>\n          <Trans\n            defaults=\"Listing team members in the <em>{{groupName}}</em> group.\"\n            values={{ groupName: group.name }}\n            components={{ em: <strong /> }}\n          />\n        </HelpText>\n      )}\n\n      <Subheading>\n        <Trans>Members</Trans>\n      </Subheading>\n      <PaginatedList\n        items={users.inGroup(group.id)}\n        fetch={groupMemberships.fetchPage}\n        options={{ id: group.id }}\n        empty={<Empty>{t(\"This group has no members.\")}</Empty>}\n        renderItem={(item) => (\n          <GroupMemberListItem\n            key={item.id}\n            user={item}\n            onRemove={can.update ? () => handleRemoveUser(item) : undefined}\n          />\n        )}\n      />\n      {can.update && (\n        <Modal\n          title={t(`Add people to {{groupName}}`, { groupName: group.name })}\n          onRequestClose={() => handleAddModal(false)}\n          isOpen={addModalOpen}\n        >\n          <AddPeopleToGroup\n            group={group}\n            onSubmit={() => handleAddModal(false)}\n          />\n        </Modal>\n      )}\n    </Flex>\n  );\n}\n\nexport default observer(GroupMembers);\n","// @flow\nimport GroupMembers from \"./GroupMembers\";\nexport default GroupMembers;\n","// @flow\nimport * as React from \"react\";\n\ntype Props = {\n  color?: string,\n};\n\nexport default function SlackIcon({ color = \"#4E5C6E\" }: Props) {\n  return (\n    <svg\n      fill={color}\n      width=\"24px\"\n      height=\"24px\"\n      viewBox=\"0 0 24 24\"\n      version=\"1.1\"\n    >\n      <path d=\"M7.36156352,14.1107492 C7.36156352,15.0358306 6.60586319,15.7915309 5.68078176,15.7915309 C4.75570033,15.7915309 4,15.0358306 4,14.1107492 C4,13.1856678 4.75570033,12.4299674 5.68078176,12.4299674 L7.36156352,12.4299674 L7.36156352,14.1107492 Z M8.20846906,14.1107492 C8.20846906,13.1856678 8.96416938,12.4299674 9.88925081,12.4299674 C10.8143322,12.4299674 11.5700326,13.1856678 11.5700326,14.1107492 L11.5700326,18.3192182 C11.5700326,19.2442997 10.8143322,20 9.88925081,20 C8.96416938,20 8.20846906,19.2442997 8.20846906,18.3192182 C8.20846906,18.3192182 8.20846906,14.1107492 8.20846906,14.1107492 Z M9.88925081,7.36156352 C8.96416938,7.36156352 8.20846906,6.60586319 8.20846906,5.68078176 C8.20846906,4.75570033 8.96416938,4 9.88925081,4 C10.8143322,4 11.5700326,4.75570033 11.5700326,5.68078176 L11.5700326,7.36156352 L9.88925081,7.36156352 Z M9.88925081,8.20846906 C10.8143322,8.20846906 11.5700326,8.96416938 11.5700326,9.88925081 C11.5700326,10.8143322 10.8143322,11.5700326 9.88925081,11.5700326 L5.68078176,11.5700326 C4.75570033,11.5700326 4,10.8143322 4,9.88925081 C4,8.96416938 4.75570033,8.20846906 5.68078176,8.20846906 C5.68078176,8.20846906 9.88925081,8.20846906 9.88925081,8.20846906 Z M16.6384365,9.88925081 C16.6384365,8.96416938 17.3941368,8.20846906 18.3192182,8.20846906 C19.2442997,8.20846906 20,8.96416938 20,9.88925081 C20,10.8143322 19.2442997,11.5700326 18.3192182,11.5700326 L16.6384365,11.5700326 L16.6384365,9.88925081 Z M15.7915309,9.88925081 C15.7915309,10.8143322 15.0358306,11.5700326 14.1107492,11.5700326 C13.1856678,11.5700326 12.4299674,10.8143322 12.4299674,9.88925081 L12.4299674,5.68078176 C12.4299674,4.75570033 13.1856678,4 14.1107492,4 C15.0358306,4 15.7915309,4.75570033 15.7915309,5.68078176 L15.7915309,9.88925081 Z M14.1107492,16.6384365 C15.0358306,16.6384365 15.7915309,17.3941368 15.7915309,18.3192182 C15.7915309,19.2442997 15.0358306,20 14.1107492,20 C13.1856678,20 12.4299674,19.2442997 12.4299674,18.3192182 L12.4299674,16.6384365 L14.1107492,16.6384365 Z M14.1107492,15.7915309 C13.1856678,15.7915309 12.4299674,15.0358306 12.4299674,14.1107492 C12.4299674,13.1856678 13.1856678,12.4299674 14.1107492,12.4299674 L18.3192182,12.4299674 C19.2442997,12.4299674 20,13.1856678 20,14.1107492 C20,15.0358306 19.2442997,15.7915309 18.3192182,15.7915309 L14.1107492,15.7915309 Z\" />\n    </svg>\n  );\n}\n","// @flow\nimport * as React from \"react\";\n\ntype Props = {\n  color?: string,\n};\n\nexport default function ZapierIcon({ color = \"#4E5C6E\" }: Props) {\n  return (\n    <svg\n      fill={color}\n      width=\"24px\"\n      height=\"24px\"\n      viewBox=\"0 0 24 24\"\n      version=\"1.1\"\n    >\n      <path d=\"M14,12.00348 C13.9996,12.59796 13.89092,13.16708 13.6928,13.69244 C13.16752,13.89072 12.59816,13.99964 12.00344,14.00004 L11.99656,14.00004 C11.40216,13.99964 10.83296,13.89104 10.30768,13.69284 C10.10952,13.16764 10.0004,12.59828 10,12.00364 L10,11.99672 C10.0004,11.40224 10.10928,10.83312 10.30712,10.3078 C10.83264,10.10964 11.40192,10.0006 11.99656,10.0002 L12.00344,10.0002 C12.59816,10.0006 13.16752,10.10964 13.69276,10.3078 C13.89076,10.83316 13.99956,11.40228 13.99996,11.99676 L13.99996,12.00368 L13.99996,12.0036 L14,12.00348 Z M19.8888,10.66668 L15.21896,10.66668 L18.52096,7.36468 C18.2617173,7.00059444 17.9725547,6.65876921 17.65648,6.34276 L17.65632,6.34244 C17.340564,6.02673022 16.9990638,5.73786527 16.63536,5.47884 L13.33336,8.78084 L13.33336,4.11128 C12.894135,4.03747693 12.4495423,4.00025584 12.00416,4 L11.99568,4 C11.5503533,4.00023789 11.1058145,4.03743219 10.66664,4.1112 L10.66664,8.78108 L7.36464,5.47908 C7.00075543,5.7381962 6.65910565,6.02719699 6.34324,6.34308 L6.34204,6.34416 C6.02660762,6.65978768 5.73799769,7.00112635 5.4792,7.36464 L8.7812,10.66664 L4.1112,10.66664 C4.1112,10.66664 4.00016,11.54384 4,11.99704 L4,12.00284 C4.00016664,12.4487002 4.03736113,12.8937765 4.1112,13.33348 L8.78104,13.33348 L5.47904,16.63548 C5.99830995,17.3645251 6.63559493,18.0018101 7.36464,18.52108 L10.66664,15.21916 L10.66664,19.8888 C11.1053956,19.962476 11.5495017,19.9996699 11.9944,20 L12.00584,20 C12.4506842,19.999644 12.8947349,19.9624502 13.33344,19.8888 L13.33344,15.21892 L16.63544,18.52092 C16.9992044,18.2618792 17.3407586,17.972987 17.65656,17.65724 L17.65736,17.65664 C17.9730579,17.3408301 18.2619218,16.9992911 18.52096,16.63556 L15.21896,13.33348 L19.8888,13.33348 C19.9624671,12.8947771 19.999661,12.4507249 20,12.00588 L20,11.9944 C19.999644,11.5495558 19.9624502,11.1055051 19.8888,10.6668 L19.8888,10.66668 Z\" />\n    </svg>\n  );\n}\n","// @flow\nimport styled from \"styled-components\";\n\nconst TeamLogo = styled.img`\n  width: ${(props) =>\n    props.width ? `${props.width}px` : props.size || \"auto\"};\n  height: ${(props) =>\n    props.height ? `${props.height}px` : props.size || \"38px\"};\n  border-radius: 4px;\n  background: ${(props) => props.theme.background};\n  border: 1px solid ${(props) => props.theme.divider};\n  overflow: hidden;\n  flex-shrink: 0;\n`;\n\nexport default TeamLogo;\n","// @flow\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\ntype Props = {\n  onClick: (ev: SyntheticEvent<>) => void,\n  children: React.Node,\n};\n\nexport default function ButtonLink(props: Props) {\n  return <Button {...props} />;\n}\n\nconst Button = styled.button`\n  margin: 0;\n  padding: 0;\n  border: 0;\n  color: ${(props) => props.theme.link};\n  line-height: inherit;\n  background: none;\n  text-decoration: none;\n  cursor: pointer;\n`;\n"],"sourceRoot":""}