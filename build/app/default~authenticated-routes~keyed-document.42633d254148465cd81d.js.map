{"version":3,"sources":["webpack:///./app/components/List/Item.js","webpack:///./app/components/Image.js","webpack:///./app/embeds/Abstract.js","webpack:///./app/embeds/Airtable.js","webpack:///./app/embeds/Cawemo.js","webpack:///./app/embeds/ClickUp.js","webpack:///./app/embeds/Codepen.js","webpack:///./app/embeds/Descript.js","webpack:///./app/embeds/Figma.js","webpack:///./app/embeds/Framer.js","webpack:///./app/embeds/Gist.js","webpack:///./app/embeds/GoogleDataStudio.js","webpack:///./app/embeds/GoogleDocs.js","webpack:///./app/embeds/GoogleDrawings.js","webpack:///./app/embeds/GoogleDrive.js","webpack:///./app/embeds/GoogleSheets.js","webpack:///./app/embeds/GoogleSlides.js","webpack:///./app/embeds/InVision.js","webpack:///./app/embeds/Loom.js","webpack:///./app/embeds/Lucidchart.js","webpack:///./app/embeds/Marvel.js","webpack:///./app/embeds/Mindmeister.js","webpack:///./app/embeds/Miro.js","webpack:///./app/embeds/ModeAnalytics.js","webpack:///./app/embeds/Prezi.js","webpack:///./app/embeds/Spotify.js","webpack:///./app/embeds/Trello.js","webpack:///./app/embeds/Typeform.js","webpack:///./app/embeds/Vimeo.js","webpack:///./app/embeds/YouTube.js","webpack:///./app/embeds/index.js","webpack:///./app/components/Editor.js","webpack:///./app/hooks/useCurrentTeam.js","webpack:///./app/components/CollectionIcon.js","webpack:///./app/hooks/usePrevious.js","webpack:///./app/components/Highlight.js","webpack:///./app/components/DocumentListItem.js","webpack:///./app/scenes/DocumentPermanentDelete.js","webpack:///./app/scenes/DocumentTemplatize.js","webpack:///./app/menus/DocumentMenu.js","webpack:///./app/components/InputSearch.js","webpack:///./app/embeds/components/Frame.js","webpack:///./app/hooks/useToasts.js","webpack:///./app/components/IconPicker.js","webpack:///./app/components/Input.js","webpack:///./app/components/Star.js","webpack:///./app/components/Scrollable.js","webpack:///./app/components/DocumentBreadcrumb.js","webpack:///./app/components/Guide.js","webpack:///./app/components/Badge.js","webpack:///./app/utils/pageVisibility.js","webpack:///./app/components/SocketProvider.js","webpack:///./app/components/CircularProgressBar.js","webpack:///./app/components/DocumentTasks.js","webpack:///./app/components/DocumentMeta.js","webpack:///./app/utils/keyboard.js","webpack:///./app/scenes/DocumentDelete.js","webpack:///./app/components/Tooltip.js","webpack:///./app/components/Switch.js","webpack:///./app/components/ContextMenu/Template.js","webpack:///./app/components/PlaceholderDocument.js","webpack:///./app/hooks/useWindowSize.js","webpack:///./app/components/Time.js","webpack:///./app/components/Labeled.js","webpack:///./app/components/PaginatedList.js","webpack:///./app/hooks/useBoolean.js","webpack:///./app/components/PaginatedDocumentList.js","webpack:///./app/components/Actions.js","webpack:///./app/components/ContextMenu/index.js","webpack:///./app/scenes/Error404.js","webpack:///./app/components/CopyToClipboard.js","webpack:///./app/components/Tab.js","webpack:///./app/components/Header.js","webpack:///./shared/random.js","webpack:///./app/components/PlaceholderText.js","webpack:///./app/utils/getDataTransferFiles.js","webpack:///./app/components/Tabs.js","webpack:///./app/components/ContextMenu/Header.js","webpack:///./app/components/NudeButton.js","webpack:///./app/components/PathToDocument.js","webpack:///./app/scenes/DocumentMove.js","webpack:///./app/components/Avatar/placeholder.png","webpack:///./app/components/Facepile.js","webpack:///./app/components/EventBoundary.js","webpack:///./app/components/Avatar/Avatar.js","webpack:///./app/scenes/UserProfile.js","webpack:///./app/components/Avatar/AvatarWithPresence.js","webpack:///./app/components/Avatar/index.js","webpack:///./app/hooks/useCurrentUser.js","webpack:///./app/components/ContextMenu/OverflowMenuButton.js","webpack:///./app/components/Key.js","webpack:///./app/scenes/KeyboardShortcuts.js","webpack:///./app/components/ContextMenu/MenuItem.js","webpack:///./app/components/LoadingIndicator/LoadingIndicator.js","webpack:///./app/components/LoadingIndicator/LoadingIndicatorBar.js","webpack:///./app/components/LoadingIndicator/index.js","webpack:///./app/hooks/useUnmount.js","webpack:///./app/components/Modal.js","webpack:///./app/components/List/Placeholder.js","webpack:///./app/menus/BreadcrumbMenu.js","webpack:///./app/components/Breadcrumb.js","webpack:///./app/utils/uploadFile.js","webpack:///./app/components/Subheading.js","webpack:///./app/components/ContextMenu/Separator.js"],"names":["Wrapper","styled","li","props","$border","theme","divider","Image","Flex","Heading","p","$small","Content","Subtitle","textTertiary","Actions","div","ListItem","image","title","subtitle","actions","small","border","compact","align","undefined","column","src","alt","rest","cdnPath","Abstract","shareId","this","attrs","matches","Frame","React","ENABLED","RegExp","URL_REGEX","Airtable","Cawemo","allowfullscreen","ClickUp","href","Codepen","normalizedUrl","replace","Descript","width","Figma","Framer","Gist","ref","updateIframeContent","iframe","current","id","doc","document","contentDocument","contentWindow","gistLink","gistScript","iframeHtml","open","writeln","close","className","isSelected","type","frameBorder","height","onLoad","URL","pathname","split","GoogleDataStudio","icon","canonicalUrl","GoogleDocs","GoogleDrawings","GoogleDrive","GoogleSheets","GoogleSlides","IFRAME_REGEX","IMAGE_REGEX","InVision","test","style","maxWidth","maxHeight","shouldRespectMaxDimension","Loom","Lucidchart","chartId","groups","Marvel","Mindmeister","RealtimeBoard","domain","boardId","titleName","ModeAnalytics","Prezi","url","Spotify","normalizedPath","includes","allow","err","Trello","objectId","Typeform","Vimeo","videoId","YouTube","matcher","Component","regex","result","match","Img","keywords","component","defaultHidden","Miro","RichMarkdownEditor","EMPTY_ARRAY","StyledEditor","grow","text","lighten","EditorTooltip","children","Tooltip","offset","delay","Span","span","EditorWithRouterAndTheme","withRouter","withTheme","Editor","history","t","useTranslation","showToast","useToasts","isPrinting","useMediaQuery","onUploadImage","file","uploadFile","documentId","onClickLink","event","isInternalUrl","isModKey","shiftKey","window","navigateTo","hash","push","location","onShowToast","message","dictionary","addColumnAfter","addColumnBefore","addRowAfter","addRowBefore","alignCenter","alignLeft","alignRight","bulletList","checkboxList","codeBlock","codeCopied","codeInline","createLink","createLinkError","createNewDoc","deleteColumn","deleteRow","deleteTable","deleteImage","downloadImage","alignImageLeft","alignImageRight","alignImageDefault","em","embedInvalidLink","findOrCreateDoc","h1","h2","h3","heading","hr","imageUploadError","imageCaptionPlaceholder","info","infoNotice","link","linkCopied","mark","newLineEmpty","newLineWithSlash","noResults","openLink","orderedList","pageBreak","pasteLink","pasteLinkWithTitle","service","placeholder","quote","removeLink","searchOrPasteLink","strikethrough","strong","subheading","table","tip","tipNotice","warning","warningNotice","ErrorBoundary","reloadOnChunkMissing","forwardedRef","uploadImage","embeds","disableEmbeds","tooltip","light","useCurrentTeam","auth","useStores","invariant","team","observer","ResolvedCollectionIcon","collection","expanded","size","color","ui","resolvedTheme","getLuminance","icons","error","console","warn","usePrevious","value","Mark","searchHighlight","Highlight","highlight","processResult","caseSensitive","index","tag","key","SEARCH_RESULT_REGEX","replaceResultMarks","DocumentListItem","policies","currentUser","useCurrentUser","currentTeam","useBoolean","menuOpen","handleMenuOpen","handleMenuClose","showNestedDocuments","showCollection","showPublished","showPin","showDraft","showTemplate","context","queryIsInTitle","toLowerCase","canStar","isDraft","isArchived","isTemplate","can","abilities","DocumentLink","dir","$isStarred","isStarred","$menuOpen","to","state","titleWithDefault","Title","isNew","createdBy","Badge","yellow","StarPositioner","Star","placement","primary","ResultContext","DocumentMeta","showLastViewed","isDeleted","createDocument","Button","as","Link","newDocumentUrl","collectionId","templateId","neutral","DocumentMenu","onOpen","onClose","modal","EventBoundary","breakpoint","AnimatedStar","listItemHoverBackground","css","rtl","DocumentPermanentDelete","onSubmit","isDeleting","setIsDeleting","documents","useHistory","handleSubmit","ev","preventDefault","delete","permanent","HelpText","Trans","defaults","values","documentTitle","components","danger","DocumentTemplatize","useState","isSaving","setIsSaving","templatize","template","documentUrl","CollectionName","isRevision","showToggleEmbeds","showPrint","label","collections","menu","useMenuState","unstable_preventOverflow","unstable_fixed","unstable_flip","renderModals","setRenderModals","showDeleteModal","setShowDeleteModal","showPermanentDeleteModal","setShowPermanentDeleteModal","showMoveModal","setShowMoveModal","showTemplateModal","setShowTemplateModal","handleOpen","handleDuplicate","duplicate","duped","handleArchive","archive","handleRestore","options","restore","handleUnpublish","unpublish","handlePrint","print","handleStar","stopPropagation","star","handleUnstar","unstar","get","canViewHistory","read","handleImportDocument","click","handleFilePicked","files","getDataTransferFiles","length","import","publish","importedDocument","VisuallyHidden","onChange","onClick","accept","importFileTypes","join","tabIndex","MenuButton","OverflowMenuButton","aria-label","ContextMenu","Template","items","visible","unarchive","left","position","top","hover","orderedData","map","CollectionIcon","name","disabled","update","unpin","pinned","pin","enableEmbeds","embedsDisabled","parentDocumentId","createChildDocument","editDocumentUrl","permanentDelete","move","documentHistoryUrl","download","Modal","documentName","noun","onRequestClose","isOpen","DocumentMove","DocumentDelete","InputSearch","useTheme","isFocused","setIsFocused","handleFocus","handleBlur","onKeyDown","inputBorderFocused","inputBorder","onFocus","onBlur","margin","labelHidden","StyledIframe","Iframe","$withBar","loadIframe","mounted","isLoaded","setImmediate","withBar","Rounded","sandbox","loading","allowFullScreen","Bar","Open","target","rel","observable","embedBorder","a","textSecondary","secondaryBackground","toasts","hideToast","TwitterPicker","coins","CoinsIcon","academicCap","AcademicCapIcon","beaker","BeakerIcon","buildingBlocks","BuildingBlocksIcon","cloud","CloudIcon","code","CodeIcon","eye","EyeIcon","leaf","LeafIcon","lightbulb","LightBulbIcon","moon","MoonIcon","notepad","NotepadIcon","padlock","PadlockIcon","palette","PaletteIcon","pencil","EditIcon","question","QuestionMarkIcon","sun","SunIcon","vehicle","VehicleIcon","colors","Label","Icons","NudeButton","IconButton","Loading","ColorPicker","IconPicker","Object","keys","fallback","hex","triangle","RealTextarea","textarea","hasIcon","RealInput","input","flex","short","minHeight","IconWrapper","Outline","hasError","focused","LabelText","Input","focus","InputComponent","wrappedLabel","StarredIcon","handleClick","UnstarredIcon","$flex","$topShadowVisible","$bottomShadowVisible","Scrollable","shadow","topShadow","bottomShadow","topShadowVisible","setTopShadow","bottomShadowVisible","setBottomShadow","useWindowSize","updateShadows","c","scrollTop","tsv","wrapperHeight","scrollHeight","clientHeight","bsv","onScroll","SmallSlash","GoToIcon","slate","DocumentBreadcrumb","onlyText","category","useCategory","path","pathToDocument","slice","output","collectionUrl","forEach","n","highlightFirstItem","Header","Backdrop","backdrop","depths","modalOverlay","Scene","background","backgroundTransition","Guide","dialog","useDialogState","animated","wasOpen","show","hide","preventBodyScrollhideOnEsc","white","almostBlack","hidden","visibilityChange","getVisibilityListener","getPageVisible","SocketContext","SocketProvider","checkConnection","socket","disconnected","createConnection","io","origin","transports","reconnectionDelay","reconnectionDelayMax","authenticated","memberships","presence","views","token","on","emit","reason","clear","opts","documentIds","documentDescriptor","deletedAt","updatedAt","remove","fetch","force","response","statusCode","collectionIds","collectionDescriptor","inCollection","removeCollectionDocuments","removeCollectionMemberships","groupIds","groupDescriptor","groupId","group","starredIds","set","user","userId","updateIndex","init","userIds","editingIds","touch","isEditing","leave","addEventListener","disconnect","removeEventListener","Provider","inject","Circle","strokePercentage","percentage","radius","circumference","Math","PI","r","cx","cy","fill","stroke","strokeWidth","strokeDasharray","strokeDashoffset","strokeLinecap","transition","SVG","svg","CircularProgressBar","cleanPercentage","Number","isFinite","floor","transform","progressBarBackground","Done","DoneIcon","$animated","bounceIn","DocumentTasks","tasks","tasksPercentage","completed","total","done","previousDone","getMessage","count","Container","Viewed","Modified","modifiedSinceViewed","updatedBy","createdAt","publishedAt","archivedAt","lastViewedAt","isTasks","content","lastUpdatedByCurrentUser","Time","dateTime","addSuffix","nestedDocumentsCount","getDocumentChildren","canShowProgressBar","timeSinceNow","shorten","isMac","navigator","platform","metaDisplay","meta","metaKey","ctrlKey","setDeleting","isArchiving","setArchiving","canArchive","activeDocumentId","parent","shortcut","Shortcut","StyledTippy","arrow","arrowType","animation","duration","inertia","kbd","tooltipBackground","tooltipText","Tippy","Slider","HiddenInput","Switch","htmlFor","Disclosure","ExpandedIcon","Submenu","templateItems","filterTemplateItems","filtered","filter","item","reduce","acc","prev","selected","level","startsWith","PlaceholderDocument","auto","Fade","windowSize","setWindowSize","handleResize","innerWidth","innerHeight","LocaleTime","formatDistanceToNow","Date","parse","tooltipDelay","Labeled","PaginatedList","isInitiallyLoaded","reset","allowLoadMore","renderCount","DEFAULT_PAGINATION_LIMIT","isFetching","isFetchingMore","fetchResults","limit","results","prevProps","empty","showLoading","showEmpty","showList","mode","ArrowKeyNavigation","VERTICAL","defaultActiveChildIndex","renderItem","onEnter","loadMoreResults","action","leftToRender","initialState","setValue","setTrue","setFalse","PaginatedDocumentList","Action","Separator","previousVisible","hideOnClickOutside","preventBodyScroll","topAnchor","rightAnchor","Position","Background","animating","fadeIn","mobileContextMenu","menuBackground","fadeAndSlideDown","fadeAndSlideUp","menuShadow","menuBorder","Error404","CopyToClipboard","onCopy","elem","only","copy","debug","process","format","TabLink","NavLinkWithChildrenFunc","exact","Active","m","stiffness","damping","Tab","activeStyle","layoutId","initial","Breadcrumbs","header","transparentize","isCompact","breadcrumb","isScrolled","setScrolled","handleScroll","scrollY","handleClickTitle","scrollTo","behavior","shrink","justify","randomInteger","min","max","random","PlaceholderText","minWidth","Mask","pulsate","dataTransferItemsList","dataTransfer","dt","Array","prototype","call","Nav","nav","$shadowVisible","Sticky","Tabs","shadowVisible","setShadow","scrollLeft","fade","scrollWidth","clientWidth","sidebarText","button","PathToDocument","onSuccess","ResultWrapperLink","ResultWrapper","role","selectable","curr","StyledGoToIcon","DocumentTitle","withComponent","InputWrapper","NewLocation","Results","Section","searchTerm","setSearchTerm","searchIndex","useMemo","paths","pathsToDocuments","Search","addIndex","indexeableDocuments","addDocuments","onlyShowCollections","search","_documents","handleSuccess","row","data","renderPathToCurrentDocument","getPathForDocument","handleFilter","required","autoFocus","itemData","itemCount","itemSize","itemKey","module","exports","DefaultAvatar","avatarUrl","AvatarWrapper","More","Avatars","Facepile","users","overflow","renderAvatar","Avatar","handleError","CircleImg","onError","defaultProps","img","Edit","StyledBadge","Meta","UserProfile","isCurrentUser","lastActiveAt","time","isAdmin","isSuspended","settings","createdByUser","fetchOwned","Subheading","userName","AvatarWithPresence","handleOpenProfile","handleCloseProfile","isPresent","Centered","profileOnClick","withTranslation","iconColor","Key","smokeLight","slateLight","List","dl","Keys","dd","KeyboardShortcuts","categories","handleChange","handleKeyDown","currentTarget","x","Spacer","MenuAnchor","$toggleable","MenuItem","handleMouseDown","onMouseDown","LoadingIndicator","enableProgressBar","disableProgressBar","loadingFrame","keyframes","loadingIndicatorBar","Loader","LoadingIndicatorBar","useUnmount","callback","openModals","fadeAndScaleIn","$nested","Text","Close","Back","depth","setDepth","DialogBackdrop","Dialog","marginLeft","Item","ListPlaceHolder","BreadcrumbMenu","Slash","$highlight","$withIcon","Breadcrumb","overflowItems","totalItems","topLevelItems","halfMax","splice","File","client","post","public","contentType","attachment","formData","FormData","form","append","blob","uploadUrl","method","body","uploadResponse","ok","dataUrlToBlob","dataURL","blobBin","atob","array","i","charCodeAt","Blob","Uint8Array","H3","Underline","sticky","HorizontalRule"],"mappings":"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","file":"default~authenticated-routes~keyed-document.42633d254148465cd81d.js","sourcesContent":["// @flow\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport Flex from \"components/Flex\";\n\ntype Props = {\n  image?: React.Node,\n  title: React.Node,\n  subtitle?: React.Node,\n  actions?: React.Node,\n  border?: boolean,\n  small?: boolean,\n};\n\nconst ListItem = ({\n  image,\n  title,\n  subtitle,\n  actions,\n  small,\n  border,\n}: Props) => {\n  const compact = !subtitle;\n\n  return (\n    <Wrapper compact={compact} $border={border}>\n      {image && <Image>{image}</Image>}\n      <Content align={compact ? \"center\" : undefined} column={!compact}>\n        <Heading $small={small}>{title}</Heading>\n        {subtitle && <Subtitle $small={small}>{subtitle}</Subtitle>}\n      </Content>\n      {actions && <Actions>{actions}</Actions>}\n    </Wrapper>\n  );\n};\n\nconst Wrapper = styled.li`\n  display: flex;\n  padding: ${(props) => (props.$border === false ? 0 : \"8px 0\")};\n  margin: ${(props) => (props.$border === false ? \"8px 0\" : 0)};\n  border-bottom: 1px solid\n    ${(props) =>\n      props.$border === false ? \"transparent\" : props.theme.divider};\n\n  &:last-child {\n    border-bottom: 0;\n  }\n`;\n\nconst Image = styled(Flex)`\n  padding: 0 8px 0 0;\n  max-height: 32px;\n  align-items: center;\n  user-select: none;\n  flex-shrink: 0;\n  align-self: center;\n`;\n\nconst Heading = styled.p`\n  font-size: ${(props) => (props.$small ? 15 : 16)}px;\n  font-weight: 500;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  line-height: 1.2;\n  margin: 0;\n`;\n\nconst Content = styled(Flex)`\n  flex-grow: 1;\n`;\n\nconst Subtitle = styled.p`\n  margin: 0;\n  font-size: ${(props) => (props.$small ? 13 : 14)}px;\n  color: ${(props) => props.theme.textTertiary};\n  margin-top: -2px;\n`;\n\nconst Actions = styled.div`\n  align-self: center;\n`;\n\nexport default ListItem;\n","// @flow\nimport * as React from \"react\";\nimport { cdnPath } from \"utils/urls\";\n\ntype Props = {|\n  alt: string,\n  src: string,\n  title?: string,\n  width?: number,\n  height?: number,\n|};\n\nexport default function Image({ src, alt, ...rest }: Props) {\n  return <img src={cdnPath(src)} alt={alt} {...rest} />;\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class Abstract extends React.Component<Props> {\n  static ENABLED = [\n    new RegExp(\"https?://share.(?:go)?abstract.com/(.*)$\"),\n    new RegExp(\"https?://app.(?:go)?abstract.com/(?:share|embed)/(.*)$\"),\n  ];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const shareId = matches[1];\n\n    return (\n      <Frame\n        {...this.props}\n        src={`https://app.goabstract.com/embed/${shareId}`}\n        title={`Abstract (${shareId})`}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\"https://airtable.com/(?:embed/)?(shr.*)$\");\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class Airtable extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const shareId = matches[1];\n\n    return (\n      <Frame\n        {...this.props}\n        src={`https://airtable.com/embed/${shareId}`}\n        title={`Airtable (${shareId})`}\n        border\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\"https?://cawemo.com/(?:share|embed)/(.*)$\");\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class Cawemo extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const shareId = matches[1];\n\n    return (\n      <Frame\n        {...this.props}\n        src={`https://cawemo.com/embed/${shareId}`}\n        title={\"Cawemo Embed\"}\n        border\n        allowfullscreen\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\n  \"^https?://share.clickup.com/[a-z]/[a-z]/(.*)/(.*)$\"\n);\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class ClickUp extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href}\n        title=\"ClickUp Embed\"\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\"^https://codepen.io/(.*?)/(pen|embed)/(.*)$\");\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class Codepen extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const normalizedUrl = this.props.attrs.href.replace(/\\/pen\\//, \"/embed/\");\n\n    return <Frame {...this.props} src={normalizedUrl} title=\"Codepen Embed\" />;\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class Descript extends React.Component<Props> {\n  static ENABLED = [new RegExp(\"https?://share.descript.com/view/(\\\\w+)$\")];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const shareId = matches[1];\n\n    return (\n      <Frame\n        {...this.props}\n        src={`https://share.descript.com/embed/${shareId}`}\n        title={`Descript (${shareId})`}\n        width=\"400px\"\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\n  \"https://([w.-]+.)?figma.com/(file|proto)/([0-9a-zA-Z]{22,128})(?:/.*)?$\"\n);\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class Figma extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={`https://www.figma.com/embed?embed_host=outline&url=${this.props.attrs.href}`}\n        title=\"Figma Embed\"\n        border\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\"^https://framer.cloud/(.*)$\");\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class Framer extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href}\n        title=\"Framer Embed\"\n        border\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\n\nconst URL_REGEX = new RegExp(\n  \"^https://gist.github.com/([a-z\\\\d](?:[a-z\\\\d]|-(?=[a-z\\\\d])){0,38})/(.*)$\"\n);\n\ntype Props = {|\n  isSelected: boolean,\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nclass Gist extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n  ref = React.createRef<HTMLIFrameElement>();\n\n  get id() {\n    const gistUrl = new URL(this.props.attrs.href);\n    return gistUrl.pathname.split(\"/\")[2];\n  }\n\n  componentDidMount() {\n    this.updateIframeContent();\n  }\n\n  componentDidUpdate() {\n    this.updateIframeContent();\n  }\n\n  updateIframeContent = () => {\n    const iframe = this.ref.current;\n    if (!iframe) return;\n    const id = this.id;\n\n    // $FlowFixMe\n    let doc = iframe.document;\n    if (iframe.contentDocument) {\n      doc = iframe.contentDocument;\n    } else if (iframe.contentWindow) {\n      doc = iframe.contentWindow.document;\n    }\n\n    const gistLink = `https://gist.github.com/${id}.js`;\n    const gistScript = `<script type=\"text/javascript\" src=\"${gistLink}\"></script>`;\n    const styles =\n      \"<style>*{ font-size:12px; } body { margin: 0; } .gist .blob-wrapper.data { max-height:150px; overflow:auto; }</style>\";\n    const iframeHtml = `<html><head><base target=\"_parent\">${styles}</head><body>${gistScript}</body></html>`;\n\n    if (!doc) return;\n\n    doc.open();\n    doc.writeln(iframeHtml);\n    doc.close();\n  };\n\n  render() {\n    const id = this.id;\n\n    return (\n      <iframe\n        className={this.props.isSelected ? \"ProseMirror-selectednode\" : \"\"}\n        ref={this.ref}\n        type=\"text/html\"\n        frameBorder=\"0\"\n        width=\"100%\"\n        height=\"200px\"\n        id={`gist-${id}`}\n        title={`Github Gist (${id})`}\n        onLoad={this.updateIframeContent}\n      />\n    );\n  }\n}\n\nexport default Gist;\n","// @flow\nimport * as React from \"react\";\nimport Image from \"components/Image\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\n  \"^https?://datastudio.google.com/(embed|u/0)/reporting/(.*)/page/(.*)(/edit)?$\"\n);\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class GoogleDataStudio extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href.replace(\"u/0\", \"embed\").replace(\"/edit\", \"\")}\n        icon={\n          <Image\n            src=\"/images/google-datastudio.png\"\n            alt=\"Google Data Studio Icon\"\n            width={16}\n            height={16}\n          />\n        }\n        canonicalUrl={this.props.attrs.href}\n        title=\"Google Data Studio\"\n        border\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Image from \"components/Image\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\"^https?://docs.google.com/document/(.*)$\");\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class GoogleDocs extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href.replace(\"/edit\", \"/preview\")}\n        icon={\n          <Image\n            src=\"/images/google-docs.png\"\n            alt=\"Google Docs Icon\"\n            width={16}\n            height={16}\n          />\n        }\n        canonicalUrl={this.props.attrs.href}\n        title=\"Google Docs\"\n        border\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Image from \"components/Image\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\n  \"^https://docs.google.com/drawings/d/(.*)/(edit|preview)(.*)$\"\n);\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class GoogleDrawings extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href.replace(\"/edit\", \"/preview\")}\n        icon={\n          <Image\n            src=\"/images/google-drawings.png\"\n            alt=\"Google Drawings\"\n            width={16}\n            height={16}\n          />\n        }\n        canonicalUrl={this.props.attrs.href.replace(\"/preview\", \"/edit\")}\n        title=\"Google Drawings\"\n        border\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Image from \"components/Image\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\n  \"^https?://drive.google.com/file/d/(.*)/(preview|view).?usp=sharing(.*)\"\n);\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class GoogleDrive extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        src={this.props.attrs.href.replace(\"/view\", \"/preview\")}\n        icon={\n          <Image\n            src=\"/images/google-drive.png\"\n            alt=\"Google Drive Icon\"\n            width={16}\n            height={16}\n          />\n        }\n        title=\"Google Drive\"\n        canonicalUrl={this.props.attrs.href}\n        border\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Image from \"components/Image\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\"^https?://docs.google.com/spreadsheets/d/(.*)$\");\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class GoogleSheets extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href.replace(\"/edit\", \"/preview\")}\n        icon={\n          <Image\n            src=\"/images/google-sheets.png\"\n            alt=\"Google Sheets Icon\"\n            width={16}\n            height={16}\n          />\n        }\n        canonicalUrl={this.props.attrs.href}\n        title=\"Google Sheets\"\n        border\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Image from \"components/Image\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\"^https?://docs.google.com/presentation/d/(.*)$\");\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class GoogleSlides extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href\n          .replace(\"/edit\", \"/preview\")\n          .replace(\"/pub\", \"/embed\")}\n        icon={\n          <Image\n            src=\"/images/google-slides.png\"\n            alt=\"Google Slides Icon\"\n            width={16}\n            height={16}\n          />\n        }\n        canonicalUrl={this.props.attrs.href}\n        title=\"Google Slides\"\n        border\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport ImageZoom from \"react-medium-image-zoom\";\nimport Frame from \"./components/Frame\";\n\nconst IFRAME_REGEX = new RegExp(\n  \"^https://(invis.io/.*)|(projects.invisionapp.com/share/.*)$\"\n);\n\nconst IMAGE_REGEX = new RegExp(\n  \"^https://(opal.invisionapp.com/static-signed/live-embed/.*)$\"\n);\n\ntype Props = {|\n  isSelected: boolean,\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class InVision extends React.Component<Props> {\n  static ENABLED = [IFRAME_REGEX, IMAGE_REGEX];\n\n  render() {\n    if (IMAGE_REGEX.test(this.props.attrs.href)) {\n      return (\n        <ImageZoom\n          className={this.props.isSelected ? \"ProseMirror-selectednode\" : \"\"}\n          image={{\n            src: this.props.attrs.href,\n            alt: \"InVision Embed\",\n            style: {\n              maxWidth: \"100%\",\n              maxHeight: \"75vh\",\n            },\n          }}\n          shouldRespectMaxDimension\n        />\n      );\n    }\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href}\n        title=\"InVision Embed\"\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = /^https:\\/\\/(www\\.)?(use)?loom.com\\/(embed|share)\\/(.*)$/;\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class Loom extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const normalizedUrl = this.props.attrs.href.replace(\"share\", \"embed\");\n\n    return <Frame {...this.props} src={normalizedUrl} title=\"Loom Embed\" />;\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: Object,\n  |},\n|};\n\nexport default class Lucidchart extends React.Component<Props> {\n  static ENABLED = [\n    /^https?:\\/\\/(www\\.|app\\.)?lucidchart.com\\/documents\\/(embeddedchart|view)\\/(?<chartId>[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})(?:\\/.*)?$/,\n    /^https?:\\/\\/(www\\.|app\\.)?lucid.app\\/lucidchart\\/(?<chartId>[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})\\/(embeddedchart|view)(?:\\/.*)?$/,\n  ];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const { chartId } = matches.groups;\n\n    return (\n      <Frame\n        {...this.props}\n        src={`https://lucidchart.com/documents/embeddedchart/${chartId}`}\n        title=\"Lucidchart Embed\"\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\"^https://marvelapp.com/([A-Za-z0-9-]{6})/?$\");\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class Marvel extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href}\n        title=\"Marvel Embed\"\n        border\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\n  \"^https://([w.-]+.)?(mindmeister.com|mm.tt)(/maps/public_map_shell)?/(\\\\d+)(\\\\?t=.*)?(/.*)?$\"\n);\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class Mindmeister extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const chartId =\n      this.props.attrs.matches[4] +\n      (this.props.attrs.matches[5] || \"\") +\n      (this.props.attrs.matches[6] || \"\");\n\n    return (\n      <Frame\n        {...this.props}\n        src={`https://www.mindmeister.com/maps/public_map_shell/${chartId}`}\n        title=\"Mindmeister Embed\"\n        border\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = /^https:\\/\\/(realtimeboard|miro).com\\/app\\/board\\/(.*)$/;\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class RealtimeBoard extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const domain = matches[1];\n    const boardId = matches[2];\n    const titleName = domain === \"realtimeboard\" ? \"RealtimeBoard\" : \"Miro\";\n\n    return (\n      <Frame\n        {...this.props}\n        src={`https://${domain}.com/app/embed/${boardId}`}\n        title={`${titleName} (${boardId})`}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\n  \"^https://([w.-]+.)?modeanalytics.com/(.*)/reports/(.*)$\"\n);\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class ModeAnalytics extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    // Allow users to paste embed or standard urls and handle them the same\n    const normalizedUrl = this.props.attrs.href.replace(/\\/embed$/, \"\");\n\n    return (\n      <Frame\n        {...this.props}\n        src={`${normalizedUrl}/embed`}\n        title=\"Mode Analytics Embed\"\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\"^https://prezi.com/view/(.*)$\");\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class Prezi extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const url = this.props.attrs.href.replace(/\\/embed$/, \"\");\n\n    return (\n      <Frame {...this.props} src={`${url}/embed`} title=\"Prezi Embed\" border />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\"https?://open.spotify.com/(.*)$\");\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\nexport default class Spotify extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  get pathname() {\n    try {\n      const parsed = new URL(this.props.attrs.href);\n      return parsed.pathname;\n    } catch (err) {\n      return \"\";\n    }\n  }\n\n  render() {\n    const normalizedPath = this.pathname.replace(/^\\/embed/, \"/\");\n\n    var height;\n\n    if (normalizedPath.includes(\"episode\") || normalizedPath.includes(\"show\")) {\n      height = 232;\n    } else if (normalizedPath.includes(\"track\")) {\n      height = 80;\n    } else {\n      height = 380;\n    }\n\n    return (\n      <Frame\n        {...this.props}\n        width=\"100%\"\n        height={`${height}px`}\n        src={`https://open.spotify.com/embed${normalizedPath}`}\n        title=\"Spotify Embed\"\n        allow=\"encrypted-media\"\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = /^https:\\/\\/trello.com\\/(c|b)\\/([^/]*)(.*)?$/;\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class Trello extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const objectId = matches[2];\n\n    if (matches[1] === \"c\") {\n      return (\n        <Frame\n          width=\"316px\"\n          height=\"158px\"\n          src={`https://trello.com/embed/card?id=${objectId}`}\n          title={`Trello Card (${objectId})`}\n        />\n      );\n    }\n\n    return (\n      <Frame\n        {...this.props}\n        width=\"248px\"\n        height=\"185px\"\n        src={`https://trello.com/embed/board?id=${objectId}`}\n        title={`Trello Board (${objectId})`}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = new RegExp(\n  \"^https://([A-Za-z0-9](?:[A-Za-z0-9-]{0,61}[A-Za-z0-9])?).typeform.com/to/(.*)$\"\n);\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class Typeform extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    return (\n      <Frame\n        {...this.props}\n        src={this.props.attrs.href}\n        title=\"Typeform Embed\"\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = /(http|https)?:\\/\\/(www\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^/]*)\\/videos\\/|)(\\d+)(?:|\\/\\?)/;\n\ntype Props = {|\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class Vimeo extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const videoId = matches[4];\n\n    return (\n      <Frame\n        {...this.props}\n        src={`https://player.vimeo.com/video/${videoId}?byline=0`}\n        title={`Vimeo Embed (${videoId})`}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport Frame from \"./components/Frame\";\n\nconst URL_REGEX = /(?:https?:\\/\\/)?(?:www\\.)?youtu\\.?be(?:\\.com)?\\/?.*(?:watch|embed)?(?:.*v=|v\\/|\\/)([a-zA-Z0-9_-]{11})$/i;\n\ntype Props = {|\n  isSelected: boolean,\n  attrs: {|\n    href: string,\n    matches: string[],\n  |},\n|};\n\nexport default class YouTube extends React.Component<Props> {\n  static ENABLED = [URL_REGEX];\n\n  render() {\n    const { matches } = this.props.attrs;\n    const videoId = matches[1];\n\n    return (\n      <Frame\n        {...this.props}\n        src={`https://www.youtube.com/embed/${videoId}?modestbranding=1`}\n        title={`YouTube (${videoId})`}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport Image from \"components/Image\";\nimport Abstract from \"./Abstract\";\nimport Airtable from \"./Airtable\";\nimport Cawemo from \"./Cawemo\";\nimport ClickUp from \"./ClickUp\";\nimport Codepen from \"./Codepen\";\nimport Descript from \"./Descript\";\nimport Figma from \"./Figma\";\nimport Framer from \"./Framer\";\nimport Gist from \"./Gist\";\nimport GoogleDataStudio from \"./GoogleDataStudio\";\nimport GoogleDocs from \"./GoogleDocs\";\nimport GoogleDrawings from \"./GoogleDrawings\";\nimport GoogleDrive from \"./GoogleDrive\";\nimport GoogleSheets from \"./GoogleSheets\";\nimport GoogleSlides from \"./GoogleSlides\";\nimport InVision from \"./InVision\";\nimport Loom from \"./Loom\";\nimport Lucidchart from \"./Lucidchart\";\nimport Marvel from \"./Marvel\";\nimport Mindmeister from \"./Mindmeister\";\nimport Miro from \"./Miro\";\nimport ModeAnalytics from \"./ModeAnalytics\";\nimport Prezi from \"./Prezi\";\nimport Spotify from \"./Spotify\";\nimport Trello from \"./Trello\";\nimport Typeform from \"./Typeform\";\nimport Vimeo from \"./Vimeo\";\nimport YouTube from \"./YouTube\";\n\nfunction matcher(Component) {\n  return (url: string) => {\n    const regexes = Component.ENABLED;\n    for (const regex of regexes) {\n      const result = url.match(regex);\n      if (result) {\n        return result;\n      }\n    }\n  };\n}\n\nconst Img = styled(Image)`\n  margin: 4px;\n  width: 18px;\n  height: 18px;\n`;\n\nexport default [\n  {\n    title: \"Abstract\",\n    keywords: \"design\",\n    icon: () => <Img src=\"/images/abstract.png\" />,\n    component: Abstract,\n    matcher: matcher(Abstract),\n  },\n  {\n    title: \"Airtable\",\n    keywords: \"spreadsheet\",\n    icon: () => <Img src=\"/images/airtable.png\" />,\n    component: Airtable,\n    matcher: matcher(Airtable),\n  },\n  {\n    title: \"Cawemo\",\n    keywords: \"bpmn process\",\n    defaultHidden: true,\n    icon: () => <Img src=\"/images/cawemo.png\" />,\n    component: Cawemo,\n    matcher: matcher(Cawemo),\n  },\n  {\n    title: \"ClickUp\",\n    keywords: \"project\",\n    defaultHidden: true,\n    icon: () => <Img src=\"/images/clickup.png\" />,\n    component: ClickUp,\n    matcher: matcher(ClickUp),\n  },\n  {\n    title: \"Codepen\",\n    keywords: \"code editor\",\n    icon: () => <Img src=\"/images/codepen.png\" />,\n    component: Codepen,\n    matcher: matcher(Codepen),\n  },\n  {\n    title: \"Descript\",\n    keywords: \"audio\",\n    icon: () => <Img src=\"/images/descript.png\" />,\n    component: Descript,\n    matcher: matcher(Descript),\n  },\n  {\n    title: \"Figma\",\n    keywords: \"design svg vector\",\n    icon: () => <Img src=\"/images/figma.png\" />,\n    component: Figma,\n    matcher: matcher(Figma),\n  },\n  {\n    title: \"Framer\",\n    keywords: \"design prototyping\",\n    icon: () => <Img src=\"/images/framer.png\" />,\n    component: Framer,\n    matcher: matcher(Framer),\n  },\n  {\n    title: \"GitHub Gist\",\n    keywords: \"code\",\n    icon: () => <Img src=\"/images/github-gist.png\" />,\n    component: Gist,\n    matcher: matcher(Gist),\n  },\n  {\n    title: \"Google Drawings\",\n    keywords: \"drawings\",\n    icon: () => <Img src=\"/images/google-drawings.png\" />,\n    component: GoogleDrawings,\n    matcher: matcher(GoogleDrawings),\n  },\n  {\n    title: \"Google Drive\",\n    keywords: \"drive\",\n    icon: () => <Img src=\"/images/google-drive.png\" />,\n    component: GoogleDrive,\n    matcher: matcher(GoogleDrive),\n  },\n  {\n    title: \"Google Docs\",\n    icon: () => <Img src=\"/images/google-docs.png\" />,\n    component: GoogleDocs,\n    matcher: matcher(GoogleDocs),\n  },\n  {\n    title: \"Google Sheets\",\n    keywords: \"excel spreadsheet\",\n    icon: () => <Img src=\"/images/google-sheets.png\" />,\n    component: GoogleSheets,\n    matcher: matcher(GoogleSheets),\n  },\n  {\n    title: \"Google Slides\",\n    keywords: \"presentation slideshow\",\n    icon: () => <Img src=\"/images/google-slides.png\" />,\n    component: GoogleSlides,\n    matcher: matcher(GoogleSlides),\n  },\n  {\n    title: \"Google Data Studio\",\n    keywords: \"business intelligence\",\n    icon: () => <Img src=\"/images/google-datastudio.png\" />,\n    component: GoogleDataStudio,\n    matcher: matcher(GoogleDataStudio),\n  },\n  {\n    title: \"InVision\",\n    keywords: \"design prototype\",\n    defaultHidden: true,\n    icon: () => <Img src=\"/images/invision.png\" />,\n    component: InVision,\n    matcher: matcher(InVision),\n  },\n  {\n    title: \"Loom\",\n    keywords: \"video screencast\",\n    icon: () => <Img src=\"/images/loom.png\" />,\n    component: Loom,\n    matcher: matcher(Loom),\n  },\n  {\n    title: \"Lucidchart\",\n    keywords: \"chart\",\n    icon: () => <Img src=\"/images/lucidchart.png\" />,\n    component: Lucidchart,\n    matcher: matcher(Lucidchart),\n  },\n  {\n    title: \"Marvel\",\n    keywords: \"design prototype\",\n    icon: () => <Img src=\"/images/marvel.png\" />,\n    component: Marvel,\n    matcher: matcher(Marvel),\n  },\n  {\n    title: \"Mindmeister\",\n    keywords: \"mindmap\",\n    icon: () => <Img src=\"/images/mindmeister.png\" />,\n    component: Mindmeister,\n    matcher: matcher(Mindmeister),\n  },\n  {\n    title: \"Miro\",\n    keywords: \"whiteboard\",\n    icon: () => <Img src=\"/images/miro.png\" />,\n    component: Miro,\n    matcher: matcher(Miro),\n  },\n  {\n    title: \"Mode\",\n    keywords: \"analytics\",\n    defaultHidden: true,\n    icon: () => <Img src=\"/images/mode-analytics.png\" />,\n    component: ModeAnalytics,\n    matcher: matcher(ModeAnalytics),\n  },\n  {\n    title: \"Prezi\",\n    keywords: \"presentation\",\n    icon: () => <Img src=\"/images/prezi.png\" />,\n    component: Prezi,\n    matcher: matcher(Prezi),\n  },\n  {\n    title: \"Spotify\",\n    keywords: \"music\",\n    icon: () => <Img src=\"/images/spotify.png\" />,\n    component: Spotify,\n    matcher: matcher(Spotify),\n  },\n  {\n    title: \"Trello\",\n    keywords: \"kanban\",\n    icon: () => <Img src=\"/images/trello.png\" />,\n    component: Trello,\n    matcher: matcher(Trello),\n  },\n  {\n    title: \"Typeform\",\n    keywords: \"form survey\",\n    icon: () => <Img src=\"/images/typeform.png\" />,\n    component: Typeform,\n    matcher: matcher(Typeform),\n  },\n  {\n    title: \"Vimeo\",\n    keywords: \"video\",\n    icon: () => <Img src=\"/images/vimeo.png\" />,\n    component: Vimeo,\n    matcher: matcher(Vimeo),\n  },\n  {\n    title: \"YouTube\",\n    keywords: \"google video\",\n    icon: () => <Img src=\"/images/youtube.png\" />,\n    component: YouTube,\n    matcher: matcher(YouTube),\n  },\n];\n","// @flow\nimport { lighten } from \"polished\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { withRouter, type RouterHistory } from \"react-router-dom\";\nimport styled, { withTheme } from \"styled-components\";\nimport { light } from \"shared/theme\";\nimport UiStore from \"stores/UiStore\";\nimport ErrorBoundary from \"components/ErrorBoundary\";\nimport Tooltip from \"components/Tooltip\";\nimport embeds from \"../embeds\";\nimport useMediaQuery from \"hooks/useMediaQuery\";\nimport useToasts from \"hooks/useToasts\";\nimport { type Theme } from \"types\";\nimport { isModKey } from \"utils/keyboard\";\nimport { uploadFile } from \"utils/uploadFile\";\nimport { isInternalUrl } from \"utils/urls\";\n\nconst RichMarkdownEditor = React.lazy(() =>\n  import(/* webpackChunkName: \"rich-markdown-editor\" */ \"rich-markdown-editor\")\n);\n\nconst EMPTY_ARRAY = [];\n\nexport type Props = {|\n  id?: string,\n  value?: string,\n  defaultValue?: string,\n  readOnly?: boolean,\n  grow?: boolean,\n  disableEmbeds?: boolean,\n  ui?: UiStore,\n  shareId?: ?string,\n  autoFocus?: boolean,\n  template?: boolean,\n  placeholder?: string,\n  maxLength?: number,\n  scrollTo?: string,\n  theme?: Theme,\n  handleDOMEvents?: Object,\n  readOnlyWriteCheckboxes?: boolean,\n  onBlur?: (event: SyntheticEvent<>) => any,\n  onFocus?: (event: SyntheticEvent<>) => any,\n  onPublish?: (event: SyntheticEvent<>) => any,\n  onSave?: ({ done?: boolean, autosave?: boolean, publish?: boolean }) => any,\n  onCancel?: () => any,\n  onDoubleClick?: () => any,\n  onChange?: (getValue: () => string) => any,\n  onSearchLink?: (title: string) => any,\n  onHoverLink?: (event: MouseEvent) => any,\n  onCreateLink?: (title: string) => Promise<string>,\n  onImageUploadStart?: () => any,\n  onImageUploadStop?: () => any,\n|};\n\ntype PropsWithRef = Props & {\n  forwardedRef: React.Ref<any>,\n  history: RouterHistory,\n};\n\nfunction Editor(props: PropsWithRef) {\n  const { id, shareId, history } = props;\n  const { t } = useTranslation();\n  const { showToast } = useToasts();\n  const isPrinting = useMediaQuery(\"print\");\n\n  const onUploadImage = React.useCallback(\n    async (file: File) => {\n      const result = await uploadFile(file, { documentId: id });\n      return result.url;\n    },\n    [id]\n  );\n\n  const onClickLink = React.useCallback(\n    (href: string, event: MouseEvent) => {\n      // on page hash\n      if (href[0] === \"#\") {\n        window.location.href = href;\n        return;\n      }\n\n      if (isInternalUrl(href) && !isModKey(event) && !event.shiftKey) {\n        // relative\n        let navigateTo = href;\n\n        // probably absolute\n        if (href[0] !== \"/\") {\n          try {\n            const url = new URL(href);\n            navigateTo = url.pathname + url.hash;\n          } catch (err) {\n            navigateTo = href;\n          }\n        }\n\n        if (shareId) {\n          navigateTo = `/share/${shareId}${navigateTo}`;\n        }\n\n        history.push(navigateTo);\n      } else if (href) {\n        window.open(href, \"_blank\");\n      }\n    },\n    [history, shareId]\n  );\n\n  const onShowToast = React.useCallback(\n    (message: string) => {\n      showToast(message);\n    },\n    [showToast]\n  );\n\n  const dictionary = React.useMemo(() => {\n    return {\n      addColumnAfter: t(\"Insert column after\"),\n      addColumnBefore: t(\"Insert column before\"),\n      addRowAfter: t(\"Insert row after\"),\n      addRowBefore: t(\"Insert row before\"),\n      alignCenter: t(\"Align center\"),\n      alignLeft: t(\"Align left\"),\n      alignRight: t(\"Align right\"),\n      bulletList: t(\"Bulleted list\"),\n      checkboxList: t(\"Todo list\"),\n      codeBlock: t(\"Code block\"),\n      codeCopied: t(\"Copied to clipboard\"),\n      codeInline: t(\"Code\"),\n      createLink: t(\"Create link\"),\n      createLinkError: t(\"Sorry, an error occurred creating the link\"),\n      createNewDoc: t(\"Create a new doc\"),\n      deleteColumn: t(\"Delete column\"),\n      deleteRow: t(\"Delete row\"),\n      deleteTable: t(\"Delete table\"),\n      deleteImage: t(\"Delete image\"),\n      downloadImage: t(\"Download image\"),\n      alignImageLeft: t(\"Float left\"),\n      alignImageRight: t(\"Float right\"),\n      alignImageDefault: t(\"Center large\"),\n      em: t(\"Italic\"),\n      embedInvalidLink: t(\"Sorry, that link won’t work for this embed type\"),\n      findOrCreateDoc: `${t(\"Find or create a doc\")}…`,\n      h1: t(\"Big heading\"),\n      h2: t(\"Medium heading\"),\n      h3: t(\"Small heading\"),\n      heading: t(\"Heading\"),\n      hr: t(\"Divider\"),\n      image: t(\"Image\"),\n      imageUploadError: t(\"Sorry, an error occurred uploading the image\"),\n      imageCaptionPlaceholder: t(\"Write a caption\"),\n      info: t(\"Info\"),\n      infoNotice: t(\"Info notice\"),\n      link: t(\"Link\"),\n      linkCopied: t(\"Link copied to clipboard\"),\n      mark: t(\"Highlight\"),\n      newLineEmpty: `${t(\"Type '/' to insert\")}…`,\n      newLineWithSlash: `${t(\"Keep typing to filter\")}…`,\n      noResults: t(\"No results\"),\n      openLink: t(\"Open link\"),\n      orderedList: t(\"Ordered list\"),\n      pageBreak: t(\"Page break\"),\n      pasteLink: `${t(\"Paste a link\")}…`,\n      pasteLinkWithTitle: (service: string) =>\n        t(\"Paste a {{service}} link…\", { service }),\n      placeholder: t(\"Placeholder\"),\n      quote: t(\"Quote\"),\n      removeLink: t(\"Remove link\"),\n      searchOrPasteLink: `${t(\"Search or paste a link\")}…`,\n      strikethrough: t(\"Strikethrough\"),\n      strong: t(\"Bold\"),\n      subheading: t(\"Subheading\"),\n      table: t(\"Table\"),\n      tip: t(\"Tip\"),\n      tipNotice: t(\"Tip notice\"),\n      warning: t(\"Warning\"),\n      warningNotice: t(\"Warning notice\"),\n    };\n  }, [t]);\n\n  return (\n    <ErrorBoundary reloadOnChunkMissing>\n      <StyledEditor\n        ref={props.forwardedRef}\n        uploadImage={onUploadImage}\n        onClickLink={onClickLink}\n        onShowToast={onShowToast}\n        embeds={props.disableEmbeds ? EMPTY_ARRAY : embeds}\n        tooltip={EditorTooltip}\n        dictionary={dictionary}\n        {...props}\n        theme={isPrinting ? light : props.theme}\n      />\n    </ErrorBoundary>\n  );\n}\n\nconst StyledEditor = styled(RichMarkdownEditor)`\n  flex-grow: ${(props) => (props.grow ? 1 : 0)};\n  justify-content: start;\n\n  > div {\n    background: transparent;\n  }\n\n  & * {\n    box-sizing: content-box;\n  }\n\n  .notice-block.tip,\n  .notice-block.warning {\n    font-weight: 500;\n  }\n\n  .heading-anchor {\n    box-sizing: border-box;\n  }\n\n  .heading-name {\n    pointer-events: none;\n    display: block;\n    position: relative;\n    top: -60px;\n    visibility: hidden;\n  }\n\n  .heading-name:first-child {\n    & + h1,\n    & + h2,\n    & + h3,\n    & + h4 {\n      margin-top: 0;\n    }\n  }\n\n  p {\n    a {\n      color: ${(props) => props.theme.text};\n      border-bottom: 1px solid ${(props) => lighten(0.5, props.theme.text)};\n      text-decoration: none !important;\n      font-weight: 500;\n\n      &:hover {\n        border-bottom: 1px solid ${(props) => props.theme.text};\n        text-decoration: none;\n      }\n    }\n  }\n`;\n\nconst EditorTooltip = ({ children, ...props }) => (\n  <Tooltip offset=\"0, 16\" delay={150} {...props}>\n    <Span>{children}</Span>\n  </Tooltip>\n);\n\nconst Span = styled.span`\n  outline: none;\n`;\n\nconst EditorWithRouterAndTheme = withRouter(withTheme(Editor));\n\nexport default React.forwardRef<Props, typeof Editor>((props, ref) => (\n  <EditorWithRouterAndTheme {...props} forwardedRef={ref} />\n));\n","// @flow\nimport invariant from \"invariant\";\nimport useStores from \"./useStores\";\n\nexport default function useCurrentTeam() {\n  const { auth } = useStores();\n  invariant(auth.team, \"team required\");\n  return auth.team;\n}\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { CollectionIcon } from \"outline-icons\";\nimport { getLuminance } from \"polished\";\nimport * as React from \"react\";\nimport Collection from \"models/Collection\";\nimport { icons } from \"components/IconPicker\";\nimport useStores from \"hooks/useStores\";\n\ntype Props = {\n  collection: Collection,\n  expanded?: boolean,\n  size?: number,\n};\n\nfunction ResolvedCollectionIcon({ collection, expanded, size }: Props) {\n  const { ui } = useStores();\n\n  // If the chosen icon color is very dark then we invert it in dark mode\n  // otherwise it will be impossible to see against the dark background.\n  const color =\n    ui.resolvedTheme === \"dark\" && collection.color !== \"currentColor\"\n      ? getLuminance(collection.color) > 0.12\n        ? collection.color\n        : \"currentColor\"\n      : collection.color;\n\n  if (collection.icon && collection.icon !== \"collection\") {\n    try {\n      const Component = icons[collection.icon].component;\n      return <Component color={color} size={size} />;\n    } catch (error) {\n      console.warn(\"Failed to render custom icon \" + collection.icon);\n    }\n  }\n\n  return <CollectionIcon color={color} expanded={expanded} size={size} />;\n}\n\nexport default observer(ResolvedCollectionIcon);\n","// @flow\nimport * as React from \"react\";\n\nexport default function usePrevious(value: any) {\n  const ref = React.useRef();\n  React.useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n","// @flow\nimport * as React from \"react\";\nimport replace from \"string-replace-to-array\";\nimport styled from \"styled-components\";\n\ntype Props = {\n  highlight: ?string | RegExp,\n  processResult?: (tag: string) => string,\n  text: string,\n  caseSensitive?: boolean,\n};\n\nfunction Highlight({\n  highlight,\n  processResult,\n  caseSensitive,\n  text,\n  ...rest\n}: Props) {\n  let regex;\n  let index = 0;\n  if (highlight instanceof RegExp) {\n    regex = highlight;\n  } else {\n    regex = new RegExp(\n      (highlight || \"\").replace(/[-\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\"),\n      caseSensitive ? \"g\" : \"gi\"\n    );\n  }\n  return (\n    <span {...rest}>\n      {highlight\n        ? replace(text, regex, (tag) => (\n            <Mark key={index++}>\n              {processResult ? processResult(tag) : tag}\n            </Mark>\n          ))\n        : text}\n    </span>\n  );\n}\n\nconst Mark = styled.mark`\n  background: ${(props) => props.theme.searchHighlight};\n  border-radius: 2px;\n  padding: 0 4px;\n`;\n\nexport default Highlight;\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { PlusIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport styled, { css } from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport Document from \"models/Document\";\nimport Badge from \"components/Badge\";\nimport Button from \"components/Button\";\nimport DocumentMeta from \"components/DocumentMeta\";\nimport EventBoundary from \"components/EventBoundary\";\nimport Flex from \"components/Flex\";\nimport Highlight from \"components/Highlight\";\nimport StarButton, { AnimatedStar } from \"components/Star\";\nimport Tooltip from \"components/Tooltip\";\nimport useBoolean from \"hooks/useBoolean\";\nimport useCurrentTeam from \"hooks/useCurrentTeam\";\nimport useCurrentUser from \"hooks/useCurrentUser\";\nimport useStores from \"hooks/useStores\";\nimport DocumentMenu from \"menus/DocumentMenu\";\nimport { newDocumentUrl } from \"utils/routeHelpers\";\n\ntype Props = {|\n  document: Document,\n  highlight?: ?string,\n  context?: ?string,\n  showNestedDocuments?: boolean,\n  showCollection?: boolean,\n  showPublished?: boolean,\n  showPin?: boolean,\n  showDraft?: boolean,\n  showTemplate?: boolean,\n|};\n\nconst SEARCH_RESULT_REGEX = /<b\\b[^>]*>(.*?)<\\/b>/gi;\n\nfunction replaceResultMarks(tag: string) {\n  // don't use SEARCH_RESULT_REGEX here as it causes\n  // an infinite loop to trigger a regex inside it's own callback\n  return tag.replace(/<b\\b[^>]*>(.*?)<\\/b>/gi, \"$1\");\n}\n\nfunction DocumentListItem(props: Props, ref) {\n  const { t } = useTranslation();\n  const { policies } = useStores();\n  const currentUser = useCurrentUser();\n  const currentTeam = useCurrentTeam();\n  const [menuOpen, handleMenuOpen, handleMenuClose] = useBoolean();\n  const {\n    document,\n    showNestedDocuments,\n    showCollection,\n    showPublished,\n    showPin,\n    showDraft = true,\n    showTemplate,\n    highlight,\n    context,\n  } = props;\n\n  const queryIsInTitle =\n    !!highlight &&\n    !!document.title.toLowerCase().includes(highlight.toLowerCase());\n  const canStar =\n    !document.isDraft && !document.isArchived && !document.isTemplate;\n  const can = policies.abilities(currentTeam.id);\n\n  return (\n    <DocumentLink\n      ref={ref}\n      dir={document.dir}\n      $isStarred={document.isStarred}\n      $menuOpen={menuOpen}\n      to={{\n        pathname: document.url,\n        state: { title: document.titleWithDefault },\n      }}\n    >\n      <Content>\n        <Heading dir={document.dir}>\n          <Title\n            text={document.titleWithDefault}\n            highlight={highlight}\n            dir={document.dir}\n          />\n          {document.isNew && document.createdBy.id !== currentUser.id && (\n            <Badge yellow>{t(\"New\")}</Badge>\n          )}\n          {canStar && (\n            <StarPositioner>\n              <StarButton document={document} />\n            </StarPositioner>\n          )}\n          {document.isDraft && showDraft && (\n            <Tooltip\n              tooltip={t(\"Only visible to you\")}\n              delay={500}\n              placement=\"top\"\n            >\n              <Badge>{t(\"Draft\")}</Badge>\n            </Tooltip>\n          )}\n          {document.isTemplate && showTemplate && (\n            <Badge primary>{t(\"Template\")}</Badge>\n          )}\n        </Heading>\n\n        {!queryIsInTitle && (\n          <ResultContext\n            text={context}\n            highlight={highlight ? SEARCH_RESULT_REGEX : undefined}\n            processResult={replaceResultMarks}\n          />\n        )}\n        <DocumentMeta\n          document={document}\n          showCollection={showCollection}\n          showPublished={showPublished}\n          showNestedDocuments={showNestedDocuments}\n          showLastViewed\n        />\n      </Content>\n      <Actions>\n        {document.isTemplate &&\n          !document.isArchived &&\n          !document.isDeleted &&\n          can.createDocument && (\n            <>\n              <Button\n                as={Link}\n                to={newDocumentUrl(document.collectionId, {\n                  templateId: document.id,\n                })}\n                icon={<PlusIcon />}\n                neutral\n              >\n                {t(\"New doc\")}\n              </Button>\n              &nbsp;\n            </>\n          )}\n        <DocumentMenu\n          document={document}\n          showPin={showPin}\n          onOpen={handleMenuOpen}\n          onClose={handleMenuClose}\n          modal={false}\n        />\n      </Actions>\n    </DocumentLink>\n  );\n}\n\nconst Content = styled.div`\n  flex-grow: 1;\n  flex-shrink: 1;\n  min-width: 0;\n`;\n\nconst Actions = styled(EventBoundary)`\n  display: none;\n  align-items: center;\n  margin: 8px;\n  flex-shrink: 0;\n  flex-grow: 0;\n\n  ${breakpoint(\"tablet\")`\n    display: flex;\n  `};\n`;\n\nconst DocumentLink = styled(Link)`\n  display: flex;\n  align-items: center;\n  margin: 10px -8px;\n  padding: 6px 8px;\n  border-radius: 8px;\n  max-height: 50vh;\n  width: calc(100vw - 8px);\n\n  ${breakpoint(\"tablet\")`\n    width: auto;\n  `};\n\n  ${Actions} {\n    opacity: 0;\n  }\n\n  ${AnimatedStar} {\n    opacity: ${(props) => (props.$isStarred ? \"1 !important\" : 0)};\n  }\n\n  &:hover,\n  &:active,\n  &:focus,\n  &:focus-within {\n    background: ${(props) => props.theme.listItemHoverBackground};\n\n    ${Actions} {\n      opacity: 1;\n    }\n\n    ${AnimatedStar} {\n      opacity: 0.5;\n\n      &:hover {\n        opacity: 1;\n      }\n    }\n  }\n\n  ${(props) =>\n    props.$menuOpen &&\n    css`\n      background: ${(props) => props.theme.listItemHoverBackground};\n\n      ${Actions} {\n        opacity: 1;\n      }\n\n      ${AnimatedStar} {\n        opacity: 0.5;\n      }\n    `}\n`;\n\nconst Heading = styled.h3`\n  display: flex;\n  justify-content: ${(props) => (props.rtl ? \"flex-end\" : \"flex-start\")};\n  align-items: center;\n  height: 24px;\n  margin-top: 0;\n  margin-bottom: 0.25em;\n  overflow: hidden;\n  white-space: nowrap;\n  color: ${(props) => props.theme.text};\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\n    Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\n`;\n\nconst StarPositioner = styled(Flex)`\n  margin-left: 4px;\n  align-items: center;\n`;\n\nconst Title = styled(Highlight)`\n  max-width: 90%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst ResultContext = styled(Highlight)`\n  display: block;\n  color: ${(props) => props.theme.textTertiary};\n  font-size: 14px;\n  margin-top: -0.25em;\n  margin-bottom: 0.25em;\n`;\n\nexport default observer(React.forwardRef(DocumentListItem));\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport Document from \"models/Document.js\";\nimport Button from \"components/Button\";\nimport Flex from \"components/Flex\";\nimport HelpText from \"components/HelpText\";\nimport useStores from \"hooks/useStores\";\nimport useToasts from \"hooks/useToasts\";\n\ntype Props = {|\n  document: Document,\n  onSubmit: () => void,\n|};\n\nfunction DocumentPermanentDelete({ document, onSubmit }: Props) {\n  const [isDeleting, setIsDeleting] = React.useState(false);\n  const { t } = useTranslation();\n  const { documents } = useStores();\n  const { showToast } = useToasts();\n  const history = useHistory();\n\n  const handleSubmit = React.useCallback(\n    async (ev: SyntheticEvent<>) => {\n      ev.preventDefault();\n      try {\n        setIsDeleting(true);\n        await documents.delete(document, { permanent: true });\n        showToast(t(\"Document permanently deleted\"), { type: \"success\" });\n        onSubmit();\n        history.push(\"/trash\");\n      } catch (err) {\n        showToast(err.message, { type: \"error\" });\n      } finally {\n        setIsDeleting(false);\n      }\n    },\n    [document, onSubmit, showToast, t, history, documents]\n  );\n\n  return (\n    <Flex column>\n      <form onSubmit={handleSubmit}>\n        <HelpText>\n          <Trans\n            defaults=\"Are you sure you want to permanently delete the <em>{{ documentTitle }}</em> document? This action is immediate and cannot be undone.\"\n            values={{ documentTitle: document.titleWithDefault }}\n            components={{ em: <strong /> }}\n          />\n        </HelpText>\n        <Button type=\"submit\" danger>\n          {isDeleting ? `${t(\"Deleting\")}…` : t(\"I’m sure – Delete\")}\n        </Button>\n      </form>\n    </Flex>\n  );\n}\n\nexport default observer(DocumentPermanentDelete);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useState } from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport Document from \"models/Document\";\nimport Button from \"components/Button\";\nimport Flex from \"components/Flex\";\nimport HelpText from \"components/HelpText\";\nimport useToasts from \"hooks/useToasts\";\nimport { documentUrl } from \"utils/routeHelpers\";\n\ntype Props = {\n  document: Document,\n  onSubmit: () => void,\n};\n\nfunction DocumentTemplatize({ document, onSubmit }: Props) {\n  const [isSaving, setIsSaving] = useState();\n  const history = useHistory();\n  const { showToast } = useToasts();\n  const { t } = useTranslation();\n\n  const handleSubmit = React.useCallback(\n    async (ev: SyntheticEvent<>) => {\n      ev.preventDefault();\n      setIsSaving(true);\n\n      try {\n        const template = await document.templatize();\n        history.push(documentUrl(template));\n        showToast(t(\"Template created, go ahead and customize it\"), {\n          type: \"info\",\n        });\n        onSubmit();\n      } catch (err) {\n        showToast(err.message, { type: \"error\" });\n      } finally {\n        setIsSaving(false);\n      }\n    },\n    [document, showToast, history, onSubmit, t]\n  );\n\n  return (\n    <Flex column>\n      <form onSubmit={handleSubmit}>\n        <HelpText>\n          <Trans\n            defaults=\"Creating a template from <em>{{titleWithDefault}}</em> is a non-destructive action – we'll make a copy of the document and turn it into a template that can be used as a starting point for new documents.\"\n            values={{ titleWithDefault: document.titleWithDefault }}\n            components={{ em: <strong /> }}\n          />\n        </HelpText>\n        <Button type=\"submit\">\n          {isSaving ? `${t(\"Creating\")}…` : t(\"Create template\")}\n        </Button>\n      </form>\n    </Flex>\n  );\n}\n\nexport default observer(DocumentTemplatize);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport { useMenuState, MenuButton } from \"reakit/Menu\";\nimport { VisuallyHidden } from \"reakit/VisuallyHidden\";\nimport styled from \"styled-components\";\nimport Document from \"models/Document\";\nimport DocumentDelete from \"scenes/DocumentDelete\";\nimport DocumentMove from \"scenes/DocumentMove\";\nimport DocumentPermanentDelete from \"scenes/DocumentPermanentDelete\";\nimport DocumentTemplatize from \"scenes/DocumentTemplatize\";\nimport CollectionIcon from \"components/CollectionIcon\";\nimport ContextMenu from \"components/ContextMenu\";\nimport OverflowMenuButton from \"components/ContextMenu/OverflowMenuButton\";\nimport Template from \"components/ContextMenu/Template\";\nimport Flex from \"components/Flex\";\nimport Modal from \"components/Modal\";\nimport useStores from \"hooks/useStores\";\nimport useToasts from \"hooks/useToasts\";\nimport getDataTransferFiles from \"utils/getDataTransferFiles\";\nimport {\n  documentHistoryUrl,\n  documentUrl,\n  editDocumentUrl,\n  newDocumentUrl,\n} from \"utils/routeHelpers\";\n\ntype Props = {|\n  document: Document,\n  className: string,\n  isRevision?: boolean,\n  showPrint?: boolean,\n  modal?: boolean,\n  showToggleEmbeds?: boolean,\n  showPin?: boolean,\n  label?: (any) => React.Node,\n  onOpen?: () => void,\n  onClose?: () => void,\n|};\n\nfunction DocumentMenu({\n  document,\n  isRevision,\n  className,\n  modal = true,\n  showToggleEmbeds,\n  showPrint,\n  showPin,\n  label,\n  onOpen,\n  onClose,\n}: Props) {\n  const { policies, collections, documents } = useStores();\n  const { showToast } = useToasts();\n  const menu = useMenuState({\n    modal,\n    unstable_preventOverflow: true,\n    unstable_fixed: true,\n    unstable_flip: true,\n  });\n  const history = useHistory();\n  const { t } = useTranslation();\n  const [renderModals, setRenderModals] = React.useState(false);\n  const [showDeleteModal, setShowDeleteModal] = React.useState(false);\n  const [\n    showPermanentDeleteModal,\n    setShowPermanentDeleteModal,\n  ] = React.useState(false);\n  const [showMoveModal, setShowMoveModal] = React.useState(false);\n  const [showTemplateModal, setShowTemplateModal] = React.useState(false);\n  const file = React.useRef<?HTMLInputElement>();\n\n  const handleOpen = React.useCallback(() => {\n    setRenderModals(true);\n    if (onOpen) {\n      onOpen();\n    }\n  }, [onOpen]);\n\n  const handleDuplicate = React.useCallback(\n    async (ev: SyntheticEvent<>) => {\n      const duped = await document.duplicate();\n\n      // when duplicating, go straight to the duplicated document content\n      history.push(duped.url);\n      showToast(t(\"Document duplicated\"), { type: \"success\" });\n    },\n    [t, history, showToast, document]\n  );\n\n  const handleArchive = React.useCallback(\n    async (ev: SyntheticEvent<>) => {\n      await document.archive();\n      showToast(t(\"Document archived\"), { type: \"success\" });\n    },\n    [showToast, t, document]\n  );\n\n  const handleRestore = React.useCallback(\n    async (ev: SyntheticEvent<>, options?: { collectionId: string }) => {\n      await document.restore(options);\n      showToast(t(\"Document restored\"), { type: \"success\" });\n    },\n    [showToast, t, document]\n  );\n\n  const handleUnpublish = React.useCallback(\n    async (ev: SyntheticEvent<>) => {\n      await document.unpublish();\n      showToast(t(\"Document unpublished\"), { type: \"success\" });\n    },\n    [showToast, t, document]\n  );\n\n  const handlePrint = React.useCallback((ev: SyntheticEvent<>) => {\n    window.print();\n  }, []);\n\n  const handleStar = React.useCallback(\n    (ev: SyntheticEvent<>) => {\n      ev.preventDefault();\n      ev.stopPropagation();\n      document.star();\n    },\n    [document]\n  );\n\n  const handleUnstar = React.useCallback(\n    (ev: SyntheticEvent<>) => {\n      ev.preventDefault();\n      ev.stopPropagation();\n      document.unstar();\n    },\n    [document]\n  );\n\n  const collection = collections.get(document.collectionId);\n  const can = policies.abilities(document.id);\n  const canViewHistory = can.read && !can.restore;\n\n  const stopPropagation = React.useCallback((ev: SyntheticEvent<>) => {\n    ev.stopPropagation();\n  }, []);\n\n  const handleImportDocument = React.useCallback(\n    (ev: SyntheticEvent<>) => {\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      // simulate a click on the file upload input element\n      if (file.current) {\n        file.current.click();\n      }\n    },\n    [file]\n  );\n\n  const handleFilePicked = React.useCallback(\n    async (ev: SyntheticEvent<>) => {\n      const files = getDataTransferFiles(ev);\n\n      // Because this is the onChange handler it's possible for the change to be\n      // from previously selecting a file to not selecting a file – aka empty\n      if (!files.length) {\n        return;\n      }\n\n      if (!collection) {\n        return;\n      }\n\n      try {\n        const file = files[0];\n        const importedDocument = await documents.import(\n          file,\n          document.id,\n          collection.id,\n          {\n            publish: true,\n          }\n        );\n        history.push(importedDocument.url);\n      } catch (err) {\n        showToast(err.message, {\n          type: \"error\",\n        });\n\n        throw err;\n      }\n    },\n    [history, showToast, collection, documents, document.id]\n  );\n\n  return (\n    <>\n      <VisuallyHidden>\n        <input\n          type=\"file\"\n          ref={file}\n          onChange={handleFilePicked}\n          onClick={stopPropagation}\n          accept={documents.importFileTypes.join(\", \")}\n          tabIndex=\"-1\"\n        />\n      </VisuallyHidden>\n      {label ? (\n        <MenuButton {...menu}>{label}</MenuButton>\n      ) : (\n        <OverflowMenuButton\n          className={className}\n          aria-label={t(\"Show menu\")}\n          {...menu}\n        />\n      )}\n      <ContextMenu\n        {...menu}\n        aria-label={t(\"Document options\")}\n        onOpen={handleOpen}\n        onClose={onClose}\n      >\n        <Template\n          {...menu}\n          items={[\n            {\n              title: t(\"Restore\"),\n              visible: (!!collection && can.restore) || can.unarchive,\n              onClick: handleRestore,\n            },\n            {\n              title: t(\"Restore\"),\n              visible: !collection && !!can.restore,\n              style: {\n                left: -170,\n                position: \"relative\",\n                top: -40,\n              },\n              hover: true,\n              items: [\n                {\n                  type: \"heading\",\n                  title: t(\"Choose a collection\"),\n                },\n                ...collections.orderedData.map((collection) => {\n                  const can = policies.abilities(collection.id);\n\n                  return {\n                    title: (\n                      <Flex align=\"center\">\n                        <CollectionIcon collection={collection} />\n                        <CollectionName>{collection.name}</CollectionName>\n                      </Flex>\n                    ),\n                    onClick: (ev) =>\n                      handleRestore(ev, { collectionId: collection.id }),\n                    disabled: !can.update,\n                  };\n                }),\n              ],\n            },\n            {\n              title: t(\"Unpin\"),\n              onClick: document.unpin,\n              visible: !!(showPin && document.pinned && can.unpin),\n            },\n            {\n              title: t(\"Pin to collection\"),\n              onClick: document.pin,\n              visible: !!(showPin && !document.pinned && can.pin),\n            },\n            {\n              title: t(\"Unstar\"),\n              onClick: handleUnstar,\n              visible: document.isStarred && !!can.unstar,\n            },\n            {\n              title: t(\"Star\"),\n              onClick: handleStar,\n              visible: !document.isStarred && !!can.star,\n            },\n            {\n              title: t(\"Enable embeds\"),\n              onClick: document.enableEmbeds,\n              visible: !!showToggleEmbeds && document.embedsDisabled,\n            },\n            {\n              title: t(\"Disable embeds\"),\n              onClick: document.disableEmbeds,\n              visible: !!showToggleEmbeds && !document.embedsDisabled,\n            },\n            {\n              type: \"separator\",\n            },\n            {\n              title: t(\"New nested document\"),\n              to: newDocumentUrl(document.collectionId, {\n                parentDocumentId: document.id,\n              }),\n              visible: !!can.createChildDocument,\n            },\n            {\n              title: t(\"Import document\"),\n              visible: can.createChildDocument,\n              onClick: handleImportDocument,\n            },\n            {\n              title: `${t(\"Create template\")}…`,\n              onClick: () => setShowTemplateModal(true),\n              visible: !!can.update && !document.isTemplate,\n            },\n            {\n              title: t(\"Edit\"),\n              to: editDocumentUrl(document),\n              visible: !!can.update,\n            },\n            {\n              title: t(\"Duplicate\"),\n              onClick: handleDuplicate,\n              visible: !!can.update,\n            },\n            {\n              title: t(\"Unpublish\"),\n              onClick: handleUnpublish,\n              visible: !!can.unpublish,\n            },\n            {\n              title: t(\"Archive\"),\n              onClick: handleArchive,\n              visible: !!can.archive,\n            },\n            {\n              title: `${t(\"Delete\")}…`,\n              onClick: () => setShowDeleteModal(true),\n              visible: !!can.delete,\n            },\n            {\n              title: `${t(\"Permanently delete\")}…`,\n              onClick: () => setShowPermanentDeleteModal(true),\n              visible: can.permanentDelete,\n            },\n            {\n              title: `${t(\"Move\")}…`,\n              onClick: () => setShowMoveModal(true),\n              visible: !!can.move,\n            },\n            {\n              type: \"separator\",\n            },\n            {\n              title: t(\"History\"),\n              to: isRevision\n                ? documentUrl(document)\n                : documentHistoryUrl(document),\n              visible: canViewHistory,\n            },\n            {\n              title: t(\"Download\"),\n              onClick: document.download,\n              visible: !!can.download,\n            },\n            {\n              title: t(\"Print\"),\n              onClick: handlePrint,\n              visible: !!showPrint,\n            },\n          ]}\n        />\n      </ContextMenu>\n      {renderModals && (\n        <>\n          {can.move && (\n            <Modal\n              title={t(\"Move {{ documentName }}\", {\n                documentName: document.noun,\n              })}\n              onRequestClose={() => setShowMoveModal(false)}\n              isOpen={showMoveModal}\n            >\n              <DocumentMove\n                document={document}\n                onRequestClose={() => setShowMoveModal(false)}\n              />\n            </Modal>\n          )}\n          {can.delete && (\n            <Modal\n              title={t(\"Delete {{ documentName }}\", {\n                documentName: document.noun,\n              })}\n              onRequestClose={() => setShowDeleteModal(false)}\n              isOpen={showDeleteModal}\n            >\n              <DocumentDelete\n                document={document}\n                onSubmit={() => setShowDeleteModal(false)}\n              />\n            </Modal>\n          )}\n          {can.permanentDelete && (\n            <Modal\n              title={t(\"Permanently delete {{ documentName }}\", {\n                documentName: document.noun,\n              })}\n              onRequestClose={() => setShowPermanentDeleteModal(false)}\n              isOpen={showPermanentDeleteModal}\n            >\n              <DocumentPermanentDelete\n                document={document}\n                onSubmit={() => setShowPermanentDeleteModal(false)}\n              />\n            </Modal>\n          )}\n          {can.update && (\n            <Modal\n              title={t(\"Create template\")}\n              onRequestClose={() => setShowTemplateModal(false)}\n              isOpen={showTemplateModal}\n            >\n              <DocumentTemplatize\n                document={document}\n                onSubmit={() => setShowTemplateModal(false)}\n              />\n            </Modal>\n          )}\n        </>\n      )}\n    </>\n  );\n}\n\nconst CollectionName = styled.div`\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n`;\n\nexport default observer(DocumentMenu);\n","// @flow\nimport { SearchIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useTheme } from \"styled-components\";\nimport Input, { type Props as InputProps } from \"./Input\";\n\ntype Props = {|\n  ...InputProps,\n  placeholder?: string,\n  value?: string,\n  onChange: (event: SyntheticInputEvent<>) => mixed,\n  onKeyDown?: (event: SyntheticKeyboardEvent<HTMLInputElement>) => mixed,\n|};\n\nexport default function InputSearch(props: Props) {\n  const { t } = useTranslation();\n  const theme = useTheme();\n  const [isFocused, setIsFocused] = React.useState(false);\n\n  const handleFocus = React.useCallback(() => {\n    setIsFocused(true);\n  }, []);\n\n  const handleBlur = React.useCallback(() => {\n    setIsFocused(false);\n  }, []);\n\n  const { placeholder = `${t(\"Search\")}…`, onKeyDown, ...rest } = props;\n\n  return (\n    <Input\n      type=\"search\"\n      placeholder={placeholder}\n      icon={\n        <SearchIcon\n          color={isFocused ? theme.inputBorderFocused : theme.inputBorder}\n        />\n      }\n      onKeyDown={onKeyDown}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      margin={0}\n      labelHidden\n      {...rest}\n    />\n  );\n}\n","// @flow\nimport { observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport { OpenIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport Flex from \"components/Flex\";\n\n// This wrapper allows us to pass non-standard HTML attributes through to the DOM element\n// https://www.styled-components.com/docs/basics#passed-props\nconst Iframe = (props) => <iframe title=\"Embed\" {...props} />;\n\nconst StyledIframe = styled(Iframe)`\n  border-radius: ${(props) => (props.$withBar ? \"3px 3px 0 0\" : \"3px\")};\n  display: block;\n`;\n\ntype Props = {\n  src?: string,\n  border?: boolean,\n  title?: string,\n  icon?: React.Node,\n  canonicalUrl?: string,\n  isSelected?: boolean,\n  width?: string,\n  height?: string,\n};\n\ntype PropsWithRef = Props & {\n  forwardedRef: React.Ref<typeof StyledIframe>,\n};\n\n@observer\nclass Frame extends React.Component<PropsWithRef> {\n  mounted: boolean;\n  @observable isLoaded: boolean = false;\n\n  componentDidMount() {\n    this.mounted = true;\n    setImmediate(this.loadIframe);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadIframe = () => {\n    if (!this.mounted) return;\n    this.isLoaded = true;\n  };\n\n  render() {\n    const {\n      border,\n      width = \"100%\",\n      height = \"400px\",\n      forwardedRef,\n      icon,\n      title,\n      canonicalUrl,\n      isSelected,\n      src,\n    } = this.props;\n    const Component = border ? StyledIframe : \"iframe\";\n    const withBar = !!(icon || canonicalUrl);\n\n    return (\n      <Rounded\n        width={width}\n        height={height}\n        $withBar={withBar}\n        className={isSelected ? \"ProseMirror-selectednode\" : \"\"}\n      >\n        {this.isLoaded && (\n          <Component\n            ref={forwardedRef}\n            $withBar={withBar}\n            sandbox=\"allow-same-origin allow-scripts allow-popups allow-forms\"\n            width={width}\n            height={height}\n            type=\"text/html\"\n            frameBorder=\"0\"\n            title=\"embed\"\n            loading=\"lazy\"\n            src={src}\n            allowFullScreen\n          />\n        )}\n        {withBar && (\n          <Bar align=\"center\">\n            {icon} <Title>{title}</Title>\n            {canonicalUrl && (\n              <Open\n                href={canonicalUrl}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <OpenIcon color=\"currentColor\" size={18} /> Open\n              </Open>\n            )}\n          </Bar>\n        )}\n      </Rounded>\n    );\n  }\n}\n\nconst Rounded = styled.div`\n  border: 1px solid ${(props) => props.theme.embedBorder};\n  border-radius: 6px;\n  overflow: hidden;\n  width: ${(props) => props.width};\n  height: ${(props) => (props.$withBar ? props.height + 28 : props.height)};\n`;\n\nconst Open = styled.a`\n  color: ${(props) => props.theme.textSecondary} !important;\n  font-size: 13px;\n  font-weight: 500;\n  align-items: center;\n  display: flex;\n  position: absolute;\n  right: 0;\n  padding: 0 8px;\n`;\n\nconst Title = styled.span`\n  font-size: 13px;\n  font-weight: 500;\n  padding-left: 4px;\n`;\n\nconst Bar = styled(Flex)`\n  border-top: 1px solid ${(props) => props.theme.embedBorder};\n  background: ${(props) => props.theme.secondaryBackground};\n  color: ${(props) => props.theme.textSecondary};\n  padding: 0 8px;\n  border-bottom-left-radius: 6px;\n  border-bottom-right-radius: 6px;\n  user-select: none;\n`;\n\nexport default React.forwardRef<Props, typeof Frame>((props, ref) => (\n  <Frame {...props} forwardedRef={ref} />\n));\n","// @flow\nimport useStores from \"./useStores\";\n\nexport default function useToasts() {\n  const { toasts } = useStores();\n\n  return { showToast: toasts.showToast, hideToast: toasts.hideToast };\n}\n","// @flow\nimport {\n  CollectionIcon,\n  CoinsIcon,\n  AcademicCapIcon,\n  BeakerIcon,\n  BuildingBlocksIcon,\n  CloudIcon,\n  CodeIcon,\n  EditIcon,\n  EyeIcon,\n  LeafIcon,\n  LightBulbIcon,\n  MoonIcon,\n  NotepadIcon,\n  PadlockIcon,\n  PaletteIcon,\n  QuestionMarkIcon,\n  SunIcon,\n  VehicleIcon,\n} from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useMenuState, MenuButton, MenuItem } from \"reakit/Menu\";\nimport styled from \"styled-components\";\nimport ContextMenu from \"components/ContextMenu\";\nimport Flex from \"components/Flex\";\nimport HelpText from \"components/HelpText\";\nimport { LabelText } from \"components/Input\";\nimport NudeButton from \"components/NudeButton\";\n\nconst style = { width: 30, height: 30 };\n\nconst TwitterPicker = React.lazy(() =>\n  import(\n    /* webpackChunkName: \"twitter-picker\" */\n    \"react-color/lib/components/twitter/Twitter\"\n  )\n);\n\nexport const icons = {\n  collection: {\n    component: CollectionIcon,\n    keywords: \"collection\",\n  },\n  coins: {\n    component: CoinsIcon,\n    keywords: \"coins money finance sales income revenue cash\",\n  },\n  academicCap: {\n    component: AcademicCapIcon,\n    keywords: \"learn teach lesson guide tutorial onboarding training\",\n  },\n  beaker: {\n    component: BeakerIcon,\n    keywords: \"lab research experiment test\",\n  },\n  buildingBlocks: {\n    component: BuildingBlocksIcon,\n    keywords: \"app blocks product prototype\",\n  },\n  cloud: {\n    component: CloudIcon,\n    keywords: \"cloud service aws infrastructure\",\n  },\n  code: {\n    component: CodeIcon,\n    keywords: \"developer api code development engineering programming\",\n  },\n  eye: {\n    component: EyeIcon,\n    keywords: \"eye view\",\n  },\n  leaf: {\n    component: LeafIcon,\n    keywords: \"leaf plant outdoors nature ecosystem climate\",\n  },\n  lightbulb: {\n    component: LightBulbIcon,\n    keywords: \"lightbulb idea\",\n  },\n  moon: {\n    component: MoonIcon,\n    keywords: \"night moon dark\",\n  },\n  notepad: {\n    component: NotepadIcon,\n    keywords: \"journal notepad write notes\",\n  },\n  padlock: {\n    component: PadlockIcon,\n    keywords: \"padlock private security authentication authorization auth\",\n  },\n  palette: {\n    component: PaletteIcon,\n    keywords: \"design palette art brand\",\n  },\n  pencil: {\n    component: EditIcon,\n    keywords: \"copy writing post blog\",\n  },\n  question: {\n    component: QuestionMarkIcon,\n    keywords: \"question help support faq\",\n  },\n  sun: {\n    component: SunIcon,\n    keywords: \"day sun weather\",\n  },\n  vehicle: {\n    component: VehicleIcon,\n    keywords: \"truck car travel transport\",\n  },\n};\n\nconst colors = [\n  \"#4E5C6E\",\n  \"#0366d6\",\n  \"#9E5CF7\",\n  \"#FF825C\",\n  \"#FF5C80\",\n  \"#FFBE0B\",\n  \"#42DED1\",\n  \"#00D084\",\n  \"#FF4DFA\",\n  \"#2F362F\",\n];\n\ntype Props = {|\n  onOpen?: () => void,\n  onChange: (color: string, icon: string) => void,\n  icon: string,\n  color: string,\n|};\n\nfunction IconPicker({ onOpen, icon, color, onChange }: Props) {\n  const { t } = useTranslation();\n  const menu = useMenuState({\n    modal: true,\n    placement: \"bottom-end\",\n  });\n  const Component = icons[icon || \"collection\"].component;\n\n  return (\n    <Wrapper>\n      <Label>\n        <LabelText>{t(\"Icon\")}</LabelText>\n      </Label>\n      <MenuButton {...menu}>\n        {(props) => (\n          <Button aria-label={t(\"Show menu\")} {...props}>\n            <Component color={color} size={30} />\n          </Button>\n        )}\n      </MenuButton>\n      <ContextMenu {...menu} onOpen={onOpen} aria-label={t(\"Choose icon\")}>\n        <Icons>\n          {Object.keys(icons).map((name) => {\n            const Component = icons[name].component;\n            return (\n              <MenuItem\n                key={name}\n                onClick={() => onChange(color, name)}\n                {...menu}\n              >\n                {(props) => (\n                  <IconButton style={style} {...props}>\n                    <Component color={color} size={30} />\n                  </IconButton>\n                )}\n              </MenuItem>\n            );\n          })}\n        </Icons>\n        <Flex>\n          <React.Suspense fallback={<Loading>{t(\"Loading\")}…</Loading>}>\n            <ColorPicker\n              color={color}\n              onChange={(color) => onChange(color.hex, icon)}\n              colors={colors}\n              triangle=\"hide\"\n            />\n          </React.Suspense>\n        </Flex>\n      </ContextMenu>\n    </Wrapper>\n  );\n}\n\nconst Label = styled.label`\n  display: block;\n`;\n\nconst Icons = styled.div`\n  padding: 15px 9px 9px 15px;\n  width: 276px;\n`;\n\nconst Button = styled(NudeButton)`\n  border: 1px solid ${(props) => props.theme.inputBorder};\n  width: 32px;\n  height: 32px;\n`;\n\nconst IconButton = styled(NudeButton)`\n  border-radius: 4px;\n  margin: 0px 6px 6px 0px;\n  width: 30px;\n  height: 30px;\n`;\n\nconst Loading = styled(HelpText)`\n  padding: 16px;\n`;\n\nconst ColorPicker = styled(TwitterPicker)`\n  box-shadow: none !important;\n  background: transparent !important;\n`;\n\nconst Wrapper = styled(\"div\")`\n  display: inline-block;\n  position: relative;\n`;\n\nexport default IconPicker;\n","// @flow\nimport { observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { VisuallyHidden } from \"reakit/VisuallyHidden\";\nimport styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport Flex from \"components/Flex\";\n\nconst RealTextarea = styled.textarea`\n  border: 0;\n  flex: 1;\n  padding: 8px 12px 8px ${(props) => (props.hasIcon ? \"8px\" : \"12px\")};\n  outline: none;\n  background: none;\n  color: ${(props) => props.theme.text};\n\n  &:disabled,\n  &::placeholder {\n    color: ${(props) => props.theme.placeholder};\n  }\n`;\n\nconst RealInput = styled.input`\n  border: 0;\n  flex: 1;\n  padding: 8px 12px 8px ${(props) => (props.hasIcon ? \"8px\" : \"12px\")};\n  outline: none;\n  background: none;\n  color: ${(props) => props.theme.text};\n  height: 30px;\n  min-width: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  &:disabled,\n  &::placeholder {\n    color: ${(props) => props.theme.placeholder};\n  }\n\n  &::-webkit-search-cancel-button {\n    -webkit-appearance: none;\n  }\n\n  ${breakpoint(\"mobile\", \"tablet\")`\n    font-size: 16px;\n  `};\n`;\n\nconst Wrapper = styled.div`\n  flex: ${(props) => (props.flex ? \"1\" : \"0\")};\n  width: ${(props) => (props.short ? \"49%\" : \"auto\")};\n  max-width: ${(props) => (props.short ? \"350px\" : \"100%\")};\n  min-height: ${({ minHeight }) => (minHeight ? `${minHeight}px` : \"0\")};\n  max-height: ${({ maxHeight }) => (maxHeight ? `${maxHeight}px` : \"initial\")};\n`;\n\nconst IconWrapper = styled.span`\n  position: relative;\n  left: 4px;\n  width: 24px;\n  height: 24px;\n`;\n\nexport const Outline = styled(Flex)`\n  flex: 1;\n  margin: ${(props) =>\n    props.margin !== undefined ? props.margin : \"0 0 16px\"};\n  color: inherit;\n  border-width: 1px;\n  border-style: solid;\n  border-color: ${(props) =>\n    props.hasError\n      ? props.theme.danger\n      : props.focused\n      ? props.theme.inputBorderFocused\n      : props.theme.inputBorder};\n  border-radius: 4px;\n  font-weight: normal;\n  align-items: center;\n  overflow: hidden;\n`;\n\nexport const LabelText = styled.div`\n  font-weight: 500;\n  padding-bottom: 4px;\n  display: inline-block;\n`;\n\nexport type Props = {|\n  type?: \"text\" | \"email\" | \"checkbox\" | \"search\" | \"textarea\",\n  value?: string,\n  label?: string,\n  className?: string,\n  labelHidden?: boolean,\n  flex?: boolean,\n  short?: boolean,\n  margin?: string | number,\n  icon?: React.Node,\n  name?: string,\n  minLength?: number,\n  maxLength?: number,\n  autoFocus?: boolean,\n  autoComplete?: boolean | string,\n  readOnly?: boolean,\n  required?: boolean,\n  disabled?: boolean,\n  placeholder?: string,\n  onChange?: (\n    ev: SyntheticInputEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => mixed,\n  onKeyDown?: (ev: SyntheticKeyboardEvent<HTMLInputElement>) => mixed,\n  onFocus?: (ev: SyntheticEvent<>) => mixed,\n  onBlur?: (ev: SyntheticEvent<>) => mixed,\n|};\n\n@observer\nclass Input extends React.Component<Props> {\n  input: ?HTMLInputElement;\n  @observable focused: boolean = false;\n\n  handleBlur = (ev: SyntheticEvent<>) => {\n    this.focused = false;\n    if (this.props.onBlur) {\n      this.props.onBlur(ev);\n    }\n  };\n\n  handleFocus = (ev: SyntheticEvent<>) => {\n    this.focused = true;\n    if (this.props.onFocus) {\n      this.props.onFocus(ev);\n    }\n  };\n\n  focus() {\n    if (this.input) {\n      this.input.focus();\n    }\n  }\n\n  render() {\n    const {\n      type = \"text\",\n      icon,\n      label,\n      margin,\n      className,\n      short,\n      flex,\n      labelHidden,\n      onFocus,\n      onBlur,\n      ...rest\n    } = this.props;\n\n    const InputComponent = type === \"textarea\" ? RealTextarea : RealInput;\n    const wrappedLabel = <LabelText>{label}</LabelText>;\n\n    return (\n      <Wrapper className={className} short={short} flex={flex}>\n        <label>\n          {label &&\n            (labelHidden ? (\n              <VisuallyHidden>{wrappedLabel}</VisuallyHidden>\n            ) : (\n              wrappedLabel\n            ))}\n          <Outline focused={this.focused} margin={margin}>\n            {icon && <IconWrapper>{icon}</IconWrapper>}\n            <InputComponent\n              ref={(ref) => (this.input = ref)}\n              onBlur={this.handleBlur}\n              onFocus={this.handleFocus}\n              type={type === \"textarea\" ? undefined : type}\n              hasIcon={!!icon}\n              {...rest}\n            />\n          </Outline>\n        </label>\n      </Wrapper>\n    );\n  }\n}\n\nexport default Input;\n","// @flow\nimport { StarredIcon, UnstarredIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport Document from \"models/Document\";\nimport NudeButton from \"./NudeButton\";\n\ntype Props = {|\n  document: Document,\n  size?: number,\n|};\n\nfunction Star({ size, document, ...rest }: Props) {\n  const { t } = useTranslation();\n  const handleClick = React.useCallback(\n    (ev: SyntheticEvent<>) => {\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      if (document.isStarred) {\n        document.unstar();\n      } else {\n        document.star();\n      }\n    },\n    [document]\n  );\n\n  if (!document) {\n    return null;\n  }\n\n  return (\n    <Button\n      onClick={handleClick}\n      size={size}\n      aria-label={document.isStarred ? t(\"Unstar\") : t(\"Star\")}\n      {...rest}\n    >\n      {document.isStarred ? (\n        <AnimatedStar size={size} color=\"currentColor\" />\n      ) : (\n        <AnimatedStar size={size} color=\"currentColor\" as={UnstarredIcon} />\n      )}\n    </Button>\n  );\n}\n\nconst Button = styled(NudeButton)`\n  color: ${(props) => props.theme.text};\n`;\n\nexport const AnimatedStar = styled(StarredIcon)`\n  flex-shrink: 0;\n  transition: all 100ms ease-in-out;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n  &:active {\n    transform: scale(0.95);\n  }\n\n  @media print {\n    display: none;\n  }\n`;\n\nexport default Star;\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport useWindowSize from \"hooks/useWindowSize\";\n\ntype Props = {|\n  shadow?: boolean,\n  topShadow?: boolean,\n  bottomShadow?: boolean,\n  flex?: boolean,\n|};\n\nfunction Scrollable({ shadow, topShadow, bottomShadow, flex, ...rest }: Props) {\n  const ref = React.useRef<?HTMLDivElement>();\n  const [topShadowVisible, setTopShadow] = React.useState(false);\n  const [bottomShadowVisible, setBottomShadow] = React.useState(false);\n  const { height } = useWindowSize();\n\n  const updateShadows = React.useCallback(() => {\n    const c = ref.current;\n    if (!c) return;\n\n    const scrollTop = c.scrollTop;\n    const tsv = !!((shadow || topShadow) && scrollTop > 0);\n    if (tsv !== topShadowVisible) {\n      setTopShadow(tsv);\n    }\n\n    const wrapperHeight = c.scrollHeight - c.clientHeight;\n    const bsv = !!((shadow || bottomShadow) && wrapperHeight - scrollTop !== 0);\n\n    if (bsv !== bottomShadowVisible) {\n      setBottomShadow(bsv);\n    }\n  }, [shadow, topShadow, bottomShadow, topShadowVisible, bottomShadowVisible]);\n\n  React.useEffect(() => {\n    updateShadows();\n  }, [height, updateShadows]);\n\n  return (\n    <Wrapper\n      ref={ref}\n      onScroll={updateShadows}\n      $flex={flex}\n      $topShadowVisible={topShadowVisible}\n      $bottomShadowVisible={bottomShadowVisible}\n      {...rest}\n    />\n  );\n}\n\nconst Wrapper = styled.div`\n  display: ${(props) => (props.$flex ? \"flex\" : \"block\")};\n  flex-direction: column;\n  height: 100%;\n  overflow-y: auto;\n  overflow-x: hidden;\n  overscroll-behavior: none;\n  -webkit-overflow-scrolling: touch;\n  box-shadow: ${(props) => {\n    if (props.$topShadowVisible && props.$bottomShadowVisible) {\n      return \"0 1px inset rgba(0,0,0,.1), 0 -1px inset rgba(0,0,0,.1)\";\n    }\n    if (props.$topShadowVisible) {\n      return \"0 1px inset rgba(0,0,0,.1)\";\n    }\n    if (props.$bottomShadowVisible) {\n      return \"0 -1px inset rgba(0,0,0,.1)\";\n    }\n\n    return \"none\";\n  }};\n  transition: all 100ms ease-in-out;\n`;\n\nexport default observer(Scrollable);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport {\n  ArchiveIcon,\n  EditIcon,\n  GoToIcon,\n  ShapesIcon,\n  TrashIcon,\n} from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport Document from \"models/Document\";\nimport Breadcrumb from \"components/Breadcrumb\";\nimport CollectionIcon from \"components/CollectionIcon\";\nimport useStores from \"hooks/useStores\";\nimport { collectionUrl } from \"utils/routeHelpers\";\n\ntype Props = {|\n  document: Document,\n  children?: React.Node,\n  onlyText: boolean,\n|};\n\nfunction useCategory(document) {\n  const { t } = useTranslation();\n\n  if (document.isDeleted) {\n    return {\n      icon: <TrashIcon color=\"currentColor\" />,\n      title: t(\"Trash\"),\n      to: \"/trash\",\n    };\n  }\n  if (document.isArchived) {\n    return {\n      icon: <ArchiveIcon color=\"currentColor\" />,\n      title: t(\"Archive\"),\n      to: \"/archive\",\n    };\n  }\n  if (document.isDraft) {\n    return {\n      icon: <EditIcon color=\"currentColor\" />,\n      title: t(\"Drafts\"),\n      to: \"/drafts\",\n    };\n  }\n  if (document.isTemplate) {\n    return {\n      icon: <ShapesIcon color=\"currentColor\" />,\n      title: t(\"Templates\"),\n      to: \"/templates\",\n    };\n  }\n  return null;\n}\n\nconst DocumentBreadcrumb = ({ document, children, onlyText }: Props) => {\n  const { collections } = useStores();\n  const { t } = useTranslation();\n  const category = useCategory(document);\n\n  let collection = collections.get(document.collectionId);\n  if (!collection) {\n    collection = {\n      id: document.collectionId,\n      name: t(\"Deleted Collection\"),\n      color: \"currentColor\",\n      url: \"deleted-collection\",\n    };\n  }\n\n  const path = React.useMemo(\n    () =>\n      collection && collection.pathToDocument\n        ? collection.pathToDocument(document.id).slice(0, -1)\n        : [],\n    [collection, document.id]\n  );\n\n  const items = React.useMemo(() => {\n    let output = [];\n\n    if (category) {\n      output.push(category);\n    }\n\n    if (collection) {\n      output.push({\n        icon: <CollectionIcon collection={collection} expanded />,\n        title: collection.name,\n        to: collectionUrl(collection.url),\n      });\n    }\n\n    path.forEach((p) => {\n      output.push({\n        title: p.title,\n        to: p.url,\n      });\n    });\n\n    return output;\n  }, [path, category, collection]);\n\n  if (!collections.isLoaded) {\n    return null;\n  }\n\n  if (onlyText === true) {\n    return (\n      <>\n        {collection.name}\n        {path.map((n) => (\n          <React.Fragment key={n.id}>\n            <SmallSlash />\n            {n.title}\n          </React.Fragment>\n        ))}\n      </>\n    );\n  }\n\n  return <Breadcrumb items={items} children={children} highlightFirstItem />;\n};\n\nconst SmallSlash = styled(GoToIcon)`\n  width: 12px;\n  height: 12px;\n  vertical-align: middle;\n  flex-shrink: 0;\n\n  fill: ${(props) => props.theme.slate};\n  opacity: 0.5;\n`;\n\nexport default observer(DocumentBreadcrumb);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { Dialog, DialogBackdrop, useDialogState } from \"reakit/Dialog\";\nimport styled from \"styled-components\";\nimport Scrollable from \"components/Scrollable\";\nimport usePrevious from \"hooks/usePrevious\";\n\ntype Props = {|\n  children?: React.Node,\n  isOpen: boolean,\n  title?: string,\n  onRequestClose: () => void,\n|};\n\nconst Guide = ({\n  children,\n  isOpen,\n  title = \"Untitled\",\n  onRequestClose,\n  ...rest\n}: Props) => {\n  const dialog = useDialogState({ animated: 250 });\n  const wasOpen = usePrevious(isOpen);\n\n  React.useEffect(() => {\n    if (!wasOpen && isOpen) {\n      dialog.show();\n    }\n    if (wasOpen && !isOpen) {\n      dialog.hide();\n    }\n  }, [dialog, wasOpen, isOpen]);\n\n  return (\n    <DialogBackdrop {...dialog}>\n      {(props) => (\n        <Backdrop {...props}>\n          <Dialog\n            {...dialog}\n            aria-label={title}\n            preventBodyScrollhideOnEsc\n            hide={onRequestClose}\n          >\n            {(props) => (\n              <Scene {...props} {...rest}>\n                <Content>\n                  {title && <Header>{title}</Header>}\n                  {children}\n                </Content>\n              </Scene>\n            )}\n          </Dialog>\n        </Backdrop>\n      )}\n    </DialogBackdrop>\n  );\n};\n\nconst Header = styled.h1`\n  font-size: 18px;\n  margin-top: 0;\n  margin-bottom: 1em;\n`;\n\nconst Backdrop = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: ${(props) => props.theme.backdrop} !important;\n  z-index: ${(props) => props.theme.depths.modalOverlay};\n  transition: opacity 200ms ease-in-out;\n  opacity: 0;\n\n  &[data-enter] {\n    opacity: 1;\n  }\n`;\n\nconst Scene = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  margin: 12px;\n  z-index: ${(props) => props.theme.depths.modal};\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  width: 350px;\n  background: ${(props) => props.theme.background};\n  transition: ${(props) => props.theme.backgroundTransition};\n  border-radius: 8px;\n  outline: none;\n  opacity: 0;\n  transform: translateX(16px);\n  transition: transform 250ms ease, opacity 250ms ease;\n\n  &[data-enter] {\n    opacity: 1;\n    transform: translateX(0px);\n  }\n`;\n\nconst Content = styled(Scrollable)`\n  width: 100%;\n  padding: 16px;\n`;\n\nexport default observer(Guide);\n","// @flow\nimport styled from \"styled-components\";\n\nconst Badge = styled.span`\n  margin-left: 10px;\n  padding: 1px 5px 2px;\n  background-color: ${({ yellow, primary, theme }) =>\n    yellow ? theme.yellow : primary ? theme.primary : \"transparent\"};\n  color: ${({ primary, yellow, theme }) =>\n    primary ? theme.white : yellow ? theme.almostBlack : theme.textTertiary};\n  border: 1px solid\n    ${({ primary, yellow, theme }) =>\n      primary || yellow ? \"transparent\" : theme.textTertiary};\n  border-radius: 8px;\n  font-size: 12px;\n  font-weight: 500;\n  user-select: none;\n`;\n\nexport default Badge;\n","// @flow\nlet hidden = \"hidden\";\nlet visibilityChange = \"visibilitychange\";\n\nif (\"hidden\" in document) {\n  hidden = \"hidden\";\n  visibilityChange = \"visibilitychange\";\n} else if (\"mozHidden\" in document) {\n  // Firefox up to v17\n  hidden = \"mozHidden\";\n  visibilityChange = \"mozvisibilitychange\";\n} else if (\"webkitHidden\" in document) {\n  // Chrome up to v32, Android up to v4.4, Blackberry up to v10\n  hidden = \"webkitHidden\";\n  visibilityChange = \"webkitvisibilitychange\";\n}\n\nexport function getVisibilityListener(): string {\n  return visibilityChange;\n}\n\nexport function getPageVisible(): boolean {\n  // $FlowFixMe\n  return !document[hidden];\n}\n","// @flow\nimport { find } from \"lodash\";\nimport { observable } from \"mobx\";\nimport { inject, observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport io, { Socket } from \"socket.io-client\";\nimport AuthStore from \"stores/AuthStore\";\nimport CollectionsStore from \"stores/CollectionsStore\";\nimport DocumentPresenceStore from \"stores/DocumentPresenceStore\";\nimport DocumentsStore from \"stores/DocumentsStore\";\nimport GroupsStore from \"stores/GroupsStore\";\nimport MembershipsStore from \"stores/MembershipsStore\";\nimport PoliciesStore from \"stores/PoliciesStore\";\nimport ToastsStore from \"stores/ToastsStore\";\nimport ViewsStore from \"stores/ViewsStore\";\nimport { getVisibilityListener, getPageVisible } from \"utils/pageVisibility\";\n\nexport const SocketContext: any = React.createContext();\n\ntype Props = {\n  children: React.Node,\n  documents: DocumentsStore,\n  collections: CollectionsStore,\n  groups: GroupsStore,\n  memberships: MembershipsStore,\n  presence: DocumentPresenceStore,\n  policies: PoliciesStore,\n  views: ViewsStore,\n  auth: AuthStore,\n  toasts: ToastsStore,\n};\n\n@observer\nclass SocketProvider extends React.Component<Props> {\n  @observable socket: Socket;\n\n  componentDidMount() {\n    this.createConnection();\n\n    document.addEventListener(getVisibilityListener(), this.checkConnection);\n  }\n\n  componentWillUnmount() {\n    if (this.socket) {\n      this.socket.authenticated = false;\n      this.socket.disconnect();\n    }\n\n    document.removeEventListener(getVisibilityListener(), this.checkConnection);\n  }\n\n  checkConnection = () => {\n    if (this.socket && this.socket.disconnected && getPageVisible()) {\n      // null-ifying this reference is important, do not remove. Without it\n      // references to old sockets are potentially held in context\n      this.socket.close();\n      this.socket = null;\n\n      this.createConnection();\n    }\n  };\n\n  createConnection = () => {\n    this.socket = io(window.location.origin, {\n      path: \"/realtime\",\n      transports: [\"websocket\"],\n      reconnectionDelay: 1000,\n      reconnectionDelayMax: 30000,\n    });\n\n    this.socket.authenticated = false;\n\n    const {\n      auth,\n      toasts,\n      documents,\n      collections,\n      groups,\n      memberships,\n      policies,\n      presence,\n      views,\n    } = this.props;\n    if (!auth.token) return;\n\n    this.socket.on(\"connect\", () => {\n      // immediately send current users token to the websocket backend where it\n      // is verified, if all goes well an 'authenticated' message will be\n      // received in response\n      this.socket.emit(\"authentication\", {\n        token: auth.token,\n      });\n    });\n\n    this.socket.on(\"disconnect\", (reason: string) => {\n      // when the socket is disconnected we need to clear all presence state as\n      // it's no longer reliable.\n      presence.clear();\n    });\n\n    // on reconnection, reset the transports option, as the Websocket\n    // connection may have failed (caused by proxy, firewall, browser, ...)\n    this.socket.on(\"reconnect_attempt\", () => {\n      this.socket.io.opts.transports =\n        auth.team && auth.team.domain\n          ? [\"websocket\"]\n          : [\"websocket\", \"polling\"];\n    });\n\n    this.socket.on(\"authenticated\", () => {\n      this.socket.authenticated = true;\n    });\n\n    this.socket.on(\"unauthorized\", (err) => {\n      this.socket.authenticated = false;\n      toasts.showToast(err.message, {\n        type: \"error\",\n      });\n      throw err;\n    });\n\n    this.socket.on(\"entities\", async (event) => {\n      if (event.documentIds) {\n        for (const documentDescriptor of event.documentIds) {\n          const documentId = documentDescriptor.id;\n          let document = documents.get(documentId) || {};\n\n          if (event.event === \"documents.delete\") {\n            const document = documents.get(documentId);\n            if (document) {\n              document.deletedAt = documentDescriptor.updatedAt;\n            }\n            policies.remove(documentId);\n\n            continue;\n          }\n\n          // if we already have the latest version (it was us that performed\n          // the change) then we don't need to update anything either.\n          const { title, updatedAt } = document;\n          if (updatedAt === documentDescriptor.updatedAt) {\n            continue;\n          }\n\n          // otherwise, grab the latest version of the document\n          try {\n            const response = await documents.fetch(documentId, {\n              force: true,\n            });\n            document = response.document;\n          } catch (err) {\n            if (err.statusCode === 404 || err.statusCode === 403) {\n              documents.remove(documentId);\n              return;\n            }\n          }\n\n          // if the title changed then we need to update the collection also\n          if (title !== document.title) {\n            if (!event.collectionIds) {\n              event.collectionIds = [];\n            }\n\n            const existing = find(event.collectionIds, {\n              id: document.collectionId,\n            });\n\n            if (!existing) {\n              event.collectionIds.push({\n                id: document.collectionId,\n              });\n            }\n          }\n        }\n      }\n\n      if (event.collectionIds) {\n        for (const collectionDescriptor of event.collectionIds) {\n          const collectionId = collectionDescriptor.id;\n          const collection = collections.get(collectionId) || {};\n\n          if (event.event === \"collections.delete\") {\n            const collection = collections.get(collectionId);\n            if (collection) {\n              collection.deletedAt = collectionDescriptor.updatedAt;\n            }\n\n            const deletedDocuments = documents.inCollection(collectionId);\n            deletedDocuments.forEach((doc) => {\n              doc.deletedAt = collectionDescriptor.updatedAt;\n              policies.remove(doc.id);\n            });\n\n            documents.removeCollectionDocuments(collectionId);\n            memberships.removeCollectionMemberships(collectionId);\n            collections.remove(collectionId);\n            policies.remove(collectionId);\n            continue;\n          }\n\n          // if we already have the latest version (it was us that performed\n          // the change) then we don't need to update anything either.\n          const { updatedAt } = collection;\n          if (updatedAt === collectionDescriptor.updatedAt) {\n            continue;\n          }\n\n          try {\n            await collections.fetch(collectionId, { force: true });\n          } catch (err) {\n            if (err.statusCode === 404 || err.statusCode === 403) {\n              documents.removeCollectionDocuments(collectionId);\n              memberships.removeCollectionMemberships(collectionId);\n              collections.remove(collectionId);\n              policies.remove(collectionId);\n              return;\n            }\n          }\n        }\n      }\n\n      if (event.groupIds) {\n        for (const groupDescriptor of event.groupIds) {\n          const groupId = groupDescriptor.id;\n          const group = groups.get(groupId) || {};\n\n          // if we already have the latest version (it was us that performed\n          // the change) then we don't need to update anything either.\n          const { updatedAt } = group;\n          if (updatedAt === groupDescriptor.updatedAt) {\n            continue;\n          }\n\n          try {\n            await groups.fetch(groupId, { force: true });\n          } catch (err) {\n            if (err.statusCode === 404 || err.statusCode === 403) {\n              groups.remove(groupId);\n            }\n          }\n        }\n      }\n    });\n\n    this.socket.on(\"documents.star\", (event) => {\n      documents.starredIds.set(event.documentId, true);\n    });\n\n    this.socket.on(\"documents.unstar\", (event) => {\n      documents.starredIds.set(event.documentId, false);\n    });\n\n    this.socket.on(\"documents.permanent_delete\", (event) => {\n      documents.remove(event.documentId);\n    });\n\n    // received when a user is given access to a collection\n    // if the user is us then we go ahead and load the collection from API.\n    this.socket.on(\"collections.add_user\", (event) => {\n      if (auth.user && event.userId === auth.user.id) {\n        collections.fetch(event.collectionId, { force: true });\n      }\n\n      // Document policies might need updating as the permission changes\n      documents.inCollection(event.collectionId).forEach((document) => {\n        policies.remove(document.id);\n      });\n    });\n\n    // received when a user is removed from having access to a collection\n    // to keep state in sync we must update our UI if the user is us,\n    // or otherwise just remove any membership state we have for that user.\n    this.socket.on(\"collections.remove_user\", (event) => {\n      if (auth.user && event.userId === auth.user.id) {\n        collections.remove(event.collectionId);\n        memberships.removeCollectionMemberships(event.collectionId);\n        documents.removeCollectionDocuments(event.collectionId);\n      } else {\n        memberships.remove(`${event.userId}-${event.collectionId}`);\n      }\n    });\n\n    this.socket.on(\"collections.update_index\", (event) => {\n      const collection = collections.get(event.collectionId);\n      if (collection) {\n        collection.updateIndex(event.index);\n      }\n    });\n\n    // received a message from the API server that we should request\n    // to join a specific room. Forward that to the ws server.\n    this.socket.on(\"join\", (event) => {\n      this.socket.emit(\"join\", event);\n    });\n\n    // received a message from the API server that we should request\n    // to leave a specific room. Forward that to the ws server.\n    this.socket.on(\"leave\", (event) => {\n      this.socket.emit(\"leave\", event);\n    });\n\n    // received whenever we join a document room, the payload includes\n    // userIds that are present/viewing and those that are editing.\n    this.socket.on(\"document.presence\", (event) => {\n      presence.init(event.documentId, event.userIds, event.editingIds);\n    });\n\n    // received whenever a new user joins a document room, aka they\n    // navigate to / start viewing a document\n    this.socket.on(\"user.join\", (event) => {\n      presence.touch(event.documentId, event.userId, event.isEditing);\n      views.touch(event.documentId, event.userId);\n    });\n\n    // received whenever a new user leaves a document room, aka they\n    // navigate away / stop viewing a document\n    this.socket.on(\"user.leave\", (event) => {\n      presence.leave(event.documentId, event.userId);\n      views.touch(event.documentId, event.userId);\n    });\n\n    // received when another client in a document room wants to change\n    // or update it's presence. Currently the only property is whether\n    // the client is in editing state or not.\n    this.socket.on(\"user.presence\", (event) => {\n      presence.touch(event.documentId, event.userId, event.isEditing);\n    });\n  };\n\n  render() {\n    return (\n      <SocketContext.Provider value={this.socket}>\n        {this.props.children}\n      </SocketContext.Provider>\n    );\n  }\n}\n\nexport default inject(\n  \"auth\",\n  \"toasts\",\n  \"documents\",\n  \"collections\",\n  \"groups\",\n  \"memberships\",\n  \"presence\",\n  \"policies\",\n  \"views\"\n)(SocketProvider);\n","// @flow\nimport React from \"react\";\nimport styled, { useTheme } from \"styled-components\";\n\nconst cleanPercentage = (percentage) => {\n  const tooLow = !Number.isFinite(+percentage) || percentage < 0;\n  const tooHigh = percentage > 100;\n  return tooLow ? 0 : tooHigh ? 100 : +percentage;\n};\n\nconst Circle = ({\n  color,\n  percentage,\n  offset,\n}: {\n  color: string,\n  percentage?: number,\n  offset: number,\n}) => {\n  const radius = offset * 0.7;\n  const circumference = 2 * Math.PI * radius;\n  let strokePercentage;\n  if (percentage) {\n    // because the circle is so small, anything greater than 85% appears like 100%\n    percentage = percentage > 85 && percentage < 100 ? 85 : percentage;\n    strokePercentage = percentage\n      ? ((100 - percentage) * circumference) / 100\n      : 0;\n  }\n\n  return (\n    <circle\n      r={radius}\n      cx={offset}\n      cy={offset}\n      fill=\"none\"\n      stroke={strokePercentage !== circumference ? color : \"\"}\n      strokeWidth={2.5}\n      strokeDasharray={circumference}\n      strokeDashoffset={percentage ? strokePercentage : 0}\n      strokeLinecap=\"round\"\n      style={{ transition: \"stroke-dashoffset 0.6s ease 0s\" }}\n    ></circle>\n  );\n};\n\nconst CircularProgressBar = ({\n  percentage,\n  size = 16,\n}: {\n  percentage: number,\n  size?: number,\n}) => {\n  const theme = useTheme();\n  percentage = cleanPercentage(percentage);\n  const offset = Math.floor(size / 2);\n\n  return (\n    <SVG width={size} height={size}>\n      <g transform={`rotate(-90 ${offset} ${offset})`}>\n        <Circle color={theme.progressBarBackground} offset={offset} />\n        {percentage > 0 && (\n          <Circle\n            color={theme.primary}\n            percentage={percentage}\n            offset={offset}\n          />\n        )}\n      </g>\n    </SVG>\n  );\n};\n\nconst SVG = styled.svg`\n  flex-shrink: 0;\n`;\n\nexport default CircularProgressBar;\n","// @flow\nimport { DoneIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled, { useTheme } from \"styled-components\";\nimport CircularProgressBar from \"components/CircularProgressBar\";\nimport usePrevious from \"../hooks/usePrevious\";\nimport Document from \"../models/Document\";\nimport { bounceIn } from \"styles/animations\";\n\ntype Props = {|\n  document: Document,\n|};\n\nfunction getMessage(t, total, completed) {\n  if (completed === 0) {\n    return t(`{{ total }} task`, { total, count: total });\n  } else if (completed === total) {\n    return t(`{{ completed }} task done`, { completed, count: completed });\n  } else {\n    return t(`{{ completed }} of {{ total }} tasks`, {\n      total,\n      completed,\n    });\n  }\n}\n\nfunction DocumentTasks({ document }: Props) {\n  const { tasks, tasksPercentage } = document;\n  const { t } = useTranslation();\n  const theme = useTheme();\n  const { completed, total } = tasks;\n  const done = completed === total;\n  const previousDone = usePrevious(done);\n  const message = getMessage(t, total, completed);\n\n  return (\n    <>\n      {completed === total ? (\n        <Done\n          color={theme.primary}\n          size={20}\n          $animated={done && previousDone === false}\n        />\n      ) : (\n        <CircularProgressBar percentage={tasksPercentage} />\n      )}\n      &nbsp;{message}\n    </>\n  );\n}\n\nconst Done = styled(DoneIcon)`\n  margin: -1px;\n  animation: ${(props) => (props.$animated ? bounceIn : \"none\")} 600ms;\n  transform-origin: center center;\n`;\n\nexport default DocumentTasks;\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport Document from \"models/Document\";\nimport DocumentBreadcrumb from \"components/DocumentBreadcrumb\";\nimport DocumentTasks from \"components/DocumentTasks\";\nimport Flex from \"components/Flex\";\nimport Time from \"components/Time\";\nimport useCurrentUser from \"hooks/useCurrentUser\";\nimport useStores from \"hooks/useStores\";\n\nconst Container = styled(Flex)`\n  justify-content: ${(props) => (props.rtl ? \"flex-end\" : \"flex-start\")};\n  color: ${(props) => props.theme.textTertiary};\n  font-size: 13px;\n  white-space: nowrap;\n  overflow: hidden;\n  min-width: 0;\n`;\n\nconst Viewed = styled.span`\n  text-overflow: ellipsis;\n  overflow: hidden;\n`;\n\nconst Modified = styled.span`\n  color: ${(props) => props.theme.textTertiary};\n  font-weight: ${(props) => (props.highlight ? \"600\" : \"400\")};\n`;\n\ntype Props = {|\n  showCollection?: boolean,\n  showPublished?: boolean,\n  showLastViewed?: boolean,\n  showNestedDocuments?: boolean,\n  document: Document,\n  children: React.Node,\n  to?: string,\n|};\n\nfunction DocumentMeta({\n  showPublished,\n  showCollection,\n  showLastViewed,\n  showNestedDocuments,\n  document,\n  children,\n  to,\n  ...rest\n}: Props) {\n  const { t } = useTranslation();\n  const { collections } = useStores();\n  const user = useCurrentUser();\n\n  const {\n    modifiedSinceViewed,\n    updatedAt,\n    updatedBy,\n    createdAt,\n    publishedAt,\n    archivedAt,\n    deletedAt,\n    isDraft,\n    lastViewedAt,\n    isTasks,\n    isTemplate,\n  } = document;\n\n  // Prevent meta information from displaying if updatedBy is not available.\n  // Currently the situation where this is true is rendering share links.\n  if (!updatedBy) {\n    return null;\n  }\n\n  const collection = collections.get(document.collectionId);\n  const lastUpdatedByCurrentUser = user.id === updatedBy.id;\n  let content;\n\n  if (deletedAt) {\n    content = (\n      <span>\n        {t(\"deleted\")} <Time dateTime={deletedAt} addSuffix />\n      </span>\n    );\n  } else if (archivedAt) {\n    content = (\n      <span>\n        {t(\"archived\")} <Time dateTime={archivedAt} addSuffix />\n      </span>\n    );\n  } else if (createdAt === updatedAt) {\n    content = (\n      <span>\n        {t(\"created\")} <Time dateTime={updatedAt} addSuffix />\n      </span>\n    );\n  } else if (publishedAt && (publishedAt === updatedAt || showPublished)) {\n    content = (\n      <span>\n        {t(\"published\")} <Time dateTime={publishedAt} addSuffix />\n      </span>\n    );\n  } else if (isDraft) {\n    content = (\n      <span>\n        {t(\"saved\")} <Time dateTime={updatedAt} addSuffix />\n      </span>\n    );\n  } else {\n    content = (\n      <Modified highlight={modifiedSinceViewed && !lastUpdatedByCurrentUser}>\n        {t(\"updated\")} <Time dateTime={updatedAt} addSuffix />\n      </Modified>\n    );\n  }\n\n  const nestedDocumentsCount = collection\n    ? collection.getDocumentChildren(document.id).length\n    : 0;\n  const canShowProgressBar = isTasks && !isTemplate;\n\n  const timeSinceNow = () => {\n    if (isDraft || !showLastViewed) {\n      return null;\n    }\n    if (!lastViewedAt) {\n      return (\n        <Viewed>\n          •&nbsp;<Modified highlight>{t(\"Never viewed\")}</Modified>\n        </Viewed>\n      );\n    }\n\n    return (\n      <Viewed>\n        •&nbsp;{t(\"Viewed\")} <Time dateTime={lastViewedAt} addSuffix shorten />\n      </Viewed>\n    );\n  };\n\n  return (\n    <Container align=\"center\" rtl={document.dir === \"rtl\"} {...rest} dir=\"ltr\">\n      {lastUpdatedByCurrentUser ? t(\"You\") : updatedBy.name}&nbsp;\n      {to ? <Link to={to}>{content}</Link> : content}\n      {showCollection && collection && (\n        <span>\n          &nbsp;{t(\"in\")}&nbsp;\n          <strong>\n            <DocumentBreadcrumb document={document} onlyText />\n          </strong>\n        </span>\n      )}\n      {showNestedDocuments && nestedDocumentsCount > 0 && (\n        <span>\n          &nbsp;• {nestedDocumentsCount}{\" \"}\n          {t(\"nested document\", { count: nestedDocumentsCount })}\n        </span>\n      )}\n      &nbsp;{timeSinceNow()}\n      {canShowProgressBar && (\n        <>\n          &nbsp;•&nbsp;\n          <DocumentTasks document={document} />\n        </>\n      )}\n      {children}\n    </Container>\n  );\n}\n\nexport default observer(DocumentMeta);\n","// @flow\nconst isMac = window.navigator.platform === \"MacIntel\";\n\nexport const metaDisplay = isMac ? \"⌘\" : \"Ctrl\";\n\nexport const meta = isMac ? \"cmd\" : \"ctrl\";\n\nexport function isModKey(\n  event: KeyboardEvent | MouseEvent | SyntheticKeyboardEvent<>\n) {\n  return isMac ? event.metaKey : event.ctrlKey;\n}\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { useHistory } from \"react-router-dom\";\nimport Document from \"models/Document\";\nimport Button from \"components/Button\";\nimport Flex from \"components/Flex\";\nimport HelpText from \"components/HelpText\";\nimport useStores from \"hooks/useStores\";\nimport useToasts from \"hooks/useToasts\";\nimport { collectionUrl, documentUrl } from \"utils/routeHelpers\";\n\ntype Props = {\n  document: Document,\n  onSubmit: () => void,\n};\n\nfunction DocumentDelete({ document, onSubmit }: Props) {\n  const { t } = useTranslation();\n  const { ui, documents, collections } = useStores();\n  const history = useHistory();\n  const [isDeleting, setDeleting] = React.useState(false);\n  const [isArchiving, setArchiving] = React.useState(false);\n  const { showToast } = useToasts();\n  const canArchive = !document.isDraft && !document.isArchived;\n  const collection = collections.get(document.collectionId);\n\n  const handleSubmit = React.useCallback(\n    async (ev: SyntheticEvent<>) => {\n      ev.preventDefault();\n      setDeleting(true);\n\n      try {\n        await document.delete();\n\n        // only redirect if we're currently viewing the document that's deleted\n        if (ui.activeDocumentId === document.id) {\n          // If the document has a parent and it's available in the store then\n          // redirect to it\n          if (document.parentDocumentId) {\n            const parent = documents.get(document.parentDocumentId);\n            if (parent) {\n              history.push(documentUrl(parent));\n              return;\n            }\n          }\n\n          // otherwise, redirect to the collection home\n          history.push(collectionUrl(collection?.url || \"/\"));\n        }\n        onSubmit();\n      } catch (err) {\n        showToast(err.message, { type: \"error\" });\n      } finally {\n        setDeleting(false);\n      }\n    },\n    [showToast, onSubmit, ui, document, documents, history, collection]\n  );\n\n  const handleArchive = React.useCallback(\n    async (ev: SyntheticEvent<>) => {\n      ev.preventDefault();\n      setArchiving(true);\n\n      try {\n        await document.archive();\n        onSubmit();\n      } catch (err) {\n        showToast(err.message, { type: \"error\" });\n      } finally {\n        setArchiving(false);\n      }\n    },\n    [showToast, onSubmit, document]\n  );\n\n  return (\n    <Flex column>\n      <form onSubmit={handleSubmit}>\n        <HelpText>\n          {document.isTemplate ? (\n            <Trans\n              defaults=\"Are you sure you want to delete the <em>{{ documentTitle }}</em> template?\"\n              values={{ documentTitle: document.titleWithDefault }}\n              components={{ em: <strong /> }}\n            />\n          ) : (\n            <Trans\n              defaults=\"Are you sure about that? Deleting the <em>{{ documentTitle }}</em> document will delete all of its history and any nested documents.\"\n              values={{ documentTitle: document.titleWithDefault }}\n              components={{ em: <strong /> }}\n            />\n          )}\n        </HelpText>\n        {canArchive && (\n          <HelpText>\n            <Trans>\n              If you’d like the option of referencing or restoring the{\" \"}\n              {{ noun: document.noun }} in the future, consider archiving it\n              instead.\n            </Trans>\n          </HelpText>\n        )}\n        <Button type=\"submit\" danger>\n          {isDeleting ? `${t(\"Deleting\")}…` : t(\"I’m sure – Delete\")}\n        </Button>\n        &nbsp;&nbsp;\n        {canArchive && (\n          <Button type=\"button\" onClick={handleArchive} neutral>\n            {isArchiving ? `${t(\"Archiving\")}…` : t(\"Archive\")}\n          </Button>\n        )}\n      </form>\n    </Flex>\n  );\n}\n\nexport default observer(DocumentDelete);\n","// @flow\nimport Tippy from \"@tippy.js/react\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\ntype Props = {|\n  tooltip: React.Node,\n  shortcut?: React.Node,\n  placement?: \"top\" | \"bottom\" | \"left\" | \"right\",\n  children: React.Node,\n  delay?: number,\n  className?: string,\n|};\n\nclass Tooltip extends React.Component<Props> {\n  render() {\n    const { shortcut, tooltip, delay = 50, className, ...rest } = this.props;\n\n    let content = tooltip;\n\n    if (!tooltip) {\n      return this.props.children;\n    }\n\n    if (shortcut) {\n      content = (\n        <>\n          {tooltip} &middot; <Shortcut>{shortcut}</Shortcut>\n        </>\n      );\n    }\n\n    return (\n      <StyledTippy\n        arrow\n        arrowType=\"round\"\n        animation=\"shift-away\"\n        content={content}\n        delay={delay}\n        duration={[200, 150]}\n        inertia\n        {...rest}\n      />\n    );\n  }\n}\n\nconst Shortcut = styled.kbd`\n  position: relative;\n  top: -2px;\n\n  display: inline-block;\n  padding: 2px 4px;\n  font: 10px \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, Courier,\n    monospace;\n  line-height: 10px;\n  color: ${(props) => props.theme.tooltipBackground};\n  vertical-align: middle;\n  background-color: ${(props) => props.theme.tooltipText};\n  border-radius: 3px;\n`;\n\nconst StyledTippy = styled(Tippy)`\n  font-size: 13px;\n  background-color: ${(props) => props.theme.tooltipBackground};\n  color: ${(props) => props.theme.tooltipText};\n\n  svg {\n    fill: ${(props) => props.theme.tooltipBackground};\n  }\n`;\n\nexport default Tooltip;\n","// @flow\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport { LabelText } from \"components/Input\";\n\ntype Props = {|\n  width?: number,\n  height?: number,\n  label?: string,\n  checked?: boolean,\n  disabled?: boolean,\n  onChange: (event: SyntheticInputEvent<HTMLInputElement>) => mixed,\n  id?: string,\n|};\n\nfunction Switch({ width = 38, height = 20, label, disabled, ...props }: Props) {\n  const component = (\n    <Wrapper width={width} height={height}>\n      <HiddenInput\n        type=\"checkbox\"\n        width={width}\n        height={height}\n        disabled={disabled}\n        {...props}\n      />\n      <Slider width={width} height={height} />\n    </Wrapper>\n  );\n\n  if (label) {\n    return (\n      <Label disabled={disabled} htmlFor={props.id}>\n        {component}\n        <LabelText>{label}</LabelText>\n      </Label>\n    );\n  }\n\n  return component;\n}\n\nconst Label = styled.label`\n  display: flex;\n  align-items: center;\n\n  ${(props) => (props.disabled ? `opacity: 0.75;` : \"\")}\n`;\n\nconst Wrapper = styled.label`\n  position: relative;\n  display: inline-block;\n  width: ${(props) => props.width}px;\n  height: ${(props) => props.height}px;\n  margin-bottom: 4px;\n  margin-right: 8px;\n`;\n\nconst Slider = styled.span`\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: ${(props) => props.theme.slate};\n  -webkit-transition: 0.4s;\n  transition: 0.4s;\n  border-radius: ${(props) => props.height}px;\n\n  &:before {\n    position: absolute;\n    content: \"\";\n    height: ${(props) => props.height - 8}px;\n    width: ${(props) => props.height - 8}px;\n    left: 4px;\n    bottom: 4px;\n    background-color: white;\n    border-radius: 50%;\n    -webkit-transition: 0.4s;\n    transition: 0.4s;\n  }\n`;\n\nconst HiddenInput = styled.input`\n  opacity: 0;\n  width: 0;\n  height: 0;\n  visibility: hidden;\n\n  &:disabled + ${Slider} {\n    opacity: 0.75;\n    cursor: default;\n  }\n\n  &:checked + ${Slider} {\n    background-color: ${(props) => props.theme.primary};\n  }\n\n  &:focus + ${Slider} {\n    box-shadow: 0 0 1px ${(props) => props.theme.primary};\n  }\n\n  &:checked + ${Slider}:before {\n    transform: translateX(${(props) => props.width - props.height}px);\n  }\n`;\n\nexport default Switch;\n","// @flow\nimport { ExpandedIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport {\n  useMenuState,\n  MenuButton,\n  MenuItem as BaseMenuItem,\n} from \"reakit/Menu\";\nimport styled from \"styled-components\";\nimport Header from \"./Header\";\nimport MenuItem, { MenuAnchor } from \"./MenuItem\";\nimport Separator from \"./Separator\";\nimport ContextMenu from \".\";\nimport { type MenuItem as TMenuItem } from \"types\";\n\ntype Props = {|\n  items: TMenuItem[],\n|};\n\nconst Disclosure = styled(ExpandedIcon)`\n  transform: rotate(270deg);\n  position: absolute;\n  right: 8px;\n`;\n\nconst Submenu = React.forwardRef(({ templateItems, title, ...rest }, ref) => {\n  const { t } = useTranslation();\n  const menu = useMenuState({ modal: true });\n\n  return (\n    <>\n      <MenuButton ref={ref} {...menu} {...rest}>\n        {(props) => (\n          <MenuAnchor {...props}>\n            {title} <Disclosure color=\"currentColor\" />\n          </MenuAnchor>\n        )}\n      </MenuButton>\n      <ContextMenu {...menu} aria-label={t(\"Submenu\")}>\n        <Template {...menu} items={templateItems} />\n      </ContextMenu>\n    </>\n  );\n});\n\nexport function filterTemplateItems(items: TMenuItem[]): TMenuItem[] {\n  let filtered = items.filter((item) => item.visible !== false);\n\n  // this block literally just trims unneccessary separators\n  filtered = filtered.reduce((acc, item, index) => {\n    // trim separators from start / end\n    if (item.type === \"separator\" && index === 0) return acc;\n    if (item.type === \"separator\" && index === filtered.length - 1) return acc;\n\n    // trim double separators looking ahead / behind\n    const prev = filtered[index - 1];\n    if (prev && prev.type === \"separator\" && item.type === \"separator\")\n      return acc;\n\n    // otherwise, continue\n    return [...acc, item];\n  }, []);\n\n  return filtered;\n}\n\nfunction Template({ items, ...menu }: Props): React.Node {\n  return filterTemplateItems(items).map((item, index) => {\n    if (item.to) {\n      return (\n        <MenuItem\n          as={Link}\n          to={item.to}\n          key={index}\n          disabled={item.disabled}\n          selected={item.selected}\n          {...menu}\n        >\n          {item.title}\n        </MenuItem>\n      );\n    }\n\n    if (item.href) {\n      return (\n        <MenuItem\n          href={item.href}\n          key={index}\n          disabled={item.disabled}\n          selected={item.selected}\n          level={item.level}\n          target={item.href.startsWith(\"#\") ? undefined : \"_blank\"}\n          {...menu}\n        >\n          {item.title}\n        </MenuItem>\n      );\n    }\n\n    if (item.onClick) {\n      return (\n        <MenuItem\n          as=\"button\"\n          onClick={item.onClick}\n          disabled={item.disabled}\n          selected={item.selected}\n          key={index}\n          {...menu}\n        >\n          {item.title}\n        </MenuItem>\n      );\n    }\n\n    if (item.items) {\n      return (\n        <BaseMenuItem\n          key={index}\n          as={Submenu}\n          templateItems={item.items}\n          title={item.title}\n          {...menu}\n        />\n      );\n    }\n\n    if (item.type === \"separator\") {\n      return <Separator key={index} />;\n    }\n\n    if (item.type === \"heading\") {\n      return <Header>{item.title}</Header>;\n    }\n\n    console.warn(\"Unrecognized menu item\", item);\n    return null;\n  });\n}\n\nexport default React.memo<Props>(Template);\n","// @flow\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport DelayedMount from \"components/DelayedMount\";\nimport Fade from \"components/Fade\";\nimport Flex from \"components/Flex\";\nimport PlaceholderText from \"components/PlaceholderText\";\n\nexport default function PlaceholderDocument(props: Object) {\n  return (\n    <DelayedMount>\n      <Wrapper>\n        <Flex column auto {...props}>\n          <PlaceholderText height={34} maxWidth={70} />\n          <PlaceholderText delay={0.2} maxWidth={40} />\n          <br />\n          <PlaceholderText delay={0.2} />\n          <PlaceholderText delay={0.4} />\n          <PlaceholderText delay={0.6} />\n        </Flex>\n      </Wrapper>\n    </DelayedMount>\n  );\n}\n\nconst Wrapper = styled(Fade)`\n  display: block;\n  margin: 40px 0;\n`;\n","// @flow\nimport { debounce } from \"lodash\";\nimport * as React from \"react\";\n\nexport default function useWindowSize() {\n  const [windowSize, setWindowSize] = React.useState({\n    width: undefined,\n    height: undefined,\n  });\n\n  React.useEffect(() => {\n    // Handler to call on window resize\n    const handleResize = debounce(() => {\n      // Set window width/height to state\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }, 100);\n\n    // Add event listener\n    window.addEventListener(\"resize\", handleResize);\n\n    // Call handler right away so state gets updated with initial window size\n    handleResize();\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return windowSize;\n}\n","// @flow\nimport { formatDistanceToNow } from \"date-fns\";\nimport * as React from \"react\";\n\nconst LocaleTime = React.lazy(() =>\n  import(/* webpackChunkName: \"locale-time\" */ \"components/LocaleTime\")\n);\n\ntype Props = {\n  dateTime: string,\n  children?: React.Node,\n  tooltipDelay?: number,\n  addSuffix?: boolean,\n  shorten?: boolean,\n};\n\nfunction Time(props: Props) {\n  let content = formatDistanceToNow(Date.parse(props.dateTime), {\n    addSuffix: props.addSuffix,\n  });\n\n  if (props.shorten) {\n    content = content\n      .replace(\"about\", \"\")\n      .replace(\"less than a minute ago\", \"just now\")\n      .replace(\"minute\", \"min\");\n  }\n\n  return (\n    <React.Suspense\n      fallback={\n        <time dateTime={props.dateTime}>{props.children || content}</time>\n      }\n    >\n      <LocaleTime tooltipDelay={250} {...props} />\n    </React.Suspense>\n  );\n}\n\nexport default Time;\n","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport Flex from \"components/Flex\";\n\ntype Props = {|\n  label: React.Node | string,\n  children: React.Node,\n|};\n\nconst Labeled = ({ label, children, ...props }: Props) => (\n  <Flex column {...props}>\n    <Label>{label}</Label>\n    {children}\n  </Flex>\n);\n\nexport const Label = styled(Flex)`\n  font-weight: 500;\n  padding-bottom: 4px;\n  display: inline-block;\n  color: ${(props) => props.theme.text};\n`;\n\nexport default observer(Labeled);\n","// @flow\nimport ArrowKeyNavigation from \"boundless-arrow-key-navigation\";\nimport { isEqual } from \"lodash\";\nimport { observable, action } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { Waypoint } from \"react-waypoint\";\nimport { DEFAULT_PAGINATION_LIMIT } from \"stores/BaseStore\";\nimport DelayedMount from \"components/DelayedMount\";\nimport PlaceholderList from \"components/List/Placeholder\";\n\ntype Props = {\n  fetch?: (options: ?Object) => Promise<void>,\n  options?: Object,\n  heading?: React.Node,\n  empty?: React.Node,\n  items: any[],\n  renderItem: (any) => React.Node,\n};\n\n@observer\nclass PaginatedList extends React.Component<Props> {\n  isInitiallyLoaded: boolean = false;\n  @observable isLoaded: boolean = false;\n  @observable isFetchingMore: boolean = false;\n  @observable isFetching: boolean = false;\n  @observable renderCount: number = DEFAULT_PAGINATION_LIMIT;\n  @observable offset: number = 0;\n  @observable allowLoadMore: boolean = true;\n\n  constructor(props: Props) {\n    super(props);\n    this.isInitiallyLoaded = this.props.items.length > 0;\n  }\n\n  componentDidMount() {\n    this.fetchResults();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.fetch !== this.props.fetch ||\n      !isEqual(prevProps.options, this.props.options)\n    ) {\n      this.reset();\n      this.fetchResults();\n    }\n  }\n\n  reset = () => {\n    this.offset = 0;\n    this.allowLoadMore = true;\n    this.renderCount = DEFAULT_PAGINATION_LIMIT;\n    this.isFetching = false;\n    this.isFetchingMore = false;\n    this.isLoaded = false;\n  };\n\n  fetchResults = async () => {\n    if (!this.props.fetch) return;\n\n    this.isFetching = true;\n\n    const limit = DEFAULT_PAGINATION_LIMIT;\n    const results = await this.props.fetch({\n      limit,\n      offset: this.offset,\n      ...this.props.options,\n    });\n\n    if (results && (results.length === 0 || results.length < limit)) {\n      this.allowLoadMore = false;\n    } else {\n      this.offset += limit;\n    }\n\n    this.renderCount += limit;\n    this.isLoaded = true;\n    this.isFetching = false;\n    this.isFetchingMore = false;\n  };\n\n  @action\n  loadMoreResults = async () => {\n    // Don't paginate if there aren't more results or we’re currently fetching\n    if (!this.allowLoadMore || this.isFetching) return;\n\n    // If there are already cached results that we haven't yet rendered because\n    // of lazy rendering then show another page.\n    const leftToRender = this.props.items.length - this.renderCount;\n    if (leftToRender > 1) {\n      this.renderCount += DEFAULT_PAGINATION_LIMIT;\n    }\n\n    // If there are less than a pages results in the cache go ahead and fetch\n    // another page from the server\n    if (leftToRender <= DEFAULT_PAGINATION_LIMIT) {\n      this.isFetchingMore = true;\n      await this.fetchResults();\n    }\n  };\n\n  render() {\n    const { items, heading, empty } = this.props;\n\n    const showLoading =\n      this.isFetching && !this.isFetchingMore && !this.isInitiallyLoaded;\n    const showEmpty = !items.length && !showLoading;\n    const showList =\n      (this.isLoaded || this.isInitiallyLoaded) && !showLoading && !showEmpty;\n\n    return (\n      <>\n        {showEmpty && empty}\n        {showList && (\n          <>\n            {heading}\n            <ArrowKeyNavigation\n              mode={ArrowKeyNavigation.mode.VERTICAL}\n              defaultActiveChildIndex={0}\n            >\n              {items.slice(0, this.renderCount).map(this.props.renderItem)}\n            </ArrowKeyNavigation>\n            {this.allowLoadMore && (\n              <Waypoint key={this.renderCount} onEnter={this.loadMoreResults} />\n            )}\n          </>\n        )}\n        {showLoading && (\n          <DelayedMount>\n            <PlaceholderList count={5} />\n          </DelayedMount>\n        )}\n      </>\n    );\n  }\n}\n\nexport default PaginatedList;\n","// @flow\nimport * as React from \"react\";\n\ntype InitialState = boolean | (() => boolean);\n\n/**\n * React hook to manage booleans\n *\n * @param initialState the initial boolean state value\n */\nexport default function useBoolean(initialState: InitialState = false) {\n  const [value, setValue] = React.useState(initialState);\n\n  const setTrue = React.useCallback(() => {\n    setValue(true);\n  }, []);\n\n  const setFalse = React.useCallback(() => {\n    setValue(false);\n  }, []);\n\n  return [value, setTrue, setFalse];\n}\n","// @flow\nimport * as React from \"react\";\nimport Document from \"models/Document\";\nimport DocumentListItem from \"components/DocumentListItem\";\nimport PaginatedList from \"components/PaginatedList\";\n\ntype Props = {|\n  documents: Document[],\n  fetch: (options: ?Object) => Promise<void>,\n  options?: Object,\n  heading?: React.Node,\n  empty?: React.Node,\n  showNestedDocuments?: boolean,\n  showCollection?: boolean,\n  showPublished?: boolean,\n  showPin?: boolean,\n  showDraft?: boolean,\n  showTemplate?: boolean,\n|};\n\nconst PaginatedDocumentList = React.memo<Props>(function PaginatedDocumentList({\n  empty,\n  heading,\n  documents,\n  fetch,\n  options,\n  ...rest\n}: Props) {\n  return (\n    <PaginatedList\n      items={documents}\n      empty={empty}\n      heading={heading}\n      fetch={fetch}\n      options={options}\n      renderItem={(item) => (\n        <DocumentListItem key={item.id} document={item} {...rest} />\n      )}\n    />\n  );\n});\n\nexport default PaginatedDocumentList;\n","// @flow\nimport styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport Flex from \"components/Flex\";\n\nexport const Action = styled(Flex)`\n  justify-content: center;\n  align-items: center;\n  padding: 0 0 0 12px;\n  height: 32px;\n  font-size: 15px;\n  flex-shrink: 0;\n\n  &:empty {\n    display: none;\n  }\n`;\n\nexport const Separator = styled.div`\n  flex-shrink: 0;\n  margin-left: 12px;\n  width: 1px;\n  height: 28px;\n  background: ${(props) => props.theme.divider};\n`;\n\nconst Actions = styled(Flex)`\n  position: fixed;\n  top: 0;\n  right: 0;\n  left: 0;\n  border-radius: 3px;\n  background: ${(props) => props.theme.background};\n  transition: ${(props) => props.theme.backgroundTransition};\n  padding: 12px;\n  backdrop-filter: blur(20px);\n\n  @media print {\n    display: none;\n  }\n\n  ${breakpoint(\"tablet\")`\n    left: auto;\n    padding: 24px;\n  `};\n`;\n\nexport default Actions;\n","// @flow\nimport * as React from \"react\";\nimport { Portal } from \"react-portal\";\nimport { Menu } from \"reakit/Menu\";\nimport styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport usePrevious from \"hooks/usePrevious\";\nimport {\n  fadeIn,\n  fadeAndSlideUp,\n  fadeAndSlideDown,\n  mobileContextMenu,\n} from \"styles/animations\";\n\ntype Props = {|\n  \"aria-label\": string,\n  visible?: boolean,\n  placement?: string,\n  animating?: boolean,\n  children: React.Node,\n  onOpen?: () => void,\n  onClose?: () => void,\n|};\n\nexport default function ContextMenu({\n  children,\n  onOpen,\n  onClose,\n  ...rest\n}: Props) {\n  const previousVisible = usePrevious(rest.visible);\n\n  React.useEffect(() => {\n    if (rest.visible && !previousVisible) {\n      if (onOpen) {\n        onOpen();\n      }\n    }\n    if (!rest.visible && previousVisible) {\n      if (onClose) {\n        onClose();\n      }\n    }\n  }, [onOpen, onClose, previousVisible, rest.visible]);\n\n  return (\n    <>\n      <Menu hideOnClickOutside preventBodyScroll {...rest}>\n        {(props) => {\n          // kind of hacky, but this is an effective way of telling which way\n          // the menu will _actually_ be placed when taking into account screen\n          // positioning.\n          const topAnchor = props.style.top === \"0\";\n          const rightAnchor = props.placement === \"bottom-end\";\n\n          return (\n            <Position {...props}>\n              <Background\n                dir=\"auto\"\n                topAnchor={topAnchor}\n                rightAnchor={rightAnchor}\n              >\n                {rest.visible || rest.animating ? children : null}\n              </Background>\n            </Position>\n          );\n        }}\n      </Menu>\n      {(rest.visible || rest.animating) && (\n        <Portal>\n          <Backdrop />\n        </Portal>\n      )}\n    </>\n  );\n}\n\nconst Backdrop = styled.div`\n  animation: ${fadeIn} 200ms ease-in-out;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: ${(props) => props.theme.backdrop};\n  z-index: ${(props) => props.theme.depths.menu - 1};\n\n  ${breakpoint(\"tablet\")`\n    display: none;\n  `};\n`;\n\nconst Position = styled.div`\n  position: absolute;\n  z-index: ${(props) => props.theme.depths.menu};\n\n  ${breakpoint(\"mobile\", \"tablet\")`\n    position: fixed !important;\n    transform: none !important;\n    top: auto !important;\n    right: 8px !important;\n    bottom: 16px !important;\n    left: 8px !important;\n  `};\n`;\n\nconst Background = styled.div`\n  animation: ${mobileContextMenu} 200ms ease;\n  transform-origin: 50% 100%;\n  max-width: 100%;\n  background: ${(props) => props.theme.menuBackground};\n  border-radius: 6px;\n  padding: 6px 0;\n  min-width: 180px;\n  overflow: hidden;\n  overflow-y: auto;\n  max-height: 75vh;\n  pointer-events: all;\n  font-weight: normal;\n\n  @media print {\n    display: none;\n  }\n\n  ${breakpoint(\"tablet\")`\n    animation: ${(props) =>\n      props.topAnchor ? fadeAndSlideDown : fadeAndSlideUp} 200ms ease;\n    transform-origin: ${(props) =>\n      props.rightAnchor === \"bottom-end\" ? \"75%\" : \"25%\"} 0;\n    max-width: 276px;\n    background: ${(props) => props.theme.menuBackground};\n    box-shadow: ${(props) => props.theme.menuShadow};\n    border: ${(props) =>\n      props.theme.menuBorder ? `1px solid ${props.theme.menuBorder}` : \"none\"};\n  `};\n`;\n","// @flow\nimport * as React from \"react\";\nimport { useTranslation, Trans } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport CenteredContent from \"components/CenteredContent\";\nimport Empty from \"components/Empty\";\nimport PageTitle from \"components/PageTitle\";\n\nconst Error404 = () => {\n  const { t } = useTranslation();\n\n  return (\n    <CenteredContent>\n      <PageTitle title={t(\"Not found\")} />\n      <h1>{t(\"Not found\")}</h1>\n      <Empty>\n        <Trans>\n          We were unable to find the page you’re looking for. Go to the{\" \"}\n          <Link to=\"/home\">homepage</Link>?\n        </Trans>\n      </Empty>\n    </CenteredContent>\n  );\n};\n\nexport default Error404;\n","// @flow\nimport copy from \"copy-to-clipboard\";\nimport * as React from \"react\";\n\ntype Props = {\n  text: string,\n  children?: React.Node,\n  onClick?: () => void,\n  onCopy: () => void,\n};\n\nclass CopyToClipboard extends React.PureComponent<Props> {\n  onClick = (ev: SyntheticEvent<>) => {\n    const { text, onCopy, children } = this.props;\n    const elem = React.Children.only(children);\n    copy(text, {\n      debug: process.env.NODE_ENV !== \"production\",\n      format: \"text/plain\",\n    });\n\n    if (onCopy) onCopy();\n\n    if (elem && elem.props && typeof elem.props.onClick === \"function\") {\n      elem.props.onClick(ev);\n    }\n  };\n\n  render() {\n    const { text: _text, onCopy: _onCopy, children, ...rest } = this.props;\n    const elem = React.Children.only(children);\n    return React.cloneElement(elem, { ...rest, onClick: this.onClick });\n  }\n}\n\nexport default CopyToClipboard;\n","// @flow\nimport { m } from \"framer-motion\";\nimport * as React from \"react\";\nimport { NavLink, Route } from \"react-router-dom\";\nimport styled, { withTheme } from \"styled-components\";\nimport { type Theme } from \"types\";\n\ntype Props = {\n  theme: Theme,\n  children: React.Node,\n};\n\nconst NavLinkWithChildrenFunc = ({ to, exact = false, children, ...rest }) => (\n  <Route path={to} exact={exact}>\n    {({ match }) => (\n      <NavLink to={to} exact={exact} {...rest}>\n        {children(match)}\n      </NavLink>\n    )}\n  </Route>\n);\n\nconst TabLink = styled(NavLinkWithChildrenFunc)`\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  font-weight: 500;\n  font-size: 14px;\n  color: ${(props) => props.theme.textTertiary};\n  margin-right: 24px;\n  padding: 6px 0;\n\n  &:hover {\n    color: ${(props) => props.theme.textSecondary};\n  }\n`;\n\nconst Active = styled(m.div)`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 3px;\n  width: 100%;\n  border-top-left-radius: 2px;\n  border-top-right-radius: 2px;\n  background: ${(props) => props.theme.textSecondary};\n`;\n\nconst transition = {\n  type: \"spring\",\n  stiffness: 500,\n  damping: 30,\n};\n\nfunction Tab({ theme, children, ...rest }: Props) {\n  const activeStyle = {\n    color: theme.textSecondary,\n  };\n\n  return (\n    <TabLink {...rest} activeStyle={activeStyle}>\n      {(match) => (\n        <>\n          {children}\n          {match && (\n            <Active\n              layoutId=\"underline\"\n              initial={false}\n              transition={transition}\n            />\n          )}\n        </>\n      )}\n    </TabLink>\n  );\n}\n\nexport default withTheme(Tab);\n","// @flow\nimport { throttle } from \"lodash\";\nimport { observer } from \"mobx-react\";\nimport { transparentize } from \"polished\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport Fade from \"components/Fade\";\nimport Flex from \"components/Flex\";\n\ntype Props = {|\n  breadcrumb?: React.Node,\n  title: React.Node,\n  actions?: React.Node,\n|};\n\nfunction Header({ breadcrumb, title, actions }: Props) {\n  const [isScrolled, setScrolled] = React.useState(false);\n\n  const handleScroll = React.useCallback(\n    throttle(() => setScrolled(window.scrollY > 75), 50),\n    []\n  );\n\n  React.useEffect(() => {\n    window.addEventListener(\"scroll\", handleScroll);\n\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, [handleScroll]);\n\n  const handleClickTitle = React.useCallback(() => {\n    window.scrollTo({\n      top: 0,\n      behavior: \"smooth\",\n    });\n  }, []);\n\n  return (\n    <Wrapper align=\"center\" isCompact={isScrolled} shrink={false}>\n      {breadcrumb ? <Breadcrumbs>{breadcrumb}</Breadcrumbs> : null}\n      {isScrolled ? (\n        <Title align=\"center\" justify=\"flex-start\" onClick={handleClickTitle}>\n          <Fade>{title}</Fade>\n        </Title>\n      ) : (\n        <div />\n      )}\n      {actions && (\n        <Actions align=\"center\" justify=\"flex-end\">\n          {actions}\n        </Actions>\n      )}\n    </Wrapper>\n  );\n}\n\nconst Breadcrumbs = styled(\"div\")`\n  flex-grow: 1;\n  flex-basis: 0;\n  align-items: center;\n  padding-right: 8px;\n\n  /* Don't show breadcrumbs on mobile */\n  display: none;\n  ${breakpoint(\"tablet\")`\t\n  display: flex;\n`};\n`;\n\nconst Actions = styled(Flex)`\n  flex-grow: 1;\n  flex-basis: 0;\n  min-width: auto;\n  padding-left: 8px;\n\n  ${breakpoint(\"tablet\")`\n    position: unset;\n  `};\n`;\n\nconst Wrapper = styled(Flex)`\n  position: sticky;\n  top: 0;\n  z-index: ${(props) => props.theme.depths.header};\n  background: ${(props) => transparentize(0.2, props.theme.background)};\n  padding: 12px;\n  transition: all 100ms ease-out;\n  transform: translate3d(0, 0, 0);\n  backdrop-filter: blur(20px);\n  min-height: 56px;\n  justify-content: flex-start;\n\n  @media print {\n    display: none;\n  }\n\n  ${breakpoint(\"tablet\")`\n    padding: ${(props) => (props.isCompact ? \"12px\" : `24px 24px 0`)};\n    justify-content: \"center\";\n  `};\n`;\n\nconst Title = styled(\"div\")`\n  display: none;\n  font-size: 16px;\n  font-weight: 600;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  cursor: pointer;\n  min-width: 0;\n\n  ${breakpoint(\"tablet\")`\t\n    padding-left: 0;\n    display: block;\n  `};\n\n  svg {\n    vertical-align: bottom;\n  }\n\n  @media (display-mode: standalone) {\n    overflow: hidden;\n    flex-grow: 0 !important;\n  }\n`;\n\nexport default observer(Header);\n","// @flow\nconst randomInteger = (min: number, max: number) => {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n};\n\nexport { randomInteger };\n","// @flow\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport { randomInteger } from \"shared/random\";\nimport Flex from \"components/Flex\";\nimport { pulsate } from \"styles/animations\";\n\ntype Props = {|\n  header?: boolean,\n  height?: number,\n  minWidth?: number,\n  maxWidth?: number,\n  delay?: number,\n|};\n\nclass PlaceholderText extends React.Component<Props> {\n  width = randomInteger(this.props.minWidth || 75, this.props.maxWidth || 100);\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  render() {\n    return (\n      <Mask\n        width={this.width}\n        height={this.props.height}\n        delay={this.props.delay}\n      />\n    );\n  }\n}\n\nconst Mask = styled(Flex)`\n  width: ${(props) => (props.header ? props.width / 2 : props.width)}%;\n  height: ${(props) =>\n    props.height ? props.height : props.header ? 24 : 18}px;\n  margin-bottom: 6px;\n  border-radius: 6px;\n  background-color: ${(props) => props.theme.divider};\n  animation: ${pulsate} 2s infinite;\n  animation-delay: ${(props) => props.delay || 0}s;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n`;\n\nexport default PlaceholderText;\n","// @flow\nexport default function getDataTransferFiles(event: SyntheticEvent<>): File[] {\n  let dataTransferItemsList = [];\n\n  // $FlowFixMe\n  if (event.dataTransfer) {\n    const dt = event.dataTransfer;\n    if (dt.files && dt.files.length) {\n      dataTransferItemsList = dt.files;\n    } else if (dt.items && dt.items.length) {\n      // During the drag even the dataTransfer.files is null\n      // but Chrome implements some drag store, which is accesible via dataTransfer.items\n      dataTransferItemsList = dt.items;\n    }\n\n    // $FlowFixMe\n  } else if (event.target && event.target.files) {\n    dataTransferItemsList = event.target.files;\n  }\n  // Convert from DataTransferItemsList to the native Array\n  return Array.prototype.slice.call(dataTransferItemsList);\n}\n","// @flow\nimport { AnimateSharedLayout } from \"framer-motion\";\nimport { transparentize } from \"polished\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport useWindowSize from \"hooks/useWindowSize\";\n\nconst Nav = styled.nav`\n  border-bottom: 1px solid ${(props) => props.theme.divider};\n  margin: 12px 0;\n  overflow-y: auto;\n  white-space: nowrap;\n\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  &:after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 50px;\n    height: 100%;\n    pointer-events: none;\n    background: ${(props) =>\n      props.$shadowVisible\n        ? `linear-gradient(\n      90deg,\n      ${transparentize(1, props.theme.background)} 0%,\n      ${props.theme.background} 100%\n    )`\n        : `transparent`};\n  }\n`;\n\n// When sticky we need extra background coverage around the sides otherwise\n// items that scroll past can \"stick out\" the sides of the heading\nconst Sticky = styled.div`\n  position: sticky;\n  top: 54px;\n  margin: 0 -8px;\n  padding: 0 8px;\n  background: ${(props) => props.theme.background};\n  transition: ${(props) => props.theme.backgroundTransition};\n  z-index: 1;\n`;\n\nexport const Separator = styled.span`\n  border-left: 1px solid ${(props) => props.theme.divider};\n  position: relative;\n  top: 2px;\n  margin-right: 24px;\n  margin-top: 6px;\n`;\n\nconst Tabs = ({ children }: {| children: React.Node |}) => {\n  const ref = React.useRef<?HTMLDivElement>();\n  const [shadowVisible, setShadow] = React.useState(false);\n  const { width } = useWindowSize();\n\n  const updateShadows = React.useCallback(() => {\n    const c = ref.current;\n    if (!c) return;\n\n    const scrollLeft = c.scrollLeft;\n    const wrapperWidth = c.scrollWidth - c.clientWidth;\n    const fade = !!(wrapperWidth - scrollLeft !== 0);\n\n    if (fade !== shadowVisible) {\n      setShadow(fade);\n    }\n  }, [shadowVisible]);\n\n  React.useEffect(() => {\n    updateShadows();\n  }, [width, updateShadows]);\n\n  return (\n    <AnimateSharedLayout>\n      <Sticky>\n        <Nav ref={ref} onScroll={updateShadows} $shadowVisible={shadowVisible}>\n          {children}\n        </Nav>\n      </Sticky>\n    </AnimateSharedLayout>\n  );\n};\n\nexport default Tabs;\n","// @flow\nimport styled from \"styled-components\";\n\nconst Header = styled.h3`\n  font-size: 11px;\n  font-weight: 600;\n  text-transform: uppercase;\n  color: ${(props) => props.theme.sidebarText};\n  letter-spacing: 0.04em;\n  margin: 1em 12px 0.5em;\n`;\n\nexport default Header;\n","// @flow\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nconst Button = styled.button`\n  width: ${(props) => props.width || props.size}px;\n  height: ${(props) => props.height || props.size}px;\n  background: none;\n  border-radius: 4px;\n  line-height: 0;\n  border: 0;\n  padding: 0;\n  cursor: pointer;\n  user-select: none;\n`;\n\nexport default React.forwardRef<any, typeof Button>(\n  ({ size = 24, ...props }, ref) => <Button size={size} {...props} ref={ref} />\n);\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { GoToIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport type { DocumentPath } from \"stores/CollectionsStore\";\nimport Collection from \"models/Collection\";\nimport Document from \"models/Document\";\nimport CollectionIcon from \"components/CollectionIcon\";\nimport Flex from \"components/Flex\";\n\ntype Props = {\n  result: DocumentPath,\n  document?: ?Document,\n  collection: ?Collection,\n  onSuccess?: () => void,\n  style?: Object,\n  ref?: (?React.ElementRef<\"div\">) => void,\n};\n\n@observer\nclass PathToDocument extends React.Component<Props> {\n  handleClick = async (ev: SyntheticEvent<>) => {\n    ev.preventDefault();\n    const { document, result, onSuccess } = this.props;\n    if (!document) return;\n\n    if (result.type === \"document\") {\n      await document.move(result.collectionId, result.id);\n    } else {\n      await document.move(result.collectionId, null);\n    }\n\n    if (onSuccess) onSuccess();\n  };\n\n  render() {\n    const { result, collection, document, ref, style } = this.props;\n    const Component = document ? ResultWrapperLink : ResultWrapper;\n\n    if (!result) return <div />;\n\n    return (\n      <Component\n        ref={ref}\n        onClick={this.handleClick}\n        href=\"\"\n        style={style}\n        role=\"option\"\n        selectable\n      >\n        {collection && <CollectionIcon collection={collection} />}\n        &nbsp;\n        {result.path\n          .map((doc) => <Title key={doc.id}>{doc.title}</Title>)\n          .reduce((prev, curr) => [prev, <StyledGoToIcon />, curr])}\n        {document && (\n          <DocumentTitle>\n            {\" \"}\n            <StyledGoToIcon /> <Title>{document.title}</Title>\n          </DocumentTitle>\n        )}\n      </Component>\n    );\n  }\n}\n\nconst DocumentTitle = styled(Flex)``;\n\nconst Title = styled.span`\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst StyledGoToIcon = styled(GoToIcon)`\n  fill: ${(props) => props.theme.divider};\n`;\n\nconst ResultWrapper = styled.div`\n  display: flex;\n  margin-bottom: 10px;\n  user-select: none;\n\n  color: ${(props) => props.theme.text};\n  cursor: default;\n\n  svg {\n    flex-shrink: 0;\n  }\n`;\n\nconst ResultWrapperLink = styled(ResultWrapper.withComponent(\"a\"))`\n  padding: 8px 4px;\n\n  ${DocumentTitle} {\n    display: none;\n  }\n\n  svg {\n    flex-shrink: 0;\n  }\n\n  &:hover,\n  &:active,\n  &:focus {\n    background: ${(props) => props.theme.listItemHoverBackground};\n    outline: none;\n\n    ${DocumentTitle} {\n      display: flex;\n    }\n  }\n`;\n\nexport default PathToDocument;\n","// @flow\nimport { Search } from \"js-search\";\nimport { last } from \"lodash\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport { useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport AutoSizer from \"react-virtualized-auto-sizer\";\nimport { FixedSizeList as List } from \"react-window\";\nimport styled from \"styled-components\";\nimport { type DocumentPath } from \"stores/CollectionsStore\";\nimport Document from \"models/Document\";\nimport Flex from \"components/Flex\";\nimport { Outline } from \"components/Input\";\nimport Labeled from \"components/Labeled\";\nimport PathToDocument from \"components/PathToDocument\";\nimport useStores from \"hooks/useStores\";\nimport useToasts from \"hooks/useToasts\";\n\ntype Props = {|\n  document: Document,\n  onRequestClose: () => void,\n|};\n\nfunction DocumentMove({ document, onRequestClose }: Props) {\n  const [searchTerm, setSearchTerm] = useState();\n  const { collections, documents } = useStores();\n  const { showToast } = useToasts();\n  const { t } = useTranslation();\n\n  const searchIndex = useMemo(() => {\n    const paths = collections.pathsToDocuments;\n    const index = new Search(\"id\");\n    index.addIndex(\"title\");\n\n    // Build index\n    const indexeableDocuments = [];\n    paths.forEach((path) => {\n      const doc = documents.get(path.id);\n      if (!doc || !doc.isTemplate) {\n        indexeableDocuments.push(path);\n      }\n    });\n    index.addDocuments(indexeableDocuments);\n\n    return index;\n  }, [documents, collections.pathsToDocuments]);\n\n  const results: DocumentPath[] = useMemo(() => {\n    const onlyShowCollections = document.isTemplate;\n    let results = [];\n    if (collections.isLoaded) {\n      if (searchTerm) {\n        results = searchIndex.search(searchTerm);\n      } else {\n        results = searchIndex._documents;\n      }\n    }\n\n    if (onlyShowCollections) {\n      results = results.filter((result) => result.type === \"collection\");\n    } else {\n      // Exclude root from search results if document is already at the root\n      if (!document.parentDocumentId) {\n        results = results.filter(\n          (result) => result.id !== document.collectionId\n        );\n      }\n\n      // Exclude document if on the path to result, or the same result\n      results = results.filter(\n        (result) =>\n          !result.path.map((doc) => doc.id).includes(document.id) &&\n          last(result.path.map((doc) => doc.id)) !== document.parentDocumentId\n      );\n    }\n\n    return results;\n  }, [document, collections, searchTerm, searchIndex]);\n\n  const handleSuccess = () => {\n    showToast(t(\"Document moved\"), { type: \"info\" });\n    onRequestClose();\n  };\n\n  const handleFilter = (ev: SyntheticInputEvent<*>) => {\n    setSearchTerm(ev.target.value);\n  };\n\n  const renderPathToCurrentDocument = () => {\n    const result = collections.getPathForDocument(document.id);\n\n    if (result) {\n      return (\n        <PathToDocument\n          result={result}\n          collection={collections.get(result.collectionId)}\n        />\n      );\n    }\n  };\n\n  const row = ({ index, data, style }) => {\n    const result = data[index];\n\n    return (\n      <PathToDocument\n        result={result}\n        document={document}\n        collection={collections.get(result.collectionId)}\n        onSuccess={handleSuccess}\n        style={style}\n      />\n    );\n  };\n\n  const data = results;\n\n  if (!document || !collections.isLoaded) {\n    return null;\n  }\n\n  return (\n    <Flex column>\n      <Section>\n        <Labeled label={t(\"Current location\")}>\n          {renderPathToCurrentDocument()}\n        </Labeled>\n      </Section>\n\n      <Section column>\n        <Labeled label={t(\"Choose a new location\")} />\n        <NewLocation>\n          <InputWrapper>\n            <Input\n              type=\"search\"\n              placeholder={`${t(\"Search collections & documents\")}…`}\n              onChange={handleFilter}\n              required\n              autoFocus\n            />\n          </InputWrapper>\n          <Results>\n            <AutoSizer>\n              {({ width, height }) => (\n                <Flex role=\"listbox\" column>\n                  <List\n                    key={data.length}\n                    width={width}\n                    height={height}\n                    itemData={data}\n                    itemCount={data.length}\n                    itemSize={40}\n                    itemKey={(index, data) => data[index].id}\n                  >\n                    {row}\n                  </List>\n                </Flex>\n              )}\n            </AutoSizer>\n          </Results>\n        </NewLocation>\n      </Section>\n    </Flex>\n  );\n}\n\nconst InputWrapper = styled(\"div\")`\n  padding: 8px;\n  width: 100%;\n`;\n\nconst Input = styled(\"input\")`\n  width: 100%;\n  outline: none;\n  background: none;\n  border-radius: 4px;\n  height: 30px;\n  border: 0;\n  color: ${(props) => props.theme.text};\n\n  &::placeholder {\n    color: ${(props) => props.theme.placeholder};\n  }\n`;\n\nconst NewLocation = styled(Outline)`\n  display: block;\n  flex: initial;\n  height: 40vh;\n`;\n\nconst Results = styled.div`\n  padding: 8px 0;\n  height: calc(100% - 46px);\n`;\n\nconst Section = styled(Flex)`\n  margin-bottom: 24px;\n`;\n\nexport default observer(DocumentMove);\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA4pJREFUaAXtWUtIVVEUXe/5KTMrv5lmVqKS6SM0NKjQweuDpYNsEOkgqKYV0aAgIppUg4JGTQoiKprUoEAIHCRUpKiEWlARFGaZ5jcs8Pd668EFfT/PPu9cP+ACedx7z117rXvP3Wfvo6O67pQHixjORazdJ33JwHy/waU3MN9vINqkgIz0VJSVuLCtMB+pyYlISlztox8YHEZf/yDedX5EU2s7fvT0GQvrMJFGczZm4diRari25ikJa3//CfceP8OXr11K48MNisiA0+nEibpDqHTvgsPhCBcn4JrH40F9wyvcefAUU1NTAddVT2hPofgVcTh/+jhcBbmqsWaMo+EDe3YjKzMd127dxejffzOuqx5oZSE++UjETxfHB0AucupA6y5OG90nH0wkucipA7EBfrCc86ZBTnJLITbAbCP9YFVEkZPcUogMZKanKadKqRCOZxrmWiKByEBpSZGEW2ssF0IJRAa4wtoNaQyRAZYHdkMaQ2TAqm3sNCGNITJgp3CLmyWGBCIDrCrtxuDQiCiEyABLYrshjSEywHrebkhjiAw0t3bYrd/X8EiCiAx09/SCzYhdILe0WxMZoHB2UtJMoWKYnOSWQmyAbSA7KdMgp06LKTZA4WwD2z98NuaBXOTUgZYB9rBsA02YIAe5dPviqHxX2WUd5+PjE2h804KElfHI3bxB3CNYTf3N2/cxNjauI8F3T0S7ElbURbutYhmwftnwsGcIt7HFtYTp2BSMvAFTYnR4tD5inUB23aO9seUvKHv9OpQWF/o2qljTJ63x/k3bGx0YGgar2a7uHjS3deLb95/+FFrHEU0hinaX70BZcRHWpiWLBPzq7UdTWwcaGt9GZEbLQIq3taytqUTFzu3aO2qWW+b/l69b8PBJPX5rlOsiA9FRUTjqFV69vwIxMcZmn88L14LnLxrxyGtkYnLS8jfrr7KKVQnxuODdwyzIz5mVVGdAbGwMaqrc2JK3CVe9K/PIn1ElGqUslJ2VgRtXztkmfrpSPiDGYkwVzGqARNcvnUFaSpIKn5ExjMWYKibCGuC0uXj2JOKWLzMiTELCmIxNDeEQ0gA/WM75uXzy/kIZmxqoJRRCGqg9XDkncz6UMOs8vwlmvlAIaoB5/uDe8lD3zPn5qn3loKZgCGqAixTT2kIBtVBTMAQYYHnAFXahgZqozR8BBljb6P7DzZ/c5DE1UZs//gMlSRvxAg4G8wAAAABJRU5ErkJggg==\"","// @flow\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport User from \"models/User\";\nimport Avatar from \"components/Avatar\";\nimport Flex from \"components/Flex\";\n\ntype Props = {|\n  users: User[],\n  size?: number,\n  overflow: number,\n  onClick?: (event: SyntheticEvent<>) => mixed,\n  renderAvatar?: (user: User) => React.Node,\n|};\n\nfunction Facepile({\n  users,\n  overflow,\n  size = 32,\n  renderAvatar = DefaultAvatar,\n  ...rest\n}: Props) {\n  return (\n    <Avatars {...rest}>\n      {overflow > 0 && (\n        <More size={size}>\n          <span>+{overflow}</span>\n        </More>\n      )}\n      {users.map((user) => (\n        <AvatarWrapper key={user.id}>{renderAvatar(user)}</AvatarWrapper>\n      ))}\n    </Avatars>\n  );\n}\n\nfunction DefaultAvatar(user: User) {\n  return <Avatar user={user} src={user.avatarUrl} size={32} />;\n}\n\nconst AvatarWrapper = styled.div`\n  margin-right: -8px;\n\n  &:first-child {\n    margin-right: 0;\n  }\n`;\n\nconst More = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-width: ${(props) => props.size}px;\n  height: ${(props) => props.size}px;\n  border-radius: 100%;\n  background: ${(props) => props.theme.slate};\n  color: ${(props) => props.theme.text};\n  border: 2px solid ${(props) => props.theme.background};\n  text-align: center;\n  font-size: 11px;\n  font-weight: 600;\n`;\n\nconst Avatars = styled(Flex)`\n  align-items: center;\n  flex-direction: row-reverse;\n  cursor: pointer;\n`;\n\nexport default observer(Facepile);\n","// @flow\n\nimport * as React from \"react\";\n\ntype Props = {\n  children: React.Node,\n  className?: string,\n};\n\nexport default function EventBoundary({ children, className }: Props) {\n  const handleClick = React.useCallback((event: SyntheticEvent<>) => {\n    event.preventDefault();\n    event.stopPropagation();\n  }, []);\n\n  return (\n    <span onClick={handleClick} className={className}>\n      {children}\n    </span>\n  );\n}\n","// @flow\nimport { observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport User from \"models/User\";\nimport placeholder from \"./placeholder.png\";\n\ntype Props = {|\n  src: string,\n  size: number,\n  icon?: React.Node,\n  user?: User,\n  onClick?: () => void,\n  className?: string,\n|};\n\n@observer\nclass Avatar extends React.Component<Props> {\n  @observable error: boolean;\n\n  static defaultProps = {\n    size: 24,\n  };\n\n  handleError = () => {\n    this.error = true;\n  };\n\n  render() {\n    const { src, icon, ...rest } = this.props;\n\n    return (\n      <AvatarWrapper>\n        <CircleImg\n          onError={this.handleError}\n          src={this.error ? placeholder : src}\n          {...rest}\n        />\n        {icon && <IconWrapper>{icon}</IconWrapper>}\n      </AvatarWrapper>\n    );\n  }\n}\n\nconst AvatarWrapper = styled.div`\n  position: relative;\n`;\n\nconst IconWrapper = styled.div`\n  display: flex;\n  position: absolute;\n  bottom: -2px;\n  right: -2px;\n  background: ${(props) => props.theme.primary};\n  border: 2px solid ${(props) => props.theme.background};\n  border-radius: 100%;\n  width: 20px;\n  height: 20px;\n`;\n\nconst CircleImg = styled.img`\n  display: block;\n  width: ${(props) => props.size}px;\n  height: ${(props) => props.size}px;\n  border-radius: 50%;\n  border: 2px solid ${(props) => props.theme.background};\n  flex-shrink: 0;\n`;\n\nexport default Avatar;\n","// @flow\nimport { formatDistanceToNow } from \"date-fns\";\nimport { observer } from \"mobx-react\";\nimport { EditIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { withRouter, type RouterHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { settings } from \"shared/utils/routeHelpers\";\nimport User from \"models/User\";\nimport Avatar from \"components/Avatar\";\nimport Badge from \"components/Badge\";\nimport Button from \"components/Button\";\nimport Flex from \"components/Flex\";\nimport HelpText from \"components/HelpText\";\nimport Modal from \"components/Modal\";\nimport PaginatedDocumentList from \"components/PaginatedDocumentList\";\nimport Subheading from \"components/Subheading\";\nimport useCurrentUser from \"hooks/useCurrentUser\";\nimport useStores from \"hooks/useStores\";\n\ntype Props = {|\n  user: User,\n  history: RouterHistory,\n  onRequestClose: () => void,\n|};\n\nfunction UserProfile(props: Props) {\n  const { t } = useTranslation();\n  const { documents } = useStores();\n  const currentUser = useCurrentUser();\n  const { user, ...rest } = props;\n\n  if (!user) return null;\n  const isCurrentUser = currentUser.id === user.id;\n\n  return (\n    <Modal\n      title={\n        <Flex align=\"center\">\n          <Avatar src={user.avatarUrl} size={38} />\n          <span>&nbsp;{user.name}</span>\n        </Flex>\n      }\n      {...rest}\n    >\n      <Flex column>\n        <Meta>\n          {isCurrentUser\n            ? t(\"You joined\")\n            : user.lastActiveAt\n            ? t(\"Joined\")\n            : t(\"Invited\")}{\" \"}\n          {t(\"{{ time }} ago.\", {\n            time: formatDistanceToNow(Date.parse(user.createdAt)),\n          })}\n          {user.isAdmin && (\n            <StyledBadge primary={user.isAdmin}>{t(\"Admin\")}</StyledBadge>\n          )}\n          {user.isSuspended && <StyledBadge>{t(\"Suspended\")}</StyledBadge>}\n          {isCurrentUser && (\n            <Edit>\n              <Button\n                onClick={() => props.history.push(settings())}\n                icon={<EditIcon />}\n                neutral\n              >\n                {t(\"Edit Profile\")}\n              </Button>\n            </Edit>\n          )}\n        </Meta>\n        <PaginatedDocumentList\n          documents={documents.createdByUser(user.id)}\n          fetch={documents.fetchOwned}\n          options={{ user: user.id }}\n          heading={<Subheading>{t(\"Recently updated\")}</Subheading>}\n          empty={\n            <HelpText>\n              {t(\"{{ userName }} hasn’t updated any documents yet.\", {\n                userName: user.name,\n              })}\n            </HelpText>\n          }\n          showCollection\n        />\n      </Flex>\n    </Modal>\n  );\n}\n\nconst Edit = styled.span`\n  position: absolute;\n  top: 46px;\n  right: 0;\n`;\n\nconst StyledBadge = styled(Badge)`\n  position: relative;\n  top: -2px;\n`;\n\nconst Meta = styled(HelpText)`\n  margin-top: -12px;\n`;\n\nexport default withRouter(observer(UserProfile));\n","// @flow\nimport { observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport { EditIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { withTranslation, type TFunction } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport User from \"models/User\";\nimport UserProfile from \"scenes/UserProfile\";\nimport Avatar from \"components/Avatar\";\nimport Tooltip from \"components/Tooltip\";\n\ntype Props = {\n  user: User,\n  isPresent: boolean,\n  isEditing: boolean,\n  isCurrentUser: boolean,\n  profileOnClick: boolean,\n  t: TFunction,\n};\n\n@observer\nclass AvatarWithPresence extends React.Component<Props> {\n  @observable isOpen: boolean = false;\n\n  handleOpenProfile = () => {\n    this.isOpen = true;\n  };\n\n  handleCloseProfile = () => {\n    this.isOpen = false;\n  };\n\n  render() {\n    const { user, isPresent, isEditing, isCurrentUser, t } = this.props;\n\n    const action = isPresent\n      ? isEditing\n        ? t(\"currently editing\")\n        : t(\"currently viewing\")\n      : t(\"previously edited\");\n\n    return (\n      <>\n        <Tooltip\n          tooltip={\n            <Centered>\n              <strong>{user.name}</strong> {isCurrentUser && `(${t(\"You\")})`}\n              {action && (\n                <>\n                  <br />\n                  {action}\n                </>\n              )}\n            </Centered>\n          }\n          placement=\"bottom\"\n        >\n          <AvatarWrapper isPresent={isPresent}>\n            <Avatar\n              src={user.avatarUrl}\n              onClick={\n                this.props.profileOnClick === false\n                  ? undefined\n                  : this.handleOpenProfile\n              }\n              size={32}\n              icon={isEditing ? <EditIcon size={16} color=\"#FFF\" /> : undefined}\n            />\n          </AvatarWrapper>\n        </Tooltip>\n        <UserProfile\n          user={user}\n          isOpen={this.isOpen}\n          onRequestClose={this.handleCloseProfile}\n        />\n      </>\n    );\n  }\n}\n\nconst Centered = styled.div`\n  text-align: center;\n`;\n\nconst AvatarWrapper = styled.div`\n  opacity: ${(props) => (props.isPresent ? 1 : 0.5)};\n  transition: opacity 250ms ease-in-out;\n`;\n\nexport default withTranslation()<AvatarWithPresence>(AvatarWithPresence);\n","// @flow\nimport Avatar from \"./Avatar\";\nimport AvatarWithPresence from \"./AvatarWithPresence\";\n\nexport { AvatarWithPresence };\nexport default Avatar;\n","// @flow\nimport invariant from \"invariant\";\nimport useStores from \"./useStores\";\n\nexport default function useCurrentUser() {\n  const { auth } = useStores();\n  invariant(auth.user, \"user required\");\n  return auth.user;\n}\n","// @flow\nimport { MoreIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { MenuButton } from \"reakit/Menu\";\nimport NudeButton from \"components/NudeButton\";\n\nexport default function OverflowMenuButton({\n  iconColor,\n  className,\n  ...rest\n}: any) {\n  return (\n    <MenuButton {...rest}>\n      {(props) => (\n        <NudeButton className={className} {...props}>\n          <MoreIcon color={iconColor} />\n        </NudeButton>\n      )}\n    </MenuButton>\n  );\n}\n","// @flow\nimport styled from \"styled-components\";\n\nconst Key = styled.kbd`\n  display: inline-block;\n  padding: 4px 6px;\n  font: 11px \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, Courier,\n    monospace;\n  line-height: 10px;\n  color: ${(props) => props.theme.almostBlack};\n  vertical-align: middle;\n  background-color: ${(props) => props.theme.smokeLight};\n  border: solid 1px ${(props) => props.theme.slateLight};\n  border-bottom-color: ${(props) => props.theme.slate};\n  border-radius: 3px;\n  box-shadow: inset 0 -1px 0 ${(props) => props.theme.slate};\n`;\n\nexport default Key;\n","// @flow\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport Flex from \"components/Flex\";\nimport InputSearch from \"components/InputSearch\";\nimport Key from \"components/Key\";\nimport { metaDisplay } from \"utils/keyboard\";\n\nfunction KeyboardShortcuts() {\n  const { t } = useTranslation();\n\n  const categories = React.useMemo(\n    () => [\n      {\n        title: t(\"Navigation\"),\n        items: [\n          {\n            shortcut: <Key>n</Key>,\n            label: t(\"New document\"),\n          },\n          { shortcut: <Key>e</Key>, label: t(\"Edit current document\") },\n          { shortcut: <Key>m</Key>, label: t(\"Move current document\") },\n          {\n            shortcut: (\n              <>\n                <Key>/</Key> or <Key>t</Key>\n              </>\n            ),\n            label: t(\"Jump to search\"),\n          },\n          { shortcut: <Key>d</Key>, label: t(\"Jump to home\") },\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key>Alt</Key> + <Key>h</Key>\n              </>\n            ),\n            label: t(\"Table of contents\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>{metaDisplay}</Key> + <Key>.</Key>\n              </>\n            ),\n            label: t(\"Toggle navigation\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>{metaDisplay}</Key> + <Key>f</Key>\n              </>\n            ),\n            label: t(\"Focus search input\"),\n          },\n          { shortcut: <Key>?</Key>, label: t(\"Open this guide\") },\n          {\n            shortcut: (\n              <>\n                <Key>{metaDisplay}</Key> + <Key>Enter</Key>\n              </>\n            ),\n            label: t(\"Save document and exit\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>{metaDisplay}</Key> + <Key>⇧</Key> + <Key>p</Key>\n              </>\n            ),\n            label: t(\"Publish document and exit\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>{metaDisplay}</Key> + <Key>s</Key>\n              </>\n            ),\n            label: t(\"Save document\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>{metaDisplay}</Key> + <Key>Esc</Key>\n              </>\n            ),\n            label: t(\"Cancel editing\"),\n          },\n        ],\n      },\n      {\n        title: t(\"Formatting\"),\n        items: [\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key>⇧</Key> + <Key>0</Key>\n              </>\n            ),\n            label: t(\"Paragraph\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key>⇧</Key> + <Key>1</Key>\n              </>\n            ),\n            label: t(\"Large header\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key>⇧</Key> + <Key>2</Key>\n              </>\n            ),\n            label: t(\"Medium header\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key>⇧</Key> + <Key>3</Key>\n              </>\n            ),\n            label: t(\"Small header\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key>⇧</Key> + <Key>\\</Key>\n              </>\n            ),\n            label: t(\"Code block\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>{metaDisplay}</Key> + <Key>b</Key>\n              </>\n            ),\n            label: t(\"Bold\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>{metaDisplay}</Key> + <Key>i</Key>\n              </>\n            ),\n            label: t(\"Italic\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>{metaDisplay}</Key> + <Key>u</Key>\n              </>\n            ),\n            label: t(\"Underline\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>{metaDisplay}</Key> + <Key>d</Key>\n              </>\n            ),\n            label: t(\"Strikethrough\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>{metaDisplay}</Key> + <Key>k</Key>\n              </>\n            ),\n            label: t(\"Link\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>{metaDisplay}</Key> + <Key>z</Key>\n              </>\n            ),\n            label: t(\"Undo\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>{metaDisplay}</Key> + <Key>⇧</Key> + <Key>z</Key>\n              </>\n            ),\n            label: t(\"Redo\"),\n          },\n        ],\n      },\n      {\n        title: t(\"Lists\"),\n        items: [\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key>⇧</Key> + <Key>7</Key>\n              </>\n            ),\n            label: t(\"Todo list\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key>⇧</Key> + <Key>8</Key>\n              </>\n            ),\n            label: t(\"Bulleted list\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>Ctrl</Key> + <Key>⇧</Key> + <Key>9</Key>\n              </>\n            ),\n            label: t(\"Ordered list\"),\n          },\n          {\n            shortcut: <Key>Tab</Key>,\n            label: t(\"Indent list item\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>⇧</Key> + <Key>Tab</Key>\n              </>\n            ),\n            label: t(\"Outdent list item\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>Alt</Key> + <Key>↑</Key>\n              </>\n            ),\n            label: t(\"Move list item up\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>Alt</Key> + <Key>↓</Key>\n              </>\n            ),\n            label: t(\"Move list item down\"),\n          },\n        ],\n      },\n      {\n        title: \"Markdown\",\n        items: [\n          {\n            shortcut: (\n              <>\n                <Key>#</Key> <Key>Space</Key>\n              </>\n            ),\n            label: t(\"Large header\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>##</Key> <Key>Space</Key>\n              </>\n            ),\n            label: t(\"Medium header\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>###</Key> <Key>Space</Key>\n              </>\n            ),\n            label: t(\"Small header\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>1.</Key> <Key>Space</Key>\n              </>\n            ),\n            label: t(\"Numbered list\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>-</Key> <Key>Space</Key>\n              </>\n            ),\n            label: t(\"Bulleted list\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>[ ]</Key> <Key>Space</Key>\n              </>\n            ),\n            label: t(\"Todo list\"),\n          },\n          {\n            shortcut: (\n              <>\n                <Key>&gt;</Key> <Key>Space</Key>\n              </>\n            ),\n            label: t(\"Blockquote\"),\n          },\n          {\n            shortcut: <Key>---</Key>,\n            label: t(\"Horizontal divider\"),\n          },\n          {\n            shortcut: <Key>{\"```\"}</Key>,\n            label: t(\"Code block\"),\n          },\n          {\n            shortcut: <Key>{\":::\"}</Key>,\n            label: t(\"Info notice\"),\n          },\n          {\n            shortcut: \"_italic_\",\n            label: t(\"Italic\"),\n          },\n          {\n            shortcut: \"**bold**\",\n            label: t(\"Bold\"),\n          },\n          {\n            shortcut: \"~~strikethrough~~\",\n            label: t(\"Strikethrough\"),\n          },\n          {\n            shortcut: \"`code`\",\n            label: t(\"Inline code\"),\n          },\n          {\n            shortcut: \"==highlight==\",\n            label: t(\"Highlight\"),\n          },\n        ],\n      },\n    ],\n    [t]\n  );\n\n  const [searchTerm, setSearchTerm] = React.useState(\"\");\n\n  const handleChange = React.useCallback((event) => {\n    setSearchTerm(event.target.value);\n  }, []);\n\n  const handleKeyDown = React.useCallback((event) => {\n    if (event.currentTarget.value && event.key === \"Escape\") {\n      event.preventDefault();\n      event.stopPropagation();\n      setSearchTerm(\"\");\n    }\n  }, []);\n\n  return (\n    <Flex column>\n      <InputSearch\n        onChange={handleChange}\n        onKeyDown={handleKeyDown}\n        value={searchTerm}\n      />\n      {categories.map((category, x) => {\n        const filtered = searchTerm\n          ? category.items.filter((item) =>\n              item.label.toLowerCase().includes(searchTerm.toLowerCase())\n            )\n          : category.items;\n\n        if (!filtered.length) {\n          return null;\n        }\n\n        return (\n          <React.Fragment key={x}>\n            <Header>{category.title}</Header>\n            <List>\n              {filtered.map((item) => (\n                <React.Fragment key={item.label}>\n                  <Keys>\n                    <span>{item.shortcut}</span>\n                  </Keys>\n                  <Label>{item.label}</Label>\n                </React.Fragment>\n              ))}\n            </List>\n          </React.Fragment>\n        );\n      })}\n    </Flex>\n  );\n}\n\nconst Header = styled.h2`\n  font-size: 15px;\n  font-weight: 500;\n  margin-top: 2em;\n`;\n\nconst List = styled.dl`\n  font-size: 14px;\n  width: 100%;\n  overflow: hidden;\n  padding: 0;\n  margin: 0;\n`;\n\nconst Keys = styled.dt`\n  float: right;\n  width: 45%;\n  margin: 0 0 10px;\n  clear: left;\n  text-align: right;\n  font-size: 12px;\n  color: ${(props) => props.theme.textSecondary};\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n`;\n\nconst Label = styled.dd`\n  float: left;\n  width: 55%;\n  margin: 0 0 10px;\n  display: flex;\n  align-items: center;\n  color: ${(props) => props.theme.textSecondary};\n`;\n\nexport default KeyboardShortcuts;\n","// @flow\nimport { CheckmarkIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { MenuItem as BaseMenuItem } from \"reakit/Menu\";\nimport styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\n\ntype Props = {|\n  onClick?: (SyntheticEvent<>) => void | Promise<void>,\n  children?: React.Node,\n  selected?: boolean,\n  disabled?: boolean,\n  to?: string,\n  href?: string,\n  target?: \"_blank\",\n  as?: string | React.ComponentType<*>,\n  hide?: () => void,\n  level?: number,\n|};\n\nconst MenuItem = ({\n  onClick,\n  children,\n  selected,\n  disabled,\n  as,\n  hide,\n  ...rest\n}: Props) => {\n  const handleClick = React.useCallback(\n    (ev) => {\n      if (onClick) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        onClick(ev);\n      }\n\n      if (hide) {\n        hide();\n      }\n    },\n    [onClick, hide]\n  );\n\n  // Preventing default mousedown otherwise menu items do not work in Firefox,\n  // which triggers the hideOnClickOutside handler first via mousedown – hiding\n  // and un-rendering the menu contents.\n  const handleMouseDown = React.useCallback((ev) => {\n    ev.preventDefault();\n    ev.stopPropagation();\n  }, []);\n\n  return (\n    <BaseMenuItem\n      onClick={disabled ? undefined : onClick}\n      disabled={disabled}\n      hide={hide}\n      {...rest}\n    >\n      {(props) => (\n        <MenuAnchor\n          {...props}\n          $toggleable={selected !== undefined}\n          as={onClick ? \"button\" : as}\n          onClick={handleClick}\n          onMouseDown={handleMouseDown}\n        >\n          {selected !== undefined && (\n            <>\n              {selected ? <CheckmarkIcon color=\"currentColor\" /> : <Spacer />}\n              &nbsp;\n            </>\n          )}\n          {children}\n        </MenuAnchor>\n      )}\n    </BaseMenuItem>\n  );\n};\n\nconst Spacer = styled.svg`\n  width: 24px;\n  height: 24px;\n  flex-shrink: 0;\n`;\n\nexport const MenuAnchor = styled.a`\n  display: flex;\n  margin: 0;\n  border: 0;\n  padding: 12px;\n  padding-left: ${(props) => 12 + props.level * 10}px;\n  width: 100%;\n  min-height: 32px;\n  background: none;\n  color: ${(props) =>\n    props.disabled ? props.theme.textTertiary : props.theme.textSecondary};\n  justify-content: left;\n  align-items: center;\n  font-size: 16px;\n  cursor: default;\n  user-select: none;\n\n  svg:not(:last-child) {\n    margin-right: 4px;\n  }\n\n  svg {\n    flex-shrink: 0;\n    opacity: ${(props) => (props.disabled ? \".5\" : 1)};\n  }\n\n  ${(props) =>\n    props.disabled\n      ? \"pointer-events: none;\"\n      : `\n\n  &:hover,  \n  &:focus,\n  &.focus-visible {\n    color: ${props.theme.white};\n    background: ${props.theme.primary};\n    box-shadow: none;\n    cursor: pointer;\n\n    svg {\n      fill: ${props.theme.white};\n    }\n  }\n  `};\n\n  ${breakpoint(\"tablet\")`\n    padding: ${(props) => (props.$toggleable ? \"4px 12px\" : \"6px 12px\")};\n    font-size: 15px;\n  `};\n`;\n\nexport default MenuItem;\n","// @flow\nimport { inject, observer } from \"mobx-react\";\nimport * as React from \"react\";\nimport UiStore from \"stores/UiStore\";\n\ntype Props = {\n  ui: UiStore,\n};\n\n@observer\nclass LoadingIndicator extends React.Component<Props> {\n  componentDidMount() {\n    this.props.ui.enableProgressBar();\n  }\n\n  componentWillUnmount() {\n    this.props.ui.disableProgressBar();\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport default inject(\"ui\")(LoadingIndicator);\n","// @flow\nimport * as React from \"react\";\nimport styled, { keyframes } from \"styled-components\";\n\nconst LoadingIndicatorBar = () => {\n  return (\n    <Container>\n      <Loader />\n    </Container>\n  );\n};\n\nconst loadingFrame = keyframes`\n  from { margin-left: -100%; }\n  to { margin-left: 100%; }\n`;\n\nconst Container = styled.div`\n  position: fixed;\n  top: 0;\n  z-index: ${(props) => props.theme.depths.loadingIndicatorBar};\n  width: 100%;\n  animation: ${loadingFrame} 4s ease-in-out infinite;\n  animation-delay: 250ms;\n  margin-left: -100%;\n`;\n\nconst Loader = styled.div`\n  width: 100%;\n  height: 2px;\n  background-color: ${(props) => props.theme.primary};\n`;\n\nexport default LoadingIndicatorBar;\n","// @flow\nimport LoadingIndicator from \"./LoadingIndicator\";\nimport LoadingIndicatorBar from \"./LoadingIndicatorBar\";\nexport default LoadingIndicator;\nexport { LoadingIndicatorBar };\n","// @flow\nimport * as React from \"react\";\n\nconst useUnmount = (callback: Function) => {\n  const ref = React.useRef(callback);\n\n  ref.current = callback;\n\n  React.useEffect(() => {\n    return () => {\n      ref.current();\n    };\n  }, []);\n};\n\nexport default useUnmount;\n","// @flow\nimport { observer } from \"mobx-react\";\nimport { CloseIcon, BackIcon } from \"outline-icons\";\nimport { transparentize } from \"polished\";\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Dialog, DialogBackdrop, useDialogState } from \"reakit/Dialog\";\nimport styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\nimport Flex from \"components/Flex\";\nimport NudeButton from \"components/NudeButton\";\nimport Scrollable from \"components/Scrollable\";\nimport usePrevious from \"hooks/usePrevious\";\nimport useUnmount from \"hooks/useUnmount\";\nimport { fadeAndScaleIn } from \"styles/animations\";\n\nlet openModals = 0;\n\ntype Props = {|\n  children?: React.Node,\n  isOpen: boolean,\n  title?: string,\n  onRequestClose: () => void,\n|};\n\nconst Modal = ({\n  children,\n  isOpen,\n  title = \"Untitled\",\n  onRequestClose,\n  ...rest\n}: Props) => {\n  const dialog = useDialogState({ animated: 250 });\n  const [depth, setDepth] = React.useState(0);\n  const wasOpen = usePrevious(isOpen);\n  const { t } = useTranslation();\n\n  React.useEffect(() => {\n    if (!wasOpen && isOpen) {\n      setDepth(openModals++);\n      dialog.show();\n    }\n    if (wasOpen && !isOpen) {\n      setDepth(openModals--);\n      dialog.hide();\n    }\n  }, [dialog, wasOpen, isOpen]);\n\n  useUnmount(() => {\n    if (isOpen) {\n      openModals--;\n    }\n  });\n\n  if (!isOpen) return null;\n\n  return (\n    <DialogBackdrop {...dialog}>\n      {(props) => (\n        <Backdrop {...props}>\n          <Dialog\n            {...dialog}\n            aria-label={title}\n            preventBodyScrollhideOnEsc\n            hide={onRequestClose}\n          >\n            {(props) => (\n              <Scene\n                $nested={!!depth}\n                style={{ marginLeft: `${depth * 12}px` }}\n                {...props}\n              >\n                <Content>\n                  <Centered onClick={(ev) => ev.stopPropagation()} column>\n                    {title && <h1>{title}</h1>}\n                    {children}\n                  </Centered>\n                </Content>\n                <Back onClick={onRequestClose}>\n                  <BackIcon size={32} color=\"currentColor\" />\n                  <Text>{t(\"Back\")}</Text>\n                </Back>\n                <Close onClick={onRequestClose}>\n                  <CloseIcon size={32} color=\"currentColor\" />\n                </Close>\n              </Scene>\n            )}\n          </Dialog>\n        </Backdrop>\n      )}\n    </DialogBackdrop>\n  );\n};\n\nconst Backdrop = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: ${(props) =>\n    transparentize(0.25, props.theme.background)} !important;\n  z-index: ${(props) => props.theme.depths.modalOverlay};\n  transition: opacity 50ms ease-in-out;\n  opacity: 0;\n\n  &[data-enter] {\n    opacity: 1;\n  }\n`;\n\nconst Scene = styled.div`\n  animation: ${fadeAndScaleIn} 250ms ease;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: ${(props) => props.theme.depths.modal};\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  background: ${(props) => props.theme.background};\n  transition: ${(props) => props.theme.backgroundTransition};\n  outline: none;\n\n  ${breakpoint(\"tablet\")`\n  ${(props) =>\n    props.$nested &&\n    `\n      box-shadow: 0 -2px 10px ${props.theme.shadow};\n      border-radius: 8px 0 0 8px;\n      overflow: hidden;\n  `}\n`}\n`;\n\nconst Content = styled(Scrollable)`\n  width: 100%;\n  padding: 8vh 2rem 2rem;\n\n  ${breakpoint(\"tablet\")`\n    padding-top: 13vh;\n  `};\n`;\n\nconst Centered = styled(Flex)`\n  width: 640px;\n  max-width: 100%;\n  position: relative;\n  margin: 0 auto;\n`;\n\nconst Text = styled.span`\n  font-size: 16px;\n  font-weight: 500;\n  padding-right: 12px;\n  user-select: none;\n`;\n\nconst Close = styled(NudeButton)`\n  position: absolute;\n  display: block;\n  top: 0;\n  right: 0;\n  margin: 12px;\n  opacity: 0.75;\n  color: ${(props) => props.theme.text};\n  width: auto;\n  height: auto;\n\n  &:hover {\n    opacity: 1;\n  }\n\n  ${breakpoint(\"tablet\")`\n    display: none;\n  `};\n`;\n\nconst Back = styled(NudeButton)`\n  position: absolute;\n  display: none;\n  align-items: center;\n  top: 2rem;\n  left: 2rem;\n  opacity: 0.75;\n  color: ${(props) => props.theme.text};\n  width: auto;\n  height: auto;\n\n  &:hover {\n    opacity: 1;\n  }\n\n  ${breakpoint(\"tablet\")`\n    display: flex;\n  `};\n`;\n\nexport default observer(Modal);\n","// @flow\nimport { times } from \"lodash\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport Fade from \"components/Fade\";\nimport Flex from \"components/Flex\";\nimport PlaceholderText from \"components/PlaceholderText\";\n\ntype Props = {\n  count?: number,\n};\n\nconst ListPlaceHolder = ({ count }: Props) => {\n  return (\n    <Fade>\n      {times(count || 2, (index) => (\n        <Item key={index} column auto>\n          <PlaceholderText header delay={0.2 * index} />\n          <PlaceholderText delay={0.2 * index} />\n        </Item>\n      ))}\n    </Fade>\n  );\n};\n\nconst Item = styled(Flex)`\n  padding: 10px 0;\n`;\n\nexport default ListPlaceHolder;\n","// @flow\nimport * as React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useMenuState } from \"reakit/Menu\";\nimport ContextMenu from \"components/ContextMenu\";\nimport OverflowMenuButton from \"components/ContextMenu/OverflowMenuButton\";\nimport Template from \"components/ContextMenu/Template\";\n\ntype MenuItem = {|\n  icon?: React.Node,\n  title: React.Node,\n  to?: string,\n|};\n\ntype Props = {\n  items: MenuItem[],\n};\n\nexport default function BreadcrumbMenu({ items }: Props) {\n  const { t } = useTranslation();\n  const menu = useMenuState({\n    modal: true,\n    placement: \"bottom\",\n  });\n\n  return (\n    <>\n      <OverflowMenuButton aria-label={t(\"Show path to document\")} {...menu} />\n      <ContextMenu {...menu} aria-label={t(\"Path to document\")}>\n        <Template {...menu} items={items} />\n      </ContextMenu>\n    </>\n  );\n}\n","// @flow\nimport { GoToIcon } from \"outline-icons\";\nimport * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport Flex from \"components/Flex\";\nimport BreadcrumbMenu from \"menus/BreadcrumbMenu\";\n\ntype MenuItem = {|\n  icon?: React.Node,\n  title: React.Node,\n  to?: string,\n|};\n\ntype Props = {|\n  items: MenuItem[],\n  max?: number,\n  children?: React.Node,\n  highlightFirstItem?: boolean,\n|};\n\nfunction Breadcrumb({ items, highlightFirstItem, children, max = 2 }: Props) {\n  const totalItems = items.length;\n  let topLevelItems: MenuItem[] = [...items];\n  let overflowItems;\n\n  // chop middle breadcrumbs and present a \"...\" menu instead\n  if (totalItems > max) {\n    const halfMax = Math.floor(max / 2);\n    overflowItems = topLevelItems.splice(halfMax, totalItems - max);\n    topLevelItems.splice(halfMax, 0, {\n      title: <BreadcrumbMenu items={overflowItems} />,\n    });\n  }\n\n  return (\n    <Flex justify=\"flex-start\" align=\"center\">\n      {topLevelItems.map((item, index) => (\n        <React.Fragment key={item.to || index}>\n          {item.icon}\n          {item.to ? (\n            <Item\n              to={item.to}\n              $withIcon={!!item.icon}\n              $highlight={highlightFirstItem && index === 0}\n            >\n              {item.title}\n            </Item>\n          ) : (\n            item.title\n          )}\n          {index !== topLevelItems.length - 1 || !!children ? <Slash /> : null}\n        </React.Fragment>\n      ))}\n      {children}\n    </Flex>\n  );\n}\n\nconst Slash = styled(GoToIcon)`\n  flex-shrink: 0;\n  fill: ${(props) => props.theme.divider};\n`;\n\nconst Item = styled(Link)`\n  display: flex;\n  flex-shrink: 1;\n  min-width: 0;\n  color: ${(props) => props.theme.text};\n  font-size: 15px;\n  height: 24px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  font-weight: ${(props) => (props.$highlight ? \"500\" : \"inherit\")};\n  margin-left: ${(props) => (props.$withIcon ? \"4px\" : \"0\")};\n\n  svg {\n    flex-shrink: 0;\n  }\n\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n\nexport default Breadcrumb;\n","// @flow\nimport invariant from \"invariant\";\nimport { client } from \"./ApiClient\";\n\ntype Options = {\n  name?: string,\n  documentId?: string,\n  public?: boolean,\n};\n\nexport const uploadFile = async (\n  file: File | Blob,\n  options?: Options = { name: \"\" }\n) => {\n  const name = file instanceof File ? file.name : options.name;\n  const response = await client.post(\"/attachments.create\", {\n    public: options.public,\n    documentId: options.documentId,\n    contentType: file.type,\n    size: file.size,\n    name,\n  });\n\n  invariant(response, \"Response should be available\");\n\n  const data = response.data;\n  const attachment = data.attachment;\n  const formData = new FormData();\n\n  for (const key in data.form) {\n    formData.append(key, data.form[key]);\n  }\n\n  // $FlowFixMe\n  if (file.blob) {\n    // $FlowFixMe\n    formData.append(\"file\", file.file);\n  } else {\n    formData.append(\"file\", file);\n  }\n\n  const uploadResponse = await fetch(data.uploadUrl, {\n    method: \"post\",\n    body: formData,\n  });\n\n  invariant(uploadResponse.ok, \"Upload failed, try again?\");\n\n  return attachment;\n};\n\nexport const dataUrlToBlob = (dataURL: string) => {\n  var blobBin = atob(dataURL.split(\",\")[1]);\n  var array = [];\n  for (var i = 0; i < blobBin.length; i++) {\n    array.push(blobBin.charCodeAt(i));\n  }\n  const file = new Blob([new Uint8Array(array)], { type: \"image/png\" });\n  return file;\n};\n","// @flow\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\ntype Props = {|\n  children: React.Node,\n  sticky?: boolean,\n|};\n\nconst H3 = styled.h3`\n  border-bottom: 1px solid ${(props) => props.theme.divider};\n  margin: 12px 0;\n  line-height: 1;\n`;\n\nconst Underline = styled.div`\n  margin-top: -1px;\n  display: inline-block;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 1.5;\n  color: ${(props) => props.theme.textSecondary};\n  border-bottom: 3px solid ${(props) => props.theme.textSecondary};\n  padding-top: 6px;\n  padding-bottom: 4px;\n`;\n\n// When sticky we need extra background coverage around the sides otherwise\n// items that scroll past can \"stick out\" the sides of the heading\nconst Background = styled.div`\n  position: ${(props) => (props.sticky ? \"sticky\" : \"relative\")};\n  ${(props) => (props.sticky ? \"top: 54px;\" : \"\")}\n  margin: 0 -8px;\n  padding: 0 8px;\n  background: ${(props) => props.theme.background};\n  transition: ${(props) => props.theme.backgroundTransition};\n  z-index: 1;\n`;\n\nconst Subheading = ({ children, sticky, ...rest }: Props) => {\n  return (\n    <Background sticky={sticky}>\n      <H3 {...rest}>\n        <Underline>{children}</Underline>\n      </H3>\n    </Background>\n  );\n};\n\nexport default Subheading;\n","// @flow\nimport * as React from \"react\";\nimport { MenuSeparator } from \"reakit/Menu\";\nimport styled from \"styled-components\";\n\nexport default function Separator(rest: {}) {\n  return (\n    <MenuSeparator {...rest}>\n      {(props) => <HorizontalRule {...props} />}\n    </MenuSeparator>\n  );\n}\n\nconst HorizontalRule = styled.hr`\n  margin: 0.5em 12px;\n`;\n"],"sourceRoot":""}